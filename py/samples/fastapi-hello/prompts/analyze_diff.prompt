---
model: googleai/gemini-2.0-flash
output:
  format: json
  schema:
    type: object
    properties:
      issues:
        type: array
        items:
          type: object
          properties:
            line:
              type: integer
              description: Line number where the issue occurs
            title:
              type: string
              description: Brief title describing the issue
            severity:
              type: string
              enum: [critical, warning, info]
            category:
              type: string
              enum: [security, bug, style]
            explanation:
              type: string
              description: Why this is a problem
            suggestion:
              type: string
              description: How to fix it
          required: [line, title, severity, category, explanation, suggestion]
    required: [issues]
---
Review this code diff for any issues (security, bugs, or style).

```diff
{{diff}}
```

{{#if context}}
Additional context: {{context}}
{{/if}}

Focus on the CHANGED lines (+ lines in the diff). Report any:
- Security vulnerabilities introduced
- Bugs or logic errors
- Style violations

IMPORTANT:
- Line numbers should reference the NEW file (after the change)
- Only report issues in the changed code, not pre-existing issues
- If the changes look good, return an empty issues list.
