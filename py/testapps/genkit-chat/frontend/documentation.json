{
    "pipes": [
        {
            "name": "SafeMarkdownPipe",
            "id": "pipe-SafeMarkdownPipe-dd9a135824a49fd6ded0ccebe8656b6f3b1f01ca97095cd1b0bf1fddca9b317c9925ab20f8acda64b407f484f061f58b89852c840a9d7429475b8b198575a9f3",
            "file": "src/app/shared/pipes/safe-markdown.pipe.ts",
            "type": "pipe",
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Safe Markdown rendering pipe with Mermaid diagrams and Math support.\nUses DOMPurify for XSS protection.</p>\n<p>Features:</p>\n<ul>\n<li>GitHub Flavored Markdown</li>\n<li>Mermaid diagrams (```mermaid blocks)</li>\n<li>Math equations ($inline$ and $$display$$)</li>\n<li>Syntax highlighting for code blocks</li>\n</ul>\n<p>Usage:\n  [innerHTML]=&quot;content | safeMarkdown&quot;</p>\n",
            "rawdescription": "\n\nSafe Markdown rendering pipe with Mermaid diagrams and Math support.\nUses DOMPurify for XSS protection.\n\nFeatures:\n- GitHub Flavored Markdown\n- Mermaid diagrams (```mermaid blocks)\n- Math equations ($inline$ and $$display$$)\n- Syntax highlighting for code blocks\n\nUsage:\n  [innerHTML]=\"content | safeMarkdown\"\n",
            "properties": [
                {
                    "name": "cache",
                    "defaultValue": "new Map<string, SafeHtml>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 29,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "purifyConfig",
                    "defaultValue": "{\n        ALLOWED_TAGS: [\n            'p', 'br', 'strong', 'em', 'b', 'i', 'u', 's', 'strike',\n            'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'ul', 'ol', 'li',\n            'blockquote', 'pre', 'code',\n            'a', 'img',\n            'table', 'thead', 'tbody', 'tr', 'th', 'td',\n            'hr', 'div', 'span', 'sub', 'sup',\n            // SVG elements for Mermaid\n            'svg', 'g', 'path', 'rect', 'circle', 'ellipse', 'line',\n            'polyline', 'polygon', 'text', 'tspan', 'defs', 'marker',\n            'foreignObject', 'style'\n        ],\n        ALLOWED_ATTR: [\n            'href', 'title', 'alt', 'src', 'class', 'id',\n            'target', 'rel', 'width', 'height',\n            // SVG attributes\n            'd', 'fill', 'stroke', 'stroke-width', 'transform',\n            'x', 'y', 'rx', 'ry', 'cx', 'cy', 'r',\n            'x1', 'y1', 'x2', 'y2', 'points',\n            'viewBox', 'preserveAspectRatio', 'xmlns',\n            'font-size', 'font-family', 'font-weight', 'text-anchor',\n            'dominant-baseline', 'alignment-baseline',\n            'marker-end', 'marker-start', 'markerWidth', 'markerHeight',\n            'refX', 'refY', 'orient', 'style'\n        ],\n        ALLOWED_URI_REGEXP: /^(?:(?:https?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.\\-:]|$))/i,\n        ADD_ATTR: ['target'],\n        ALLOW_DATA_ATTR: false,\n        RETURN_DOM: false as const,\n        RETURN_DOM_FRAGMENT: false as const,\n    }",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Configure DOMPurify with settings that allow Mermaid SVGs.</p>\n",
                    "line": 34,
                    "rawdescription": "\n\nConfigure DOMPurify with settings that allow Mermaid SVGs.\n",
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "renderingService",
                    "defaultValue": "inject(RenderingService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 26,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "sanitizer",
                    "defaultValue": "inject(DomSanitizer)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 25,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "escapeContent",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "SafeHtml",
                    "typeParameters": [],
                    "line": 177,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nEscape content for safe display on error.\n",
                    "description": "<p>Escape content for safe display on error.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "processMathSync",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 153,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nProcess math synchronously with basic substitutions.\n",
                    "description": "<p>Process math synchronously with basic substitutions.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderAsync",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 119,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nAsync render for Mermaid diagrams.\n",
                    "description": "<p>Async render for Mermaid diagrams.</p>\n",
                    "modifierKind": [
                        123,
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderSync",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "SafeHtml",
                    "typeParameters": [],
                    "line": 89,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSynchronous render for immediate display.\n",
                    "description": "<p>Synchronous render for immediate display.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "transform",
                    "args": [
                        {
                            "name": "content",
                            "type": "string | null | undefined",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "SafeHtml",
                    "typeParameters": [],
                    "line": 68,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string | null | undefined",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "standalone": false,
            "pure": false,
            "ngname": "safeMarkdown",
            "sourceCode": "import { Pipe, PipeTransform, inject } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { marked } from 'marked';\nimport DOMPurify from 'dompurify';\nimport { RenderingService } from '../../core/services/rendering.service';\n\n/**\n * Safe Markdown rendering pipe with Mermaid diagrams and Math support.\n * Uses DOMPurify for XSS protection.\n * \n * Features:\n * - GitHub Flavored Markdown\n * - Mermaid diagrams (```mermaid blocks)\n * - Math equations ($inline$ and $$display$$)\n * - Syntax highlighting for code blocks\n * \n * Usage:\n *   [innerHTML]=\"content | safeMarkdown\"\n */\n@Pipe({\n    name: 'safeMarkdown',\n    pure: false  // Need impure for async Mermaid rendering\n})\nexport class SafeMarkdownPipe implements PipeTransform {\n    private readonly sanitizer = inject(DomSanitizer);\n    private readonly renderingService = inject(RenderingService);\n\n    // Cache for rendered content\n    private cache = new Map<string, SafeHtml>();\n\n    /**\n     * Configure DOMPurify with settings that allow Mermaid SVGs.\n     */\n    private readonly purifyConfig = {\n        ALLOWED_TAGS: [\n            'p', 'br', 'strong', 'em', 'b', 'i', 'u', 's', 'strike',\n            'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n            'ul', 'ol', 'li',\n            'blockquote', 'pre', 'code',\n            'a', 'img',\n            'table', 'thead', 'tbody', 'tr', 'th', 'td',\n            'hr', 'div', 'span', 'sub', 'sup',\n            // SVG elements for Mermaid\n            'svg', 'g', 'path', 'rect', 'circle', 'ellipse', 'line',\n            'polyline', 'polygon', 'text', 'tspan', 'defs', 'marker',\n            'foreignObject', 'style'\n        ],\n        ALLOWED_ATTR: [\n            'href', 'title', 'alt', 'src', 'class', 'id',\n            'target', 'rel', 'width', 'height',\n            // SVG attributes\n            'd', 'fill', 'stroke', 'stroke-width', 'transform',\n            'x', 'y', 'rx', 'ry', 'cx', 'cy', 'r',\n            'x1', 'y1', 'x2', 'y2', 'points',\n            'viewBox', 'preserveAspectRatio', 'xmlns',\n            'font-size', 'font-family', 'font-weight', 'text-anchor',\n            'dominant-baseline', 'alignment-baseline',\n            'marker-end', 'marker-start', 'markerWidth', 'markerHeight',\n            'refX', 'refY', 'orient', 'style'\n        ],\n        ALLOWED_URI_REGEXP: /^(?:(?:https?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.\\-:]|$))/i,\n        ADD_ATTR: ['target'],\n        ALLOW_DATA_ATTR: false,\n        RETURN_DOM: false as const,\n        RETURN_DOM_FRAGMENT: false as const,\n    };\n\n    transform(content: string | null | undefined): SafeHtml {\n        if (!content) {\n            return '';\n        }\n\n        // Check cache first\n        if (this.cache.has(content)) {\n            return this.cache.get(content)!;\n        }\n\n        // Start async rendering\n        this.renderAsync(content);\n\n        // Return placeholder while rendering\n        const placeholder = this.renderSync(content);\n        return placeholder;\n    }\n\n    /**\n     * Synchronous render for immediate display.\n     */\n    private renderSync(content: string): SafeHtml {\n        try {\n            // Process math before markdown\n            let processed = this.processMathSync(content);\n\n            // Parse markdown to HTML\n            const rawHtml = marked.parse(processed, {\n                async: false,\n                breaks: true,\n                gfm: true,\n            }) as string;\n\n            // Sanitize HTML with DOMPurify\n            const cleanHtml = DOMPurify.sanitize(rawHtml, this.purifyConfig) as string;\n\n            // Add target=\"_blank\" to links\n            const safeHtml = cleanHtml.replace(\n                /<a\\s+href=/g,\n                '<a target=\"_blank\" rel=\"noopener noreferrer\" href='\n            );\n\n            return this.sanitizer.bypassSecurityTrustHtml(safeHtml);\n        } catch {\n            return this.escapeContent(content);\n        }\n    }\n\n    /**\n     * Async render for Mermaid diagrams.\n     */\n    private async renderAsync(content: string): Promise<void> {\n        try {\n            // Process math\n            let processed = await this.renderingService.renderMath(content);\n\n            // Parse markdown\n            const rawHtml = marked.parse(processed, {\n                async: false,\n                breaks: true,\n                gfm: true,\n            }) as string;\n\n            // Render Mermaid diagrams\n            const withMermaid = await this.renderingService.processMermaidBlocks(rawHtml);\n\n            // Sanitize\n            const cleanHtml = DOMPurify.sanitize(withMermaid, this.purifyConfig) as string;\n\n            // Add target=\"_blank\" to links\n            const safeHtml = cleanHtml.replace(\n                /<a\\s+href=/g,\n                '<a target=\"_blank\" rel=\"noopener noreferrer\" href='\n            );\n\n            // Cache the result\n            this.cache.set(content, this.sanitizer.bypassSecurityTrustHtml(safeHtml));\n        } catch (error) {\n            console.error('Async markdown render failed:', error);\n        }\n    }\n\n    /**\n     * Process math synchronously with basic substitutions.\n     */\n    private processMathSync(content: string): string {\n        // Basic Greek letter substitutions for immediate display\n        const substitutions: Record<string, string> = {\n            '\\\\alpha': 'α', '\\\\beta': 'β', '\\\\gamma': 'γ', '\\\\delta': 'δ',\n            '\\\\epsilon': 'ε', '\\\\pi': 'π', '\\\\sigma': 'σ', '\\\\omega': 'ω',\n            '\\\\theta': 'θ', '\\\\lambda': 'λ', '\\\\mu': 'μ', '\\\\phi': 'φ',\n            '\\\\infty': '∞', '\\\\sum': '∑', '\\\\int': '∫', '\\\\partial': '∂',\n            '\\\\pm': '±', '\\\\times': '×', '\\\\div': '÷', '\\\\cdot': '·',\n            '\\\\leq': '≤', '\\\\geq': '≥', '\\\\neq': '≠', '\\\\approx': '≈',\n            '\\\\rightarrow': '→', '\\\\leftarrow': '←', '\\\\Rightarrow': '⇒',\n            '\\\\in': '∈', '\\\\subset': '⊂', '\\\\cup': '∪', '\\\\cap': '∩',\n            '\\\\forall': '∀', '\\\\exists': '∃', '\\\\nabla': '∇', '\\\\sqrt': '√',\n        };\n\n        let result = content;\n        for (const [key, value] of Object.entries(substitutions)) {\n            result = result.split(key).join(value);\n        }\n        return result;\n    }\n\n    /**\n     * Escape content for safe display on error.\n     */\n    private escapeContent(content: string): SafeHtml {\n        const escaped = content\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;');\n        return this.sanitizer.bypassSecurityTrustHtml(`<pre>${escaped}</pre>`);\n    }\n}\n"
        }
    ],
    "interfaces": [
        {
            "name": "ApiKeyInfo",
            "id": "interface-ApiKeyInfo-c83aafef1d11011ee387a2d7fa343214adf03d25af65532955cd993480cc329e5e966e0e38502f0751d9c7afa1a085fcb6e90ee93dd47745f1027432c3896908",
            "file": "src/app/features/settings/settings.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, inject, signal, OnInit } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatOptionModule } from '@angular/material/core';\nimport { ThemeService } from '../../core/services/theme.service';\n\ninterface ApiKeyInfo {\n  configured: boolean;\n  preview: string | null;\n}\n\ninterface ConfigResponse {\n  api_keys: {\n    GEMINI_API_KEY: ApiKeyInfo;\n    ANTHROPIC_API_KEY: ApiKeyInfo;\n    OPENAI_API_KEY: ApiKeyInfo;\n    OLLAMA_HOST: ApiKeyInfo;\n  };\n  features: {\n    rag_enabled: boolean;\n    streaming_enabled: boolean;\n    tools_enabled: boolean;\n  };\n}\n\n@Component({\n  selector: 'app-settings',\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatCardModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSlideToggleModule,\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    MatChipsModule,\n    MatSelectModule,\n    MatFormFieldModule,\n    MatOptionModule,\n  ],\n  template: `\n    <div class=\"settings-container\">\n      <h1 class=\"page-title\">Settings</h1>\n\n      <!-- API Keys Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>key</mat-icon>\n          API Configuration\n        </h2>\n        <p class=\"section-desc\">API keys are read from environment variables on the backend server.</p>\n\n        @if (loading()) {\n          <div class=\"loading-state\">\n            <mat-spinner diameter=\"24\"></mat-spinner>\n            <span>Loading configuration...</span>\n          </div>\n        } @else if (config()) {\n          <div class=\"api-keys-list\">\n            <!-- Google AI -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon google\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                    <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                    <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                    <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                  </svg>\n                  <span class=\"key-name\">Google AI</span>\n                </div>\n                <code class=\"env-var\">GEMINI_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.GEMINI_API_KEY.configured\">\n                @if (config()!.api_keys.GEMINI_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.GEMINI_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon warning\">warning</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- Anthropic -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon anthropic\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M17.604 3.332L12.004 20c0-.001-5.605-16.668-5.605-16.668h3.298l2.304 6.855 2.305-6.855h3.298z\"/>\n                  </svg>\n                  <span class=\"key-name\">Anthropic</span>\n                </div>\n                <code class=\"env-var\">ANTHROPIC_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.ANTHROPIC_API_KEY.configured\">\n                @if (config()!.api_keys.ANTHROPIC_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.ANTHROPIC_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- OpenAI -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon openai\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.516 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.896zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z\"/>\n                  </svg>\n                  <span class=\"key-name\">OpenAI</span>\n                </div>\n                <code class=\"env-var\">OPENAI_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.OPENAI_API_KEY.configured\">\n                @if (config()!.api_keys.OPENAI_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.OPENAI_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- Ollama -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon ollama\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"/>\n                    <circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"currentColor\"/>\n                  </svg>\n                  <span class=\"key-name\">Ollama</span>\n                </div>\n                <code class=\"env-var\">OLLAMA_HOST</code>\n              </div>\n              <div class=\"key-status configured\">\n                <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                <span class=\"status-text\">{{ config()!.api_keys.OLLAMA_HOST.preview }}</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"help-text\">\n            <mat-icon>info</mat-icon>\n            <span>Set environment variables before starting the server. Example: <code>export GEMINI_API_KEY=your-key</code></span>\n          </div>\n        }\n      </section>\n\n      <!-- Appearance Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>palette</mat-icon>\n          Appearance\n        </h2>\n        \n        <div class=\"setting-row\">\n          <div class=\"setting-info\">\n            <span class=\"setting-label\">Theme</span>\n            <span class=\"setting-desc\">Choose your preferred color scheme</span>\n          </div>\n          <mat-form-field appearance=\"outline\" class=\"theme-select\">\n            <mat-select [value]=\"themeService.themeMode()\" (selectionChange)=\"themeService.setTheme($event.value)\">\n              <mat-option value=\"system\">\n                <mat-icon>brightness_auto</mat-icon>\n                System\n              </mat-option>\n              <mat-option value=\"light\">\n                <mat-icon>light_mode</mat-icon>\n                Light\n              </mat-option>\n              <mat-option value=\"dark\">\n                <mat-icon>dark_mode</mat-icon>\n                Dark\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n        </div>\n      </section>\n\n      <!-- Generation Defaults Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>tune</mat-icon>\n          Generation Defaults\n        </h2>\n        \n        <div class=\"slider-row\">\n          <div class=\"slider-info\">\n            <span class=\"setting-label\">Temperature</span>\n            <span class=\"slider-value\">{{ temperature }}</span>\n          </div>\n          <mat-slider min=\"0\" max=\"2\" step=\"0.1\" discrete class=\"full-slider\">\n            <input matSliderThumb [(ngModel)]=\"temperature\">\n          </mat-slider>\n          <span class=\"slider-hint\">Lower = more focused, Higher = more creative</span>\n        </div>\n\n        <div class=\"slider-row\">\n          <div class=\"slider-info\">\n            <span class=\"setting-label\">Max output tokens</span>\n            <span class=\"slider-value\">{{ maxTokens }}</span>\n          </div>\n          <mat-slider min=\"256\" max=\"8192\" step=\"256\" discrete class=\"full-slider\">\n            <input matSliderThumb [(ngModel)]=\"maxTokens\">\n          </mat-slider>\n          <span class=\"slider-hint\">Maximum length of generated response</span>\n        </div>\n      </section>\n\n      <!-- Features Section -->\n      @if (config()?.features) {\n        <section class=\"settings-section\">\n          <h2 class=\"section-title\">\n            <mat-icon>extension</mat-icon>\n            Features\n          </h2>\n          \n          <div class=\"features-grid\">\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.rag_enabled\">\n              <mat-icon>{{ config()!.features.rag_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>RAG / Document Search</span>\n            </div>\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.streaming_enabled\">\n              <mat-icon>{{ config()!.features.streaming_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>Streaming Responses</span>\n            </div>\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.tools_enabled\">\n              <mat-icon>{{ config()!.features.tools_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>Tool Calling</span>\n            </div>\n          </div>\n        </section>\n      }\n\n      <!-- About Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>info</mat-icon>\n          About\n        </h2>\n        \n        <div class=\"about-content\">\n          <p><strong>Genkit Chat</strong> v0.1.0</p>\n          <p class=\"about-desc\">A multi-model AI chat application demonstrating Genkit Python capabilities.</p>\n          \n          <div class=\"tech-stack\">\n            <a href=\"https://firebase.google.com/docs/genkit\" target=\"_blank\" class=\"tech-link\">\n              <mat-icon>auto_awesome</mat-icon>\n              Genkit Documentation\n            </a>\n            <a href=\"https://github.com/firebase/genkit\" target=\"_blank\" class=\"tech-link\">\n              <mat-icon>code</mat-icon>\n              GitHub Repository\n            </a>\n          </div>\n        </div>\n      </section>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .settings-container {\n      max-width: 720px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 32px;\n      color: var(--on-surface);\n    }\n\n    .settings-section {\n      margin-bottom: 24px;\n      padding-bottom: 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      &:last-child {\n        border-bottom: none;\n        margin-bottom: 0;\n        padding-bottom: 0;\n      }\n    }\n\n    .section-title {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      font-size: 16px;\n      font-weight: 500;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n      \n      mat-icon {\n        color: var(--gemini-blue);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    .section-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0 0 20px;\n    }\n\n    .loading-state {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n      color: var(--on-surface-variant);\n    }\n\n    /* API Keys List */\n    .api-keys-list {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n    }\n\n    .api-key-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 16px;\n      background: var(--surface-dim);\n      border-radius: var(--radius-md);\n      border: 1px solid var(--surface-variant);\n    }\n\n    .key-info {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n\n    .key-header {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n\n    .provider-icon {\n      width: 24px;\n      height: 24px;\n      \n      &.google { color: #4285f4; }\n      &.anthropic { color: #d97706; }\n      &.openai { color: #10a37f; }\n      &.ollama { color: var(--on-surface-variant); }\n    }\n\n    .key-name {\n      font-size: 15px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .env-var {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      background: var(--surface-container);\n      padding: 2px 6px;\n      border-radius: 4px;\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .key-status {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .status-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      \n      &.success {\n        color: #34a853;\n      }\n      \n      &.warning {\n        color: #ea8600;\n      }\n    }\n\n    .status-text {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n      font-family: 'JetBrains Mono', monospace;\n      \n      &.not-set {\n        font-family: inherit;\n        font-style: italic;\n      }\n    }\n\n    .help-text {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      margin-top: 16px;\n      padding: 12px;\n      background: var(--user-bubble-bg);\n      border-radius: var(--radius-sm);\n      font-size: 13px;\n      color: var(--gemini-blue-dark);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n      }\n      \n      code {\n        background: rgba(66, 133, 244, 0.1);\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 12px;\n      }\n    }\n\n    /* Setting Row */\n    .setting-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 0;\n    }\n\n    .setting-info {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n    }\n\n    .setting-label {\n      font-size: 15px;\n      color: var(--on-surface);\n    }\n\n    .setting-desc {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n    }\n\n    /* Slider Row */\n    .slider-row {\n      margin-bottom: 24px;\n    }\n\n    .slider-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .slider-value {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .full-slider {\n      width: 100%;\n      max-width: 400px;\n    }\n\n    .slider-hint {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 4px;\n    }\n\n    .theme-select {\n      width: 180px;\n      \n      .mat-mdc-form-field-subscript-wrapper {\n        display: none;\n      }\n    }\n\n    /* Features Grid */\n    .features-grid {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n    }\n\n    .feature-chip {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 8px 14px;\n      background: var(--surface-container);\n      border-radius: var(--radius-full);\n      font-size: 13px;\n      color: var(--on-surface-muted);\n      border: 1px solid var(--surface-variant);\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n      \n      &.enabled {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue-dark);\n        border-color: transparent;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    /* About Section */\n    .about-content {\n      p {\n        margin: 0 0 8px;\n        color: var(--on-surface);\n      }\n      \n      .about-desc {\n        color: var(--on-surface-variant);\n        font-size: 14px;\n      }\n    }\n\n    .tech-stack {\n      display: flex;\n      gap: 16px;\n      margin-top: 16px;\n    }\n\n    .tech-link {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      color: var(--gemini-blue);\n      text-decoration: none;\n      font-size: 14px;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  `],\n})\nexport class SettingsComponent implements OnInit {\n  private http = inject(HttpClient);\n  themeService = inject(ThemeService);\n\n  config = signal<ConfigResponse | null>(null);\n  loading = signal(true);\n  temperature = 0.7;\n  maxTokens = 2048;\n\n  ngOnInit(): void {\n    this.loadConfig();\n  }\n\n  private loadConfig(): void {\n    this.http.get<ConfigResponse>('http://localhost:8080/api/config')\n      .subscribe({\n        next: (data) => {\n          this.config.set(data);\n          this.loading.set(false);\n        },\n        error: (err) => {\n          console.error('Failed to load config:', err);\n          this.loading.set(false);\n        },\n      });\n  }\n}\n",
            "properties": [
                {
                    "name": "configured",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19
                },
                {
                    "name": "preview",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "AttachedFile",
            "id": "interface-AttachedFile-b07f1ce2875da326c0f2b907c9a2120690ca9950f8d13b2cff50fc814a1b5ee4a802ed71c7676b1c3b44ec62e86ade6049e8c72ededb898cdd9616920b254122",
            "file": "src/app/features/chat/components/chat-input/chat-input.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import {\n  Component, input, output, signal, computed, effect,\n  ElementRef, ViewChild, AfterViewInit, inject\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { trigger, transition, style, animate } from '@angular/animations';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\n\n/** Default configuration - can be overridden via inputs */\nconst DEFAULT_CONFIG = {\n  maxAttachments: 10,\n  maxFileSizeBytes: 1 * 1024 * 1024, // 1MB\n};\n\n/**\n * Get Material Icon name for a given MIME type.\n * Inlined for component portability.\n */\nfunction getMimeTypeIcon(mimeType: string): string {\n  if (mimeType.startsWith('image/')) return 'image';\n  if (mimeType.startsWith('video/')) return 'videocam';\n  if (mimeType.startsWith('audio/')) return 'audio_file';\n  if (mimeType === 'application/pdf') return 'picture_as_pdf';\n  if (mimeType.includes('spreadsheet') || mimeType.includes('excel')) return 'table_chart';\n  if (mimeType.includes('presentation') || mimeType.includes('powerpoint')) return 'slideshow';\n  if (mimeType.includes('document') || mimeType.includes('word')) return 'description';\n  if (mimeType.startsWith('text/')) return 'article';\n  if (mimeType.includes('zip') || mimeType.includes('compressed')) return 'folder_zip';\n  if (mimeType.includes('json')) return 'data_object';\n  return 'insert_drive_file';\n}\n\nexport interface AttachedFile {\n  name: string;\n  size: number;\n  type: string;\n  preview?: string;\n  data?: string;\n}\n\nexport interface SendEvent {\n  message: string;\n  attachments: AttachedFile[];\n}\n\n@Component({\n  selector: 'app-chat-input',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatTooltipModule,\n    MatDividerModule,\n    MatSnackBarModule,\n    TranslateModule,\n  ],\n  animations: [\n    trigger('slideButton', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateX(10px)' }),\n        animate('150ms ease-out', style({ opacity: 1, transform: 'translateX(0)' }))\n      ]),\n      transition(':leave', [\n        animate('100ms ease-in', style({ opacity: 0, transform: 'translateX(-10px)' }))\n      ])\n    ])\n  ],\n  template: `\n    <div class=\"input-box\" \n         [class.focused]=\"inputFocused()\" \n         [class.is-dragging]=\"isDragging()\"\n         (click)=\"focusInput($event)\"\n         (dragover)=\"onDragOver($event)\" \n         (dragleave)=\"onDragLeave($event)\"\n         (drop)=\"onDrop($event)\">\n      \n      <!-- Drop Zone Overlay -->\n      @if (isDragging()) {\n        <div class=\"drop-zone-overlay\">\n          <mat-icon class=\"drop-icon\">cloud_upload</mat-icon>\n          <span class=\"drop-caption\">Drop files to attach</span>\n        </div>\n      }\n      \n      <textarea class=\"chat-input\" \n                [class.content-flagged]=\"contentFlagged()\"\n                [(ngModel)]=\"message\" \n                [placeholder]=\"placeholder()\"\n                [attr.aria-label]=\"placeholder()\"\n                (keydown.enter)=\"onEnterKey($event)\"\n                (focus)=\"inputFocused.set(true)\"\n                (blur)=\"inputFocused.set(false)\"\n                (input)=\"onInputChange()\"\n                [matTooltip]=\"contentFlagged() ? 'Content flagged: ' + flaggedLabels().join(', ') : ''\"\n                rows=\"1\"\n                #chatTextarea></textarea>\n\n      @if (message) {\n        <button mat-icon-button class=\"clear-input-btn\" (click)=\"clearInput()\" [attr.aria-label]=\"'chat.clearInput' | translate\" [matTooltip]=\"'chat.clearInput' | translate\">\n          <mat-icon>close</mat-icon>\n        </button>\n      }\n      \n      <!-- Bottom Toolbar -->\n      <div class=\"input-toolbar\">\n        <div class=\"toolbar-left\">\n          <!-- Add/Attach Button -->\n          <button mat-icon-button \n                  class=\"toolbar-btn add-btn\"\n                  [attr.aria-label]=\"'chat.addFiles' | translate\"\n                  [matTooltip]=\"'chat.addFiles' | translate\"\n                  [matMenuTriggerFor]=\"attachMenu\">\n            <mat-icon>add</mat-icon>\n          </button>\n          \n          <mat-menu #attachMenu=\"matMenu\" class=\"attach-menu\">\n            <button mat-menu-item (click)=\"anyInput.click()\">\n              <mat-icon>upload_file</mat-icon>\n              <span>{{ 'chat.uploadFiles' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"imageInput.click()\">\n              <mat-icon>image</mat-icon>\n              <span>{{ 'attach.photos' | translate }}</span>\n            </button>\n            <mat-divider></mat-divider>\n            <button mat-menu-item (click)=\"audioInput.click()\">\n              <mat-icon>audio_file</mat-icon>\n              <span>{{ 'attach.audio' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"videoInput.click()\">\n              <mat-icon>videocam</mat-icon>\n              <span>{{ 'attach.video' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"pdfInput.click()\">\n              <mat-icon>picture_as_pdf</mat-icon>\n              <span>{{ 'attach.pdf' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"textInput.click()\">\n              <mat-icon>code</mat-icon>\n              <span>{{ 'attach.code' | translate }}</span>\n            </button>\n          </mat-menu>\n          \n          <!-- Hidden file inputs -->\n          <input #imageInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"image/*\">\n          <input #videoInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"video/*\">\n          <input #audioInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"audio/*\">\n          <input #pdfInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".pdf\">\n          <input #textInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".txt,.md,.json,.csv,.xml,.yaml,.yml,.py,.ts,.js,.go,.rs,.java\">\n          <input #anyInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple>\n          \n          <!-- Tools Button -->\n          <button mat-button class=\"toolbar-btn tools-btn\">\n            <mat-icon>handyman</mat-icon>\n            <span>{{ 'toolbar.tools' | translate }}</span>\n          </button>\n        </div>\n        \n        <div class=\"toolbar-right\">\n          <ng-content select=\"[modelSelector]\"></ng-content>\n          \n          <!-- Settings Dropdown -->\n          <button mat-icon-button \n                  class=\"toolbar-btn settings-btn\"\n                  [matMenuTriggerFor]=\"settingsMenu\"\n                  [attr.aria-label]=\"'toolbar.settings' | translate\"\n                  [matTooltip]=\"'toolbar.settings' | translate\">\n            <mat-icon>tune</mat-icon>\n          </button>\n          <mat-menu #settingsMenu=\"matMenu\" class=\"settings-menu\">\n            <!-- Streaming Toggle -->\n            <button mat-menu-item (click)=\"toggleStreaming.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ streamingEnabled() ? 'stream' : 'pause_circle' }}</mat-icon>\n              <span>{{ 'toolbar.stream' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"streamingEnabled()\">\n                {{ streamingEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <!-- Markdown Toggle -->\n            <button mat-menu-item (click)=\"toggleMarkdown.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ markdownEnabled() ? 'code' : 'code_off' }}</mat-icon>\n              <span>{{ 'toolbar.markdown' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"markdownEnabled()\">\n                {{ markdownEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <!-- Content Safety Toggle -->\n            <button mat-menu-item (click)=\"toggleSafety.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ safetyEnabled() ? 'shield' : 'shield_outlined' }}</mat-icon>\n              <span>{{ 'toolbar.safe' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"safetyEnabled()\">\n                {{ safetyEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <mat-divider></mat-divider>\n            \n            <!-- Clear Preferences -->\n            <button mat-menu-item (click)=\"clearPreferences.emit()\">\n              <mat-icon>delete_outline</mat-icon>\n              <span>{{ 'settings.clearPreferences' | translate }}</span>\n            </button>\n          </mat-menu>\n          \n          <!-- Send Button or Voice Input -->\n          <div class=\"action-btn-container\">\n            @if (showSendButton()) {\n              <button mat-icon-button \n                      class=\"toolbar-btn send-btn\"\n                      @slideButton\n                      [attr.aria-label]=\"'chat.sendMessage' | translate\"\n                      [matTooltip]=\"'chat.sendMessage' | translate\"\n                      (click)=\"sendMessage()\">\n                <mat-icon>send</mat-icon>\n              </button>\n            } @else if (voiceSupported()) {\n              <button mat-icon-button \n                      class=\"toolbar-btn mic-btn\"\n                      @slideButton\n                      [class.recording]=\"isRecording()\"\n                      [attr.aria-label]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      [matTooltip]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      (click)=\"toggleVoice.emit()\">\n                <mat-icon>{{ isRecording() ? 'mic_off' : 'mic' }}</mat-icon>\n              </button>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Attached Files List -->\n    @if (attachedFiles().length > 0) {\n      <div class=\"attached-files-container\" [class.is-dragging]=\"isDragging()\">\n        <div class=\"attachments-header\">\n          <span class=\"attachments-count\">{{ attachedFiles().length }} file{{ attachedFiles().length > 1 ? 's' : '' }} attached</span>\n          <div class=\"attachments-actions\">\n            <button mat-icon-button class=\"add-more-btn\" (click)=\"anyInput.click()\" [attr.aria-label]=\"'chat.addMoreFiles' | translate\" [matTooltip]=\"'chat.addMoreFiles' | translate\">\n              <mat-icon>add</mat-icon>\n            </button>\n            <button mat-icon-button class=\"clear-all-btn\" (click)=\"clearAllFiles()\" [attr.aria-label]=\"'actions.clearAll' | translate\" [matTooltip]=\"'actions.clearAll' | translate\">\n              <mat-icon>delete_sweep</mat-icon>\n            </button>\n          </div>\n        </div>\n        \n        <div class=\"attached-files-list\">\n          @for (file of attachedFiles(); track file.name) {\n            <div class=\"file-row\">\n              <div class=\"file-icon-wrapper\">\n                @if (file.type.startsWith('image/')) {\n                  <img [src]=\"file.preview\" alt=\"preview\" class=\"file-thumb-small\">\n                } @else {\n                  <mat-icon class=\"file-type-icon-small\">{{ getFileIcon(file.type) }}</mat-icon>\n                }\n              </div>\n              <span class=\"file-name-text\" [matTooltip]=\"file.name\">{{ file.name }}</span>\n              <span class=\"file-size-text\">{{ formatFileSize(file.size) }}</span>\n              <button mat-icon-button class=\"file-remove-btn-small\" (click)=\"removeFile(file)\" [attr.aria-label]=\"('actions.remove' | translate) + ' ' + file.name\" [matTooltip]=\"'actions.remove' | translate\">\n                <mat-icon>close</mat-icon>\n              </button>\n            </div>\n          }\n        </div>\n      </div>\n    }\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n      --_error: var(--error, #ba1a1a);\n    }\n\n    .input-box {\n      position: relative;\n      background: var(--_surface-container);\n      border: 1px solid var(--_outline-variant);\n      border-radius: 24px;\n      padding: 12px 16px;\n      transition: all 0.2s ease;\n      \n      &.focused {\n        border-color: var(--_primary);\n        box-shadow: 0 0 0 1px var(--_primary);\n      }\n      \n      &.is-dragging {\n        border-color: var(--_primary);\n        background: var(--_primary-container);\n      }\n    }\n\n    .drop-zone-overlay {\n      position: absolute;\n      inset: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      background: var(--_primary-container);\n      border-radius: 24px;\n      z-index: 10;\n      \n      .drop-icon {\n        font-size: 48px;\n        width: 48px;\n        height: 48px;\n        color: var(--_primary);\n      }\n      \n      .drop-caption {\n        margin-top: 8px;\n        font-size: 14px;\n        color: var(--_on-primary-container);\n      }\n    }\n\n    .chat-input {\n      width: 100%;\n      background: transparent;\n      border: none;\n      outline: none;\n      font-size: 16px;\n      color: var(--_on-surface);\n      resize: none;\n      font-family: inherit;\n      line-height: 1.5;\n      max-height: 200px;\n      overflow-y: auto;\n      \n      &::placeholder {\n        color: var(--_on-surface-variant);\n      }\n      \n      &.content-flagged {\n        text-decoration: underline wavy var(--_error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    .input-toolbar {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 8px;\n      padding-top: 8px;\n      border-top: 1px solid var(--_outline-variant);\n    }\n\n    .toolbar-left, .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n    }\n\n    .toolbar-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .tools-btn {\n      font-size: 13px;\n      \n      mat-icon {\n        font-size: 18px;\n        margin-right: 4px;\n      }\n    }\n\n    .action-btn-container {\n      overflow: hidden;\n    }\n\n    .send-btn {\n      color: var(--_primary);\n    }\n\n    .mic-btn {\n      &.recording {\n        color: var(--_error);\n        animation: pulse 1s ease-in-out infinite;\n      }\n    }\n\n    .toggle-indicator {\n      margin-left: auto;\n      font-size: 18px;\n      color: var(--_on-surface-variant);\n      \n      &.active {\n        color: var(--_primary);\n      }\n    }\n\n    /* Attached files styles */\n    .attached-files-container {\n      margin-top: 12px;\n      padding: 12px;\n      background: var(--_surface-container);\n      border-radius: 12px;\n    }\n\n    .attachments-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .attachments-count {\n      font-size: 12px;\n      color: var(--_on-surface-variant);\n    }\n\n    .attachments-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n        }\n      }\n    }\n\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 8px;\n      background: var(--_surface-container-high);\n      border-radius: 8px;\n    }\n\n    .file-icon-wrapper {\n      width: 32px;\n      height: 32px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      .file-thumb-small {\n        width: 32px;\n        height: 32px;\n        object-fit: cover;\n        border-radius: 4px;\n      }\n      \n      .file-type-icon-small {\n        font-size: 24px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-size-text {\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n    }\n\n    .file-remove-btn-small {\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n  `]\n})\nexport class ChatInputComponent implements AfterViewInit {\n  /** Placeholder text for the input */\n  placeholder = input<string>('Type a message...');\n\n  /** Whether the input is disabled */\n  disabled = input<boolean>(false);\n\n  /** Whether content is flagged as unsafe */\n  contentFlagged = input<boolean>(false);\n\n  /** Labels of flagged content */\n  flaggedLabels = input<string[]>([]);\n\n  /** Whether streaming is enabled */\n  streamingEnabled = input<boolean>(true);\n\n  /** Whether markdown rendering is enabled */\n  markdownEnabled = input<boolean>(true);\n\n  /** Whether content safety is enabled */\n  safetyEnabled = input<boolean>(true);\n\n  /** Whether voice is currently recording */\n  isRecording = input<boolean>(false);\n\n  /** Whether voice input is supported */\n  voiceSupported = input<boolean>(false);\n\n  /**\n   * Signal-based text injection for decoupled communication.\n   * When this value changes, the input text is updated and the input is focused.\n   * Use with a signal from parent component:\n   * \n   * @example\n   * // In parent:\n   * injectedPrompt = signal<string | null>(null);\n   * \n   * // When quick action clicked:\n   * this.injectedPrompt.set('Tell me a joke');\n   * \n   * // In template:\n   * <app-chat-input [injectedText]=\"injectedPrompt()\" />\n   */\n  injectedText = input<string | null>(null);\n\n  /** Emitted when user sends a message */\n  send = output<SendEvent>();\n\n  /** Emitted when input text changes */\n  inputChange = output<string>();\n\n  /** Emitted when voice toggle is clicked */\n  toggleVoice = output<void>();\n\n  /** Emitted when streaming toggle is clicked */\n  toggleStreaming = output<void>();\n\n  /** Emitted when markdown toggle is clicked */\n  toggleMarkdown = output<void>();\n\n  /** Emitted when safety toggle is clicked */\n  toggleSafety = output<void>();\n\n  /** Emitted when clear preferences is clicked */\n  clearPreferences = output<void>();\n\n  /** Emitted when files are selected */\n  filesSelected = output<File[]>();\n\n  /** Services */\n  private snackBar = inject(MatSnackBar);\n  private translate = inject(TranslateService);\n\n  /** Local state */\n  message = '';\n  inputFocused = signal(false);\n  isDragging = signal(false);\n  attachedFiles = signal<AttachedFile[]>([]);\n\n  /** Computed: show send button when there's text */\n  showSendButton = computed(() => this.message.trim().length > 0);\n\n  @ViewChild('chatTextarea') private textareaRef!: ElementRef<HTMLTextAreaElement>;\n\n  constructor() {\n    // Watch for injected text changes and update input with focus\n    effect(() => {\n      const text = this.injectedText();\n      if (text !== null && text !== undefined) {\n        this.message = text;\n        this.onInputChange();\n        // Focus and move cursor to end after text is set\n        setTimeout(() => {\n          this.focusInputAtEnd();\n        }, 0);\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    // Focus the input on init\n    setTimeout(() => this.focusInput(), 100);\n  }\n\n  focusInput(event?: MouseEvent): void {\n    if (event) {\n      // Don't focus if clicking on a button\n      const target = event.target as HTMLElement;\n      if (target.closest('button') || target.closest('mat-menu')) {\n        return;\n      }\n    }\n    this.textareaRef?.nativeElement?.focus();\n  }\n\n  /**\n   * Focus the input and move cursor to the end of the text.\n   * Used when injecting text to place cursor after the injected content.\n   */\n  focusInputAtEnd(): void {\n    const textarea = this.textareaRef?.nativeElement;\n    if (textarea) {\n      textarea.focus();\n      const length = textarea.value.length;\n      textarea.setSelectionRange(length, length);\n    }\n  }\n\n  onInputChange(): void {\n    this.inputChange.emit(this.message);\n  }\n\n  onEnterKey(event: Event): void {\n    const keyEvent = event as KeyboardEvent;\n    if (!keyEvent.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n\n  sendMessage(): void {\n    const trimmedMessage = this.message.trim();\n    if (!trimmedMessage && this.attachedFiles().length === 0) return;\n\n    this.send.emit({\n      message: trimmedMessage,\n      attachments: [...this.attachedFiles()]\n    });\n\n    this.message = '';\n    this.attachedFiles.set([]);\n  }\n\n  clearInput(): void {\n    this.message = '';\n    this.inputChange.emit('');\n  }\n\n  // Drag and drop handlers\n  onDragOver(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(true);\n  }\n\n  onDragLeave(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n  }\n\n  onDrop(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n\n    const files = event.dataTransfer?.files;\n    if (files && files.length > 0) {\n      this.processFiles(Array.from(files));\n    }\n  }\n\n  onFileSelected(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    if (input.files && input.files.length > 0) {\n      this.processFiles(Array.from(input.files));\n      input.value = ''; // Reset for same file selection\n    }\n  }\n\n  private processFiles(files: File[]): void {\n    const currentFiles = this.attachedFiles();\n\n    // Check max attachments\n    if (currentFiles.length + files.length > DEFAULT_CONFIG.maxAttachments) {\n      this.snackBar.open(\n        this.translate.instant('errors.tooManyFiles', { max: DEFAULT_CONFIG.maxAttachments }),\n        'OK',\n        { duration: 3000 }\n      );\n      return;\n    }\n\n    for (const file of files) {\n      // Check file size\n      if (file.size > DEFAULT_CONFIG.maxFileSizeBytes) {\n        this.snackBar.open(\n          this.translate.instant('errors.fileTooLarge', { name: file.name, size: '1MB' }),\n          'OK',\n          { duration: 3000 }\n        );\n        continue;\n      }\n\n      // Create preview for images\n      if (file.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.attachedFiles.update(files => [...files, {\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            preview: reader.result as string,\n            data: reader.result as string\n          }]);\n        };\n        reader.readAsDataURL(file);\n      } else {\n        this.attachedFiles.update(files => [...files, {\n          name: file.name,\n          size: file.size,\n          type: file.type\n        }]);\n      }\n    }\n  }\n\n  removeFile(file: AttachedFile): void {\n    this.attachedFiles.update(files => files.filter(f => f.name !== file.name));\n  }\n\n  clearAllFiles(): void {\n    this.attachedFiles.set([]);\n  }\n\n  getFileIcon(mimeType: string): string {\n    return getMimeTypeIcon(mimeType);\n  }\n\n  formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  }\n}\n",
            "properties": [
                {
                    "name": "data",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 91
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 87
                },
                {
                    "name": "preview",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 90
                },
                {
                    "name": "size",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 88
                },
                {
                    "name": "type",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 89
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ChatRequest",
            "id": "interface-ChatRequest-b8fb92b258013208a1fd0531caf2980a9aad7454d302fda4e5b7f176a5752e338e7aca4d561afc38f6e2a3b47db471ee161c48afac4da61f444e5de8938e6482",
            "file": "src/app/core/services/chat.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, effect } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface Message {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: Date;\n    model?: string;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface ChatRequest {\n    message: string;\n    model: string;\n    history?: { role: string; content: string }[];\n}\n\nexport interface ChatResponse {\n    response: string;\n    model: string;\n    latency_ms: number;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface CompareRequest {\n    prompt: string;\n    models: string[];\n}\n\nexport interface CompareResponse {\n    prompt: string;\n    responses: {\n        model: string;\n        response: string | null;\n        latency_ms: number;\n        error: string | null;\n    }[];\n}\n\nexport interface QueuedPrompt {\n    id: string;\n    content: string;\n    model: string;\n    timestamp: Date;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ChatService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n\n    messages = signal<Message[]>([]);\n    isLoading = signal(false);\n\n    // Prompt queue\n    promptQueue = signal<QueuedPrompt[]>([]);\n    private isProcessingQueue = false;\n\n    // Streaming mode (load from preferences)\n    streamingMode = signal(this.preferencesService.streamingMode);\n\n    // Markdown rendering mode (load from preferences)\n    markdownMode = signal(this.preferencesService.markdownMode);\n\n    constructor() {\n        // Persist streaming mode changes\n        effect(() => {\n            this.preferencesService.setStreamingMode(this.streamingMode());\n        });\n\n        // Persist markdown mode changes\n        effect(() => {\n            this.preferencesService.setMarkdownMode(this.markdownMode());\n        });\n    }\n\n    sendMessage(message: string, model: string): Observable<ChatResponse> {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        return this.http.post<ChatResponse>(`${this.apiUrl}/chat`, {\n            message,\n            model,\n            history,\n        }).pipe(\n            catchError(error => {\n                console.error('Chat error:', error);\n                const errorMessage = error?.error?.detail || error?.error?.message || error?.message || 'Unknown error';\n                const errorDetails = JSON.stringify(error, null, 2);\n                return of({\n                    response: `Error: ${errorMessage}`,\n                    model,\n                    latency_ms: 0,\n                    isError: true,\n                    errorDetails\n                });\n            }),\n        );\n    }\n\n    addAssistantMessage(response: ChatResponse): void {\n        this.messages.update(msgs => [\n            ...msgs,\n            {\n                role: 'assistant',\n                content: response.response,\n                timestamp: new Date(),\n                model: response.model,\n                isError: response.isError,\n                errorDetails: response.errorDetails,\n            },\n        ]);\n        this.isLoading.set(false);\n        // Process next queued prompt if any\n        this.processNextInQueue();\n    }\n\n    /**\n     * Process the next item in the queue automatically after a response is received.\n     */\n    private processNextInQueue(): void {\n        if (this.promptQueue().length > 0 && !this.isLoading()) {\n            const next = this.promptQueue()[0];\n            this.removeFromQueue(next.id);\n\n            if (this.streamingMode()) {\n                this.sendStreamMessage(next.content, next.model, () => {\n                    this.processNextInQueue();\n                });\n            } else {\n                this.sendMessage(next.content, next.model).subscribe({\n                    next: response => this.addAssistantMessage(response),\n                    error: err => {\n                        console.error('Queue send error:', err);\n                        this.isLoading.set(false);\n                        this.processNextInQueue();\n                    }\n                });\n            }\n        }\n    }\n\n    toggleStreamingMode(): void {\n        this.streamingMode.update(v => !v);\n    }\n\n    toggleMarkdownMode(): void {\n        this.markdownMode.update(v => !v);\n    }\n\n    // Send message with streaming (returns EventSource URL)\n    sendStreamMessage(message: string, model: string, onComplete?: () => void): void {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        // Add placeholder assistant message\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'assistant', content: '', timestamp: new Date(), model },\n        ]);\n\n        const eventSource = new EventSource(\n            `${this.apiUrl}/stream?message=${encodeURIComponent(message)}&model=${encodeURIComponent(model)}&history=${encodeURIComponent(JSON.stringify(history))}`\n        );\n\n        eventSource.onmessage = (event) => {\n            if (event.data === '[DONE]') {\n                eventSource.close();\n                this.isLoading.set(false);\n                onComplete?.();\n                return;\n            }\n\n            try {\n                const data = JSON.parse(event.data);\n                if (data.chunk) {\n                    // Update the last message (assistant) with new content\n                    this.messages.update(msgs => {\n                        const updated = [...msgs];\n                        const lastMsg = updated[updated.length - 1];\n                        if (lastMsg && lastMsg.role === 'assistant') {\n                            lastMsg.content += data.chunk;\n                        }\n                        return updated;\n                    });\n                }\n            } catch {\n                // Handle plain text chunks\n                this.messages.update(msgs => {\n                    const updated = [...msgs];\n                    const lastMsg = updated[updated.length - 1];\n                    if (lastMsg && lastMsg.role === 'assistant') {\n                        lastMsg.content += event.data;\n                    }\n                    return updated;\n                });\n            }\n        };\n\n        eventSource.onerror = (error) => {\n            console.error('Stream error:', error);\n            eventSource.close();\n            this.messages.update(msgs => {\n                const updated = [...msgs];\n                const lastMsg = updated[updated.length - 1];\n                if (lastMsg && lastMsg.role === 'assistant' && !lastMsg.content) {\n                    lastMsg.content = 'Error: Stream connection failed';\n                    lastMsg.isError = true;\n                    lastMsg.errorDetails = JSON.stringify(error, null, 2);\n                }\n                return updated;\n            });\n            this.isLoading.set(false);\n            onComplete?.();\n        };\n    }\n\n    compareModels(prompt: string, models: string[]): Observable<CompareResponse> {\n        return this.http.post<CompareResponse>(`${this.apiUrl}/compare`, {\n            prompt,\n            models,\n        });\n    }\n\n    clearHistory(): void {\n        this.messages.set([]);\n    }\n\n    // Queue management methods\n    addToQueue(content: string, model: string): void {\n        const queuedPrompt: QueuedPrompt = {\n            id: crypto.randomUUID(),\n            content,\n            model,\n            timestamp: new Date(),\n        };\n        this.promptQueue.update(queue => [...queue, queuedPrompt]);\n        // Note: Don't process here - queue items are added when model is busy\n        // Processing happens when the current request completes via addAssistantMessage\n    }\n\n    removeFromQueue(id: string): void {\n        this.promptQueue.update(queue => queue.filter(p => p.id !== id));\n    }\n\n    clearQueue(): void {\n        this.promptQueue.set([]);\n    }\n\n    sendFromQueue(id: string): void {\n        const item = this.promptQueue().find(p => p.id === id);\n        if (!item || this.isLoading()) return;\n\n        this.removeFromQueue(id);\n        this.sendMessage(item.content, item.model).subscribe({\n            next: response => this.addAssistantMessage(response),\n            error: err => console.error('Queue send error:', err)\n        });\n    }\n\n    sendAllFromQueue(): void {\n        // Move all queue items to be processed - they will be sent sequentially\n        // as the processNextInQueue is called after each response\n        // For now, just start processing the first one if not already loading\n        if (!this.isLoading() && this.promptQueue().length > 0) {\n            const first = this.promptQueue()[0];\n            this.sendFromQueue(first.id);\n        }\n    }\n\n    updateQueuedPrompt(id: string, content: string): void {\n        this.promptQueue.update(queue =>\n            queue.map(p => p.id === id ? { ...p, content } : p)\n        );\n    }\n\n    moveQueuedPromptUp(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index > 0) {\n                const newQueue = [...queue];\n                [newQueue[index - 1], newQueue[index]] = [newQueue[index], newQueue[index - 1]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    moveQueuedPromptDown(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index >= 0 && index < queue.length - 1) {\n                const newQueue = [...queue];\n                [newQueue[index], newQueue[index + 1]] = [newQueue[index + 1], newQueue[index]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    private processQueue(): void {\n        if (this.isProcessingQueue || this.isLoading() || this.promptQueue().length === 0) {\n            return;\n        }\n\n        this.isProcessingQueue = true;\n        const [nextPrompt, ...remaining] = this.promptQueue();\n        this.promptQueue.set(remaining);\n\n        // Process the prompt\n        this.sendMessage(nextPrompt.content, nextPrompt.model).subscribe({\n            next: response => {\n                this.addAssistantMessage(response);\n                this.isProcessingQueue = false;\n                // Process next in queue\n                this.processQueue();\n            },\n            error: () => {\n                this.isProcessingQueue = false;\n                this.processQueue();\n            }\n        });\n    }\n}\n",
            "properties": [
                {
                    "name": "history",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 18
                },
                {
                    "name": "message",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 16
                },
                {
                    "name": "model",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ChatResponse",
            "id": "interface-ChatResponse-b8fb92b258013208a1fd0531caf2980a9aad7454d302fda4e5b7f176a5752e338e7aca4d561afc38f6e2a3b47db471ee161c48afac4da61f444e5de8938e6482",
            "file": "src/app/core/services/chat.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, effect } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface Message {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: Date;\n    model?: string;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface ChatRequest {\n    message: string;\n    model: string;\n    history?: { role: string; content: string }[];\n}\n\nexport interface ChatResponse {\n    response: string;\n    model: string;\n    latency_ms: number;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface CompareRequest {\n    prompt: string;\n    models: string[];\n}\n\nexport interface CompareResponse {\n    prompt: string;\n    responses: {\n        model: string;\n        response: string | null;\n        latency_ms: number;\n        error: string | null;\n    }[];\n}\n\nexport interface QueuedPrompt {\n    id: string;\n    content: string;\n    model: string;\n    timestamp: Date;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ChatService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n\n    messages = signal<Message[]>([]);\n    isLoading = signal(false);\n\n    // Prompt queue\n    promptQueue = signal<QueuedPrompt[]>([]);\n    private isProcessingQueue = false;\n\n    // Streaming mode (load from preferences)\n    streamingMode = signal(this.preferencesService.streamingMode);\n\n    // Markdown rendering mode (load from preferences)\n    markdownMode = signal(this.preferencesService.markdownMode);\n\n    constructor() {\n        // Persist streaming mode changes\n        effect(() => {\n            this.preferencesService.setStreamingMode(this.streamingMode());\n        });\n\n        // Persist markdown mode changes\n        effect(() => {\n            this.preferencesService.setMarkdownMode(this.markdownMode());\n        });\n    }\n\n    sendMessage(message: string, model: string): Observable<ChatResponse> {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        return this.http.post<ChatResponse>(`${this.apiUrl}/chat`, {\n            message,\n            model,\n            history,\n        }).pipe(\n            catchError(error => {\n                console.error('Chat error:', error);\n                const errorMessage = error?.error?.detail || error?.error?.message || error?.message || 'Unknown error';\n                const errorDetails = JSON.stringify(error, null, 2);\n                return of({\n                    response: `Error: ${errorMessage}`,\n                    model,\n                    latency_ms: 0,\n                    isError: true,\n                    errorDetails\n                });\n            }),\n        );\n    }\n\n    addAssistantMessage(response: ChatResponse): void {\n        this.messages.update(msgs => [\n            ...msgs,\n            {\n                role: 'assistant',\n                content: response.response,\n                timestamp: new Date(),\n                model: response.model,\n                isError: response.isError,\n                errorDetails: response.errorDetails,\n            },\n        ]);\n        this.isLoading.set(false);\n        // Process next queued prompt if any\n        this.processNextInQueue();\n    }\n\n    /**\n     * Process the next item in the queue automatically after a response is received.\n     */\n    private processNextInQueue(): void {\n        if (this.promptQueue().length > 0 && !this.isLoading()) {\n            const next = this.promptQueue()[0];\n            this.removeFromQueue(next.id);\n\n            if (this.streamingMode()) {\n                this.sendStreamMessage(next.content, next.model, () => {\n                    this.processNextInQueue();\n                });\n            } else {\n                this.sendMessage(next.content, next.model).subscribe({\n                    next: response => this.addAssistantMessage(response),\n                    error: err => {\n                        console.error('Queue send error:', err);\n                        this.isLoading.set(false);\n                        this.processNextInQueue();\n                    }\n                });\n            }\n        }\n    }\n\n    toggleStreamingMode(): void {\n        this.streamingMode.update(v => !v);\n    }\n\n    toggleMarkdownMode(): void {\n        this.markdownMode.update(v => !v);\n    }\n\n    // Send message with streaming (returns EventSource URL)\n    sendStreamMessage(message: string, model: string, onComplete?: () => void): void {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        // Add placeholder assistant message\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'assistant', content: '', timestamp: new Date(), model },\n        ]);\n\n        const eventSource = new EventSource(\n            `${this.apiUrl}/stream?message=${encodeURIComponent(message)}&model=${encodeURIComponent(model)}&history=${encodeURIComponent(JSON.stringify(history))}`\n        );\n\n        eventSource.onmessage = (event) => {\n            if (event.data === '[DONE]') {\n                eventSource.close();\n                this.isLoading.set(false);\n                onComplete?.();\n                return;\n            }\n\n            try {\n                const data = JSON.parse(event.data);\n                if (data.chunk) {\n                    // Update the last message (assistant) with new content\n                    this.messages.update(msgs => {\n                        const updated = [...msgs];\n                        const lastMsg = updated[updated.length - 1];\n                        if (lastMsg && lastMsg.role === 'assistant') {\n                            lastMsg.content += data.chunk;\n                        }\n                        return updated;\n                    });\n                }\n            } catch {\n                // Handle plain text chunks\n                this.messages.update(msgs => {\n                    const updated = [...msgs];\n                    const lastMsg = updated[updated.length - 1];\n                    if (lastMsg && lastMsg.role === 'assistant') {\n                        lastMsg.content += event.data;\n                    }\n                    return updated;\n                });\n            }\n        };\n\n        eventSource.onerror = (error) => {\n            console.error('Stream error:', error);\n            eventSource.close();\n            this.messages.update(msgs => {\n                const updated = [...msgs];\n                const lastMsg = updated[updated.length - 1];\n                if (lastMsg && lastMsg.role === 'assistant' && !lastMsg.content) {\n                    lastMsg.content = 'Error: Stream connection failed';\n                    lastMsg.isError = true;\n                    lastMsg.errorDetails = JSON.stringify(error, null, 2);\n                }\n                return updated;\n            });\n            this.isLoading.set(false);\n            onComplete?.();\n        };\n    }\n\n    compareModels(prompt: string, models: string[]): Observable<CompareResponse> {\n        return this.http.post<CompareResponse>(`${this.apiUrl}/compare`, {\n            prompt,\n            models,\n        });\n    }\n\n    clearHistory(): void {\n        this.messages.set([]);\n    }\n\n    // Queue management methods\n    addToQueue(content: string, model: string): void {\n        const queuedPrompt: QueuedPrompt = {\n            id: crypto.randomUUID(),\n            content,\n            model,\n            timestamp: new Date(),\n        };\n        this.promptQueue.update(queue => [...queue, queuedPrompt]);\n        // Note: Don't process here - queue items are added when model is busy\n        // Processing happens when the current request completes via addAssistantMessage\n    }\n\n    removeFromQueue(id: string): void {\n        this.promptQueue.update(queue => queue.filter(p => p.id !== id));\n    }\n\n    clearQueue(): void {\n        this.promptQueue.set([]);\n    }\n\n    sendFromQueue(id: string): void {\n        const item = this.promptQueue().find(p => p.id === id);\n        if (!item || this.isLoading()) return;\n\n        this.removeFromQueue(id);\n        this.sendMessage(item.content, item.model).subscribe({\n            next: response => this.addAssistantMessage(response),\n            error: err => console.error('Queue send error:', err)\n        });\n    }\n\n    sendAllFromQueue(): void {\n        // Move all queue items to be processed - they will be sent sequentially\n        // as the processNextInQueue is called after each response\n        // For now, just start processing the first one if not already loading\n        if (!this.isLoading() && this.promptQueue().length > 0) {\n            const first = this.promptQueue()[0];\n            this.sendFromQueue(first.id);\n        }\n    }\n\n    updateQueuedPrompt(id: string, content: string): void {\n        this.promptQueue.update(queue =>\n            queue.map(p => p.id === id ? { ...p, content } : p)\n        );\n    }\n\n    moveQueuedPromptUp(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index > 0) {\n                const newQueue = [...queue];\n                [newQueue[index - 1], newQueue[index]] = [newQueue[index], newQueue[index - 1]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    moveQueuedPromptDown(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index >= 0 && index < queue.length - 1) {\n                const newQueue = [...queue];\n                [newQueue[index], newQueue[index + 1]] = [newQueue[index + 1], newQueue[index]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    private processQueue(): void {\n        if (this.isProcessingQueue || this.isLoading() || this.promptQueue().length === 0) {\n            return;\n        }\n\n        this.isProcessingQueue = true;\n        const [nextPrompt, ...remaining] = this.promptQueue();\n        this.promptQueue.set(remaining);\n\n        // Process the prompt\n        this.sendMessage(nextPrompt.content, nextPrompt.model).subscribe({\n            next: response => {\n                this.addAssistantMessage(response);\n                this.isProcessingQueue = false;\n                // Process next in queue\n                this.processQueue();\n            },\n            error: () => {\n                this.isProcessingQueue = false;\n                this.processQueue();\n            }\n        });\n    }\n}\n",
            "properties": [
                {
                    "name": "errorDetails",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 26
                },
                {
                    "name": "isError",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 25
                },
                {
                    "name": "latency_ms",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 24
                },
                {
                    "name": "model",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 23
                },
                {
                    "name": "response",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ChatSettings",
            "id": "interface-ChatSettings-b37707bb8cc8b0899caaaae7660bc79e3d5f0c93a3227f551003c14679aa3fd063c3593e4576a2fb78bf2f25c2e5dcc503af9b7ca6fc8acd242e699efc7b1181",
            "file": "src/app/features/chat/components/chat-box/chat-box.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import {\n    Component, input, output, signal, computed, effect,\n    ChangeDetectionStrategy, OnDestroy\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TranslateModule } from '@ngx-translate/core';\n\n// Import sub-components\nimport { MessageListComponent, Message } from '../message-list/message-list.component';\nimport { WelcomeScreenComponent, Greeting, QuickAction } from '../welcome-screen/welcome-screen.component';\nimport { ChatInputComponent, SendEvent, AttachedFile } from '../chat-input/chat-input.component';\nimport { ModelSelectorComponent, Model, Provider } from '../model-selector/model-selector.component';\n\n/**\n * Chat settings that can be toggled by user.\n */\nexport interface ChatSettings {\n    streamingEnabled: boolean;\n    markdownEnabled: boolean;\n    safetyEnabled: boolean;\n}\n\n/**\n * Default greetings for the welcome screen.\n */\nexport const DEFAULT_GREETINGS: Greeting[] = [\n    { text: 'Hello', lang: 'en', dir: 'ltr', anim: 'type' },\n    { text: 'Bonjour', lang: 'fr', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'es', dir: 'ltr', anim: 'type' },\n    { text: 'こんにちは', lang: 'ja', dir: 'ltr', anim: 'slide' },\n    { text: 'नमस्ते', lang: 'hi', dir: 'ltr', anim: 'slide' },\n    { text: 'مرحبا', lang: 'ar', dir: 'rtl', anim: 'slide' },\n];\n\n/**\n * Default quick actions for the welcome screen.\n */\nexport const DEFAULT_QUICK_ACTIONS: QuickAction[] = [\n    { icon: 'lightbulb', labelKey: 'chat.actions.explain', prompt: 'Explain the concept of ', color: '#fbbc04' },\n    { icon: 'code', labelKey: 'chat.actions.code', prompt: 'Write code that ', color: '#34a853' },\n    { icon: 'edit', labelKey: 'chat.actions.write', prompt: 'Help me write ', color: '#4285f4' },\n    { icon: 'psychology', labelKey: 'chat.actions.brainstorm', prompt: 'Brainstorm ideas for ', color: '#ea4335' },\n];\n\n@Component({\n    selector: 'app-chat-box',\n    standalone: true,\n    imports: [\n        CommonModule,\n        TranslateModule,\n        MessageListComponent,\n        WelcomeScreenComponent,\n        ChatInputComponent,\n        ModelSelectorComponent,\n    ],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    template: `\n    <div class=\"chat-box\" [class.loading]=\"isLoading()\">\n      <!-- Messages Area -->\n      <div class=\"messages-area\">\n        @if (messages().length === 0 && !isLoading()) {\n          <app-welcome-screen\n            [greetings]=\"greetings()\"\n            [quickActions]=\"quickActions()\"\n            [logoUrl]=\"logoUrl()\"\n            (actionSelected)=\"onQuickAction($event)\" />\n        } @else {\n          <app-message-list\n            [messages]=\"messages()\"\n            [isLoading]=\"isLoading()\"\n            [error]=\"error()\"\n            [markdownMode]=\"effectiveMarkdownEnabled()\"\n            [avatarUrl]=\"avatarUrl()\"\n            (copy)=\"copyMessage.emit($event)\"\n            (speak)=\"onSpeak($event)\"\n            (retry)=\"retryMessage.emit()\"\n            (thumbUp)=\"thumbUp.emit($event)\"\n            (thumbDown)=\"thumbDown.emit($event)\" />\n        }\n      </div>\n      \n      <!-- Input Area -->\n      <div class=\"input-area\">\n        <app-chat-input\n          [disabled]=\"disabled() || isLoading()\"\n          [placeholder]=\"placeholder()\"\n          [streamingEnabled]=\"effectiveStreamingEnabled()\"\n          [markdownEnabled]=\"effectiveMarkdownEnabled()\"\n          [safetyEnabled]=\"effectiveSafetyEnabled()\"\n          [isRecording]=\"effectiveIsRecording()\"\n          [voiceSupported]=\"effectiveVoiceSupported()\"\n          [contentFlagged]=\"contentFlagged()\"\n          [flaggedLabels]=\"flaggedLabels()\"\n          [injectedText]=\"injectedText()\"\n          (send)=\"onSend($event)\"\n          (inputChange)=\"inputChange.emit($event)\"\n          (toggleVoice)=\"onToggleVoice()\"\n          (toggleStreaming)=\"onToggleStreaming()\"\n          (toggleMarkdown)=\"onToggleMarkdown()\"\n          (toggleSafety)=\"onToggleSafety()\"\n          (filesSelected)=\"filesSelected.emit($event)\">\n          \n          <!-- Model Selector Slot -->\n          @if (showModelSelector() && providers().length > 0) {\n            <app-model-selector modelSelector\n              [selectedModel]=\"selectedModel()?.id ?? ''\"\n              [providers]=\"providers()\"\n              [recentModels]=\"recentModels()\"\n              (modelSelected)=\"onModelSelected($event)\" />\n          }\n        </app-chat-input>\n      </div>\n    </div>\n  `,\n    styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      \n      --_surface: var(--surface, #fafafa);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .chat-box {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      background: var(--_surface);\n    }\n\n    .messages-area {\n      flex: 1;\n      overflow-y: auto;\n      padding: 16px;\n    }\n\n    .input-area {\n      flex-shrink: 0;\n      padding: 16px;\n      border-top: 1px solid var(--_outline-variant);\n      background: var(--_surface-container);\n    }\n\n    /* Loading state styling */\n    .chat-box.loading {\n      .input-area {\n        opacity: 0.7;\n        pointer-events: none;\n      }\n    }\n  `]\n})\nexport class ChatBoxComponent implements OnDestroy {\n    // =====================================================================\n    // Message Display Inputs\n    // =====================================================================\n\n    /** List of chat messages to display */\n    messages = input<Message[]>([]);\n\n    /** Whether the assistant is generating a response */\n    isLoading = input<boolean>(false);\n\n    /** Error message to display */\n    error = input<string | null>(null);\n\n    /** Avatar URL for assistant messages */\n    avatarUrl = input<string>('genkit-logo.png');\n\n    // =====================================================================\n    // Welcome Screen Inputs\n    // =====================================================================\n\n    /** Greetings to display on welcome screen */\n    greetings = input<Greeting[]>(DEFAULT_GREETINGS);\n\n    /** Quick action buttons on welcome screen */\n    quickActions = input<QuickAction[]>(DEFAULT_QUICK_ACTIONS);\n\n    /** Logo URL for welcome screen */\n    logoUrl = input<string>('genkit-logo.png');\n\n    // =====================================================================\n    // Input Configuration\n    // =====================================================================\n\n    /** Whether the input is disabled */\n    disabled = input<boolean>(false);\n\n    /** Placeholder text for the input */\n    placeholder = input<string>('Type a message...');\n\n    /** Whether streaming is enabled */\n    streamingEnabled = input<boolean>(true);\n\n    /** Whether markdown rendering is enabled */\n    markdownEnabled = input<boolean>(true);\n\n    /** Whether content safety checking is enabled */\n    safetyEnabled = input<boolean>(true);\n\n    // =====================================================================\n    // Voice Input Configuration\n    // =====================================================================\n\n    /**\n     * When true, the component manages voice input internally using Web Speech API.\n     * When false (default), parent provides isRecording/voiceSupported and handles toggleVoice.\n     */\n    selfManagedVoice = input<boolean>(false);\n\n    /** \n     * Language for speech recognition (BCP-47 format, e.g., 'en-US').\n     * Only used when selfManagedVoice is true.\n     */\n    speechLanguage = input<string>('en-US');\n\n    /** Whether voice is currently recording (external mode) */\n    isRecording = input<boolean>(false);\n\n    /** Whether voice input is supported (external mode) */\n    voiceSupported = input<boolean>(false);\n\n    // =====================================================================\n    // Content Safety\n    // =====================================================================\n\n    /** Whether current input content is flagged */\n    contentFlagged = input<boolean>(false);\n\n    /** Labels of flagged content */\n    flaggedLabels = input<string[]>([]);\n\n    // =====================================================================\n    // Model Selection\n    // =====================================================================\n\n    /** Whether to show the model selector */\n    showModelSelector = input<boolean>(true);\n\n    /** Currently selected model */\n    selectedModel = input<Model | null>(null);\n\n    /** Available model providers */\n    providers = input<Provider[]>([]);\n\n    /** Recently used models */\n    recentModels = input<Model[]>([]);\n\n    // =====================================================================\n    // Outputs\n    // =====================================================================\n\n    /** Emitted when user sends a message */\n    send = output<SendEvent>();\n\n    /** Emitted when input text changes */\n    inputChange = output<string>();\n\n    /** Emitted when user selects a model */\n    modelSelected = output<Model>();\n\n    /** Emitted when settings change */\n    settingsChanged = output<ChatSettings>();\n\n    /** Emitted when voice toggle is clicked (external voice mode only) */\n    toggleVoice = output<void>();\n\n    /** Emitted when files are selected */\n    filesSelected = output<File[]>();\n\n    /** Emitted when user clicks copy on a message */\n    copyMessage = output<string>();\n\n    /** Emitted when user clicks speak on a message */\n    speakMessage = output<string>();\n\n    /** Emitted when user clicks retry after error */\n    retryMessage = output<void>();\n\n    /** Emitted when user gives thumbs up */\n    thumbUp = output<Message>();\n\n    /** Emitted when user gives thumbs down */\n    thumbDown = output<Message>();\n\n    // =====================================================================\n    // Internal State\n    // =====================================================================\n\n    /** Signal for injected text from quick actions */\n    injectedText = signal<string | null>(null);\n\n    /** Internal settings state */\n    private _streamingEnabled = signal(true);\n    private _markdownEnabled = signal(true);\n    private _safetyEnabled = signal(true);\n\n    /** Internal voice state (for self-managed mode) */\n    private _internalIsRecording = signal(false);\n    private _internalVoiceSupported = signal(false);\n\n    /** Speech recognition instance (uses the global Window interface type) */\n    private recognition: {\n        continuous: boolean;\n        interimResults: boolean;\n        lang: string;\n        start(): void;\n        stop(): void;\n        abort(): void;\n        onresult: ((event: { results: SpeechRecognitionResultList; resultIndex: number }) => void) | null;\n        onerror: ((event: Event) => void) | null;\n        onend: (() => void) | null;\n    } | null = null;\n\n    /** Speech synthesis for speaking messages */\n    private synthesis = typeof window !== 'undefined' ? window.speechSynthesis : null;\n\n    /** Effective values combining external and internal state */\n    effectiveIsRecording = computed(() =>\n        this.selfManagedVoice() ? this._internalIsRecording() : this.isRecording()\n    );\n\n    effectiveVoiceSupported = computed(() =>\n        this.selfManagedVoice() ? this._internalVoiceSupported() : this.voiceSupported()\n    );\n\n    effectiveStreamingEnabled = computed(() => this._streamingEnabled());\n    effectiveMarkdownEnabled = computed(() => this._markdownEnabled());\n    effectiveSafetyEnabled = computed(() => this._safetyEnabled());\n\n    constructor() {\n        // Sync inputs to internal state\n        effect(() => {\n            this._streamingEnabled.set(this.streamingEnabled());\n            this._markdownEnabled.set(this.markdownEnabled());\n            this._safetyEnabled.set(this.safetyEnabled());\n        });\n\n        // Initialize voice if self-managed\n        effect(() => {\n            if (this.selfManagedVoice()) {\n                this.initVoice();\n            }\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.stopRecording();\n        if (this.synthesis) {\n            this.synthesis.cancel();\n        }\n    }\n\n    // =====================================================================\n    // Voice Management (Self-Managed Mode)\n    // =====================================================================\n\n    private initVoice(): void {\n        if (typeof window === 'undefined') return;\n\n        const SpeechRecognitionCtor = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognitionCtor) {\n            this._internalVoiceSupported.set(true);\n            const recognition = new SpeechRecognitionCtor();\n            recognition.continuous = false;\n            recognition.interimResults = true;\n            recognition.lang = this.speechLanguage();\n\n            recognition.onresult = (event: { results: SpeechRecognitionResultList; resultIndex: number }) => {\n                const transcript = Array.from(event.results)\n                    .map((result: SpeechRecognitionResult) => result[0].transcript)\n                    .join('');\n\n                // Inject the transcribed text\n                if (event.results[0].isFinal) {\n                    this.injectedText.set(transcript);\n                }\n            };\n\n            recognition.onend = () => {\n                this._internalIsRecording.set(false);\n            };\n\n            recognition.onerror = () => {\n                this._internalIsRecording.set(false);\n            };\n\n            // Store as the correctly typed interface\n            this.recognition = recognition as typeof this.recognition;\n        }\n    }\n\n    private startRecording(): void {\n        if (this.recognition && !this._internalIsRecording()) {\n            this.recognition.lang = this.speechLanguage();\n            this.recognition.start();\n            this._internalIsRecording.set(true);\n        }\n    }\n\n    private stopRecording(): void {\n        if (this.recognition && this._internalIsRecording()) {\n            this.recognition.stop();\n            this._internalIsRecording.set(false);\n        }\n    }\n\n    // =====================================================================\n    // Event Handlers\n    // =====================================================================\n\n    onQuickAction(prompt: string): void {\n        this.injectedText.set(prompt);\n    }\n\n    onSend(event: SendEvent): void {\n        // Clear injected text after send\n        this.injectedText.set(null);\n        this.send.emit(event);\n    }\n\n    onModelSelected(modelId: string): void {\n        // Find the model from providers\n        for (const provider of this.providers()) {\n            const model = provider.models.find((m: Model) => m.id === modelId);\n            if (model) {\n                this.modelSelected.emit(model);\n                return;\n            }\n        }\n    }\n\n    onToggleVoice(): void {\n        if (this.selfManagedVoice()) {\n            // Self-managed: toggle recording internally\n            if (this._internalIsRecording()) {\n                this.stopRecording();\n            } else {\n                this.startRecording();\n            }\n        } else {\n            // External: emit event for parent to handle\n            this.toggleVoice.emit();\n        }\n    }\n\n    /** Speak a message using Speech Synthesis API */\n    onSpeak(text: string): void {\n        if (this.synthesis) {\n            // Cancel any ongoing speech\n            this.synthesis.cancel();\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.lang = this.speechLanguage();\n            this.synthesis.speak(utterance);\n        }\n        this.speakMessage.emit(text);\n    }\n\n    onToggleStreaming(): void {\n        this._streamingEnabled.update((v: boolean) => !v);\n        this.emitSettings();\n    }\n\n    onToggleMarkdown(): void {\n        this._markdownEnabled.update((v: boolean) => !v);\n        this.emitSettings();\n    }\n\n    onToggleSafety(): void {\n        this._safetyEnabled.update((v: boolean) => !v);\n        this.emitSettings();\n    }\n\n    private emitSettings(): void {\n        this.settingsChanged.emit({\n            streamingEnabled: this._streamingEnabled(),\n            markdownEnabled: this._markdownEnabled(),\n            safetyEnabled: this._safetyEnabled(),\n        });\n    }\n}\n\n",
            "properties": [
                {
                    "name": "markdownEnabled",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 98
                },
                {
                    "name": "safetyEnabled",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 99
                },
                {
                    "name": "streamingEnabled",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 97
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Chat settings that can be toggled by user.</p>\n",
            "rawdescription": "\n\nChat settings that can be toggled by user.\n",
            "methods": [],
            "extends": []
        },
        {
            "name": "CompareRequest",
            "id": "interface-CompareRequest-b8fb92b258013208a1fd0531caf2980a9aad7454d302fda4e5b7f176a5752e338e7aca4d561afc38f6e2a3b47db471ee161c48afac4da61f444e5de8938e6482",
            "file": "src/app/core/services/chat.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, effect } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface Message {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: Date;\n    model?: string;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface ChatRequest {\n    message: string;\n    model: string;\n    history?: { role: string; content: string }[];\n}\n\nexport interface ChatResponse {\n    response: string;\n    model: string;\n    latency_ms: number;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface CompareRequest {\n    prompt: string;\n    models: string[];\n}\n\nexport interface CompareResponse {\n    prompt: string;\n    responses: {\n        model: string;\n        response: string | null;\n        latency_ms: number;\n        error: string | null;\n    }[];\n}\n\nexport interface QueuedPrompt {\n    id: string;\n    content: string;\n    model: string;\n    timestamp: Date;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ChatService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n\n    messages = signal<Message[]>([]);\n    isLoading = signal(false);\n\n    // Prompt queue\n    promptQueue = signal<QueuedPrompt[]>([]);\n    private isProcessingQueue = false;\n\n    // Streaming mode (load from preferences)\n    streamingMode = signal(this.preferencesService.streamingMode);\n\n    // Markdown rendering mode (load from preferences)\n    markdownMode = signal(this.preferencesService.markdownMode);\n\n    constructor() {\n        // Persist streaming mode changes\n        effect(() => {\n            this.preferencesService.setStreamingMode(this.streamingMode());\n        });\n\n        // Persist markdown mode changes\n        effect(() => {\n            this.preferencesService.setMarkdownMode(this.markdownMode());\n        });\n    }\n\n    sendMessage(message: string, model: string): Observable<ChatResponse> {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        return this.http.post<ChatResponse>(`${this.apiUrl}/chat`, {\n            message,\n            model,\n            history,\n        }).pipe(\n            catchError(error => {\n                console.error('Chat error:', error);\n                const errorMessage = error?.error?.detail || error?.error?.message || error?.message || 'Unknown error';\n                const errorDetails = JSON.stringify(error, null, 2);\n                return of({\n                    response: `Error: ${errorMessage}`,\n                    model,\n                    latency_ms: 0,\n                    isError: true,\n                    errorDetails\n                });\n            }),\n        );\n    }\n\n    addAssistantMessage(response: ChatResponse): void {\n        this.messages.update(msgs => [\n            ...msgs,\n            {\n                role: 'assistant',\n                content: response.response,\n                timestamp: new Date(),\n                model: response.model,\n                isError: response.isError,\n                errorDetails: response.errorDetails,\n            },\n        ]);\n        this.isLoading.set(false);\n        // Process next queued prompt if any\n        this.processNextInQueue();\n    }\n\n    /**\n     * Process the next item in the queue automatically after a response is received.\n     */\n    private processNextInQueue(): void {\n        if (this.promptQueue().length > 0 && !this.isLoading()) {\n            const next = this.promptQueue()[0];\n            this.removeFromQueue(next.id);\n\n            if (this.streamingMode()) {\n                this.sendStreamMessage(next.content, next.model, () => {\n                    this.processNextInQueue();\n                });\n            } else {\n                this.sendMessage(next.content, next.model).subscribe({\n                    next: response => this.addAssistantMessage(response),\n                    error: err => {\n                        console.error('Queue send error:', err);\n                        this.isLoading.set(false);\n                        this.processNextInQueue();\n                    }\n                });\n            }\n        }\n    }\n\n    toggleStreamingMode(): void {\n        this.streamingMode.update(v => !v);\n    }\n\n    toggleMarkdownMode(): void {\n        this.markdownMode.update(v => !v);\n    }\n\n    // Send message with streaming (returns EventSource URL)\n    sendStreamMessage(message: string, model: string, onComplete?: () => void): void {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        // Add placeholder assistant message\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'assistant', content: '', timestamp: new Date(), model },\n        ]);\n\n        const eventSource = new EventSource(\n            `${this.apiUrl}/stream?message=${encodeURIComponent(message)}&model=${encodeURIComponent(model)}&history=${encodeURIComponent(JSON.stringify(history))}`\n        );\n\n        eventSource.onmessage = (event) => {\n            if (event.data === '[DONE]') {\n                eventSource.close();\n                this.isLoading.set(false);\n                onComplete?.();\n                return;\n            }\n\n            try {\n                const data = JSON.parse(event.data);\n                if (data.chunk) {\n                    // Update the last message (assistant) with new content\n                    this.messages.update(msgs => {\n                        const updated = [...msgs];\n                        const lastMsg = updated[updated.length - 1];\n                        if (lastMsg && lastMsg.role === 'assistant') {\n                            lastMsg.content += data.chunk;\n                        }\n                        return updated;\n                    });\n                }\n            } catch {\n                // Handle plain text chunks\n                this.messages.update(msgs => {\n                    const updated = [...msgs];\n                    const lastMsg = updated[updated.length - 1];\n                    if (lastMsg && lastMsg.role === 'assistant') {\n                        lastMsg.content += event.data;\n                    }\n                    return updated;\n                });\n            }\n        };\n\n        eventSource.onerror = (error) => {\n            console.error('Stream error:', error);\n            eventSource.close();\n            this.messages.update(msgs => {\n                const updated = [...msgs];\n                const lastMsg = updated[updated.length - 1];\n                if (lastMsg && lastMsg.role === 'assistant' && !lastMsg.content) {\n                    lastMsg.content = 'Error: Stream connection failed';\n                    lastMsg.isError = true;\n                    lastMsg.errorDetails = JSON.stringify(error, null, 2);\n                }\n                return updated;\n            });\n            this.isLoading.set(false);\n            onComplete?.();\n        };\n    }\n\n    compareModels(prompt: string, models: string[]): Observable<CompareResponse> {\n        return this.http.post<CompareResponse>(`${this.apiUrl}/compare`, {\n            prompt,\n            models,\n        });\n    }\n\n    clearHistory(): void {\n        this.messages.set([]);\n    }\n\n    // Queue management methods\n    addToQueue(content: string, model: string): void {\n        const queuedPrompt: QueuedPrompt = {\n            id: crypto.randomUUID(),\n            content,\n            model,\n            timestamp: new Date(),\n        };\n        this.promptQueue.update(queue => [...queue, queuedPrompt]);\n        // Note: Don't process here - queue items are added when model is busy\n        // Processing happens when the current request completes via addAssistantMessage\n    }\n\n    removeFromQueue(id: string): void {\n        this.promptQueue.update(queue => queue.filter(p => p.id !== id));\n    }\n\n    clearQueue(): void {\n        this.promptQueue.set([]);\n    }\n\n    sendFromQueue(id: string): void {\n        const item = this.promptQueue().find(p => p.id === id);\n        if (!item || this.isLoading()) return;\n\n        this.removeFromQueue(id);\n        this.sendMessage(item.content, item.model).subscribe({\n            next: response => this.addAssistantMessage(response),\n            error: err => console.error('Queue send error:', err)\n        });\n    }\n\n    sendAllFromQueue(): void {\n        // Move all queue items to be processed - they will be sent sequentially\n        // as the processNextInQueue is called after each response\n        // For now, just start processing the first one if not already loading\n        if (!this.isLoading() && this.promptQueue().length > 0) {\n            const first = this.promptQueue()[0];\n            this.sendFromQueue(first.id);\n        }\n    }\n\n    updateQueuedPrompt(id: string, content: string): void {\n        this.promptQueue.update(queue =>\n            queue.map(p => p.id === id ? { ...p, content } : p)\n        );\n    }\n\n    moveQueuedPromptUp(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index > 0) {\n                const newQueue = [...queue];\n                [newQueue[index - 1], newQueue[index]] = [newQueue[index], newQueue[index - 1]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    moveQueuedPromptDown(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index >= 0 && index < queue.length - 1) {\n                const newQueue = [...queue];\n                [newQueue[index], newQueue[index + 1]] = [newQueue[index + 1], newQueue[index]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    private processQueue(): void {\n        if (this.isProcessingQueue || this.isLoading() || this.promptQueue().length === 0) {\n            return;\n        }\n\n        this.isProcessingQueue = true;\n        const [nextPrompt, ...remaining] = this.promptQueue();\n        this.promptQueue.set(remaining);\n\n        // Process the prompt\n        this.sendMessage(nextPrompt.content, nextPrompt.model).subscribe({\n            next: response => {\n                this.addAssistantMessage(response);\n                this.isProcessingQueue = false;\n                // Process next in queue\n                this.processQueue();\n            },\n            error: () => {\n                this.isProcessingQueue = false;\n                this.processQueue();\n            }\n        });\n    }\n}\n",
            "properties": [
                {
                    "name": "models",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 31
                },
                {
                    "name": "prompt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 30
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "CompareResponse",
            "id": "interface-CompareResponse-b8fb92b258013208a1fd0531caf2980a9aad7454d302fda4e5b7f176a5752e338e7aca4d561afc38f6e2a3b47db471ee161c48afac4da61f444e5de8938e6482",
            "file": "src/app/core/services/chat.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, effect } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface Message {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: Date;\n    model?: string;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface ChatRequest {\n    message: string;\n    model: string;\n    history?: { role: string; content: string }[];\n}\n\nexport interface ChatResponse {\n    response: string;\n    model: string;\n    latency_ms: number;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface CompareRequest {\n    prompt: string;\n    models: string[];\n}\n\nexport interface CompareResponse {\n    prompt: string;\n    responses: {\n        model: string;\n        response: string | null;\n        latency_ms: number;\n        error: string | null;\n    }[];\n}\n\nexport interface QueuedPrompt {\n    id: string;\n    content: string;\n    model: string;\n    timestamp: Date;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ChatService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n\n    messages = signal<Message[]>([]);\n    isLoading = signal(false);\n\n    // Prompt queue\n    promptQueue = signal<QueuedPrompt[]>([]);\n    private isProcessingQueue = false;\n\n    // Streaming mode (load from preferences)\n    streamingMode = signal(this.preferencesService.streamingMode);\n\n    // Markdown rendering mode (load from preferences)\n    markdownMode = signal(this.preferencesService.markdownMode);\n\n    constructor() {\n        // Persist streaming mode changes\n        effect(() => {\n            this.preferencesService.setStreamingMode(this.streamingMode());\n        });\n\n        // Persist markdown mode changes\n        effect(() => {\n            this.preferencesService.setMarkdownMode(this.markdownMode());\n        });\n    }\n\n    sendMessage(message: string, model: string): Observable<ChatResponse> {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        return this.http.post<ChatResponse>(`${this.apiUrl}/chat`, {\n            message,\n            model,\n            history,\n        }).pipe(\n            catchError(error => {\n                console.error('Chat error:', error);\n                const errorMessage = error?.error?.detail || error?.error?.message || error?.message || 'Unknown error';\n                const errorDetails = JSON.stringify(error, null, 2);\n                return of({\n                    response: `Error: ${errorMessage}`,\n                    model,\n                    latency_ms: 0,\n                    isError: true,\n                    errorDetails\n                });\n            }),\n        );\n    }\n\n    addAssistantMessage(response: ChatResponse): void {\n        this.messages.update(msgs => [\n            ...msgs,\n            {\n                role: 'assistant',\n                content: response.response,\n                timestamp: new Date(),\n                model: response.model,\n                isError: response.isError,\n                errorDetails: response.errorDetails,\n            },\n        ]);\n        this.isLoading.set(false);\n        // Process next queued prompt if any\n        this.processNextInQueue();\n    }\n\n    /**\n     * Process the next item in the queue automatically after a response is received.\n     */\n    private processNextInQueue(): void {\n        if (this.promptQueue().length > 0 && !this.isLoading()) {\n            const next = this.promptQueue()[0];\n            this.removeFromQueue(next.id);\n\n            if (this.streamingMode()) {\n                this.sendStreamMessage(next.content, next.model, () => {\n                    this.processNextInQueue();\n                });\n            } else {\n                this.sendMessage(next.content, next.model).subscribe({\n                    next: response => this.addAssistantMessage(response),\n                    error: err => {\n                        console.error('Queue send error:', err);\n                        this.isLoading.set(false);\n                        this.processNextInQueue();\n                    }\n                });\n            }\n        }\n    }\n\n    toggleStreamingMode(): void {\n        this.streamingMode.update(v => !v);\n    }\n\n    toggleMarkdownMode(): void {\n        this.markdownMode.update(v => !v);\n    }\n\n    // Send message with streaming (returns EventSource URL)\n    sendStreamMessage(message: string, model: string, onComplete?: () => void): void {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        // Add placeholder assistant message\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'assistant', content: '', timestamp: new Date(), model },\n        ]);\n\n        const eventSource = new EventSource(\n            `${this.apiUrl}/stream?message=${encodeURIComponent(message)}&model=${encodeURIComponent(model)}&history=${encodeURIComponent(JSON.stringify(history))}`\n        );\n\n        eventSource.onmessage = (event) => {\n            if (event.data === '[DONE]') {\n                eventSource.close();\n                this.isLoading.set(false);\n                onComplete?.();\n                return;\n            }\n\n            try {\n                const data = JSON.parse(event.data);\n                if (data.chunk) {\n                    // Update the last message (assistant) with new content\n                    this.messages.update(msgs => {\n                        const updated = [...msgs];\n                        const lastMsg = updated[updated.length - 1];\n                        if (lastMsg && lastMsg.role === 'assistant') {\n                            lastMsg.content += data.chunk;\n                        }\n                        return updated;\n                    });\n                }\n            } catch {\n                // Handle plain text chunks\n                this.messages.update(msgs => {\n                    const updated = [...msgs];\n                    const lastMsg = updated[updated.length - 1];\n                    if (lastMsg && lastMsg.role === 'assistant') {\n                        lastMsg.content += event.data;\n                    }\n                    return updated;\n                });\n            }\n        };\n\n        eventSource.onerror = (error) => {\n            console.error('Stream error:', error);\n            eventSource.close();\n            this.messages.update(msgs => {\n                const updated = [...msgs];\n                const lastMsg = updated[updated.length - 1];\n                if (lastMsg && lastMsg.role === 'assistant' && !lastMsg.content) {\n                    lastMsg.content = 'Error: Stream connection failed';\n                    lastMsg.isError = true;\n                    lastMsg.errorDetails = JSON.stringify(error, null, 2);\n                }\n                return updated;\n            });\n            this.isLoading.set(false);\n            onComplete?.();\n        };\n    }\n\n    compareModels(prompt: string, models: string[]): Observable<CompareResponse> {\n        return this.http.post<CompareResponse>(`${this.apiUrl}/compare`, {\n            prompt,\n            models,\n        });\n    }\n\n    clearHistory(): void {\n        this.messages.set([]);\n    }\n\n    // Queue management methods\n    addToQueue(content: string, model: string): void {\n        const queuedPrompt: QueuedPrompt = {\n            id: crypto.randomUUID(),\n            content,\n            model,\n            timestamp: new Date(),\n        };\n        this.promptQueue.update(queue => [...queue, queuedPrompt]);\n        // Note: Don't process here - queue items are added when model is busy\n        // Processing happens when the current request completes via addAssistantMessage\n    }\n\n    removeFromQueue(id: string): void {\n        this.promptQueue.update(queue => queue.filter(p => p.id !== id));\n    }\n\n    clearQueue(): void {\n        this.promptQueue.set([]);\n    }\n\n    sendFromQueue(id: string): void {\n        const item = this.promptQueue().find(p => p.id === id);\n        if (!item || this.isLoading()) return;\n\n        this.removeFromQueue(id);\n        this.sendMessage(item.content, item.model).subscribe({\n            next: response => this.addAssistantMessage(response),\n            error: err => console.error('Queue send error:', err)\n        });\n    }\n\n    sendAllFromQueue(): void {\n        // Move all queue items to be processed - they will be sent sequentially\n        // as the processNextInQueue is called after each response\n        // For now, just start processing the first one if not already loading\n        if (!this.isLoading() && this.promptQueue().length > 0) {\n            const first = this.promptQueue()[0];\n            this.sendFromQueue(first.id);\n        }\n    }\n\n    updateQueuedPrompt(id: string, content: string): void {\n        this.promptQueue.update(queue =>\n            queue.map(p => p.id === id ? { ...p, content } : p)\n        );\n    }\n\n    moveQueuedPromptUp(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index > 0) {\n                const newQueue = [...queue];\n                [newQueue[index - 1], newQueue[index]] = [newQueue[index], newQueue[index - 1]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    moveQueuedPromptDown(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index >= 0 && index < queue.length - 1) {\n                const newQueue = [...queue];\n                [newQueue[index], newQueue[index + 1]] = [newQueue[index + 1], newQueue[index]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    private processQueue(): void {\n        if (this.isProcessingQueue || this.isLoading() || this.promptQueue().length === 0) {\n            return;\n        }\n\n        this.isProcessingQueue = true;\n        const [nextPrompt, ...remaining] = this.promptQueue();\n        this.promptQueue.set(remaining);\n\n        // Process the prompt\n        this.sendMessage(nextPrompt.content, nextPrompt.model).subscribe({\n            next: response => {\n                this.addAssistantMessage(response);\n                this.isProcessingQueue = false;\n                // Process next in queue\n                this.processQueue();\n            },\n            error: () => {\n                this.isProcessingQueue = false;\n                this.processQueue();\n            }\n        });\n    }\n}\n",
            "properties": [
                {
                    "name": "prompt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 35
                },
                {
                    "name": "responses",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ConfigResponse",
            "id": "interface-ConfigResponse-c83aafef1d11011ee387a2d7fa343214adf03d25af65532955cd993480cc329e5e966e0e38502f0751d9c7afa1a085fcb6e90ee93dd47745f1027432c3896908",
            "file": "src/app/features/settings/settings.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, inject, signal, OnInit } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatOptionModule } from '@angular/material/core';\nimport { ThemeService } from '../../core/services/theme.service';\n\ninterface ApiKeyInfo {\n  configured: boolean;\n  preview: string | null;\n}\n\ninterface ConfigResponse {\n  api_keys: {\n    GEMINI_API_KEY: ApiKeyInfo;\n    ANTHROPIC_API_KEY: ApiKeyInfo;\n    OPENAI_API_KEY: ApiKeyInfo;\n    OLLAMA_HOST: ApiKeyInfo;\n  };\n  features: {\n    rag_enabled: boolean;\n    streaming_enabled: boolean;\n    tools_enabled: boolean;\n  };\n}\n\n@Component({\n  selector: 'app-settings',\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatCardModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSlideToggleModule,\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    MatChipsModule,\n    MatSelectModule,\n    MatFormFieldModule,\n    MatOptionModule,\n  ],\n  template: `\n    <div class=\"settings-container\">\n      <h1 class=\"page-title\">Settings</h1>\n\n      <!-- API Keys Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>key</mat-icon>\n          API Configuration\n        </h2>\n        <p class=\"section-desc\">API keys are read from environment variables on the backend server.</p>\n\n        @if (loading()) {\n          <div class=\"loading-state\">\n            <mat-spinner diameter=\"24\"></mat-spinner>\n            <span>Loading configuration...</span>\n          </div>\n        } @else if (config()) {\n          <div class=\"api-keys-list\">\n            <!-- Google AI -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon google\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                    <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                    <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                    <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                  </svg>\n                  <span class=\"key-name\">Google AI</span>\n                </div>\n                <code class=\"env-var\">GEMINI_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.GEMINI_API_KEY.configured\">\n                @if (config()!.api_keys.GEMINI_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.GEMINI_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon warning\">warning</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- Anthropic -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon anthropic\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M17.604 3.332L12.004 20c0-.001-5.605-16.668-5.605-16.668h3.298l2.304 6.855 2.305-6.855h3.298z\"/>\n                  </svg>\n                  <span class=\"key-name\">Anthropic</span>\n                </div>\n                <code class=\"env-var\">ANTHROPIC_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.ANTHROPIC_API_KEY.configured\">\n                @if (config()!.api_keys.ANTHROPIC_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.ANTHROPIC_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- OpenAI -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon openai\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.516 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.896zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z\"/>\n                  </svg>\n                  <span class=\"key-name\">OpenAI</span>\n                </div>\n                <code class=\"env-var\">OPENAI_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.OPENAI_API_KEY.configured\">\n                @if (config()!.api_keys.OPENAI_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.OPENAI_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- Ollama -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon ollama\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"/>\n                    <circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"currentColor\"/>\n                  </svg>\n                  <span class=\"key-name\">Ollama</span>\n                </div>\n                <code class=\"env-var\">OLLAMA_HOST</code>\n              </div>\n              <div class=\"key-status configured\">\n                <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                <span class=\"status-text\">{{ config()!.api_keys.OLLAMA_HOST.preview }}</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"help-text\">\n            <mat-icon>info</mat-icon>\n            <span>Set environment variables before starting the server. Example: <code>export GEMINI_API_KEY=your-key</code></span>\n          </div>\n        }\n      </section>\n\n      <!-- Appearance Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>palette</mat-icon>\n          Appearance\n        </h2>\n        \n        <div class=\"setting-row\">\n          <div class=\"setting-info\">\n            <span class=\"setting-label\">Theme</span>\n            <span class=\"setting-desc\">Choose your preferred color scheme</span>\n          </div>\n          <mat-form-field appearance=\"outline\" class=\"theme-select\">\n            <mat-select [value]=\"themeService.themeMode()\" (selectionChange)=\"themeService.setTheme($event.value)\">\n              <mat-option value=\"system\">\n                <mat-icon>brightness_auto</mat-icon>\n                System\n              </mat-option>\n              <mat-option value=\"light\">\n                <mat-icon>light_mode</mat-icon>\n                Light\n              </mat-option>\n              <mat-option value=\"dark\">\n                <mat-icon>dark_mode</mat-icon>\n                Dark\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n        </div>\n      </section>\n\n      <!-- Generation Defaults Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>tune</mat-icon>\n          Generation Defaults\n        </h2>\n        \n        <div class=\"slider-row\">\n          <div class=\"slider-info\">\n            <span class=\"setting-label\">Temperature</span>\n            <span class=\"slider-value\">{{ temperature }}</span>\n          </div>\n          <mat-slider min=\"0\" max=\"2\" step=\"0.1\" discrete class=\"full-slider\">\n            <input matSliderThumb [(ngModel)]=\"temperature\">\n          </mat-slider>\n          <span class=\"slider-hint\">Lower = more focused, Higher = more creative</span>\n        </div>\n\n        <div class=\"slider-row\">\n          <div class=\"slider-info\">\n            <span class=\"setting-label\">Max output tokens</span>\n            <span class=\"slider-value\">{{ maxTokens }}</span>\n          </div>\n          <mat-slider min=\"256\" max=\"8192\" step=\"256\" discrete class=\"full-slider\">\n            <input matSliderThumb [(ngModel)]=\"maxTokens\">\n          </mat-slider>\n          <span class=\"slider-hint\">Maximum length of generated response</span>\n        </div>\n      </section>\n\n      <!-- Features Section -->\n      @if (config()?.features) {\n        <section class=\"settings-section\">\n          <h2 class=\"section-title\">\n            <mat-icon>extension</mat-icon>\n            Features\n          </h2>\n          \n          <div class=\"features-grid\">\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.rag_enabled\">\n              <mat-icon>{{ config()!.features.rag_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>RAG / Document Search</span>\n            </div>\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.streaming_enabled\">\n              <mat-icon>{{ config()!.features.streaming_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>Streaming Responses</span>\n            </div>\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.tools_enabled\">\n              <mat-icon>{{ config()!.features.tools_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>Tool Calling</span>\n            </div>\n          </div>\n        </section>\n      }\n\n      <!-- About Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>info</mat-icon>\n          About\n        </h2>\n        \n        <div class=\"about-content\">\n          <p><strong>Genkit Chat</strong> v0.1.0</p>\n          <p class=\"about-desc\">A multi-model AI chat application demonstrating Genkit Python capabilities.</p>\n          \n          <div class=\"tech-stack\">\n            <a href=\"https://firebase.google.com/docs/genkit\" target=\"_blank\" class=\"tech-link\">\n              <mat-icon>auto_awesome</mat-icon>\n              Genkit Documentation\n            </a>\n            <a href=\"https://github.com/firebase/genkit\" target=\"_blank\" class=\"tech-link\">\n              <mat-icon>code</mat-icon>\n              GitHub Repository\n            </a>\n          </div>\n        </div>\n      </section>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .settings-container {\n      max-width: 720px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 32px;\n      color: var(--on-surface);\n    }\n\n    .settings-section {\n      margin-bottom: 24px;\n      padding-bottom: 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      &:last-child {\n        border-bottom: none;\n        margin-bottom: 0;\n        padding-bottom: 0;\n      }\n    }\n\n    .section-title {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      font-size: 16px;\n      font-weight: 500;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n      \n      mat-icon {\n        color: var(--gemini-blue);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    .section-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0 0 20px;\n    }\n\n    .loading-state {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n      color: var(--on-surface-variant);\n    }\n\n    /* API Keys List */\n    .api-keys-list {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n    }\n\n    .api-key-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 16px;\n      background: var(--surface-dim);\n      border-radius: var(--radius-md);\n      border: 1px solid var(--surface-variant);\n    }\n\n    .key-info {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n\n    .key-header {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n\n    .provider-icon {\n      width: 24px;\n      height: 24px;\n      \n      &.google { color: #4285f4; }\n      &.anthropic { color: #d97706; }\n      &.openai { color: #10a37f; }\n      &.ollama { color: var(--on-surface-variant); }\n    }\n\n    .key-name {\n      font-size: 15px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .env-var {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      background: var(--surface-container);\n      padding: 2px 6px;\n      border-radius: 4px;\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .key-status {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .status-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      \n      &.success {\n        color: #34a853;\n      }\n      \n      &.warning {\n        color: #ea8600;\n      }\n    }\n\n    .status-text {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n      font-family: 'JetBrains Mono', monospace;\n      \n      &.not-set {\n        font-family: inherit;\n        font-style: italic;\n      }\n    }\n\n    .help-text {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      margin-top: 16px;\n      padding: 12px;\n      background: var(--user-bubble-bg);\n      border-radius: var(--radius-sm);\n      font-size: 13px;\n      color: var(--gemini-blue-dark);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n      }\n      \n      code {\n        background: rgba(66, 133, 244, 0.1);\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 12px;\n      }\n    }\n\n    /* Setting Row */\n    .setting-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 0;\n    }\n\n    .setting-info {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n    }\n\n    .setting-label {\n      font-size: 15px;\n      color: var(--on-surface);\n    }\n\n    .setting-desc {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n    }\n\n    /* Slider Row */\n    .slider-row {\n      margin-bottom: 24px;\n    }\n\n    .slider-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .slider-value {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .full-slider {\n      width: 100%;\n      max-width: 400px;\n    }\n\n    .slider-hint {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 4px;\n    }\n\n    .theme-select {\n      width: 180px;\n      \n      .mat-mdc-form-field-subscript-wrapper {\n        display: none;\n      }\n    }\n\n    /* Features Grid */\n    .features-grid {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n    }\n\n    .feature-chip {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 8px 14px;\n      background: var(--surface-container);\n      border-radius: var(--radius-full);\n      font-size: 13px;\n      color: var(--on-surface-muted);\n      border: 1px solid var(--surface-variant);\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n      \n      &.enabled {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue-dark);\n        border-color: transparent;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    /* About Section */\n    .about-content {\n      p {\n        margin: 0 0 8px;\n        color: var(--on-surface);\n      }\n      \n      .about-desc {\n        color: var(--on-surface-variant);\n        font-size: 14px;\n      }\n    }\n\n    .tech-stack {\n      display: flex;\n      gap: 16px;\n      margin-top: 16px;\n    }\n\n    .tech-link {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      color: var(--gemini-blue);\n      text-decoration: none;\n      font-size: 14px;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  `],\n})\nexport class SettingsComponent implements OnInit {\n  private http = inject(HttpClient);\n  themeService = inject(ThemeService);\n\n  config = signal<ConfigResponse | null>(null);\n  loading = signal(true);\n  temperature = 0.7;\n  maxTokens = 2048;\n\n  ngOnInit(): void {\n    this.loadConfig();\n  }\n\n  private loadConfig(): void {\n    this.http.get<ConfigResponse>('http://localhost:8080/api/config')\n      .subscribe({\n        next: (data) => {\n          this.config.set(data);\n          this.loading.set(false);\n        },\n        error: (err) => {\n          console.error('Failed to load config:', err);\n          this.loading.set(false);\n        },\n      });\n  }\n}\n",
            "properties": [
                {
                    "name": "api_keys",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 24
                },
                {
                    "name": "features",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 30
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ContentCheckResult",
            "id": "interface-ContentCheckResult-e02109bb98cc3b3815a09681b8e26eb0e27e283d33b02bafb8835e20a5966d91415aa574bea9e4b72ee19ee62fbc8b8fe813d0bf143d72023fdebd44f41bbf56",
            "file": "src/app/core/services/content-safety.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n/**\n * Content Safety Service using TensorFlow.js Toxicity model.\n * \n * Detects harmful content client-side before sending to the server.\n * This provides a first line of defense against toxic content.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ContentSafetyService {\n    private toxicityModel: unknown = null;\n    private isModelLoading = false;\n\n    // Configurable threshold (0-1, lower = more strict)\n    private readonly toxicityThreshold = 0.85;\n\n    /** Whether content safety checks are enabled */\n    enabled = signal(true);\n\n    /** Whether the model is ready for use */\n    modelReady = signal(false);\n\n    /** Loading status */\n    loading = signal(false);\n\n    /**\n     * Lazily load the toxicity model.\n     * Called on first use to avoid blocking initial page load.\n     */\n    async loadModel(): Promise<void> {\n        if (this.toxicityModel || this.isModelLoading) return;\n\n        this.isModelLoading = true;\n        this.loading.set(true);\n\n        try {\n            // Dynamic import to reduce initial bundle size\n            const toxicity = await import('@tensorflow-models/toxicity');\n\n            // Load with configured threshold\n            // Labels: identity_attack, insult, obscene, severe_toxicity, \n            //         sexual_explicit, threat, toxicity\n            this.toxicityModel = await toxicity.load(this.toxicityThreshold, []);\n\n            this.modelReady.set(true);\n            console.log('Toxicity model loaded successfully');\n        } catch (error) {\n            console.error('Failed to load toxicity model:', error);\n            // Disable safety checks if model fails to load\n            this.enabled.set(false);\n        } finally {\n            this.isModelLoading = false;\n            this.loading.set(false);\n        }\n    }\n\n    /**\n     * Check if content is safe to send.\n     * Returns true if content is safe, false if harmful content detected.\n     */\n    async checkContent(text: string): Promise<ContentCheckResult> {\n        if (!this.enabled() || !text.trim()) {\n            return { safe: true, labels: [] };\n        }\n\n        // Load model if not ready\n        if (!this.modelReady()) {\n            await this.loadModel();\n        }\n\n        if (!this.toxicityModel) {\n            // Model not available, allow content\n            return { safe: true, labels: [] };\n        }\n\n        try {\n            const model = this.toxicityModel as {\n                classify: (text: string[]) => Promise<ToxicityPrediction[]>\n            };\n            const predictions = await model.classify([text]);\n\n            const flaggedLabels: string[] = [];\n\n            for (const prediction of predictions) {\n                // Check if any result has high probability of being toxic\n                const results = prediction.results[0];\n                if (results.match === true) {\n                    flaggedLabels.push(this.formatLabel(prediction.label));\n                }\n            }\n\n            if (flaggedLabels.length > 0) {\n                return {\n                    safe: false,\n                    labels: flaggedLabels,\n                    message: `Content may contain: ${flaggedLabels.join(', ')}`\n                };\n            }\n\n            return { safe: true, labels: [] };\n        } catch (error) {\n            console.error('Toxicity check failed:', error);\n            // On error, allow content to proceed\n            return { safe: true, labels: [] };\n        }\n    }\n\n    /**\n     * Toggle content safety on/off.\n     */\n    toggle(): void {\n        this.enabled.update(v => !v);\n\n        // Load model when enabling if not already loaded\n        if (this.enabled() && !this.modelReady()) {\n            this.loadModel();\n        }\n    }\n\n    /**\n     * Format label for display.\n     */\n    private formatLabel(label: string): string {\n        return label\n            .replace(/_/g, ' ')\n            .replace(/\\b\\w/g, c => c.toUpperCase());\n    }\n}\n\n/**\n * Result of content safety check.\n */\nexport interface ContentCheckResult {\n    safe: boolean;\n    labels: string[];\n    message?: string;\n}\n\n/**\n * TensorFlow toxicity prediction structure.\n */\ninterface ToxicityPrediction {\n    label: string;\n    results: Array<{\n        probabilities: Float32Array;\n        match: boolean | null;\n    }>;\n}\n",
            "properties": [
                {
                    "name": "labels",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 137
                },
                {
                    "name": "message",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 138
                },
                {
                    "name": "safe",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 136
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Result of content safety check.</p>\n",
            "rawdescription": "\n\nResult of content safety check.\n",
            "methods": [],
            "extends": []
        },
        {
            "name": "GoogleJwtPayload",
            "id": "interface-GoogleJwtPayload-b320d897681a3b0bfbb816f64314bcfddd9515ec40de82c68da245a6d2e9aa12989bddd0852ae8f0c7f86be270427c6381c82f306689ebeaa957139e2adf084a",
            "file": "src/app/core/services/auth.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal, PLATFORM_ID, inject } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { jwtDecode, JwtPayload } from 'jwt-decode';\n\ndeclare const google: any;\n\nexport interface GoogleUser {\n    id: string;\n    email: string;\n    name: string;\n    picture: string;\n    given_name?: string;\n    family_name?: string;\n}\n\n/**\n * JWT payload structure for Google Identity Services tokens.\n * Extends standard JWT claims with Google-specific user info.\n * \n * @see https://developers.google.com/identity/gsi/web/reference/js-reference#credential\n */\nexport interface GoogleJwtPayload extends JwtPayload {\n    /** User's email address */\n    email: string;\n    /** Whether the email is verified */\n    email_verified: boolean;\n    /** User's full name */\n    name: string;\n    /** URL to user's profile picture */\n    picture: string;\n    /** User's given (first) name */\n    given_name?: string;\n    /** User's family (last) name */\n    family_name?: string;\n}\n\n/**\n * Auth Service - Handles Google One Tap Sign-In using Google Identity Services.\n * \n * SETUP INSTRUCTIONS:\n * \n * 1. Go to Google Cloud Console:\n *    https://console.cloud.google.com/apis/credentials\n * \n * 2. Create an OAuth 2.0 Client ID:\n *    - Click \"Create Credentials\" > \"OAuth client ID\"\n *    - Select \"Web application\"\n *    - Name: \"Genkit Chat\"\n * \n * 3. Configure authorized origins:\n *    - Add: http://localhost:4200\n *    - Add: http://localhost:49230\n *    - Add your production domain\n * \n * 4. Copy the Client ID and set it:\n *    - Option A: Set GOOGLE_OAUTH_CLIENT_ID environment variable\n *    - Option B: Replace CLIENT_ID constant below\n * \n * 5. Ensure OAuth consent screen is configured:\n *    - Publishing status: Testing (or Production)\n *    - Add test users if in Testing mode\n * \n * Future: This will be extended to support Google Drive API for file attachments.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n    private platformId = inject(PLATFORM_ID);\n\n    // Set your Google OAuth Client ID here\n    // Get one from: https://console.cloud.google.com/apis/credentials\n    private readonly CLIENT_ID =\n        (typeof window !== 'undefined' && (window as any).__GOOGLE_OAUTH_CLIENT_ID__) ||\n        // Replace the empty string below with your Client ID:\n        '';\n\n    user = signal<GoogleUser | null>(null);\n    isInitialized = signal(false);\n    isLoading = signal(false);\n    demoMode = signal(false);\n\n    // Demo user for testing UI\n    private readonly DEMO_USER: GoogleUser = {\n        id: 'demo-user-123',\n        email: 'avyanna@genkit.dev',\n        name: 'Avyanna',\n        picture: 'https://lh3.googleusercontent.com/a/default-user=s96-c',\n        given_name: 'Avyanna',\n    };\n\n    constructor() {\n        if (isPlatformBrowser(this.platformId)) {\n            this.restoreDemoMode();\n            this.restoreSession();\n            this.initGoogleSignIn();\n        }\n    }\n\n    /**\n     * Toggle demo mode on/off.\n     * When enabled, simulates a signed-in user session.\n     */\n    toggleDemoMode(): void {\n        const newValue = !this.demoMode();\n        this.demoMode.set(newValue);\n        localStorage.setItem('gauth_demo_mode', String(newValue));\n\n        if (newValue) {\n            // Enable demo mode - sign in as demo user\n            this.user.set(this.DEMO_USER);\n            localStorage.setItem('gauth_user', JSON.stringify(this.DEMO_USER));\n        } else {\n            // Disable demo mode - sign out\n            this.user.set(null);\n            localStorage.removeItem('gauth_user');\n            localStorage.removeItem('gauth_token');\n        }\n    }\n\n    private restoreDemoMode(): void {\n        const stored = localStorage.getItem('gauth_demo_mode');\n        if (stored === 'true') {\n            this.demoMode.set(true);\n        }\n    }\n\n    private initGoogleSignIn(): void {\n        // Wait for Google Identity Services to load\n        const checkGoogle = setInterval(() => {\n            if (typeof google !== 'undefined' && google.accounts) {\n                clearInterval(checkGoogle);\n                this.setupGoogleSignIn();\n            }\n        }, 100);\n\n        // Timeout after 5 seconds\n        setTimeout(() => {\n            clearInterval(checkGoogle);\n            if (!this.isInitialized()) {\n                console.log('Google Identity Services did not load. Check if the GSI script is included in index.html');\n                this.isInitialized.set(true);\n            }\n        }, 5000);\n    }\n\n    private setupGoogleSignIn(): void {\n        if (!this.CLIENT_ID) {\n            console.log(`\n╔══════════════════════════════════════════════════════════════════════════╗\n║  Google Sign-In: Demo User                                                ║\n╠══════════════════════════════════════════════════════════════════════════╣\n║  No CLIENT_ID configured. Using demo user for testing.                    ║\n║                                                                           ║\n║  To enable real Google Sign-In:                                           ║\n║  1. Create OAuth Client ID at:                                            ║\n║     https://console.cloud.google.com/apis/credentials                     ║\n║  2. Add localhost origins (4200, 49230)                                   ║\n║  3. Set CLIENT_ID in auth.service.ts                                      ║\n╚══════════════════════════════════════════════════════════════════════════╝\n            `);\n            this.isInitialized.set(true);\n            return;\n        }\n\n        try {\n            google.accounts.id.initialize({\n                client_id: this.CLIENT_ID,\n                callback: (response: any) => this.handleCredentialResponse(response),\n                auto_select: true,        // Auto sign-in if one account\n                cancel_on_tap_outside: true,\n                itp_support: true,        // Support for Intelligent Tracking Prevention\n                prompt_parent_id: 'g_id_onload', // Parent element ID\n                context: 'signin',\n            });\n\n            this.isInitialized.set(true);\n            console.log('Google Sign-In initialized successfully');\n\n            // Show One Tap prompt if user is not signed in\n            if (!this.user()) {\n                this.showOneTap();\n            }\n        } catch (error) {\n            console.error('Failed to initialize Google Sign-In:', error);\n            this.isInitialized.set(true);\n        }\n    }\n\n    private showOneTap(): void {\n        if (!this.CLIENT_ID || typeof google === 'undefined') return;\n\n        google.accounts.id.prompt((notification: any) => {\n            if (notification.isDisplayed()) {\n                console.log('One Tap prompt displayed');\n            } else if (notification.isNotDisplayed()) {\n                console.log('One Tap not displayed:', notification.getNotDisplayedReason());\n            } else if (notification.isSkippedMoment()) {\n                console.log('One Tap skipped:', notification.getSkippedReason());\n            } else if (notification.isDismissedMoment()) {\n                console.log('One Tap dismissed:', notification.getDismissedReason());\n            }\n        });\n    }\n\n    private handleCredentialResponse(response: any): void {\n        if (response.credential) {\n            // Decode the JWT token to get user info\n            const payload = this.decodeJwt(response.credential);\n\n            const user: GoogleUser = {\n                id: payload.sub ?? payload.email,  // sub is the unique user ID\n                email: payload.email,\n                name: payload.name,\n                picture: payload.picture,\n                given_name: payload.given_name,\n                family_name: payload.family_name,\n            };\n\n            this.user.set(user);\n\n            // Store in localStorage for persistence\n            localStorage.setItem('gauth_user', JSON.stringify(user));\n            localStorage.setItem('gauth_token', response.credential);\n\n            console.log('User signed in:', payload.email);\n        }\n        this.isLoading.set(false);\n    }\n\n    /**\n     * Decode a JWT token to extract the payload using jwt-decode library.\n     * \n     * Uses the well-vetted jwt-decode library which properly handles:\n     * - Base64URL padding normalization\n     * - Safe JSON parsing with error handling  \n     * - Unicode character encoding\n     * - Malformed token detection\n     * \n     * JWT Authentication Flow::\n     * \n     *     User clicks \"Sign in with Google\"\n     *                    │\n     *                    ▼\n     *     ┌─────────────────────────────┐\n     *     │ Google Identity Services    │\n     *     │ (OAuth 2.0 / OpenID Connect)│\n     *     └─────────────┬───────────────┘\n     *                   │ Returns signed JWT\n     *                   ▼\n     *     ┌─────────────────────────────┐\n     *     │ jwt-decode (this method)    │\n     *     │ - Validates structure       │\n     *     │ - Decodes Base64URL payload │\n     *     │ - Parses JSON safely        │\n     *     └─────────────┬───────────────┘\n     *                   │ GoogleJwtPayload\n     *                   ▼\n     *     ┌─────────────────────────────┐\n     *     │ handleCredentialResponse    │\n     *     │ - Creates GoogleUser        │\n     *     │ - Updates UI state          │\n     *     │ - Persists to localStorage  │\n     *     └─────────────────────────────┘\n     * \n     * SECURITY NOTE: The token's cryptographic signature is validated by Google's\n     * servers during the OAuth flow. This decode is only for extracting user info\n     * for UI display, not for making security decisions.\n     * \n     * @param token - The JWT token string from Google Identity Services\n     * @returns The decoded payload with Google user claims\n     * @throws Error if the token is malformed or cannot be decoded\n     */\n    private decodeJwt(token: string): GoogleJwtPayload {\n        return jwtDecode<GoogleJwtPayload>(token);\n    }\n\n    /**\n     * Initiate sign-in flow.\n     * Shows One Tap if CLIENT_ID is configured, otherwise uses demo mode.\n     */\n    signIn(): void {\n        if (!this.CLIENT_ID) {\n            // Demo mode - show a mock user\n            this.user.set({\n                id: 'demo-user',\n                email: 'demo@genkit.dev',\n                name: 'Demo User',\n                picture: '',\n                given_name: 'Demo',\n            });\n            localStorage.setItem('gauth_user', JSON.stringify(this.user()));\n            return;\n        }\n\n        if (typeof google !== 'undefined' && google.accounts) {\n            this.isLoading.set(true);\n            google.accounts.id.prompt((notification: any) => {\n                if (notification.isNotDisplayed() || notification.isSkippedMoment()) {\n                    // One Tap was blocked (e.g., by browser settings)\n                    this.isLoading.set(false);\n                    console.log('One Tap blocked. Consider adding a fallback sign-in button.');\n                }\n            });\n        }\n    }\n\n    /**\n     * Sign out the current user.\n     */\n    signOut(): void {\n        if (typeof google !== 'undefined' && google.accounts && this.CLIENT_ID) {\n            google.accounts.id.disableAutoSelect();\n            // Revoke the token\n            const token = localStorage.getItem('gauth_token');\n            if (token) {\n                google.accounts.id.revoke(this.user()?.email || '', () => {\n                    console.log('Token revoked');\n                });\n            }\n        }\n\n        this.user.set(null);\n        localStorage.removeItem('gauth_user');\n        localStorage.removeItem('gauth_token');\n        console.log('User signed out');\n    }\n\n    /**\n     * Restore session from localStorage.\n     */\n    restoreSession(): void {\n        const stored = localStorage.getItem('gauth_user');\n        if (stored) {\n            try {\n                const user = JSON.parse(stored);\n                this.user.set(user);\n                console.log('Session restored for:', user.email);\n            } catch {\n                localStorage.removeItem('gauth_user');\n                localStorage.removeItem('gauth_token');\n            }\n        }\n    }\n\n    /**\n     * Check if user is signed in.\n     */\n    isSignedIn(): boolean {\n        return this.user() !== null;\n    }\n\n    /**\n     * Get initials for avatar display.\n     */\n    getInitials(): string {\n        const u = this.user();\n        if (!u) return '?';\n        if (u.given_name && u.family_name) {\n            return (u.given_name[0] + u.family_name[0]).toUpperCase();\n        }\n        return u.name?.split(' ').map(n => n[0]).join('').slice(0, 2).toUpperCase() || '?';\n    }\n\n    /**\n     * Get the stored OAuth token (for API calls).\n     */\n    getToken(): string | null {\n        return localStorage.getItem('gauth_token');\n    }\n\n    /**\n     * Update the user's display name.\n     */\n    updateName(givenName: string): void {\n        const currentUser = this.user();\n        if (currentUser) {\n            const updatedUser = {\n                ...currentUser,\n                given_name: givenName,\n                name: givenName + (currentUser.family_name ? ' ' + currentUser.family_name : ''),\n            };\n            this.user.set(updatedUser);\n            localStorage.setItem('gauth_user', JSON.stringify(updatedUser));\n        }\n    }\n}\n",
            "properties": [
                {
                    "name": "email",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>User&#39;s email address</p>\n",
                    "line": 24,
                    "rawdescription": "\nUser's email address"
                },
                {
                    "name": "email_verified",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the email is verified</p>\n",
                    "line": 26,
                    "rawdescription": "\nWhether the email is verified"
                },
                {
                    "name": "family_name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>User&#39;s family (last) name</p>\n",
                    "line": 34,
                    "rawdescription": "\nUser's family (last) name"
                },
                {
                    "name": "given_name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>User&#39;s given (first) name</p>\n",
                    "line": 32,
                    "rawdescription": "\nUser's given (first) name"
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>User&#39;s full name</p>\n",
                    "line": 28,
                    "rawdescription": "\nUser's full name"
                },
                {
                    "name": "picture",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>URL to user&#39;s profile picture</p>\n",
                    "line": 30,
                    "rawdescription": "\nURL to user's profile picture"
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>JWT payload structure for Google Identity Services tokens.\nExtends standard JWT claims with Google-specific user info.</p>\n<p>See <a href=\"https://developers.google.com/identity/gsi/web/reference/js-reference#credential\">https://developers.google.com/identity/gsi/web/reference/js-reference#credential</a></p>\n",
            "rawdescription": "\n\nJWT payload structure for Google Identity Services tokens.\nExtends standard JWT claims with Google-specific user info.\n\nSee https://developers.google.com/identity/gsi/web/reference/js-reference#credential\n",
            "methods": [],
            "extends": [
                "JwtPayload"
            ]
        },
        {
            "name": "GoogleUser",
            "id": "interface-GoogleUser-b320d897681a3b0bfbb816f64314bcfddd9515ec40de82c68da245a6d2e9aa12989bddd0852ae8f0c7f86be270427c6381c82f306689ebeaa957139e2adf084a",
            "file": "src/app/core/services/auth.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal, PLATFORM_ID, inject } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { jwtDecode, JwtPayload } from 'jwt-decode';\n\ndeclare const google: any;\n\nexport interface GoogleUser {\n    id: string;\n    email: string;\n    name: string;\n    picture: string;\n    given_name?: string;\n    family_name?: string;\n}\n\n/**\n * JWT payload structure for Google Identity Services tokens.\n * Extends standard JWT claims with Google-specific user info.\n * \n * @see https://developers.google.com/identity/gsi/web/reference/js-reference#credential\n */\nexport interface GoogleJwtPayload extends JwtPayload {\n    /** User's email address */\n    email: string;\n    /** Whether the email is verified */\n    email_verified: boolean;\n    /** User's full name */\n    name: string;\n    /** URL to user's profile picture */\n    picture: string;\n    /** User's given (first) name */\n    given_name?: string;\n    /** User's family (last) name */\n    family_name?: string;\n}\n\n/**\n * Auth Service - Handles Google One Tap Sign-In using Google Identity Services.\n * \n * SETUP INSTRUCTIONS:\n * \n * 1. Go to Google Cloud Console:\n *    https://console.cloud.google.com/apis/credentials\n * \n * 2. Create an OAuth 2.0 Client ID:\n *    - Click \"Create Credentials\" > \"OAuth client ID\"\n *    - Select \"Web application\"\n *    - Name: \"Genkit Chat\"\n * \n * 3. Configure authorized origins:\n *    - Add: http://localhost:4200\n *    - Add: http://localhost:49230\n *    - Add your production domain\n * \n * 4. Copy the Client ID and set it:\n *    - Option A: Set GOOGLE_OAUTH_CLIENT_ID environment variable\n *    - Option B: Replace CLIENT_ID constant below\n * \n * 5. Ensure OAuth consent screen is configured:\n *    - Publishing status: Testing (or Production)\n *    - Add test users if in Testing mode\n * \n * Future: This will be extended to support Google Drive API for file attachments.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n    private platformId = inject(PLATFORM_ID);\n\n    // Set your Google OAuth Client ID here\n    // Get one from: https://console.cloud.google.com/apis/credentials\n    private readonly CLIENT_ID =\n        (typeof window !== 'undefined' && (window as any).__GOOGLE_OAUTH_CLIENT_ID__) ||\n        // Replace the empty string below with your Client ID:\n        '';\n\n    user = signal<GoogleUser | null>(null);\n    isInitialized = signal(false);\n    isLoading = signal(false);\n    demoMode = signal(false);\n\n    // Demo user for testing UI\n    private readonly DEMO_USER: GoogleUser = {\n        id: 'demo-user-123',\n        email: 'avyanna@genkit.dev',\n        name: 'Avyanna',\n        picture: 'https://lh3.googleusercontent.com/a/default-user=s96-c',\n        given_name: 'Avyanna',\n    };\n\n    constructor() {\n        if (isPlatformBrowser(this.platformId)) {\n            this.restoreDemoMode();\n            this.restoreSession();\n            this.initGoogleSignIn();\n        }\n    }\n\n    /**\n     * Toggle demo mode on/off.\n     * When enabled, simulates a signed-in user session.\n     */\n    toggleDemoMode(): void {\n        const newValue = !this.demoMode();\n        this.demoMode.set(newValue);\n        localStorage.setItem('gauth_demo_mode', String(newValue));\n\n        if (newValue) {\n            // Enable demo mode - sign in as demo user\n            this.user.set(this.DEMO_USER);\n            localStorage.setItem('gauth_user', JSON.stringify(this.DEMO_USER));\n        } else {\n            // Disable demo mode - sign out\n            this.user.set(null);\n            localStorage.removeItem('gauth_user');\n            localStorage.removeItem('gauth_token');\n        }\n    }\n\n    private restoreDemoMode(): void {\n        const stored = localStorage.getItem('gauth_demo_mode');\n        if (stored === 'true') {\n            this.demoMode.set(true);\n        }\n    }\n\n    private initGoogleSignIn(): void {\n        // Wait for Google Identity Services to load\n        const checkGoogle = setInterval(() => {\n            if (typeof google !== 'undefined' && google.accounts) {\n                clearInterval(checkGoogle);\n                this.setupGoogleSignIn();\n            }\n        }, 100);\n\n        // Timeout after 5 seconds\n        setTimeout(() => {\n            clearInterval(checkGoogle);\n            if (!this.isInitialized()) {\n                console.log('Google Identity Services did not load. Check if the GSI script is included in index.html');\n                this.isInitialized.set(true);\n            }\n        }, 5000);\n    }\n\n    private setupGoogleSignIn(): void {\n        if (!this.CLIENT_ID) {\n            console.log(`\n╔══════════════════════════════════════════════════════════════════════════╗\n║  Google Sign-In: Demo User                                                ║\n╠══════════════════════════════════════════════════════════════════════════╣\n║  No CLIENT_ID configured. Using demo user for testing.                    ║\n║                                                                           ║\n║  To enable real Google Sign-In:                                           ║\n║  1. Create OAuth Client ID at:                                            ║\n║     https://console.cloud.google.com/apis/credentials                     ║\n║  2. Add localhost origins (4200, 49230)                                   ║\n║  3. Set CLIENT_ID in auth.service.ts                                      ║\n╚══════════════════════════════════════════════════════════════════════════╝\n            `);\n            this.isInitialized.set(true);\n            return;\n        }\n\n        try {\n            google.accounts.id.initialize({\n                client_id: this.CLIENT_ID,\n                callback: (response: any) => this.handleCredentialResponse(response),\n                auto_select: true,        // Auto sign-in if one account\n                cancel_on_tap_outside: true,\n                itp_support: true,        // Support for Intelligent Tracking Prevention\n                prompt_parent_id: 'g_id_onload', // Parent element ID\n                context: 'signin',\n            });\n\n            this.isInitialized.set(true);\n            console.log('Google Sign-In initialized successfully');\n\n            // Show One Tap prompt if user is not signed in\n            if (!this.user()) {\n                this.showOneTap();\n            }\n        } catch (error) {\n            console.error('Failed to initialize Google Sign-In:', error);\n            this.isInitialized.set(true);\n        }\n    }\n\n    private showOneTap(): void {\n        if (!this.CLIENT_ID || typeof google === 'undefined') return;\n\n        google.accounts.id.prompt((notification: any) => {\n            if (notification.isDisplayed()) {\n                console.log('One Tap prompt displayed');\n            } else if (notification.isNotDisplayed()) {\n                console.log('One Tap not displayed:', notification.getNotDisplayedReason());\n            } else if (notification.isSkippedMoment()) {\n                console.log('One Tap skipped:', notification.getSkippedReason());\n            } else if (notification.isDismissedMoment()) {\n                console.log('One Tap dismissed:', notification.getDismissedReason());\n            }\n        });\n    }\n\n    private handleCredentialResponse(response: any): void {\n        if (response.credential) {\n            // Decode the JWT token to get user info\n            const payload = this.decodeJwt(response.credential);\n\n            const user: GoogleUser = {\n                id: payload.sub ?? payload.email,  // sub is the unique user ID\n                email: payload.email,\n                name: payload.name,\n                picture: payload.picture,\n                given_name: payload.given_name,\n                family_name: payload.family_name,\n            };\n\n            this.user.set(user);\n\n            // Store in localStorage for persistence\n            localStorage.setItem('gauth_user', JSON.stringify(user));\n            localStorage.setItem('gauth_token', response.credential);\n\n            console.log('User signed in:', payload.email);\n        }\n        this.isLoading.set(false);\n    }\n\n    /**\n     * Decode a JWT token to extract the payload using jwt-decode library.\n     * \n     * Uses the well-vetted jwt-decode library which properly handles:\n     * - Base64URL padding normalization\n     * - Safe JSON parsing with error handling  \n     * - Unicode character encoding\n     * - Malformed token detection\n     * \n     * JWT Authentication Flow::\n     * \n     *     User clicks \"Sign in with Google\"\n     *                    │\n     *                    ▼\n     *     ┌─────────────────────────────┐\n     *     │ Google Identity Services    │\n     *     │ (OAuth 2.0 / OpenID Connect)│\n     *     └─────────────┬───────────────┘\n     *                   │ Returns signed JWT\n     *                   ▼\n     *     ┌─────────────────────────────┐\n     *     │ jwt-decode (this method)    │\n     *     │ - Validates structure       │\n     *     │ - Decodes Base64URL payload │\n     *     │ - Parses JSON safely        │\n     *     └─────────────┬───────────────┘\n     *                   │ GoogleJwtPayload\n     *                   ▼\n     *     ┌─────────────────────────────┐\n     *     │ handleCredentialResponse    │\n     *     │ - Creates GoogleUser        │\n     *     │ - Updates UI state          │\n     *     │ - Persists to localStorage  │\n     *     └─────────────────────────────┘\n     * \n     * SECURITY NOTE: The token's cryptographic signature is validated by Google's\n     * servers during the OAuth flow. This decode is only for extracting user info\n     * for UI display, not for making security decisions.\n     * \n     * @param token - The JWT token string from Google Identity Services\n     * @returns The decoded payload with Google user claims\n     * @throws Error if the token is malformed or cannot be decoded\n     */\n    private decodeJwt(token: string): GoogleJwtPayload {\n        return jwtDecode<GoogleJwtPayload>(token);\n    }\n\n    /**\n     * Initiate sign-in flow.\n     * Shows One Tap if CLIENT_ID is configured, otherwise uses demo mode.\n     */\n    signIn(): void {\n        if (!this.CLIENT_ID) {\n            // Demo mode - show a mock user\n            this.user.set({\n                id: 'demo-user',\n                email: 'demo@genkit.dev',\n                name: 'Demo User',\n                picture: '',\n                given_name: 'Demo',\n            });\n            localStorage.setItem('gauth_user', JSON.stringify(this.user()));\n            return;\n        }\n\n        if (typeof google !== 'undefined' && google.accounts) {\n            this.isLoading.set(true);\n            google.accounts.id.prompt((notification: any) => {\n                if (notification.isNotDisplayed() || notification.isSkippedMoment()) {\n                    // One Tap was blocked (e.g., by browser settings)\n                    this.isLoading.set(false);\n                    console.log('One Tap blocked. Consider adding a fallback sign-in button.');\n                }\n            });\n        }\n    }\n\n    /**\n     * Sign out the current user.\n     */\n    signOut(): void {\n        if (typeof google !== 'undefined' && google.accounts && this.CLIENT_ID) {\n            google.accounts.id.disableAutoSelect();\n            // Revoke the token\n            const token = localStorage.getItem('gauth_token');\n            if (token) {\n                google.accounts.id.revoke(this.user()?.email || '', () => {\n                    console.log('Token revoked');\n                });\n            }\n        }\n\n        this.user.set(null);\n        localStorage.removeItem('gauth_user');\n        localStorage.removeItem('gauth_token');\n        console.log('User signed out');\n    }\n\n    /**\n     * Restore session from localStorage.\n     */\n    restoreSession(): void {\n        const stored = localStorage.getItem('gauth_user');\n        if (stored) {\n            try {\n                const user = JSON.parse(stored);\n                this.user.set(user);\n                console.log('Session restored for:', user.email);\n            } catch {\n                localStorage.removeItem('gauth_user');\n                localStorage.removeItem('gauth_token');\n            }\n        }\n    }\n\n    /**\n     * Check if user is signed in.\n     */\n    isSignedIn(): boolean {\n        return this.user() !== null;\n    }\n\n    /**\n     * Get initials for avatar display.\n     */\n    getInitials(): string {\n        const u = this.user();\n        if (!u) return '?';\n        if (u.given_name && u.family_name) {\n            return (u.given_name[0] + u.family_name[0]).toUpperCase();\n        }\n        return u.name?.split(' ').map(n => n[0]).join('').slice(0, 2).toUpperCase() || '?';\n    }\n\n    /**\n     * Get the stored OAuth token (for API calls).\n     */\n    getToken(): string | null {\n        return localStorage.getItem('gauth_token');\n    }\n\n    /**\n     * Update the user's display name.\n     */\n    updateName(givenName: string): void {\n        const currentUser = this.user();\n        if (currentUser) {\n            const updatedUser = {\n                ...currentUser,\n                given_name: givenName,\n                name: givenName + (currentUser.family_name ? ' ' + currentUser.family_name : ''),\n            };\n            this.user.set(updatedUser);\n            localStorage.setItem('gauth_user', JSON.stringify(updatedUser));\n        }\n    }\n}\n",
            "properties": [
                {
                    "name": "email",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "family_name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 13
                },
                {
                    "name": "given_name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "picture",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Greeting",
            "id": "interface-Greeting-aff0eb6f8cf2486905c1702c8dcd38dac328f92231d3235cbb2cf3d9a539d4278fd45741883df014dd67c5e649f737488f5665e5ae5c7d891eca0f8b475703dd",
            "file": "src/app/features/chat/components/welcome-screen/welcome-screen.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, signal, OnInit, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { TranslateModule } from '@ngx-translate/core';\n\nexport interface Greeting {\n  text: string;\n  lang: string;\n  dir: 'ltr' | 'rtl';\n  anim: 'type' | 'slide';\n}\n\nexport interface QuickAction {\n  icon: string;\n  labelKey: string;\n  prompt: string;\n  color: string;\n}\n\n@Component({\n  selector: 'app-welcome-screen',\n  standalone: true,\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    TranslateModule,\n  ],\n  template: `\n    <div class=\"welcome-header\">\n      <div class=\"welcome-logo\">\n        <img [src]=\"logoUrl()\" [alt]=\"logoAlt()\">\n      </div>\n      <h1 class=\"welcome-title\" \n          [class.rtl]=\"currentGreeting().dir === 'rtl'\"\n          [class.slide-in]=\"currentGreeting().anim === 'slide'\">\n        <span class=\"typewriter-text\">{{ typewriterText() }}</span><span class=\"cursor\" [class.visible]=\"showCursor()\">|</span>\n      </h1>\n      <p class=\"welcome-subtitle\">{{ 'chat.greetingSubtitle' | translate }}</p>\n    </div>\n    \n    <!-- Quick Action Chips -->\n    <div class=\"quick-chips\">\n      @for (action of quickActions(); track action.labelKey) {\n        <button mat-stroked-button \n                class=\"quick-chip\"\n                (click)=\"actionSelected.emit(action.prompt)\">\n          <mat-icon class=\"chip-icon\" [style.color]=\"action.color\">{{ action.icon }}</mat-icon>\n          <span>{{ action.labelKey | translate }}</span>\n        </button>\n      }\n    </div>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      text-align: center;\n      padding: 24px 16px;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .welcome-header {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin-bottom: 32px;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n      }\n    }\n\n    .welcome-title {\n      font-size: 2.5rem;\n      font-weight: 400;\n      margin: 0 0 8px 0;\n      color: var(--_on-surface);\n      min-height: 60px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .typewriter-text {\n        display: inline;\n      }\n      \n      .cursor {\n        display: inline-block;\n        width: 2px;\n        height: 1em;\n        background: var(--_primary);\n        margin-left: 2px;\n        opacity: 0;\n        animation: blink 1s step-end infinite;\n        \n        &.visible {\n          opacity: 1;\n        }\n      }\n    }\n\n    .welcome-subtitle {\n      font-size: 1.1rem;\n      color: var(--_on-surface-variant);\n      margin: 0;\n    }\n\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 12px;\n      justify-content: center;\n      max-width: 600px;\n    }\n\n    .quick-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-radius: 24px;\n      border: 1px solid var(--_outline-variant);\n      background: transparent;\n      color: var(--_on-surface);\n      font-size: 14px;\n      transition: all 0.2s ease;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n        border-color: var(--_primary);\n      }\n      \n      .chip-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    @keyframes blink {\n      50% { opacity: 0; }\n    }\n  `]\n})\nexport class WelcomeScreenComponent implements OnInit, OnDestroy {\n  /** List of greetings to cycle through */\n  greetings = input.required<Greeting[]>();\n\n  /** Quick action buttons */\n  quickActions = input.required<QuickAction[]>();\n\n  /** Logo URL (configurable for portability) */\n  logoUrl = input<string>('genkit-logo.png');\n\n  /** Logo alt text */\n  logoAlt = input<string>('Genkit');\n\n  /** Emitted when a quick action is selected */\n  actionSelected = output<string>();\n\n  /** Current greeting index */\n  currentGreetingIndex = signal(0);\n\n  /** Current typewriter text */\n  typewriterText = signal('');\n\n  /** Whether to show the cursor */\n  showCursor = signal(true);\n\n  private greetingInterval?: ReturnType<typeof setInterval>;\n  private typeInterval?: ReturnType<typeof setTimeout>;\n  private eraseInterval?: ReturnType<typeof setTimeout>;\n\n  /** Get the current greeting based on index */\n  currentGreeting(): Greeting {\n    return this.greetings()[this.currentGreetingIndex()];\n  }\n\n  ngOnInit(): void {\n    this.startGreetingCarousel();\n  }\n\n  ngOnDestroy(): void {\n    if (this.greetingInterval) clearInterval(this.greetingInterval);\n    if (this.typeInterval) clearTimeout(this.typeInterval);\n    if (this.eraseInterval) clearTimeout(this.eraseInterval);\n  }\n\n  private startGreetingCarousel(): void {\n    const greetings = this.greetings();\n    if (greetings.length === 0) return;\n\n    // Type the first greeting\n    this.typeGreeting(greetings[0].text, greetings[0].anim, greetings[0].dir);\n\n    // Set up interval to cycle through greetings\n    this.greetingInterval = setInterval(() => {\n      this.eraseGreeting(() => {\n        const nextIndex = (this.currentGreetingIndex() + 1) % greetings.length;\n        this.currentGreetingIndex.set(nextIndex);\n        const nextGreeting = greetings[nextIndex];\n        this.typeGreeting(nextGreeting.text, nextGreeting.anim, nextGreeting.dir);\n      }, this.currentGreeting().anim);\n    }, 4000);\n  }\n\n  private typeGreeting(greetingText: string, anim: 'type' | 'slide' = 'type', dir: 'ltr' | 'rtl' = 'ltr'): void {\n    this.showCursor.set(true);\n\n    if (anim === 'slide') {\n      // For slide animation, show full text immediately\n      this.typewriterText.set(greetingText);\n      return;\n    }\n\n    // Typewriter effect\n    let charIndex = 0;\n    const typeNext = () => {\n      if (charIndex <= greetingText.length) {\n        this.typewriterText.set(greetingText.substring(0, charIndex));\n        charIndex++;\n        this.typeInterval = setTimeout(typeNext, 50 + Math.random() * 30);\n      }\n    };\n    typeNext();\n  }\n\n  private eraseGreeting(callback: () => void, anim: 'type' | 'slide' = 'type'): void {\n    if (anim === 'slide') {\n      // For slide, just clear and callback\n      this.typewriterText.set('');\n      callback();\n      return;\n    }\n\n    // Erase effect\n    const currentText = this.typewriterText();\n    let charIndex = currentText.length;\n\n    const eraseNext = () => {\n      if (charIndex >= 0) {\n        this.typewriterText.set(currentText.substring(0, charIndex));\n        charIndex--;\n        this.eraseInterval = setTimeout(eraseNext, 30);\n      } else {\n        callback();\n      }\n    };\n    eraseNext();\n  }\n}\n",
            "properties": [
                {
                    "name": "anim",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"type\" | \"slide\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 39
                },
                {
                    "name": "dir",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"ltr\" | \"rtl\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38
                },
                {
                    "name": "lang",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                },
                {
                    "name": "text",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 36
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Language",
            "id": "interface-Language-88b5509f3943826c70d2e833f7910ea4903d19e0bddf37f6890540dcddb0001defc92b4bc0e7c1ca7b35e5594bc7ff2306c686edffa1ea1bd25a0f35b1305c7c",
            "file": "src/app/core/services/language.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal, inject } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\n\n/**\n * Supported language configuration.\n */\nexport interface Language {\n    code: string;\n    name: string;\n    nativeName: string;\n    direction: 'ltr' | 'rtl';\n    flag: string;\n}\n\n/**\n * Available languages for the application.\n * Includes major global languages and Indian languages.\n */\nexport const SUPPORTED_LANGUAGES: Language[] = [\n    // Global Languages\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'pt', name: 'Portuguese', nativeName: 'Português', direction: 'ltr', flag: '🇧🇷' },\n    { code: 'it', name: 'Italian', nativeName: 'Italiano', direction: 'ltr', flag: '🇮🇹' },\n    { code: 'ru', name: 'Russian', nativeName: 'Русский', direction: 'ltr', flag: '🇷🇺' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n\n    // East Asian Languages\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'ko', name: 'Korean', nativeName: '한국어', direction: 'ltr', flag: '🇰🇷' },\n\n    // Indian Languages\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'bn', name: 'Bengali', nativeName: 'বাংলা', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'te', name: 'Telugu', nativeName: 'తెలుగు', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'ta', name: 'Tamil', nativeName: 'தமிழ்', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'mr', name: 'Marathi', nativeName: 'मराठी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'gu', name: 'Gujarati', nativeName: 'ગુજરાતી', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'kn', name: 'Kannada', nativeName: 'ಕನ್ನಡ', direction: 'ltr', flag: '🇮🇳' },\n];\n\nconst STORAGE_KEY = 'genkit-chat-language';\n\n/**\n * Language service for internationalization.\n * Manages language selection and persists preference to localStorage.\n * Supports 'system' as a special value that auto-detects browser language.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class LanguageService {\n    private translate = inject(TranslateService);\n\n    /** Current language preference ('system' or a language code) */\n    languagePreference = signal<string>('system');\n\n    /** Resolved language code (the actual language being used) */\n    currentLanguage = signal<string>('en');\n\n    /** Filter text for language search */\n    languageFilter = signal<string>('');\n\n    /** All supported languages sorted lexicographically by English name */\n    readonly languages = [...SUPPORTED_LANGUAGES].sort((a, b) => a.name.localeCompare(b.name));\n\n    /** Filtered languages based on search */\n    get filteredLanguages(): Language[] {\n        const filter = this.languageFilter().toLowerCase();\n        if (!filter) return this.languages;\n        return this.languages.filter(lang =>\n            lang.name.toLowerCase().includes(filter) ||\n            lang.nativeName.toLowerCase().includes(filter) ||\n            lang.code.toLowerCase().includes(filter)\n        );\n    }\n\n    constructor() {\n        this.initLanguage();\n    }\n\n    /**\n     * Initialize language from storage or default to system.\n     */\n    private initLanguage(): void {\n        // Set available languages\n        this.translate.addLangs(this.languages.map(l => l.code));\n        this.translate.setDefaultLang('en');\n\n        // Try to restore from storage\n        const stored = localStorage.getItem(STORAGE_KEY);\n        if (stored) {\n            this.setLanguagePreference(stored);\n        } else {\n            // Default to system\n            this.setLanguagePreference('system');\n        }\n    }\n\n    /**\n     * Set the language preference ('system' or a specific language code).\n     */\n    setLanguagePreference(preference: string): void {\n        this.languagePreference.set(preference);\n        localStorage.setItem(STORAGE_KEY, preference);\n\n        let code: string;\n        if (preference === 'system') {\n            // Auto-detect from browser\n            const browserLang = this.translate.getBrowserLang();\n            code = (browserLang && this.languages.find(l => l.code === browserLang))\n                ? browserLang\n                : 'en';\n        } else {\n            code = this.languages.find(l => l.code === preference) ? preference : 'en';\n        }\n\n        this.applyLanguage(code);\n    }\n\n    /**\n     * Apply a specific language code.\n     */\n    private applyLanguage(code: string): void {\n        const lang = this.languages.find(l => l.code === code) || this.languages[0];\n\n        this.translate.use(code);\n        this.currentLanguage.set(code);\n\n        // Update document direction for RTL languages\n        document.documentElement.dir = lang.direction;\n        document.documentElement.lang = code;\n    }\n\n    /**\n     * Get the current language object.\n     */\n    getCurrentLanguage(): Language {\n        return this.languages.find(l => l.code === this.currentLanguage()) || this.languages[0];\n    }\n\n    /**\n     * Get language by code.\n     */\n    getLanguage(code: string): Language | undefined {\n        return this.languages.find(l => l.code === code);\n    }\n\n    /**\n     * Get display label for current preference.\n     */\n    getLanguageLabel(): string {\n        const pref = this.languagePreference();\n        if (pref === 'system') {\n            return `System (${this.getCurrentLanguage().nativeName})`;\n        }\n        return this.getCurrentLanguage().nativeName;\n    }\n}\n",
            "properties": [
                {
                    "name": "code",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 24
                },
                {
                    "name": "direction",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"ltr\" | \"rtl\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 27
                },
                {
                    "name": "flag",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 28
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 25
                },
                {
                    "name": "nativeName",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 26
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Supported language configuration.</p>\n",
            "rawdescription": "\n\nSupported language configuration.\n",
            "methods": [],
            "extends": []
        },
        {
            "name": "Language",
            "id": "interface-Language-aba1981548aea57fa639019fb4f3877b17de869607ee0059d34ce9a7c75b467ab70d7bb0d63414bbd02f6ec88ea81e7fe4e9a723aee2a237b3cec79742eb3f9e-1",
            "file": "src/app/shared/components/language-selector/language-selector.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { TranslateModule } from '@ngx-translate/core';\n\n/**\n * Language configuration interface.\n * Exported for use by host applications.\n */\nexport interface Language {\n    code: string;\n    name: string;\n    nativeName: string;\n    direction: 'ltr' | 'rtl';\n    flag: string;\n}\n\n/**\n * Default supported languages.\n * Can be overridden by passing custom languages via input.\n */\nexport const DEFAULT_LANGUAGES: Language[] = [\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n];\n\n@Component({\n    selector: 'app-language-selector',\n    standalone: true,\n    imports: [\n        CommonModule,\n        FormsModule,\n        MatButtonModule,\n        MatIconModule,\n        MatMenuModule,\n        MatDividerModule,\n        TranslateModule,\n    ],\n    template: `\n    <button mat-button \n            class=\"language-select-btn\"\n            [matMenuTriggerFor]=\"languageMenu\"\n            (menuOpened)=\"onMenuOpened()\">\n      <span class=\"language-flag\">{{ getCurrentLanguage()?.flag || '🌐' }}</span>\n      <span class=\"language-label\">{{ getDisplayLabel() }}</span>\n      <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n    </button>\n    \n    <mat-menu #languageMenu=\"matMenu\" class=\"language-panel\" xPosition=\"before\">\n      <!-- Search Input -->\n      <div class=\"language-search\" (click)=\"$event.stopPropagation()\">\n        <mat-icon>search</mat-icon>\n        <input type=\"text\" \n               [placeholder]=\"'language.searchLanguages' | translate\"\n               [(ngModel)]=\"searchQuery\"\n               (keydown)=\"$event.stopPropagation()\">\n        @if (searchQuery) {\n          <button mat-icon-button class=\"clear-search\" (click)=\"clearSearch()\">\n            <mat-icon>close</mat-icon>\n          </button>\n        }\n      </div>\n      \n      <!-- System Option -->\n      @if (showSystemOption() && !searchQuery) {\n        <button mat-menu-item \n                class=\"language-item system-item\"\n                [class.selected]=\"selectedLanguage() === 'system'\"\n                (click)=\"selectLanguage('system')\">\n          <span class=\"language-flag\">🌐</span>\n          <span class=\"language-name\">{{ 'theme.system' | translate }}</span>\n          @if (selectedLanguage() === 'system') {\n            <mat-icon class=\"check-icon\">check</mat-icon>\n          }\n        </button>\n        <mat-divider></mat-divider>\n      }\n      \n      <!-- Language List -->\n      <div class=\"language-list\">\n        @for (lang of filteredLanguages(); track lang.code) {\n          <button mat-menu-item \n                  class=\"language-item\"\n                  [class.selected]=\"selectedLanguage() === lang.code\"\n                  [class.rtl]=\"lang.direction === 'rtl'\"\n                  (click)=\"selectLanguage(lang.code)\">\n            <span class=\"language-flag\">{{ lang.flag }}</span>\n            <span class=\"language-name\">{{ lang.nativeName }}</span>\n            <span class=\"language-english\">{{ lang.name }}</span>\n            @if (selectedLanguage() === lang.code) {\n              <mat-icon class=\"check-icon\">check</mat-icon>\n            }\n          </button>\n        } @empty {\n          <div class=\"no-results\">{{ 'language.noLanguagesFound' | translate }}</div>\n        }\n      </div>\n    </mat-menu>\n  `,\n    styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .language-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .language-flag {\n      font-size: 18px;\n    }\n\n    .language-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .language-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .language-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .language-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .language-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .language-flag {\n        font-size: 20px;\n      }\n      \n      .language-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .language-english {\n        font-size: 12px;\n        color: var(--_on-surface-variant);\n      }\n      \n      .check-icon {\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n\n    .system-item {\n      .language-name {\n        font-style: italic;\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  `]\n})\nexport class LanguageSelectorComponent {\n    /** List of available languages */\n    languages = input<Language[]>(DEFAULT_LANGUAGES);\n\n    /** Currently selected language code (or 'system') */\n    selectedLanguage = input<string>('en');\n\n    /** Whether to show the 'System' option */\n    showSystemOption = input<boolean>(true);\n\n    /** Emitted when a language is selected */\n    languageSelected = output<string>();\n\n    /** Search query for filtering languages */\n    searchQuery = '';\n\n    /** Filtered languages based on search */\n    filteredLanguages = computed(() => {\n        const query = this.searchQuery.toLowerCase();\n        if (!query) return this.languages();\n\n        return this.languages().filter(lang =>\n            lang.name.toLowerCase().includes(query) ||\n            lang.nativeName.toLowerCase().includes(query) ||\n            lang.code.toLowerCase().includes(query)\n        );\n    });\n\n    onMenuOpened(): void {\n        this.searchQuery = '';\n    }\n\n    clearSearch(): void {\n        this.searchQuery = '';\n    }\n\n    selectLanguage(code: string): void {\n        this.languageSelected.emit(code);\n    }\n\n    getCurrentLanguage(): Language | undefined {\n        const code = this.selectedLanguage();\n        if (code === 'system') return undefined;\n        return this.languages().find(l => l.code === code);\n    }\n\n    getDisplayLabel(): string {\n        const code = this.selectedLanguage();\n        if (code === 'system') return 'System';\n        const lang = this.languages().find(l => l.code === code);\n        return lang?.nativeName || code;\n    }\n}\n",
            "properties": [
                {
                    "name": "code",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 44
                },
                {
                    "name": "direction",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"ltr\" | \"rtl\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47
                },
                {
                    "name": "flag",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 48
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 45
                },
                {
                    "name": "nativeName",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 46
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Language configuration interface.\nExported for use by host applications.</p>\n",
            "rawdescription": "\n\nLanguage configuration interface.\nExported for use by host applications.\n",
            "methods": [],
            "extends": [],
            "isDuplicate": true,
            "duplicateId": 1,
            "duplicateName": "Language-1"
        },
        {
            "name": "Message",
            "id": "interface-Message-b8fb92b258013208a1fd0531caf2980a9aad7454d302fda4e5b7f176a5752e338e7aca4d561afc38f6e2a3b47db471ee161c48afac4da61f444e5de8938e6482",
            "file": "src/app/core/services/chat.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, effect } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface Message {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: Date;\n    model?: string;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface ChatRequest {\n    message: string;\n    model: string;\n    history?: { role: string; content: string }[];\n}\n\nexport interface ChatResponse {\n    response: string;\n    model: string;\n    latency_ms: number;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface CompareRequest {\n    prompt: string;\n    models: string[];\n}\n\nexport interface CompareResponse {\n    prompt: string;\n    responses: {\n        model: string;\n        response: string | null;\n        latency_ms: number;\n        error: string | null;\n    }[];\n}\n\nexport interface QueuedPrompt {\n    id: string;\n    content: string;\n    model: string;\n    timestamp: Date;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ChatService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n\n    messages = signal<Message[]>([]);\n    isLoading = signal(false);\n\n    // Prompt queue\n    promptQueue = signal<QueuedPrompt[]>([]);\n    private isProcessingQueue = false;\n\n    // Streaming mode (load from preferences)\n    streamingMode = signal(this.preferencesService.streamingMode);\n\n    // Markdown rendering mode (load from preferences)\n    markdownMode = signal(this.preferencesService.markdownMode);\n\n    constructor() {\n        // Persist streaming mode changes\n        effect(() => {\n            this.preferencesService.setStreamingMode(this.streamingMode());\n        });\n\n        // Persist markdown mode changes\n        effect(() => {\n            this.preferencesService.setMarkdownMode(this.markdownMode());\n        });\n    }\n\n    sendMessage(message: string, model: string): Observable<ChatResponse> {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        return this.http.post<ChatResponse>(`${this.apiUrl}/chat`, {\n            message,\n            model,\n            history,\n        }).pipe(\n            catchError(error => {\n                console.error('Chat error:', error);\n                const errorMessage = error?.error?.detail || error?.error?.message || error?.message || 'Unknown error';\n                const errorDetails = JSON.stringify(error, null, 2);\n                return of({\n                    response: `Error: ${errorMessage}`,\n                    model,\n                    latency_ms: 0,\n                    isError: true,\n                    errorDetails\n                });\n            }),\n        );\n    }\n\n    addAssistantMessage(response: ChatResponse): void {\n        this.messages.update(msgs => [\n            ...msgs,\n            {\n                role: 'assistant',\n                content: response.response,\n                timestamp: new Date(),\n                model: response.model,\n                isError: response.isError,\n                errorDetails: response.errorDetails,\n            },\n        ]);\n        this.isLoading.set(false);\n        // Process next queued prompt if any\n        this.processNextInQueue();\n    }\n\n    /**\n     * Process the next item in the queue automatically after a response is received.\n     */\n    private processNextInQueue(): void {\n        if (this.promptQueue().length > 0 && !this.isLoading()) {\n            const next = this.promptQueue()[0];\n            this.removeFromQueue(next.id);\n\n            if (this.streamingMode()) {\n                this.sendStreamMessage(next.content, next.model, () => {\n                    this.processNextInQueue();\n                });\n            } else {\n                this.sendMessage(next.content, next.model).subscribe({\n                    next: response => this.addAssistantMessage(response),\n                    error: err => {\n                        console.error('Queue send error:', err);\n                        this.isLoading.set(false);\n                        this.processNextInQueue();\n                    }\n                });\n            }\n        }\n    }\n\n    toggleStreamingMode(): void {\n        this.streamingMode.update(v => !v);\n    }\n\n    toggleMarkdownMode(): void {\n        this.markdownMode.update(v => !v);\n    }\n\n    // Send message with streaming (returns EventSource URL)\n    sendStreamMessage(message: string, model: string, onComplete?: () => void): void {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        // Add placeholder assistant message\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'assistant', content: '', timestamp: new Date(), model },\n        ]);\n\n        const eventSource = new EventSource(\n            `${this.apiUrl}/stream?message=${encodeURIComponent(message)}&model=${encodeURIComponent(model)}&history=${encodeURIComponent(JSON.stringify(history))}`\n        );\n\n        eventSource.onmessage = (event) => {\n            if (event.data === '[DONE]') {\n                eventSource.close();\n                this.isLoading.set(false);\n                onComplete?.();\n                return;\n            }\n\n            try {\n                const data = JSON.parse(event.data);\n                if (data.chunk) {\n                    // Update the last message (assistant) with new content\n                    this.messages.update(msgs => {\n                        const updated = [...msgs];\n                        const lastMsg = updated[updated.length - 1];\n                        if (lastMsg && lastMsg.role === 'assistant') {\n                            lastMsg.content += data.chunk;\n                        }\n                        return updated;\n                    });\n                }\n            } catch {\n                // Handle plain text chunks\n                this.messages.update(msgs => {\n                    const updated = [...msgs];\n                    const lastMsg = updated[updated.length - 1];\n                    if (lastMsg && lastMsg.role === 'assistant') {\n                        lastMsg.content += event.data;\n                    }\n                    return updated;\n                });\n            }\n        };\n\n        eventSource.onerror = (error) => {\n            console.error('Stream error:', error);\n            eventSource.close();\n            this.messages.update(msgs => {\n                const updated = [...msgs];\n                const lastMsg = updated[updated.length - 1];\n                if (lastMsg && lastMsg.role === 'assistant' && !lastMsg.content) {\n                    lastMsg.content = 'Error: Stream connection failed';\n                    lastMsg.isError = true;\n                    lastMsg.errorDetails = JSON.stringify(error, null, 2);\n                }\n                return updated;\n            });\n            this.isLoading.set(false);\n            onComplete?.();\n        };\n    }\n\n    compareModels(prompt: string, models: string[]): Observable<CompareResponse> {\n        return this.http.post<CompareResponse>(`${this.apiUrl}/compare`, {\n            prompt,\n            models,\n        });\n    }\n\n    clearHistory(): void {\n        this.messages.set([]);\n    }\n\n    // Queue management methods\n    addToQueue(content: string, model: string): void {\n        const queuedPrompt: QueuedPrompt = {\n            id: crypto.randomUUID(),\n            content,\n            model,\n            timestamp: new Date(),\n        };\n        this.promptQueue.update(queue => [...queue, queuedPrompt]);\n        // Note: Don't process here - queue items are added when model is busy\n        // Processing happens when the current request completes via addAssistantMessage\n    }\n\n    removeFromQueue(id: string): void {\n        this.promptQueue.update(queue => queue.filter(p => p.id !== id));\n    }\n\n    clearQueue(): void {\n        this.promptQueue.set([]);\n    }\n\n    sendFromQueue(id: string): void {\n        const item = this.promptQueue().find(p => p.id === id);\n        if (!item || this.isLoading()) return;\n\n        this.removeFromQueue(id);\n        this.sendMessage(item.content, item.model).subscribe({\n            next: response => this.addAssistantMessage(response),\n            error: err => console.error('Queue send error:', err)\n        });\n    }\n\n    sendAllFromQueue(): void {\n        // Move all queue items to be processed - they will be sent sequentially\n        // as the processNextInQueue is called after each response\n        // For now, just start processing the first one if not already loading\n        if (!this.isLoading() && this.promptQueue().length > 0) {\n            const first = this.promptQueue()[0];\n            this.sendFromQueue(first.id);\n        }\n    }\n\n    updateQueuedPrompt(id: string, content: string): void {\n        this.promptQueue.update(queue =>\n            queue.map(p => p.id === id ? { ...p, content } : p)\n        );\n    }\n\n    moveQueuedPromptUp(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index > 0) {\n                const newQueue = [...queue];\n                [newQueue[index - 1], newQueue[index]] = [newQueue[index], newQueue[index - 1]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    moveQueuedPromptDown(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index >= 0 && index < queue.length - 1) {\n                const newQueue = [...queue];\n                [newQueue[index], newQueue[index + 1]] = [newQueue[index + 1], newQueue[index]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    private processQueue(): void {\n        if (this.isProcessingQueue || this.isLoading() || this.promptQueue().length === 0) {\n            return;\n        }\n\n        this.isProcessingQueue = true;\n        const [nextPrompt, ...remaining] = this.promptQueue();\n        this.promptQueue.set(remaining);\n\n        // Process the prompt\n        this.sendMessage(nextPrompt.content, nextPrompt.model).subscribe({\n            next: response => {\n                this.addAssistantMessage(response);\n                this.isProcessingQueue = false;\n                // Process next in queue\n                this.processQueue();\n            },\n            error: () => {\n                this.isProcessingQueue = false;\n                this.processQueue();\n            }\n        });\n    }\n}\n",
            "properties": [
                {
                    "name": "content",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "errorDetails",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "isError",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "model",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "role",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"user\" | \"assistant\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 7
                },
                {
                    "name": "timestamp",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 9
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "Message",
            "id": "interface-Message-d4a8f3d73cb35b6ac095b17287f05cc3aebeae7da2daee874778e86814fd3613e6e9c978802a2330c6f78e581cbd6c649c45f1c6a04a97f9502be5b05565cd0e-1",
            "file": "src/app/features/chat/components/message-list/message-list.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, ElementRef, AfterViewChecked, ViewChild, Optional, Inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SafeMarkdownPipe } from '../../../../shared/pipes/safe-markdown.pipe';\n\n/** \n * Message interface - defined locally for portability.\n * Compatible with ChatService.Message.\n */\nexport interface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp?: Date;\n  model?: string;\n  isError?: boolean;\n  errorDetails?: string;\n}\n\n@Component({\n  selector: 'app-message-list',\n  standalone: true,\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatMenuModule,\n    MatDividerModule,\n    TranslateModule,\n    SafeMarkdownPipe,\n  ],\n  template: `\n    <div class=\"messages-container\" #messagesContainer>\n      @for (message of messages(); track message.timestamp; let i = $index) {\n        <div class=\"message-row animate-fade-in\" \n             [class.user-row]=\"message.role === 'user'\" \n             [class.assistant-row]=\"message.role === 'assistant'\"\n             [style.animation-delay]=\"i * 30 + 'ms'\">\n          \n          <!-- Assistant Avatar -->\n          @if (message.role === 'assistant') {\n            <div class=\"message-avatar\">\n              <img [src]=\"avatarUrl()\" [alt]=\"avatarAlt()\" class=\"avatar-logo\">\n            </div>\n          }\n          \n          <div class=\"message-content\" [class.user-message]=\"message.role === 'user'\" [class.error-message]=\"message.isError\">\n            @if (message.role === 'assistant' && markdownMode()) {\n              <div class=\"message-text markdown-content\" [innerHTML]=\"message.content | safeMarkdown\"></div>\n            } @else {\n              <div class=\"message-text\">{{ message.content }}</div>\n            }\n            \n            @if (message.isError && message.errorDetails) {\n              <button mat-stroked-button class=\"error-details-btn\" (click)=\"showError.emit(message.errorDetails!)\">\n                <mat-icon>info_outline</mat-icon>\n                View Details\n              </button>\n            }\n            \n            @if (message.role === 'assistant') {\n              <div class=\"message-actions\">\n                <button mat-icon-button [matTooltip]=\"'actions.copy' | translate\" (click)=\"copy.emit(message.content)\">\n                  <mat-icon>content_copy</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.readAloud' | translate\" (click)=\"speak.emit(message.content)\">\n                  <mat-icon>{{ isSpeaking() ? 'stop' : 'volume_up' }}</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.goodResponse' | translate\" (click)=\"thumbUp.emit(message)\">\n                  <mat-icon>thumb_up</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.badResponse' | translate\" (click)=\"thumbDown.emit(message)\">\n                  <mat-icon>thumb_down</mat-icon>\n                </button>\n                <button mat-icon-button [matMenuTriggerFor]=\"moreMenu\" [matTooltip]=\"'actions.more' | translate\">\n                  <mat-icon>more_vert</mat-icon>\n                </button>\n                <mat-menu #moreMenu=\"matMenu\">\n                  <button mat-menu-item (click)=\"copy.emit(message.content)\">\n                    <mat-icon>content_copy</mat-icon>\n                    <span>Copy</span>\n                  </button>\n                  <button mat-menu-item>\n                    <mat-icon>refresh</mat-icon>\n                    <span>Regenerate</span>\n                  </button>\n                  <button mat-menu-item>\n                    <mat-icon>share</mat-icon>\n                    <span>Share</span>\n                  </button>\n                  <mat-divider></mat-divider>\n                  <button mat-menu-item>\n                    <mat-icon>flag</mat-icon>\n                    <span>Report issue</span>\n                  </button>\n                </mat-menu>\n              </div>\n            }\n            \n            @if (message.model) {\n              <div class=\"message-model\">\n                <mat-icon>smart_toy</mat-icon>\n                {{ message.model }}\n              </div>\n            }\n          </div>\n        </div>\n      }\n\n      <!-- Loading State -->\n      @if (isLoading()) {\n        <div class=\"message-row assistant-row animate-fade-in\">\n          <div class=\"message-avatar\">\n            <img [src]=\"avatarUrl()\" [alt]=\"avatarAlt()\" class=\"avatar-logo loading\">\n          </div>\n          <div class=\"message-content\">\n            <div class=\"typing-indicator\">\n              <span></span>\n              <span></span>\n              <span></span>\n            </div>\n          </div>\n        </div>\n      }\n    </div>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      flex: 1;\n      overflow-y: auto;\n      overflow-x: hidden;\n      padding: 16px 0;\n      scroll-behavior: smooth;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_error: var(--error, #ba1a1a);\n      --_error-container: var(--error-container, #ffdad6);\n      --_on-error-container: var(--on-error-container, #410002);\n    }\n\n    .messages-container {\n      display: flex;\n      flex-direction: column;\n      gap: 24px;\n    }\n\n    .message-row {\n      display: flex;\n      gap: 16px;\n      align-items: flex-start;\n      \n      &.user-row {\n        justify-content: flex-end;\n      }\n      \n      &.assistant-row {\n        justify-content: flex-start;\n      }\n    }\n\n    .message-avatar {\n      flex-shrink: 0;\n      width: 36px;\n      height: 36px;\n      \n      .avatar-logo {\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        object-fit: cover;\n        \n        &.loading {\n          animation: pulse 1.5s ease-in-out infinite;\n        }\n      }\n    }\n\n    .message-content {\n      max-width: 75%;\n      padding: 12px 16px;\n      border-radius: 20px;\n      background: var(--_surface-container);\n      color: var(--_on-surface);\n      line-height: 1.5;\n      \n      &.user-message {\n        background: var(--_primary);\n        color: var(--_on-primary);\n        border-radius: 20px 20px 4px 20px;\n      }\n      \n      &.error-message {\n        background: var(--_error-container);\n        color: var(--_on-error-container);\n        border: 1px solid var(--_error);\n      }\n    }\n\n    .message-text {\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      \n      &.markdown-content {\n        :deep(pre) {\n          background: var(--_surface-container-high);\n          padding: 12px;\n          border-radius: 8px;\n          overflow-x: auto;\n        }\n        \n        :deep(code) {\n          font-family: 'Roboto Mono', monospace;\n          font-size: 0.9em;\n        }\n        \n        :deep(p:last-child) {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .message-actions {\n      display: flex;\n      gap: 4px;\n      margin-top: 8px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .message-content:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n    }\n\n    .message-model {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      margin-top: 8px;\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n      opacity: 0.7;\n      \n      mat-icon {\n        font-size: 14px;\n        width: 14px;\n        height: 14px;\n      }\n    }\n\n    .error-details-btn {\n      margin-top: 8px;\n      font-size: 12px;\n      \n      mat-icon {\n        font-size: 16px;\n        margin-right: 4px;\n      }\n    }\n\n    .typing-indicator {\n      display: flex;\n      gap: 4px;\n      padding: 8px 4px;\n      \n      span {\n        width: 8px;\n        height: 8px;\n        background: var(--_on-surface-variant);\n        border-radius: 50%;\n        animation: bounce 1.4s ease-in-out infinite;\n        \n        &:nth-child(2) { animation-delay: 0.2s; }\n        &:nth-child(3) { animation-delay: 0.4s; }\n      }\n    }\n\n    @keyframes bounce {\n      0%, 60%, 100% { transform: translateY(0); }\n      30% { transform: translateY(-8px); }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    .animate-fade-in {\n      animation: fadeIn 0.3s ease forwards;\n      opacity: 0;\n    }\n\n    @keyframes fadeIn {\n      to { opacity: 1; }\n    }\n  `]\n})\nexport class MessageListComponent implements AfterViewChecked {\n  /** List of messages to display */\n  messages = input.required<Message[]>();\n\n  /** Whether the chat is currently loading a response */\n  isLoading = input<boolean>(false);\n\n  /** Whether to render markdown in assistant responses */\n  markdownMode = input<boolean>(true);\n\n  /** Avatar URL for assistant messages (configurable for portability) */\n  avatarUrl = input<string>('genkit-logo.png');\n\n  /** Alt text for avatar image */\n  avatarAlt = input<string>('Assistant');\n\n  /** Whether TTS is currently speaking (replaces SpeechService dependency) */\n  isSpeaking = input<boolean>(false);\n\n  /** Error message to display (optional) */\n  error = input<string | null>(null);\n\n  /** Emitted when user clicks copy on a message */\n  copy = output<string>();\n\n  /** Emitted when user clicks speak on a message */\n  speak = output<string>();\n\n  /** Emitted when user clicks to view error details */\n  showError = output<string>();\n\n  /** Emitted when user gives thumbs up */\n  thumbUp = output<Message>();\n\n  /** Emitted when user gives thumbs down */\n  thumbDown = output<Message>();\n\n  @ViewChild('messagesContainer') private messagesContainer!: ElementRef;\n  private shouldScrollToBottom = true;\n\n  ngAfterViewChecked(): void {\n    if (this.shouldScrollToBottom) {\n      this.scrollToBottom();\n    }\n  }\n\n  private scrollToBottom(): void {\n    if (this.messagesContainer?.nativeElement) {\n      const container = this.messagesContainer.nativeElement;\n      container.scrollTop = container.scrollHeight;\n    }\n  }\n}\n",
            "properties": [
                {
                    "name": "content",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 54
                },
                {
                    "name": "errorDetails",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 58
                },
                {
                    "name": "isError",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 57
                },
                {
                    "name": "model",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 56
                },
                {
                    "name": "role",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"user\" | \"assistant\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53
                },
                {
                    "name": "timestamp",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 55
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Message interface - defined locally for portability.\nCompatible with ChatService.Message.</p>\n",
            "rawdescription": "\n\nMessage interface - defined locally for portability.\nCompatible with ChatService.Message.\n",
            "methods": [],
            "extends": [],
            "isDuplicate": true,
            "duplicateId": 1,
            "duplicateName": "Message-1"
        },
        {
            "name": "Model",
            "id": "interface-Model-130f0ea262270750803a43353ab064969a2c2f5b42cfd8bfff6bd0011e403f30699bce7615f4ed76188cbd0d972c471e22ea95fd972d4fcda2a9c9024353c7f6",
            "file": "src/app/core/services/model.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, computed } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, of, tap } from 'rxjs';\n\n/**\n * Model information from the backend.\n */\nexport interface Model {\n    id: string;\n    name: string;\n    capabilities: string[];\n    context_window?: number;\n}\n\n/**\n * Provider with available models.\n */\nexport interface Provider {\n    id: string;\n    name: string;\n    available: boolean;\n    models: Model[];\n}\n\n/**\n * Service for fetching available models from the backend.\n * Falls back to demo models if backend is unavailable.\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelService {\n    private http = inject(HttpClient);\n    private apiUrl = '/api';\n\n    // All providers with their models\n    providers = signal<Provider[]>([]);\n    isLoading = signal(false);\n    error = signal<string | null>(null);\n\n    // Flattened list of all available models\n    allModels = computed(() =>\n        this.providers().flatMap(p =>\n            p.models.map(m => ({\n                ...m,\n                provider: p.name,\n                providerId: p.id,\n            }))\n        )\n    );\n\n    // Default model (first available or Ollama local)\n    defaultModel = computed(() => this.allModels()[0]?.id || 'ollama/llama3.2');\n\n    // Demo models for when backend is unavailable\n    private readonly DEMO_PROVIDERS: Provider[] = [\n        {\n            id: 'google-genai',\n            name: 'Google AI',\n            available: true,\n            models: [\n                { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'anthropic',\n            name: 'Anthropic',\n            available: true,\n            models: [\n                { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'openai',\n            name: 'OpenAI',\n            available: true,\n            models: [\n                { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'openai/gpt-4o', name: 'GPT-4o', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n    ];\n\n    constructor() {\n        // Fetch models on service initialization\n        this.fetchModels();\n    }\n\n    /**\n     * Fetch available models from the backend.\n     * Falls back to demo models if backend is unavailable.\n     */\n    fetchModels(): void {\n        this.isLoading.set(true);\n        this.error.set(null);\n\n        this.http.get<Provider[]>(`${this.apiUrl}/models`)\n            .pipe(\n                tap(providers => {\n                    this.providers.set(providers);\n                    this.isLoading.set(false);\n                    console.log('Loaded models from backend:', providers);\n                }),\n                catchError(err => {\n                    console.warn('Backend unavailable, using demo models:', err.message);\n                    this.providers.set(this.DEMO_PROVIDERS);\n                    this.error.set('Using demo models (backend unavailable)');\n                    this.isLoading.set(false);\n                    return of(this.DEMO_PROVIDERS);\n                }),\n            )\n            .subscribe();\n    }\n\n    /**\n     * Get a model by its ID.\n     */\n    getModel(id: string): Model | undefined {\n        return this.allModels().find(m => m.id === id);\n    }\n\n    /**\n     * Get the provider name for a model ID.\n     */\n    getProviderName(modelId: string): string {\n        const model = this.allModels().find(m => m.id === modelId);\n        return (model as any)?.provider || 'Unknown';\n    }\n\n    /**\n     * Check if a model supports a capability.\n     */\n    hasCapability(modelId: string, capability: string): boolean {\n        const model = this.getModel(modelId);\n        return model?.capabilities?.includes(capability) ?? false;\n    }\n}\n",
            "properties": [
                {
                    "name": "capabilities",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                },
                {
                    "name": "context_window",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 12
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Model information from the backend.</p>\n",
            "rawdescription": "\n\nModel information from the backend.\n",
            "methods": [],
            "extends": []
        },
        {
            "name": "Model",
            "id": "interface-Model-0e6ca8fabbfec5a97bea7e343b41f2c7fb73a2be402987264f7408234465b71442e6416058b387460af21a221e44feeaa4f10531b2c69147b85bc4c6f1641d70-1",
            "file": "src/app/features/chat/components/model-selector/model-selector.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\n\nexport interface Model {\n  id: string;\n  name: string;\n  capabilities?: string[];\n  context_window?: number;\n}\n\nexport interface Provider {\n  id: string;\n  name: string;\n  available: boolean;\n  models: Model[];\n}\n\n@Component({\n  selector: 'app-model-selector',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatDividerModule,\n  ],\n  template: `\n    <button mat-button \n            class=\"model-select-btn\"\n            [matMenuTriggerFor]=\"modelMenu\"\n            (menuOpened)=\"onMenuOpened()\">\n      <div class=\"model-info\">\n        <span class=\"model-name\">{{ getModelName(selectedModel()) }}</span>\n        <span class=\"provider-name\">{{ getProviderName(selectedModel()) }}</span>\n      </div>\n      <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n    </button>\n    \n    <mat-menu #modelMenu=\"matMenu\" class=\"model-panel\" xPosition=\"before\">\n      <!-- Search Input -->\n      <div class=\"model-search\" (click)=\"$event.stopPropagation()\">\n        <mat-icon>search</mat-icon>\n        <input type=\"text\" \n               placeholder=\"Search models...\" \n               [(ngModel)]=\"searchQuery\"\n               (keydown)=\"$event.stopPropagation()\">\n        @if (searchQuery) {\n          <button mat-icon-button class=\"clear-search\" (click)=\"clearSearch()\">\n            <mat-icon>close</mat-icon>\n          </button>\n        }\n      </div>\n      \n      <!-- Recent Models -->\n      @if (!searchQuery && recentModels().length > 0) {\n        <div class=\"model-group\">\n          <div class=\"group-header\">Recent</div>\n          @for (model of recentModels(); track model.id) {\n            <button mat-menu-item \n                    class=\"model-item\"\n                    [class.selected]=\"selectedModel() === model.id\"\n                    (click)=\"selectModel(model.id)\">\n              <span class=\"model-name\">{{ model.name }}</span>\n              <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n            </button>\n          }\n        </div>\n        <mat-divider></mat-divider>\n      }\n      \n      <!-- Models Grouped by Provider -->\n      <div class=\"model-list\">\n        @if (searchQuery) {\n          <div class=\"model-group\">\n            <div class=\"group-header\">Results</div>\n            @for (model of filteredModels(); track model.id) {\n              <button mat-menu-item \n                      class=\"model-item\"\n                      [class.selected]=\"selectedModel() === model.id\"\n                      (click)=\"selectModel(model.id)\">\n                <span class=\"model-name\">{{ model.name }}</span>\n                <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n              </button>\n            } @empty {\n              <div class=\"no-results\">No models found</div>\n            }\n          </div>\n        } @else {\n          @for (provider of providers(); track provider.id) {\n            <div class=\"model-group\">\n              <div class=\"group-header\">{{ provider.name }}</div>\n              @for (model of provider.models; track model.id) {\n                <button mat-menu-item \n                        class=\"model-item\"\n                        [class.selected]=\"selectedModel() === model.id\"\n                        (click)=\"selectModel(model.id)\">\n                  <span class=\"model-name\">{{ model.name }}</span>\n                </button>\n              }\n            </div>\n          }\n        }\n      </div>\n    </mat-menu>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px;\n      border-radius: 8px;\n      min-width: 0;\n      max-width: 200px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .model-info {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      overflow: hidden;\n      \n      .model-name {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--_on-surface);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        max-width: 150px;\n      }\n      \n      .provider-name {\n        font-size: 11px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .model-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .model-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .model-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .model-group {\n      padding: 8px 0;\n    }\n\n    .group-header {\n      padding: 4px 16px 8px;\n      font-size: 11px;\n      font-weight: 600;\n      color: var(--_on-surface-variant);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 8px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .model-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .model-badge {\n        font-size: 10px;\n        padding: 2px 6px;\n        border-radius: 4px;\n        background: var(--_surface-container-high);\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  `]\n})\nexport class ModelSelectorComponent {\n  /** Currently selected model ID */\n  selectedModel = input.required<string>();\n\n  /** List of providers with their models */\n  providers = input.required<Provider[]>();\n\n  /** Recently used models */\n  recentModels = input<Model[]>([]);\n\n  /** Emitted when a model is selected */\n  modelSelected = output<string>();\n\n  /** Search query for filtering models */\n  searchQuery = '';\n\n  /** Filtered models based on search query */\n  filteredModels = computed(() => {\n    if (!this.searchQuery) return [];\n\n    const query = this.searchQuery.toLowerCase();\n    const allModels: Model[] = [];\n\n    this.providers().forEach(provider => {\n      provider.models.forEach(model => {\n        if (model.name.toLowerCase().includes(query) ||\n          model.id.toLowerCase().includes(query)) {\n          allModels.push(model);\n        }\n      });\n    });\n\n    return allModels;\n  });\n\n  onMenuOpened(): void {\n    this.searchQuery = '';\n  }\n\n  clearSearch(): void {\n    this.searchQuery = '';\n  }\n\n  selectModel(modelId: string): void {\n    this.modelSelected.emit(modelId);\n  }\n\n  getModelName(modelId: string): string {\n    for (const provider of this.providers()) {\n      const model = provider.models.find(m => m.id === modelId);\n      if (model) return model.name;\n    }\n    // Fallback: extract name from ID\n    const parts = modelId.split('/');\n    return parts[parts.length - 1];\n  }\n\n  getProviderName(modelId: string): string {\n    for (const provider of this.providers()) {\n      if (provider.models.some(m => m.id === modelId)) {\n        return provider.name;\n      }\n    }\n    // Fallback: extract provider from ID prefix\n    const parts = modelId.split('/');\n    if (parts.length > 1) {\n      return parts[0].charAt(0).toUpperCase() + parts[0].slice(1);\n    }\n    return 'Unknown';\n  }\n}\n",
            "properties": [
                {
                    "name": "capabilities",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 42
                },
                {
                    "name": "context_window",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 43
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": [],
            "isDuplicate": true,
            "duplicateId": 1,
            "duplicateName": "Model-1"
        },
        {
            "name": "ModelInfo",
            "id": "interface-ModelInfo-d5315f72d4ad5aaed6c7fd66f6f665581b8bab5b22ac57b12dfc2f9ccd92f55739196cbec8d877a3410886f5cbc91b08aedb7e9a482ff090076c28be25d8c9b2",
            "file": "src/app/core/services/models.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface ModelInfo {\n    id: string;\n    name: string;\n    capabilities: string[];\n    context_window: number;\n    supportsStreaming?: boolean;\n}\n\nexport interface ProviderInfo {\n    id: string;\n    name: string;\n    available: boolean;\n    models: ModelInfo[];\n}\n\nexport interface ModelsResponse {\n    providers: ProviderInfo[];\n}\n\n// Default models when backend is unavailable - only latest, non-deprecated models\nconst DEFAULT_PROVIDERS: ProviderInfo[] = [\n    {\n        id: 'googleai',\n        name: 'Google AI',\n        available: true,\n        models: [\n            { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision'], context_window: 2097152 },\n            { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision'], context_window: 1048576 },\n        ],\n    },\n    {\n        id: 'vertexai',\n        name: 'Vertex AI',\n        available: true,\n        models: [\n            { id: 'vertexai/gemini-3-flash', name: 'Gemini 3 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'vertexai/gemini-3-pro', name: 'Gemini 3 Pro', capabilities: ['text', 'vision'], context_window: 2097152 },\n        ],\n    },\n    {\n        id: 'anthropic',\n        name: 'Anthropic',\n        available: true,\n        models: [\n            { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'openai',\n        name: 'OpenAI',\n        available: true,\n        models: [\n            { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-mini', name: 'GPT-4.1 Mini', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-nano', name: 'GPT-4.1 Nano', capabilities: ['text'], context_window: 1047576 },\n            { id: 'openai/o3', name: 'o3', capabilities: ['text', 'reasoning'], context_window: 200000 },\n            { id: 'openai/o4-mini', name: 'o4 Mini', capabilities: ['text', 'reasoning'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'mistral',\n        name: 'Mistral AI',\n        available: true,\n        models: [\n            { id: 'mistral/mistral-large-latest', name: 'Mistral Large', capabilities: ['text'], context_window: 128000 },\n            { id: 'mistral/mistral-small-latest', name: 'Mistral Small', capabilities: ['text'], context_window: 32000 },\n            { id: 'mistral/codestral-latest', name: 'Codestral', capabilities: ['text', 'code'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'cf-ai',\n        name: 'Cloudflare AI',\n        available: true,\n        models: [\n            { id: 'cf-ai/@cf/meta/llama-3.3-70b-instruct-fp8-fast', name: 'Llama 3.3 70B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/google/gemma-7b-it-lora', name: 'Gemma 7B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/deepseek-ai/deepseek-r1-distill-qwen-32b', name: 'DeepSeek R1 32B', capabilities: ['text', 'reasoning'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'ollama',\n        name: 'Ollama (Local)',\n        available: true,\n        models: [\n            { id: 'ollama/llama3.2', name: 'Llama 3.2', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/gemma3:4b', name: 'Gemma 3 4B', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/mistral', name: 'Mistral', capabilities: ['text'], context_window: 32768 },\n            { id: 'ollama/qwen2.5-coder', name: 'Qwen 2.5 Coder', capabilities: ['text', 'code'], context_window: 128000 },\n        ],\n    },\n];\n\nconst DEFAULT_MODEL = 'ollama/gemma3:4b';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelsService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n    private readonly MAX_RECENT = 3;\n\n    providers = signal<ProviderInfo[]>(DEFAULT_PROVIDERS);\n    // Load selected model from preferences, fallback to default\n    selectedModel = signal<string>(this.preferencesService.selectedModel || DEFAULT_MODEL);\n    // Load recent models from preferences\n    recentModels = signal<string[]>(this.preferencesService.recentModels);\n    isLoading = signal(false);\n    isBackendConnected = signal(false);\n\n    constructor() {\n        this.loadModels();\n    }\n\n    loadModels(): void {\n        this.isLoading.set(true);\n        this.http.get<ModelsResponse>(`${this.apiUrl}/models`).pipe(\n            catchError(error => {\n                console.log('Backend unavailable, using default model list');\n                this.isBackendConnected.set(false);\n                return of({ providers: DEFAULT_PROVIDERS });\n            }),\n        ).subscribe(response => {\n            if (response.providers.length > 0) {\n                this.providers.set(response.providers);\n                this.isBackendConnected.set(true);\n            }\n            this.isLoading.set(false);\n        });\n    }\n\n    getAllModels(): ModelInfo[] {\n        return this.providers().flatMap(p => p.models);\n    }\n\n    /** Get all models sorted lexicographically by name */\n    getSortedModels(): ModelInfo[] {\n        return this.getAllModels().sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    /** Get models filtered by search query */\n    filterModels(query: string): ModelInfo[] {\n        const q = query.toLowerCase().trim();\n        if (!q) return this.getSortedModels();\n        return this.getSortedModels().filter(m =>\n            m.name.toLowerCase().includes(q) ||\n            m.id.toLowerCase().includes(q)\n        );\n    }\n\n    /** Get models for a provider, sorted alphabetically */\n    getModelsByProvider(providerId: string): ModelInfo[] {\n        const provider = this.providers().find(p => p.id === providerId);\n        return (provider?.models || []).sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    getModelName(modelId: string): string {\n        const model = this.getAllModels().find(m => m.id === modelId);\n        return model?.name || modelId.split('/').pop() || modelId;\n    }\n\n    getProviderName(modelId: string): string {\n        const providerId = modelId.split('/')[0];\n        const provider = this.providers().find(p => p.id === providerId);\n        return provider?.name || providerId;\n    }\n\n    /** Select a model and add to recent */\n    selectModel(modelId: string): void {\n        this.selectedModel.set(modelId);\n        this.preferencesService.setSelectedModel(modelId);\n        this.addToRecent(modelId);\n    }\n\n    /** Get recent models as ModelInfo objects */\n    getRecentModels(): ModelInfo[] {\n        const all = this.getAllModels();\n        return this.recentModels()\n            .map(id => all.find(m => m.id === id))\n            .filter((m): m is ModelInfo => m !== undefined);\n    }\n\n    private addToRecent(modelId: string): void {\n        const recent = this.recentModels().filter(id => id !== modelId);\n        recent.unshift(modelId);\n        const updated = recent.slice(0, this.MAX_RECENT);\n        this.recentModels.set(updated);\n        // PreferencesService handles persistence via setSelectedModel\n    }\n\n    /** Check if the selected model supports streaming */\n    supportsStreaming(modelId?: string): boolean {\n        const id = modelId || this.selectedModel();\n        // Ollama models may have unreliable streaming support\n        // For now, assume all cloud models support streaming\n        if (id.startsWith('ollama/')) {\n            return false;\n        }\n        // Check if model explicitly declares streaming support\n        const model = this.getAllModels().find(m => m.id === id);\n        if (model?.supportsStreaming !== undefined) {\n            return model.supportsStreaming;\n        }\n        // Default: all non-Ollama models support streaming\n        return true;\n    }\n}\n",
            "properties": [
                {
                    "name": "capabilities",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9
                },
                {
                    "name": "context_window",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 7
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 8
                },
                {
                    "name": "supportsStreaming",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 11
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ModelsResponse",
            "id": "interface-ModelsResponse-d5315f72d4ad5aaed6c7fd66f6f665581b8bab5b22ac57b12dfc2f9ccd92f55739196cbec8d877a3410886f5cbc91b08aedb7e9a482ff090076c28be25d8c9b2",
            "file": "src/app/core/services/models.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface ModelInfo {\n    id: string;\n    name: string;\n    capabilities: string[];\n    context_window: number;\n    supportsStreaming?: boolean;\n}\n\nexport interface ProviderInfo {\n    id: string;\n    name: string;\n    available: boolean;\n    models: ModelInfo[];\n}\n\nexport interface ModelsResponse {\n    providers: ProviderInfo[];\n}\n\n// Default models when backend is unavailable - only latest, non-deprecated models\nconst DEFAULT_PROVIDERS: ProviderInfo[] = [\n    {\n        id: 'googleai',\n        name: 'Google AI',\n        available: true,\n        models: [\n            { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision'], context_window: 2097152 },\n            { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision'], context_window: 1048576 },\n        ],\n    },\n    {\n        id: 'vertexai',\n        name: 'Vertex AI',\n        available: true,\n        models: [\n            { id: 'vertexai/gemini-3-flash', name: 'Gemini 3 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'vertexai/gemini-3-pro', name: 'Gemini 3 Pro', capabilities: ['text', 'vision'], context_window: 2097152 },\n        ],\n    },\n    {\n        id: 'anthropic',\n        name: 'Anthropic',\n        available: true,\n        models: [\n            { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'openai',\n        name: 'OpenAI',\n        available: true,\n        models: [\n            { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-mini', name: 'GPT-4.1 Mini', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-nano', name: 'GPT-4.1 Nano', capabilities: ['text'], context_window: 1047576 },\n            { id: 'openai/o3', name: 'o3', capabilities: ['text', 'reasoning'], context_window: 200000 },\n            { id: 'openai/o4-mini', name: 'o4 Mini', capabilities: ['text', 'reasoning'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'mistral',\n        name: 'Mistral AI',\n        available: true,\n        models: [\n            { id: 'mistral/mistral-large-latest', name: 'Mistral Large', capabilities: ['text'], context_window: 128000 },\n            { id: 'mistral/mistral-small-latest', name: 'Mistral Small', capabilities: ['text'], context_window: 32000 },\n            { id: 'mistral/codestral-latest', name: 'Codestral', capabilities: ['text', 'code'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'cf-ai',\n        name: 'Cloudflare AI',\n        available: true,\n        models: [\n            { id: 'cf-ai/@cf/meta/llama-3.3-70b-instruct-fp8-fast', name: 'Llama 3.3 70B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/google/gemma-7b-it-lora', name: 'Gemma 7B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/deepseek-ai/deepseek-r1-distill-qwen-32b', name: 'DeepSeek R1 32B', capabilities: ['text', 'reasoning'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'ollama',\n        name: 'Ollama (Local)',\n        available: true,\n        models: [\n            { id: 'ollama/llama3.2', name: 'Llama 3.2', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/gemma3:4b', name: 'Gemma 3 4B', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/mistral', name: 'Mistral', capabilities: ['text'], context_window: 32768 },\n            { id: 'ollama/qwen2.5-coder', name: 'Qwen 2.5 Coder', capabilities: ['text', 'code'], context_window: 128000 },\n        ],\n    },\n];\n\nconst DEFAULT_MODEL = 'ollama/gemma3:4b';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelsService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n    private readonly MAX_RECENT = 3;\n\n    providers = signal<ProviderInfo[]>(DEFAULT_PROVIDERS);\n    // Load selected model from preferences, fallback to default\n    selectedModel = signal<string>(this.preferencesService.selectedModel || DEFAULT_MODEL);\n    // Load recent models from preferences\n    recentModels = signal<string[]>(this.preferencesService.recentModels);\n    isLoading = signal(false);\n    isBackendConnected = signal(false);\n\n    constructor() {\n        this.loadModels();\n    }\n\n    loadModels(): void {\n        this.isLoading.set(true);\n        this.http.get<ModelsResponse>(`${this.apiUrl}/models`).pipe(\n            catchError(error => {\n                console.log('Backend unavailable, using default model list');\n                this.isBackendConnected.set(false);\n                return of({ providers: DEFAULT_PROVIDERS });\n            }),\n        ).subscribe(response => {\n            if (response.providers.length > 0) {\n                this.providers.set(response.providers);\n                this.isBackendConnected.set(true);\n            }\n            this.isLoading.set(false);\n        });\n    }\n\n    getAllModels(): ModelInfo[] {\n        return this.providers().flatMap(p => p.models);\n    }\n\n    /** Get all models sorted lexicographically by name */\n    getSortedModels(): ModelInfo[] {\n        return this.getAllModels().sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    /** Get models filtered by search query */\n    filterModels(query: string): ModelInfo[] {\n        const q = query.toLowerCase().trim();\n        if (!q) return this.getSortedModels();\n        return this.getSortedModels().filter(m =>\n            m.name.toLowerCase().includes(q) ||\n            m.id.toLowerCase().includes(q)\n        );\n    }\n\n    /** Get models for a provider, sorted alphabetically */\n    getModelsByProvider(providerId: string): ModelInfo[] {\n        const provider = this.providers().find(p => p.id === providerId);\n        return (provider?.models || []).sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    getModelName(modelId: string): string {\n        const model = this.getAllModels().find(m => m.id === modelId);\n        return model?.name || modelId.split('/').pop() || modelId;\n    }\n\n    getProviderName(modelId: string): string {\n        const providerId = modelId.split('/')[0];\n        const provider = this.providers().find(p => p.id === providerId);\n        return provider?.name || providerId;\n    }\n\n    /** Select a model and add to recent */\n    selectModel(modelId: string): void {\n        this.selectedModel.set(modelId);\n        this.preferencesService.setSelectedModel(modelId);\n        this.addToRecent(modelId);\n    }\n\n    /** Get recent models as ModelInfo objects */\n    getRecentModels(): ModelInfo[] {\n        const all = this.getAllModels();\n        return this.recentModels()\n            .map(id => all.find(m => m.id === id))\n            .filter((m): m is ModelInfo => m !== undefined);\n    }\n\n    private addToRecent(modelId: string): void {\n        const recent = this.recentModels().filter(id => id !== modelId);\n        recent.unshift(modelId);\n        const updated = recent.slice(0, this.MAX_RECENT);\n        this.recentModels.set(updated);\n        // PreferencesService handles persistence via setSelectedModel\n    }\n\n    /** Check if the selected model supports streaming */\n    supportsStreaming(modelId?: string): boolean {\n        const id = modelId || this.selectedModel();\n        // Ollama models may have unreliable streaming support\n        // For now, assume all cloud models support streaming\n        if (id.startsWith('ollama/')) {\n            return false;\n        }\n        // Check if model explicitly declares streaming support\n        const model = this.getAllModels().find(m => m.id === id);\n        if (model?.supportsStreaming !== undefined) {\n            return model.supportsStreaming;\n        }\n        // Default: all non-Ollama models support streaming\n        return true;\n    }\n}\n",
            "properties": [
                {
                    "name": "providers",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ProviderInfo[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ModelWithProvider",
            "id": "interface-ModelWithProvider-1569b740f1bb394ac76fbf5483a860f4fa8c5e239e4fbdcabbd9b8945da98727f4a2dd08401c9e1a14eeb574501c872bbd13c978dc06d52b5a4fe409b6eec248",
            "file": "src/app/core/utils/model.utils.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import type { Model, Provider } from '../services/model.service';\n\n/**\n * Model with provider information.\n */\nexport interface ModelWithProvider extends Model {\n    provider: string;\n    providerId: string;\n}\n\n/**\n * Flatten providers into a list of models with provider info.\n */\nexport function flattenModels(providers: Provider[]): ModelWithProvider[] {\n    return providers.flatMap((p) =>\n        p.models.map((m) => ({\n            ...m,\n            provider: p.name,\n            providerId: p.id,\n        }))\n    );\n}\n\n/**\n * Find a model by ID from the flattened list.\n */\nexport function findModelById(models: ModelWithProvider[], id: string): ModelWithProvider | undefined {\n    return models.find((m) => m.id === id);\n}\n\n/**\n * Get the provider name for a model ID.\n */\nexport function getProviderName(models: ModelWithProvider[], modelId: string): string {\n    const model = findModelById(models, modelId);\n    return model?.provider || 'Unknown';\n}\n\n/**\n * Check if a model has a specific capability.\n */\nexport function hasCapability(models: Model[], modelId: string, capability: string): boolean {\n    const model = models.find((m) => m.id === modelId);\n    return model?.capabilities?.includes(capability) ?? false;\n}\n\n/**\n * Filter models by provider.\n */\nexport function filterByProvider(models: ModelWithProvider[], providerId: string): ModelWithProvider[] {\n    return models.filter((m) => m.providerId === providerId);\n}\n\n/**\n * Filter models by capability.\n */\nexport function filterByCapability(models: Model[], capability: string): Model[] {\n    return models.filter((m) => m.capabilities?.includes(capability));\n}\n\n/**\n * Search models by name or ID (case insensitive).\n */\nexport function searchModels(models: ModelWithProvider[], query: string): ModelWithProvider[] {\n    if (!query.trim()) return models;\n\n    const lowerQuery = query.toLowerCase();\n    return models.filter(\n        (m) =>\n            m.name.toLowerCase().includes(lowerQuery) ||\n            m.id.toLowerCase().includes(lowerQuery) ||\n            m.provider.toLowerCase().includes(lowerQuery)\n    );\n}\n\n/**\n * Group models by provider.\n */\nexport function groupByProvider(\n    models: ModelWithProvider[]\n): Map<string, ModelWithProvider[]> {\n    const grouped = new Map<string, ModelWithProvider[]>();\n\n    for (const model of models) {\n        const existing = grouped.get(model.providerId) || [];\n        grouped.set(model.providerId, [...existing, model]);\n    }\n\n    return grouped;\n}\n\n/**\n * Get the default model ID.\n */\nexport function getDefaultModelId(models: Model[], fallback = 'ollama/llama3.2'): string {\n    return models[0]?.id || fallback;\n}\n",
            "properties": [
                {
                    "name": "provider",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 28
                },
                {
                    "name": "providerId",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 29
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Model with provider information.</p>\n",
            "rawdescription": "\n\nModel with provider information.\n",
            "methods": [],
            "extends": [
                "Model"
            ]
        },
        {
            "name": "Provider",
            "id": "interface-Provider-130f0ea262270750803a43353ab064969a2c2f5b42cfd8bfff6bd0011e403f30699bce7615f4ed76188cbd0d972c471e22ea95fd972d4fcda2a9c9024353c7f6",
            "file": "src/app/core/services/model.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, computed } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, of, tap } from 'rxjs';\n\n/**\n * Model information from the backend.\n */\nexport interface Model {\n    id: string;\n    name: string;\n    capabilities: string[];\n    context_window?: number;\n}\n\n/**\n * Provider with available models.\n */\nexport interface Provider {\n    id: string;\n    name: string;\n    available: boolean;\n    models: Model[];\n}\n\n/**\n * Service for fetching available models from the backend.\n * Falls back to demo models if backend is unavailable.\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelService {\n    private http = inject(HttpClient);\n    private apiUrl = '/api';\n\n    // All providers with their models\n    providers = signal<Provider[]>([]);\n    isLoading = signal(false);\n    error = signal<string | null>(null);\n\n    // Flattened list of all available models\n    allModels = computed(() =>\n        this.providers().flatMap(p =>\n            p.models.map(m => ({\n                ...m,\n                provider: p.name,\n                providerId: p.id,\n            }))\n        )\n    );\n\n    // Default model (first available or Ollama local)\n    defaultModel = computed(() => this.allModels()[0]?.id || 'ollama/llama3.2');\n\n    // Demo models for when backend is unavailable\n    private readonly DEMO_PROVIDERS: Provider[] = [\n        {\n            id: 'google-genai',\n            name: 'Google AI',\n            available: true,\n            models: [\n                { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'anthropic',\n            name: 'Anthropic',\n            available: true,\n            models: [\n                { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'openai',\n            name: 'OpenAI',\n            available: true,\n            models: [\n                { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'openai/gpt-4o', name: 'GPT-4o', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n    ];\n\n    constructor() {\n        // Fetch models on service initialization\n        this.fetchModels();\n    }\n\n    /**\n     * Fetch available models from the backend.\n     * Falls back to demo models if backend is unavailable.\n     */\n    fetchModels(): void {\n        this.isLoading.set(true);\n        this.error.set(null);\n\n        this.http.get<Provider[]>(`${this.apiUrl}/models`)\n            .pipe(\n                tap(providers => {\n                    this.providers.set(providers);\n                    this.isLoading.set(false);\n                    console.log('Loaded models from backend:', providers);\n                }),\n                catchError(err => {\n                    console.warn('Backend unavailable, using demo models:', err.message);\n                    this.providers.set(this.DEMO_PROVIDERS);\n                    this.error.set('Using demo models (backend unavailable)');\n                    this.isLoading.set(false);\n                    return of(this.DEMO_PROVIDERS);\n                }),\n            )\n            .subscribe();\n    }\n\n    /**\n     * Get a model by its ID.\n     */\n    getModel(id: string): Model | undefined {\n        return this.allModels().find(m => m.id === id);\n    }\n\n    /**\n     * Get the provider name for a model ID.\n     */\n    getProviderName(modelId: string): string {\n        const model = this.allModels().find(m => m.id === modelId);\n        return (model as any)?.provider || 'Unknown';\n    }\n\n    /**\n     * Check if a model supports a capability.\n     */\n    hasCapability(modelId: string, capability: string): boolean {\n        const model = this.getModel(modelId);\n        return model?.capabilities?.includes(capability) ?? false;\n    }\n}\n",
            "properties": [
                {
                    "name": "available",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 21
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19
                },
                {
                    "name": "models",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Model[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 22
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>Provider with available models.</p>\n",
            "rawdescription": "\n\nProvider with available models.\n",
            "methods": [],
            "extends": []
        },
        {
            "name": "Provider",
            "id": "interface-Provider-0e6ca8fabbfec5a97bea7e343b41f2c7fb73a2be402987264f7408234465b71442e6416058b387460af21a221e44feeaa4f10531b2c69147b85bc4c6f1641d70-1",
            "file": "src/app/features/chat/components/model-selector/model-selector.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\n\nexport interface Model {\n  id: string;\n  name: string;\n  capabilities?: string[];\n  context_window?: number;\n}\n\nexport interface Provider {\n  id: string;\n  name: string;\n  available: boolean;\n  models: Model[];\n}\n\n@Component({\n  selector: 'app-model-selector',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatDividerModule,\n  ],\n  template: `\n    <button mat-button \n            class=\"model-select-btn\"\n            [matMenuTriggerFor]=\"modelMenu\"\n            (menuOpened)=\"onMenuOpened()\">\n      <div class=\"model-info\">\n        <span class=\"model-name\">{{ getModelName(selectedModel()) }}</span>\n        <span class=\"provider-name\">{{ getProviderName(selectedModel()) }}</span>\n      </div>\n      <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n    </button>\n    \n    <mat-menu #modelMenu=\"matMenu\" class=\"model-panel\" xPosition=\"before\">\n      <!-- Search Input -->\n      <div class=\"model-search\" (click)=\"$event.stopPropagation()\">\n        <mat-icon>search</mat-icon>\n        <input type=\"text\" \n               placeholder=\"Search models...\" \n               [(ngModel)]=\"searchQuery\"\n               (keydown)=\"$event.stopPropagation()\">\n        @if (searchQuery) {\n          <button mat-icon-button class=\"clear-search\" (click)=\"clearSearch()\">\n            <mat-icon>close</mat-icon>\n          </button>\n        }\n      </div>\n      \n      <!-- Recent Models -->\n      @if (!searchQuery && recentModels().length > 0) {\n        <div class=\"model-group\">\n          <div class=\"group-header\">Recent</div>\n          @for (model of recentModels(); track model.id) {\n            <button mat-menu-item \n                    class=\"model-item\"\n                    [class.selected]=\"selectedModel() === model.id\"\n                    (click)=\"selectModel(model.id)\">\n              <span class=\"model-name\">{{ model.name }}</span>\n              <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n            </button>\n          }\n        </div>\n        <mat-divider></mat-divider>\n      }\n      \n      <!-- Models Grouped by Provider -->\n      <div class=\"model-list\">\n        @if (searchQuery) {\n          <div class=\"model-group\">\n            <div class=\"group-header\">Results</div>\n            @for (model of filteredModels(); track model.id) {\n              <button mat-menu-item \n                      class=\"model-item\"\n                      [class.selected]=\"selectedModel() === model.id\"\n                      (click)=\"selectModel(model.id)\">\n                <span class=\"model-name\">{{ model.name }}</span>\n                <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n              </button>\n            } @empty {\n              <div class=\"no-results\">No models found</div>\n            }\n          </div>\n        } @else {\n          @for (provider of providers(); track provider.id) {\n            <div class=\"model-group\">\n              <div class=\"group-header\">{{ provider.name }}</div>\n              @for (model of provider.models; track model.id) {\n                <button mat-menu-item \n                        class=\"model-item\"\n                        [class.selected]=\"selectedModel() === model.id\"\n                        (click)=\"selectModel(model.id)\">\n                  <span class=\"model-name\">{{ model.name }}</span>\n                </button>\n              }\n            </div>\n          }\n        }\n      </div>\n    </mat-menu>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px;\n      border-radius: 8px;\n      min-width: 0;\n      max-width: 200px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .model-info {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      overflow: hidden;\n      \n      .model-name {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--_on-surface);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        max-width: 150px;\n      }\n      \n      .provider-name {\n        font-size: 11px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .model-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .model-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .model-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .model-group {\n      padding: 8px 0;\n    }\n\n    .group-header {\n      padding: 4px 16px 8px;\n      font-size: 11px;\n      font-weight: 600;\n      color: var(--_on-surface-variant);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 8px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .model-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .model-badge {\n        font-size: 10px;\n        padding: 2px 6px;\n        border-radius: 4px;\n        background: var(--_surface-container-high);\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  `]\n})\nexport class ModelSelectorComponent {\n  /** Currently selected model ID */\n  selectedModel = input.required<string>();\n\n  /** List of providers with their models */\n  providers = input.required<Provider[]>();\n\n  /** Recently used models */\n  recentModels = input<Model[]>([]);\n\n  /** Emitted when a model is selected */\n  modelSelected = output<string>();\n\n  /** Search query for filtering models */\n  searchQuery = '';\n\n  /** Filtered models based on search query */\n  filteredModels = computed(() => {\n    if (!this.searchQuery) return [];\n\n    const query = this.searchQuery.toLowerCase();\n    const allModels: Model[] = [];\n\n    this.providers().forEach(provider => {\n      provider.models.forEach(model => {\n        if (model.name.toLowerCase().includes(query) ||\n          model.id.toLowerCase().includes(query)) {\n          allModels.push(model);\n        }\n      });\n    });\n\n    return allModels;\n  });\n\n  onMenuOpened(): void {\n    this.searchQuery = '';\n  }\n\n  clearSearch(): void {\n    this.searchQuery = '';\n  }\n\n  selectModel(modelId: string): void {\n    this.modelSelected.emit(modelId);\n  }\n\n  getModelName(modelId: string): string {\n    for (const provider of this.providers()) {\n      const model = provider.models.find(m => m.id === modelId);\n      if (model) return model.name;\n    }\n    // Fallback: extract name from ID\n    const parts = modelId.split('/');\n    return parts[parts.length - 1];\n  }\n\n  getProviderName(modelId: string): string {\n    for (const provider of this.providers()) {\n      if (provider.models.some(m => m.id === modelId)) {\n        return provider.name;\n      }\n    }\n    // Fallback: extract provider from ID prefix\n    const parts = modelId.split('/');\n    if (parts.length > 1) {\n      return parts[0].charAt(0).toUpperCase() + parts[0].slice(1);\n    }\n    return 'Unknown';\n  }\n}\n",
            "properties": [
                {
                    "name": "available",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 49
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47
                },
                {
                    "name": "models",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Model[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 50
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 48
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": [],
            "isDuplicate": true,
            "duplicateId": 1,
            "duplicateName": "Provider-1"
        },
        {
            "name": "ProviderInfo",
            "id": "interface-ProviderInfo-d5315f72d4ad5aaed6c7fd66f6f665581b8bab5b22ac57b12dfc2f9ccd92f55739196cbec8d877a3410886f5cbc91b08aedb7e9a482ff090076c28be25d8c9b2",
            "file": "src/app/core/services/models.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface ModelInfo {\n    id: string;\n    name: string;\n    capabilities: string[];\n    context_window: number;\n    supportsStreaming?: boolean;\n}\n\nexport interface ProviderInfo {\n    id: string;\n    name: string;\n    available: boolean;\n    models: ModelInfo[];\n}\n\nexport interface ModelsResponse {\n    providers: ProviderInfo[];\n}\n\n// Default models when backend is unavailable - only latest, non-deprecated models\nconst DEFAULT_PROVIDERS: ProviderInfo[] = [\n    {\n        id: 'googleai',\n        name: 'Google AI',\n        available: true,\n        models: [\n            { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision'], context_window: 2097152 },\n            { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision'], context_window: 1048576 },\n        ],\n    },\n    {\n        id: 'vertexai',\n        name: 'Vertex AI',\n        available: true,\n        models: [\n            { id: 'vertexai/gemini-3-flash', name: 'Gemini 3 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'vertexai/gemini-3-pro', name: 'Gemini 3 Pro', capabilities: ['text', 'vision'], context_window: 2097152 },\n        ],\n    },\n    {\n        id: 'anthropic',\n        name: 'Anthropic',\n        available: true,\n        models: [\n            { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'openai',\n        name: 'OpenAI',\n        available: true,\n        models: [\n            { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-mini', name: 'GPT-4.1 Mini', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-nano', name: 'GPT-4.1 Nano', capabilities: ['text'], context_window: 1047576 },\n            { id: 'openai/o3', name: 'o3', capabilities: ['text', 'reasoning'], context_window: 200000 },\n            { id: 'openai/o4-mini', name: 'o4 Mini', capabilities: ['text', 'reasoning'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'mistral',\n        name: 'Mistral AI',\n        available: true,\n        models: [\n            { id: 'mistral/mistral-large-latest', name: 'Mistral Large', capabilities: ['text'], context_window: 128000 },\n            { id: 'mistral/mistral-small-latest', name: 'Mistral Small', capabilities: ['text'], context_window: 32000 },\n            { id: 'mistral/codestral-latest', name: 'Codestral', capabilities: ['text', 'code'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'cf-ai',\n        name: 'Cloudflare AI',\n        available: true,\n        models: [\n            { id: 'cf-ai/@cf/meta/llama-3.3-70b-instruct-fp8-fast', name: 'Llama 3.3 70B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/google/gemma-7b-it-lora', name: 'Gemma 7B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/deepseek-ai/deepseek-r1-distill-qwen-32b', name: 'DeepSeek R1 32B', capabilities: ['text', 'reasoning'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'ollama',\n        name: 'Ollama (Local)',\n        available: true,\n        models: [\n            { id: 'ollama/llama3.2', name: 'Llama 3.2', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/gemma3:4b', name: 'Gemma 3 4B', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/mistral', name: 'Mistral', capabilities: ['text'], context_window: 32768 },\n            { id: 'ollama/qwen2.5-coder', name: 'Qwen 2.5 Coder', capabilities: ['text', 'code'], context_window: 128000 },\n        ],\n    },\n];\n\nconst DEFAULT_MODEL = 'ollama/gemma3:4b';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelsService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n    private readonly MAX_RECENT = 3;\n\n    providers = signal<ProviderInfo[]>(DEFAULT_PROVIDERS);\n    // Load selected model from preferences, fallback to default\n    selectedModel = signal<string>(this.preferencesService.selectedModel || DEFAULT_MODEL);\n    // Load recent models from preferences\n    recentModels = signal<string[]>(this.preferencesService.recentModels);\n    isLoading = signal(false);\n    isBackendConnected = signal(false);\n\n    constructor() {\n        this.loadModels();\n    }\n\n    loadModels(): void {\n        this.isLoading.set(true);\n        this.http.get<ModelsResponse>(`${this.apiUrl}/models`).pipe(\n            catchError(error => {\n                console.log('Backend unavailable, using default model list');\n                this.isBackendConnected.set(false);\n                return of({ providers: DEFAULT_PROVIDERS });\n            }),\n        ).subscribe(response => {\n            if (response.providers.length > 0) {\n                this.providers.set(response.providers);\n                this.isBackendConnected.set(true);\n            }\n            this.isLoading.set(false);\n        });\n    }\n\n    getAllModels(): ModelInfo[] {\n        return this.providers().flatMap(p => p.models);\n    }\n\n    /** Get all models sorted lexicographically by name */\n    getSortedModels(): ModelInfo[] {\n        return this.getAllModels().sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    /** Get models filtered by search query */\n    filterModels(query: string): ModelInfo[] {\n        const q = query.toLowerCase().trim();\n        if (!q) return this.getSortedModels();\n        return this.getSortedModels().filter(m =>\n            m.name.toLowerCase().includes(q) ||\n            m.id.toLowerCase().includes(q)\n        );\n    }\n\n    /** Get models for a provider, sorted alphabetically */\n    getModelsByProvider(providerId: string): ModelInfo[] {\n        const provider = this.providers().find(p => p.id === providerId);\n        return (provider?.models || []).sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    getModelName(modelId: string): string {\n        const model = this.getAllModels().find(m => m.id === modelId);\n        return model?.name || modelId.split('/').pop() || modelId;\n    }\n\n    getProviderName(modelId: string): string {\n        const providerId = modelId.split('/')[0];\n        const provider = this.providers().find(p => p.id === providerId);\n        return provider?.name || providerId;\n    }\n\n    /** Select a model and add to recent */\n    selectModel(modelId: string): void {\n        this.selectedModel.set(modelId);\n        this.preferencesService.setSelectedModel(modelId);\n        this.addToRecent(modelId);\n    }\n\n    /** Get recent models as ModelInfo objects */\n    getRecentModels(): ModelInfo[] {\n        const all = this.getAllModels();\n        return this.recentModels()\n            .map(id => all.find(m => m.id === id))\n            .filter((m): m is ModelInfo => m !== undefined);\n    }\n\n    private addToRecent(modelId: string): void {\n        const recent = this.recentModels().filter(id => id !== modelId);\n        recent.unshift(modelId);\n        const updated = recent.slice(0, this.MAX_RECENT);\n        this.recentModels.set(updated);\n        // PreferencesService handles persistence via setSelectedModel\n    }\n\n    /** Check if the selected model supports streaming */\n    supportsStreaming(modelId?: string): boolean {\n        const id = modelId || this.selectedModel();\n        // Ollama models may have unreliable streaming support\n        // For now, assume all cloud models support streaming\n        if (id.startsWith('ollama/')) {\n            return false;\n        }\n        // Check if model explicitly declares streaming support\n        const model = this.getAllModels().find(m => m.id === id);\n        if (model?.supportsStreaming !== undefined) {\n            return model.supportsStreaming;\n        }\n        // Default: all non-Ollama models support streaming\n        return true;\n    }\n}\n",
            "properties": [
                {
                    "name": "available",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "models",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ModelInfo[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 18
                },
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 16
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "QueuedPrompt",
            "id": "interface-QueuedPrompt-b8fb92b258013208a1fd0531caf2980a9aad7454d302fda4e5b7f176a5752e338e7aca4d561afc38f6e2a3b47db471ee161c48afac4da61f444e5de8938e6482",
            "file": "src/app/core/services/chat.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, inject, signal, effect } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface Message {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: Date;\n    model?: string;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface ChatRequest {\n    message: string;\n    model: string;\n    history?: { role: string; content: string }[];\n}\n\nexport interface ChatResponse {\n    response: string;\n    model: string;\n    latency_ms: number;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface CompareRequest {\n    prompt: string;\n    models: string[];\n}\n\nexport interface CompareResponse {\n    prompt: string;\n    responses: {\n        model: string;\n        response: string | null;\n        latency_ms: number;\n        error: string | null;\n    }[];\n}\n\nexport interface QueuedPrompt {\n    id: string;\n    content: string;\n    model: string;\n    timestamp: Date;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ChatService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n\n    messages = signal<Message[]>([]);\n    isLoading = signal(false);\n\n    // Prompt queue\n    promptQueue = signal<QueuedPrompt[]>([]);\n    private isProcessingQueue = false;\n\n    // Streaming mode (load from preferences)\n    streamingMode = signal(this.preferencesService.streamingMode);\n\n    // Markdown rendering mode (load from preferences)\n    markdownMode = signal(this.preferencesService.markdownMode);\n\n    constructor() {\n        // Persist streaming mode changes\n        effect(() => {\n            this.preferencesService.setStreamingMode(this.streamingMode());\n        });\n\n        // Persist markdown mode changes\n        effect(() => {\n            this.preferencesService.setMarkdownMode(this.markdownMode());\n        });\n    }\n\n    sendMessage(message: string, model: string): Observable<ChatResponse> {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        return this.http.post<ChatResponse>(`${this.apiUrl}/chat`, {\n            message,\n            model,\n            history,\n        }).pipe(\n            catchError(error => {\n                console.error('Chat error:', error);\n                const errorMessage = error?.error?.detail || error?.error?.message || error?.message || 'Unknown error';\n                const errorDetails = JSON.stringify(error, null, 2);\n                return of({\n                    response: `Error: ${errorMessage}`,\n                    model,\n                    latency_ms: 0,\n                    isError: true,\n                    errorDetails\n                });\n            }),\n        );\n    }\n\n    addAssistantMessage(response: ChatResponse): void {\n        this.messages.update(msgs => [\n            ...msgs,\n            {\n                role: 'assistant',\n                content: response.response,\n                timestamp: new Date(),\n                model: response.model,\n                isError: response.isError,\n                errorDetails: response.errorDetails,\n            },\n        ]);\n        this.isLoading.set(false);\n        // Process next queued prompt if any\n        this.processNextInQueue();\n    }\n\n    /**\n     * Process the next item in the queue automatically after a response is received.\n     */\n    private processNextInQueue(): void {\n        if (this.promptQueue().length > 0 && !this.isLoading()) {\n            const next = this.promptQueue()[0];\n            this.removeFromQueue(next.id);\n\n            if (this.streamingMode()) {\n                this.sendStreamMessage(next.content, next.model, () => {\n                    this.processNextInQueue();\n                });\n            } else {\n                this.sendMessage(next.content, next.model).subscribe({\n                    next: response => this.addAssistantMessage(response),\n                    error: err => {\n                        console.error('Queue send error:', err);\n                        this.isLoading.set(false);\n                        this.processNextInQueue();\n                    }\n                });\n            }\n        }\n    }\n\n    toggleStreamingMode(): void {\n        this.streamingMode.update(v => !v);\n    }\n\n    toggleMarkdownMode(): void {\n        this.markdownMode.update(v => !v);\n    }\n\n    // Send message with streaming (returns EventSource URL)\n    sendStreamMessage(message: string, model: string, onComplete?: () => void): void {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        // Add placeholder assistant message\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'assistant', content: '', timestamp: new Date(), model },\n        ]);\n\n        const eventSource = new EventSource(\n            `${this.apiUrl}/stream?message=${encodeURIComponent(message)}&model=${encodeURIComponent(model)}&history=${encodeURIComponent(JSON.stringify(history))}`\n        );\n\n        eventSource.onmessage = (event) => {\n            if (event.data === '[DONE]') {\n                eventSource.close();\n                this.isLoading.set(false);\n                onComplete?.();\n                return;\n            }\n\n            try {\n                const data = JSON.parse(event.data);\n                if (data.chunk) {\n                    // Update the last message (assistant) with new content\n                    this.messages.update(msgs => {\n                        const updated = [...msgs];\n                        const lastMsg = updated[updated.length - 1];\n                        if (lastMsg && lastMsg.role === 'assistant') {\n                            lastMsg.content += data.chunk;\n                        }\n                        return updated;\n                    });\n                }\n            } catch {\n                // Handle plain text chunks\n                this.messages.update(msgs => {\n                    const updated = [...msgs];\n                    const lastMsg = updated[updated.length - 1];\n                    if (lastMsg && lastMsg.role === 'assistant') {\n                        lastMsg.content += event.data;\n                    }\n                    return updated;\n                });\n            }\n        };\n\n        eventSource.onerror = (error) => {\n            console.error('Stream error:', error);\n            eventSource.close();\n            this.messages.update(msgs => {\n                const updated = [...msgs];\n                const lastMsg = updated[updated.length - 1];\n                if (lastMsg && lastMsg.role === 'assistant' && !lastMsg.content) {\n                    lastMsg.content = 'Error: Stream connection failed';\n                    lastMsg.isError = true;\n                    lastMsg.errorDetails = JSON.stringify(error, null, 2);\n                }\n                return updated;\n            });\n            this.isLoading.set(false);\n            onComplete?.();\n        };\n    }\n\n    compareModels(prompt: string, models: string[]): Observable<CompareResponse> {\n        return this.http.post<CompareResponse>(`${this.apiUrl}/compare`, {\n            prompt,\n            models,\n        });\n    }\n\n    clearHistory(): void {\n        this.messages.set([]);\n    }\n\n    // Queue management methods\n    addToQueue(content: string, model: string): void {\n        const queuedPrompt: QueuedPrompt = {\n            id: crypto.randomUUID(),\n            content,\n            model,\n            timestamp: new Date(),\n        };\n        this.promptQueue.update(queue => [...queue, queuedPrompt]);\n        // Note: Don't process here - queue items are added when model is busy\n        // Processing happens when the current request completes via addAssistantMessage\n    }\n\n    removeFromQueue(id: string): void {\n        this.promptQueue.update(queue => queue.filter(p => p.id !== id));\n    }\n\n    clearQueue(): void {\n        this.promptQueue.set([]);\n    }\n\n    sendFromQueue(id: string): void {\n        const item = this.promptQueue().find(p => p.id === id);\n        if (!item || this.isLoading()) return;\n\n        this.removeFromQueue(id);\n        this.sendMessage(item.content, item.model).subscribe({\n            next: response => this.addAssistantMessage(response),\n            error: err => console.error('Queue send error:', err)\n        });\n    }\n\n    sendAllFromQueue(): void {\n        // Move all queue items to be processed - they will be sent sequentially\n        // as the processNextInQueue is called after each response\n        // For now, just start processing the first one if not already loading\n        if (!this.isLoading() && this.promptQueue().length > 0) {\n            const first = this.promptQueue()[0];\n            this.sendFromQueue(first.id);\n        }\n    }\n\n    updateQueuedPrompt(id: string, content: string): void {\n        this.promptQueue.update(queue =>\n            queue.map(p => p.id === id ? { ...p, content } : p)\n        );\n    }\n\n    moveQueuedPromptUp(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index > 0) {\n                const newQueue = [...queue];\n                [newQueue[index - 1], newQueue[index]] = [newQueue[index], newQueue[index - 1]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    moveQueuedPromptDown(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index >= 0 && index < queue.length - 1) {\n                const newQueue = [...queue];\n                [newQueue[index], newQueue[index + 1]] = [newQueue[index + 1], newQueue[index]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    private processQueue(): void {\n        if (this.isProcessingQueue || this.isLoading() || this.promptQueue().length === 0) {\n            return;\n        }\n\n        this.isProcessingQueue = true;\n        const [nextPrompt, ...remaining] = this.promptQueue();\n        this.promptQueue.set(remaining);\n\n        // Process the prompt\n        this.sendMessage(nextPrompt.content, nextPrompt.model).subscribe({\n            next: response => {\n                this.addAssistantMessage(response);\n                this.isProcessingQueue = false;\n                // Process next in queue\n                this.processQueue();\n            },\n            error: () => {\n                this.isProcessingQueue = false;\n                this.processQueue();\n            }\n        });\n    }\n}\n",
            "properties": [
                {
                    "name": "content",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 46
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 45
                },
                {
                    "name": "model",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 47
                },
                {
                    "name": "timestamp",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Date",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 48
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "QueueItem",
            "id": "interface-QueueItem-a13fd8511ea5880c48b001d1486c7dd33efbe45813022b3a68a5b899ac84c14ea1a597797afebbf33715196d6d0772a6c68b82a281646d3d2ee211ca08d03fb5",
            "file": "src/app/features/chat/components/prompt-queue/prompt-queue.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { CdkDragDrop, DragDropModule } from '@angular/cdk/drag-drop';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { trigger, transition, style, animate } from '@angular/animations';\n\nexport interface QueueItem {\n  id: string;\n  content: string;\n}\n\n@Component({\n  selector: 'app-prompt-queue',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    DragDropModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    TranslateModule,\n  ],\n  animations: [\n    trigger('slideIn', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateY(10px)' }),\n        animate('200ms ease-out', style({ opacity: 1, transform: 'translateY(0)' }))\n      ]),\n      transition(':leave', [\n        animate('150ms ease-in', style({ opacity: 0, transform: 'translateY(-10px)' }))\n      ])\n    ])\n  ],\n  template: `\n    <div class=\"prompt-queue slide-up\">\n      <div class=\"queue-header\">\n        <div class=\"queue-header-left\" (click)=\"expanded.set(!expanded())\">\n          <mat-icon class=\"expand-icon\" [class.expanded]=\"expanded()\">expand_more</mat-icon>\n          <span class=\"queue-count\">{{ queue().length }} {{ 'queue.queued' | translate }}</span>\n        </div>\n        <div class=\"queue-header-actions\">\n          <button mat-icon-button class=\"send-all-btn\" [matTooltip]=\"'queue.sendAll' | translate\" (click)=\"sendAll.emit(); $event.stopPropagation()\">\n            <mat-icon>double_arrow</mat-icon>\n          </button>\n          <button mat-icon-button class=\"clear-all-btn\" [matTooltip]=\"'queue.clearAll' | translate\" (click)=\"clearAll.emit(); $event.stopPropagation()\">\n            <mat-icon>clear_all</mat-icon>\n          </button>\n        </div>\n      </div>\n      \n      @if (expanded()) {\n        <div class=\"queue-items\" cdkDropList (cdkDropListDropped)=\"onDrop($event)\">\n          @for (item of queue(); track item.id; let i = $index) {\n            <div class=\"queue-item\" cdkDrag @slideIn>\n              <mat-icon class=\"drag-handle\" cdkDragHandle>drag_indicator</mat-icon>\n              \n              @if (editingId() === item.id) {\n                <input \n                  class=\"queue-edit-input\" \n                  [(ngModel)]=\"editingContent\"\n                  (blur)=\"saveEdit(item.id)\"\n                  (keydown.enter)=\"saveEdit(item.id)\"\n                  (keydown.escape)=\"cancelEdit()\"\n                  #queueEditInput>\n              } @else {\n                <span class=\"queue-item-content\">{{ item.content }}</span>\n              }\n              \n              <div class=\"queue-item-actions\">\n                <button mat-icon-button [matTooltip]=\"'queue.sendNow' | translate\" (click)=\"send.emit(item.id)\">\n                  <mat-icon>send</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.edit' | translate\" (click)=\"startEdit(item)\">\n                  <mat-icon>edit</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.delete' | translate\" (click)=\"remove.emit(item.id)\">\n                  <mat-icon>delete</mat-icon>\n                </button>\n              </div>\n            </div>\n          }\n        </div>\n      }\n    </div>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n\n      --_primary: var(--primary, #4285f4);\n      --_error: var(--error, #ba1a1a);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_surface-container-highest: var(--surface-container-highest, #dce0e6);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline: var(--outline, #74777f);\n    }\n\n    .prompt-queue {\n      background: var(--_surface-container-high);\n      border-radius: 12px;\n      padding: 12px 16px;\n      margin-bottom: 16px;\n    }\n\n    .queue-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .queue-header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .expand-icon {\n      transition: transform 0.2s ease;\n      \n      &.expanded {\n        transform: rotate(180deg);\n      }\n    }\n\n    .queue-count {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--_on-surface);\n    }\n\n    .queue-header-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n      \n      .send-all-btn {\n        color: var(--_primary);\n      }\n      \n      .clear-all-btn {\n        color: var(--_error);\n      }\n    }\n\n    .queue-items {\n      margin-top: 12px;\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .queue-item {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--_surface-container);\n      border-radius: 8px;\n      cursor: grab;\n      \n      &:active {\n        cursor: grabbing;\n      }\n    }\n\n    .drag-handle {\n      color: var(--_on-surface-variant);\n      opacity: 0.6;\n      cursor: grab;\n      \n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .queue-item-content {\n      flex: 1;\n      font-size: 14px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .queue-edit-input {\n      flex: 1;\n      background: var(--_surface-container-highest);\n      border: 1px solid var(--_outline);\n      border-radius: 4px;\n      padding: 4px 8px;\n      font-size: 14px;\n      color: var(--_on-surface);\n      \n      &:focus {\n        outline: none;\n        border-color: var(--_primary);\n      }\n    }\n\n    .queue-item-actions {\n      display: flex;\n      gap: 4px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .queue-item:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    /* CDK Drag and Drop styles */\n    .cdk-drag-preview {\n      box-sizing: border-box;\n      border-radius: 8px;\n      box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\n                  0 8px 10px 1px rgba(0, 0, 0, 0.14),\n                  0 3px 14px 2px rgba(0, 0, 0, 0.12);\n    }\n\n    .cdk-drag-placeholder {\n      opacity: 0.3;\n    }\n\n    .cdk-drag-animating {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .queue-items.cdk-drop-list-dragging .queue-item:not(.cdk-drag-placeholder) {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n  `]\n})\nexport class PromptQueueComponent {\n  /** List of queued items */\n  queue = input.required<QueueItem[]>();\n\n  /** Emitted when user clicks send on an item */\n  send = output<string>();\n\n  /** Emitted when user clicks send all */\n  sendAll = output<void>();\n\n  /** Emitted when user clicks remove on an item */\n  remove = output<string>();\n\n  /** Emitted when user clicks clear all */\n  clearAll = output<void>();\n\n  /** Emitted when a queue item is updated */\n  update = output<{ id: string; content: string }>();\n\n  /** Emitted when items are reordered via drag-drop */\n  reorder = output<CdkDragDrop<QueueItem[]>>();\n\n  /** Whether the queue is expanded */\n  expanded = signal(true);\n\n  /** ID of the item being edited */\n  editingId = signal<string | null>(null);\n\n  /** Content being edited */\n  editingContent = '';\n\n  onDrop(event: CdkDragDrop<QueueItem[]>): void {\n    this.reorder.emit(event);\n  }\n\n  startEdit(item: QueueItem): void {\n    this.editingId.set(item.id);\n    this.editingContent = item.content;\n  }\n\n  saveEdit(id: string): void {\n    if (this.editingContent.trim()) {\n      this.update.emit({ id, content: this.editingContent.trim() });\n    }\n    this.editingId.set(null);\n  }\n\n  cancelEdit(): void {\n    this.editingId.set(null);\n    this.editingContent = '';\n  }\n}\n",
            "properties": [
                {
                    "name": "content",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 46
                },
                {
                    "name": "id",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 45
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "QuickAction",
            "id": "interface-QuickAction-aff0eb6f8cf2486905c1702c8dcd38dac328f92231d3235cbb2cf3d9a539d4278fd45741883df014dd67c5e649f737488f5665e5ae5c7d891eca0f8b475703dd",
            "file": "src/app/features/chat/components/welcome-screen/welcome-screen.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, signal, OnInit, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { TranslateModule } from '@ngx-translate/core';\n\nexport interface Greeting {\n  text: string;\n  lang: string;\n  dir: 'ltr' | 'rtl';\n  anim: 'type' | 'slide';\n}\n\nexport interface QuickAction {\n  icon: string;\n  labelKey: string;\n  prompt: string;\n  color: string;\n}\n\n@Component({\n  selector: 'app-welcome-screen',\n  standalone: true,\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    TranslateModule,\n  ],\n  template: `\n    <div class=\"welcome-header\">\n      <div class=\"welcome-logo\">\n        <img [src]=\"logoUrl()\" [alt]=\"logoAlt()\">\n      </div>\n      <h1 class=\"welcome-title\" \n          [class.rtl]=\"currentGreeting().dir === 'rtl'\"\n          [class.slide-in]=\"currentGreeting().anim === 'slide'\">\n        <span class=\"typewriter-text\">{{ typewriterText() }}</span><span class=\"cursor\" [class.visible]=\"showCursor()\">|</span>\n      </h1>\n      <p class=\"welcome-subtitle\">{{ 'chat.greetingSubtitle' | translate }}</p>\n    </div>\n    \n    <!-- Quick Action Chips -->\n    <div class=\"quick-chips\">\n      @for (action of quickActions(); track action.labelKey) {\n        <button mat-stroked-button \n                class=\"quick-chip\"\n                (click)=\"actionSelected.emit(action.prompt)\">\n          <mat-icon class=\"chip-icon\" [style.color]=\"action.color\">{{ action.icon }}</mat-icon>\n          <span>{{ action.labelKey | translate }}</span>\n        </button>\n      }\n    </div>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      text-align: center;\n      padding: 24px 16px;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .welcome-header {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin-bottom: 32px;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n      }\n    }\n\n    .welcome-title {\n      font-size: 2.5rem;\n      font-weight: 400;\n      margin: 0 0 8px 0;\n      color: var(--_on-surface);\n      min-height: 60px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .typewriter-text {\n        display: inline;\n      }\n      \n      .cursor {\n        display: inline-block;\n        width: 2px;\n        height: 1em;\n        background: var(--_primary);\n        margin-left: 2px;\n        opacity: 0;\n        animation: blink 1s step-end infinite;\n        \n        &.visible {\n          opacity: 1;\n        }\n      }\n    }\n\n    .welcome-subtitle {\n      font-size: 1.1rem;\n      color: var(--_on-surface-variant);\n      margin: 0;\n    }\n\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 12px;\n      justify-content: center;\n      max-width: 600px;\n    }\n\n    .quick-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-radius: 24px;\n      border: 1px solid var(--_outline-variant);\n      background: transparent;\n      color: var(--_on-surface);\n      font-size: 14px;\n      transition: all 0.2s ease;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n        border-color: var(--_primary);\n      }\n      \n      .chip-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    @keyframes blink {\n      50% { opacity: 0; }\n    }\n  `]\n})\nexport class WelcomeScreenComponent implements OnInit, OnDestroy {\n  /** List of greetings to cycle through */\n  greetings = input.required<Greeting[]>();\n\n  /** Quick action buttons */\n  quickActions = input.required<QuickAction[]>();\n\n  /** Logo URL (configurable for portability) */\n  logoUrl = input<string>('genkit-logo.png');\n\n  /** Logo alt text */\n  logoAlt = input<string>('Genkit');\n\n  /** Emitted when a quick action is selected */\n  actionSelected = output<string>();\n\n  /** Current greeting index */\n  currentGreetingIndex = signal(0);\n\n  /** Current typewriter text */\n  typewriterText = signal('');\n\n  /** Whether to show the cursor */\n  showCursor = signal(true);\n\n  private greetingInterval?: ReturnType<typeof setInterval>;\n  private typeInterval?: ReturnType<typeof setTimeout>;\n  private eraseInterval?: ReturnType<typeof setTimeout>;\n\n  /** Get the current greeting based on index */\n  currentGreeting(): Greeting {\n    return this.greetings()[this.currentGreetingIndex()];\n  }\n\n  ngOnInit(): void {\n    this.startGreetingCarousel();\n  }\n\n  ngOnDestroy(): void {\n    if (this.greetingInterval) clearInterval(this.greetingInterval);\n    if (this.typeInterval) clearTimeout(this.typeInterval);\n    if (this.eraseInterval) clearTimeout(this.eraseInterval);\n  }\n\n  private startGreetingCarousel(): void {\n    const greetings = this.greetings();\n    if (greetings.length === 0) return;\n\n    // Type the first greeting\n    this.typeGreeting(greetings[0].text, greetings[0].anim, greetings[0].dir);\n\n    // Set up interval to cycle through greetings\n    this.greetingInterval = setInterval(() => {\n      this.eraseGreeting(() => {\n        const nextIndex = (this.currentGreetingIndex() + 1) % greetings.length;\n        this.currentGreetingIndex.set(nextIndex);\n        const nextGreeting = greetings[nextIndex];\n        this.typeGreeting(nextGreeting.text, nextGreeting.anim, nextGreeting.dir);\n      }, this.currentGreeting().anim);\n    }, 4000);\n  }\n\n  private typeGreeting(greetingText: string, anim: 'type' | 'slide' = 'type', dir: 'ltr' | 'rtl' = 'ltr'): void {\n    this.showCursor.set(true);\n\n    if (anim === 'slide') {\n      // For slide animation, show full text immediately\n      this.typewriterText.set(greetingText);\n      return;\n    }\n\n    // Typewriter effect\n    let charIndex = 0;\n    const typeNext = () => {\n      if (charIndex <= greetingText.length) {\n        this.typewriterText.set(greetingText.substring(0, charIndex));\n        charIndex++;\n        this.typeInterval = setTimeout(typeNext, 50 + Math.random() * 30);\n      }\n    };\n    typeNext();\n  }\n\n  private eraseGreeting(callback: () => void, anim: 'type' | 'slide' = 'type'): void {\n    if (anim === 'slide') {\n      // For slide, just clear and callback\n      this.typewriterText.set('');\n      callback();\n      return;\n    }\n\n    // Erase effect\n    const currentText = this.typewriterText();\n    let charIndex = currentText.length;\n\n    const eraseNext = () => {\n      if (charIndex >= 0) {\n        this.typewriterText.set(currentText.substring(0, charIndex));\n        charIndex--;\n        this.eraseInterval = setTimeout(eraseNext, 30);\n      } else {\n        callback();\n      }\n    };\n    eraseNext();\n  }\n}\n",
            "properties": [
                {
                    "name": "color",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 46
                },
                {
                    "name": "icon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 43
                },
                {
                    "name": "labelKey",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 44
                },
                {
                    "name": "prompt",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 45
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "SendEvent",
            "id": "interface-SendEvent-b07f1ce2875da326c0f2b907c9a2120690ca9950f8d13b2cff50fc814a1b5ee4a802ed71c7676b1c3b44ec62e86ade6049e8c72ededb898cdd9616920b254122",
            "file": "src/app/features/chat/components/chat-input/chat-input.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import {\n  Component, input, output, signal, computed, effect,\n  ElementRef, ViewChild, AfterViewInit, inject\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { trigger, transition, style, animate } from '@angular/animations';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\n\n/** Default configuration - can be overridden via inputs */\nconst DEFAULT_CONFIG = {\n  maxAttachments: 10,\n  maxFileSizeBytes: 1 * 1024 * 1024, // 1MB\n};\n\n/**\n * Get Material Icon name for a given MIME type.\n * Inlined for component portability.\n */\nfunction getMimeTypeIcon(mimeType: string): string {\n  if (mimeType.startsWith('image/')) return 'image';\n  if (mimeType.startsWith('video/')) return 'videocam';\n  if (mimeType.startsWith('audio/')) return 'audio_file';\n  if (mimeType === 'application/pdf') return 'picture_as_pdf';\n  if (mimeType.includes('spreadsheet') || mimeType.includes('excel')) return 'table_chart';\n  if (mimeType.includes('presentation') || mimeType.includes('powerpoint')) return 'slideshow';\n  if (mimeType.includes('document') || mimeType.includes('word')) return 'description';\n  if (mimeType.startsWith('text/')) return 'article';\n  if (mimeType.includes('zip') || mimeType.includes('compressed')) return 'folder_zip';\n  if (mimeType.includes('json')) return 'data_object';\n  return 'insert_drive_file';\n}\n\nexport interface AttachedFile {\n  name: string;\n  size: number;\n  type: string;\n  preview?: string;\n  data?: string;\n}\n\nexport interface SendEvent {\n  message: string;\n  attachments: AttachedFile[];\n}\n\n@Component({\n  selector: 'app-chat-input',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatTooltipModule,\n    MatDividerModule,\n    MatSnackBarModule,\n    TranslateModule,\n  ],\n  animations: [\n    trigger('slideButton', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateX(10px)' }),\n        animate('150ms ease-out', style({ opacity: 1, transform: 'translateX(0)' }))\n      ]),\n      transition(':leave', [\n        animate('100ms ease-in', style({ opacity: 0, transform: 'translateX(-10px)' }))\n      ])\n    ])\n  ],\n  template: `\n    <div class=\"input-box\" \n         [class.focused]=\"inputFocused()\" \n         [class.is-dragging]=\"isDragging()\"\n         (click)=\"focusInput($event)\"\n         (dragover)=\"onDragOver($event)\" \n         (dragleave)=\"onDragLeave($event)\"\n         (drop)=\"onDrop($event)\">\n      \n      <!-- Drop Zone Overlay -->\n      @if (isDragging()) {\n        <div class=\"drop-zone-overlay\">\n          <mat-icon class=\"drop-icon\">cloud_upload</mat-icon>\n          <span class=\"drop-caption\">Drop files to attach</span>\n        </div>\n      }\n      \n      <textarea class=\"chat-input\" \n                [class.content-flagged]=\"contentFlagged()\"\n                [(ngModel)]=\"message\" \n                [placeholder]=\"placeholder()\"\n                [attr.aria-label]=\"placeholder()\"\n                (keydown.enter)=\"onEnterKey($event)\"\n                (focus)=\"inputFocused.set(true)\"\n                (blur)=\"inputFocused.set(false)\"\n                (input)=\"onInputChange()\"\n                [matTooltip]=\"contentFlagged() ? 'Content flagged: ' + flaggedLabels().join(', ') : ''\"\n                rows=\"1\"\n                #chatTextarea></textarea>\n\n      @if (message) {\n        <button mat-icon-button class=\"clear-input-btn\" (click)=\"clearInput()\" [attr.aria-label]=\"'chat.clearInput' | translate\" [matTooltip]=\"'chat.clearInput' | translate\">\n          <mat-icon>close</mat-icon>\n        </button>\n      }\n      \n      <!-- Bottom Toolbar -->\n      <div class=\"input-toolbar\">\n        <div class=\"toolbar-left\">\n          <!-- Add/Attach Button -->\n          <button mat-icon-button \n                  class=\"toolbar-btn add-btn\"\n                  [attr.aria-label]=\"'chat.addFiles' | translate\"\n                  [matTooltip]=\"'chat.addFiles' | translate\"\n                  [matMenuTriggerFor]=\"attachMenu\">\n            <mat-icon>add</mat-icon>\n          </button>\n          \n          <mat-menu #attachMenu=\"matMenu\" class=\"attach-menu\">\n            <button mat-menu-item (click)=\"anyInput.click()\">\n              <mat-icon>upload_file</mat-icon>\n              <span>{{ 'chat.uploadFiles' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"imageInput.click()\">\n              <mat-icon>image</mat-icon>\n              <span>{{ 'attach.photos' | translate }}</span>\n            </button>\n            <mat-divider></mat-divider>\n            <button mat-menu-item (click)=\"audioInput.click()\">\n              <mat-icon>audio_file</mat-icon>\n              <span>{{ 'attach.audio' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"videoInput.click()\">\n              <mat-icon>videocam</mat-icon>\n              <span>{{ 'attach.video' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"pdfInput.click()\">\n              <mat-icon>picture_as_pdf</mat-icon>\n              <span>{{ 'attach.pdf' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"textInput.click()\">\n              <mat-icon>code</mat-icon>\n              <span>{{ 'attach.code' | translate }}</span>\n            </button>\n          </mat-menu>\n          \n          <!-- Hidden file inputs -->\n          <input #imageInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"image/*\">\n          <input #videoInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"video/*\">\n          <input #audioInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"audio/*\">\n          <input #pdfInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".pdf\">\n          <input #textInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".txt,.md,.json,.csv,.xml,.yaml,.yml,.py,.ts,.js,.go,.rs,.java\">\n          <input #anyInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple>\n          \n          <!-- Tools Button -->\n          <button mat-button class=\"toolbar-btn tools-btn\">\n            <mat-icon>handyman</mat-icon>\n            <span>{{ 'toolbar.tools' | translate }}</span>\n          </button>\n        </div>\n        \n        <div class=\"toolbar-right\">\n          <ng-content select=\"[modelSelector]\"></ng-content>\n          \n          <!-- Settings Dropdown -->\n          <button mat-icon-button \n                  class=\"toolbar-btn settings-btn\"\n                  [matMenuTriggerFor]=\"settingsMenu\"\n                  [attr.aria-label]=\"'toolbar.settings' | translate\"\n                  [matTooltip]=\"'toolbar.settings' | translate\">\n            <mat-icon>tune</mat-icon>\n          </button>\n          <mat-menu #settingsMenu=\"matMenu\" class=\"settings-menu\">\n            <!-- Streaming Toggle -->\n            <button mat-menu-item (click)=\"toggleStreaming.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ streamingEnabled() ? 'stream' : 'pause_circle' }}</mat-icon>\n              <span>{{ 'toolbar.stream' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"streamingEnabled()\">\n                {{ streamingEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <!-- Markdown Toggle -->\n            <button mat-menu-item (click)=\"toggleMarkdown.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ markdownEnabled() ? 'code' : 'code_off' }}</mat-icon>\n              <span>{{ 'toolbar.markdown' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"markdownEnabled()\">\n                {{ markdownEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <!-- Content Safety Toggle -->\n            <button mat-menu-item (click)=\"toggleSafety.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ safetyEnabled() ? 'shield' : 'shield_outlined' }}</mat-icon>\n              <span>{{ 'toolbar.safe' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"safetyEnabled()\">\n                {{ safetyEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <mat-divider></mat-divider>\n            \n            <!-- Clear Preferences -->\n            <button mat-menu-item (click)=\"clearPreferences.emit()\">\n              <mat-icon>delete_outline</mat-icon>\n              <span>{{ 'settings.clearPreferences' | translate }}</span>\n            </button>\n          </mat-menu>\n          \n          <!-- Send Button or Voice Input -->\n          <div class=\"action-btn-container\">\n            @if (showSendButton()) {\n              <button mat-icon-button \n                      class=\"toolbar-btn send-btn\"\n                      @slideButton\n                      [attr.aria-label]=\"'chat.sendMessage' | translate\"\n                      [matTooltip]=\"'chat.sendMessage' | translate\"\n                      (click)=\"sendMessage()\">\n                <mat-icon>send</mat-icon>\n              </button>\n            } @else if (voiceSupported()) {\n              <button mat-icon-button \n                      class=\"toolbar-btn mic-btn\"\n                      @slideButton\n                      [class.recording]=\"isRecording()\"\n                      [attr.aria-label]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      [matTooltip]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      (click)=\"toggleVoice.emit()\">\n                <mat-icon>{{ isRecording() ? 'mic_off' : 'mic' }}</mat-icon>\n              </button>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Attached Files List -->\n    @if (attachedFiles().length > 0) {\n      <div class=\"attached-files-container\" [class.is-dragging]=\"isDragging()\">\n        <div class=\"attachments-header\">\n          <span class=\"attachments-count\">{{ attachedFiles().length }} file{{ attachedFiles().length > 1 ? 's' : '' }} attached</span>\n          <div class=\"attachments-actions\">\n            <button mat-icon-button class=\"add-more-btn\" (click)=\"anyInput.click()\" [attr.aria-label]=\"'chat.addMoreFiles' | translate\" [matTooltip]=\"'chat.addMoreFiles' | translate\">\n              <mat-icon>add</mat-icon>\n            </button>\n            <button mat-icon-button class=\"clear-all-btn\" (click)=\"clearAllFiles()\" [attr.aria-label]=\"'actions.clearAll' | translate\" [matTooltip]=\"'actions.clearAll' | translate\">\n              <mat-icon>delete_sweep</mat-icon>\n            </button>\n          </div>\n        </div>\n        \n        <div class=\"attached-files-list\">\n          @for (file of attachedFiles(); track file.name) {\n            <div class=\"file-row\">\n              <div class=\"file-icon-wrapper\">\n                @if (file.type.startsWith('image/')) {\n                  <img [src]=\"file.preview\" alt=\"preview\" class=\"file-thumb-small\">\n                } @else {\n                  <mat-icon class=\"file-type-icon-small\">{{ getFileIcon(file.type) }}</mat-icon>\n                }\n              </div>\n              <span class=\"file-name-text\" [matTooltip]=\"file.name\">{{ file.name }}</span>\n              <span class=\"file-size-text\">{{ formatFileSize(file.size) }}</span>\n              <button mat-icon-button class=\"file-remove-btn-small\" (click)=\"removeFile(file)\" [attr.aria-label]=\"('actions.remove' | translate) + ' ' + file.name\" [matTooltip]=\"'actions.remove' | translate\">\n                <mat-icon>close</mat-icon>\n              </button>\n            </div>\n          }\n        </div>\n      </div>\n    }\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n      --_error: var(--error, #ba1a1a);\n    }\n\n    .input-box {\n      position: relative;\n      background: var(--_surface-container);\n      border: 1px solid var(--_outline-variant);\n      border-radius: 24px;\n      padding: 12px 16px;\n      transition: all 0.2s ease;\n      \n      &.focused {\n        border-color: var(--_primary);\n        box-shadow: 0 0 0 1px var(--_primary);\n      }\n      \n      &.is-dragging {\n        border-color: var(--_primary);\n        background: var(--_primary-container);\n      }\n    }\n\n    .drop-zone-overlay {\n      position: absolute;\n      inset: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      background: var(--_primary-container);\n      border-radius: 24px;\n      z-index: 10;\n      \n      .drop-icon {\n        font-size: 48px;\n        width: 48px;\n        height: 48px;\n        color: var(--_primary);\n      }\n      \n      .drop-caption {\n        margin-top: 8px;\n        font-size: 14px;\n        color: var(--_on-primary-container);\n      }\n    }\n\n    .chat-input {\n      width: 100%;\n      background: transparent;\n      border: none;\n      outline: none;\n      font-size: 16px;\n      color: var(--_on-surface);\n      resize: none;\n      font-family: inherit;\n      line-height: 1.5;\n      max-height: 200px;\n      overflow-y: auto;\n      \n      &::placeholder {\n        color: var(--_on-surface-variant);\n      }\n      \n      &.content-flagged {\n        text-decoration: underline wavy var(--_error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    .input-toolbar {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 8px;\n      padding-top: 8px;\n      border-top: 1px solid var(--_outline-variant);\n    }\n\n    .toolbar-left, .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n    }\n\n    .toolbar-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .tools-btn {\n      font-size: 13px;\n      \n      mat-icon {\n        font-size: 18px;\n        margin-right: 4px;\n      }\n    }\n\n    .action-btn-container {\n      overflow: hidden;\n    }\n\n    .send-btn {\n      color: var(--_primary);\n    }\n\n    .mic-btn {\n      &.recording {\n        color: var(--_error);\n        animation: pulse 1s ease-in-out infinite;\n      }\n    }\n\n    .toggle-indicator {\n      margin-left: auto;\n      font-size: 18px;\n      color: var(--_on-surface-variant);\n      \n      &.active {\n        color: var(--_primary);\n      }\n    }\n\n    /* Attached files styles */\n    .attached-files-container {\n      margin-top: 12px;\n      padding: 12px;\n      background: var(--_surface-container);\n      border-radius: 12px;\n    }\n\n    .attachments-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .attachments-count {\n      font-size: 12px;\n      color: var(--_on-surface-variant);\n    }\n\n    .attachments-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n        }\n      }\n    }\n\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 8px;\n      background: var(--_surface-container-high);\n      border-radius: 8px;\n    }\n\n    .file-icon-wrapper {\n      width: 32px;\n      height: 32px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      .file-thumb-small {\n        width: 32px;\n        height: 32px;\n        object-fit: cover;\n        border-radius: 4px;\n      }\n      \n      .file-type-icon-small {\n        font-size: 24px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-size-text {\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n    }\n\n    .file-remove-btn-small {\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n  `]\n})\nexport class ChatInputComponent implements AfterViewInit {\n  /** Placeholder text for the input */\n  placeholder = input<string>('Type a message...');\n\n  /** Whether the input is disabled */\n  disabled = input<boolean>(false);\n\n  /** Whether content is flagged as unsafe */\n  contentFlagged = input<boolean>(false);\n\n  /** Labels of flagged content */\n  flaggedLabels = input<string[]>([]);\n\n  /** Whether streaming is enabled */\n  streamingEnabled = input<boolean>(true);\n\n  /** Whether markdown rendering is enabled */\n  markdownEnabled = input<boolean>(true);\n\n  /** Whether content safety is enabled */\n  safetyEnabled = input<boolean>(true);\n\n  /** Whether voice is currently recording */\n  isRecording = input<boolean>(false);\n\n  /** Whether voice input is supported */\n  voiceSupported = input<boolean>(false);\n\n  /**\n   * Signal-based text injection for decoupled communication.\n   * When this value changes, the input text is updated and the input is focused.\n   * Use with a signal from parent component:\n   * \n   * @example\n   * // In parent:\n   * injectedPrompt = signal<string | null>(null);\n   * \n   * // When quick action clicked:\n   * this.injectedPrompt.set('Tell me a joke');\n   * \n   * // In template:\n   * <app-chat-input [injectedText]=\"injectedPrompt()\" />\n   */\n  injectedText = input<string | null>(null);\n\n  /** Emitted when user sends a message */\n  send = output<SendEvent>();\n\n  /** Emitted when input text changes */\n  inputChange = output<string>();\n\n  /** Emitted when voice toggle is clicked */\n  toggleVoice = output<void>();\n\n  /** Emitted when streaming toggle is clicked */\n  toggleStreaming = output<void>();\n\n  /** Emitted when markdown toggle is clicked */\n  toggleMarkdown = output<void>();\n\n  /** Emitted when safety toggle is clicked */\n  toggleSafety = output<void>();\n\n  /** Emitted when clear preferences is clicked */\n  clearPreferences = output<void>();\n\n  /** Emitted when files are selected */\n  filesSelected = output<File[]>();\n\n  /** Services */\n  private snackBar = inject(MatSnackBar);\n  private translate = inject(TranslateService);\n\n  /** Local state */\n  message = '';\n  inputFocused = signal(false);\n  isDragging = signal(false);\n  attachedFiles = signal<AttachedFile[]>([]);\n\n  /** Computed: show send button when there's text */\n  showSendButton = computed(() => this.message.trim().length > 0);\n\n  @ViewChild('chatTextarea') private textareaRef!: ElementRef<HTMLTextAreaElement>;\n\n  constructor() {\n    // Watch for injected text changes and update input with focus\n    effect(() => {\n      const text = this.injectedText();\n      if (text !== null && text !== undefined) {\n        this.message = text;\n        this.onInputChange();\n        // Focus and move cursor to end after text is set\n        setTimeout(() => {\n          this.focusInputAtEnd();\n        }, 0);\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    // Focus the input on init\n    setTimeout(() => this.focusInput(), 100);\n  }\n\n  focusInput(event?: MouseEvent): void {\n    if (event) {\n      // Don't focus if clicking on a button\n      const target = event.target as HTMLElement;\n      if (target.closest('button') || target.closest('mat-menu')) {\n        return;\n      }\n    }\n    this.textareaRef?.nativeElement?.focus();\n  }\n\n  /**\n   * Focus the input and move cursor to the end of the text.\n   * Used when injecting text to place cursor after the injected content.\n   */\n  focusInputAtEnd(): void {\n    const textarea = this.textareaRef?.nativeElement;\n    if (textarea) {\n      textarea.focus();\n      const length = textarea.value.length;\n      textarea.setSelectionRange(length, length);\n    }\n  }\n\n  onInputChange(): void {\n    this.inputChange.emit(this.message);\n  }\n\n  onEnterKey(event: Event): void {\n    const keyEvent = event as KeyboardEvent;\n    if (!keyEvent.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n\n  sendMessage(): void {\n    const trimmedMessage = this.message.trim();\n    if (!trimmedMessage && this.attachedFiles().length === 0) return;\n\n    this.send.emit({\n      message: trimmedMessage,\n      attachments: [...this.attachedFiles()]\n    });\n\n    this.message = '';\n    this.attachedFiles.set([]);\n  }\n\n  clearInput(): void {\n    this.message = '';\n    this.inputChange.emit('');\n  }\n\n  // Drag and drop handlers\n  onDragOver(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(true);\n  }\n\n  onDragLeave(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n  }\n\n  onDrop(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n\n    const files = event.dataTransfer?.files;\n    if (files && files.length > 0) {\n      this.processFiles(Array.from(files));\n    }\n  }\n\n  onFileSelected(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    if (input.files && input.files.length > 0) {\n      this.processFiles(Array.from(input.files));\n      input.value = ''; // Reset for same file selection\n    }\n  }\n\n  private processFiles(files: File[]): void {\n    const currentFiles = this.attachedFiles();\n\n    // Check max attachments\n    if (currentFiles.length + files.length > DEFAULT_CONFIG.maxAttachments) {\n      this.snackBar.open(\n        this.translate.instant('errors.tooManyFiles', { max: DEFAULT_CONFIG.maxAttachments }),\n        'OK',\n        { duration: 3000 }\n      );\n      return;\n    }\n\n    for (const file of files) {\n      // Check file size\n      if (file.size > DEFAULT_CONFIG.maxFileSizeBytes) {\n        this.snackBar.open(\n          this.translate.instant('errors.fileTooLarge', { name: file.name, size: '1MB' }),\n          'OK',\n          { duration: 3000 }\n        );\n        continue;\n      }\n\n      // Create preview for images\n      if (file.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.attachedFiles.update(files => [...files, {\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            preview: reader.result as string,\n            data: reader.result as string\n          }]);\n        };\n        reader.readAsDataURL(file);\n      } else {\n        this.attachedFiles.update(files => [...files, {\n          name: file.name,\n          size: file.size,\n          type: file.type\n        }]);\n      }\n    }\n  }\n\n  removeFile(file: AttachedFile): void {\n    this.attachedFiles.update(files => files.filter(f => f.name !== file.name));\n  }\n\n  clearAllFiles(): void {\n    this.attachedFiles.set([]);\n  }\n\n  getFileIcon(mimeType: string): string {\n    return getMimeTypeIcon(mimeType);\n  }\n\n  formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  }\n}\n",
            "properties": [
                {
                    "name": "attachments",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "AttachedFile[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 96
                },
                {
                    "name": "message",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 95
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "SpeechRecognitionErrorEvent",
            "id": "interface-SpeechRecognitionErrorEvent-1b4fbb65bb82930d5a8bd2a489b547447f8e5cf3a2aed57b7a43accc37c9121316130722ce82a79ed26ff0299fcbf0ff2a012c411cde999ea062953b897c3d7d",
            "file": "src/app/core/services/speech.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n// Web Speech API type declarations (not included in standard TypeScript libs)\ninterface SpeechRecognitionEvent extends Event {\n    resultIndex: number;\n    results: SpeechRecognitionResultList;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n    error: string;\n    message: string;\n}\n\ninterface SpeechRecognitionInterface extends EventTarget {\n    continuous: boolean;\n    interimResults: boolean;\n    lang: string;\n    onresult: ((event: SpeechRecognitionEvent) => void) | null;\n    onend: (() => void) | null;\n    onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\n    start(): void;\n    stop(): void;\n    abort(): void;\n}\n\ndeclare global {\n    interface Window {\n        SpeechRecognition: new () => SpeechRecognitionInterface;\n        webkitSpeechRecognition: new () => SpeechRecognitionInterface;\n    }\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SpeechService {\n    private recognition: SpeechRecognitionInterface | null = null;\n    private synthesis = window.speechSynthesis;\n\n    isListening = signal(false);\n    isSpeaking = signal(false);\n    transcript = signal('');\n\n    constructor() {\n        this.initRecognition();\n    }\n\n    private initRecognition(): void {\n        const SpeechRecognitionCtor = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognitionCtor) {\n            this.recognition = new SpeechRecognitionCtor();\n            this.recognition.continuous = false;\n            this.recognition.interimResults = true;\n            this.recognition.lang = 'en-US';\n\n            this.recognition.onresult = (event: SpeechRecognitionEvent) => {\n                let finalTranscript = '';\n                for (let i = event.resultIndex; i < event.results.length; i++) {\n                    if (event.results[i].isFinal) {\n                        finalTranscript += event.results[i][0].transcript;\n                    }\n                }\n                if (finalTranscript) {\n                    this.transcript.set(finalTranscript);\n                }\n            };\n\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n            };\n\n            this.recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n                console.error('Speech recognition error:', event.error);\n                this.isListening.set(false);\n            };\n        }\n    }\n\n    isSupported(): boolean {\n        return this.recognition !== null;\n    }\n\n    isTTSSupported(): boolean {\n        return 'speechSynthesis' in window;\n    }\n\n    startListening(): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (!this.recognition) {\n                reject(new Error('Speech recognition not supported'));\n                return;\n            }\n\n            this.transcript.set('');\n            this.isListening.set(true);\n\n            const originalOnEnd = this.recognition.onend;\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n                resolve(this.transcript());\n                this.recognition!.onend = originalOnEnd as any;\n            };\n\n            this.recognition.start();\n        });\n    }\n\n    stopListening(): void {\n        if (this.recognition && this.isListening()) {\n            this.recognition.stop();\n        }\n    }\n\n    speak(text: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            if (!this.isTTSSupported()) {\n                reject(new Error('Text-to-speech not supported'));\n                return;\n            }\n\n            // Cancel any ongoing speech\n            this.synthesis.cancel();\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.rate = 1.0;\n            utterance.pitch = 1.0;\n            utterance.volume = 1.0;\n\n            utterance.onstart = () => this.isSpeaking.set(true);\n            utterance.onend = () => {\n                this.isSpeaking.set(false);\n                resolve();\n            };\n            utterance.onerror = (event) => {\n                this.isSpeaking.set(false);\n                reject(event);\n            };\n\n            this.synthesis.speak(utterance);\n        });\n    }\n\n    stopSpeaking(): void {\n        this.synthesis.cancel();\n        this.isSpeaking.set(false);\n    }\n\n    getVoices(): SpeechSynthesisVoice[] {\n        return this.synthesis.getVoices();\n    }\n}\n",
            "properties": [
                {
                    "name": "error",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 10
                },
                {
                    "name": "message",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": [
                "Event"
            ]
        },
        {
            "name": "SpeechRecognitionEvent",
            "id": "interface-SpeechRecognitionEvent-1b4fbb65bb82930d5a8bd2a489b547447f8e5cf3a2aed57b7a43accc37c9121316130722ce82a79ed26ff0299fcbf0ff2a012c411cde999ea062953b897c3d7d",
            "file": "src/app/core/services/speech.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n// Web Speech API type declarations (not included in standard TypeScript libs)\ninterface SpeechRecognitionEvent extends Event {\n    resultIndex: number;\n    results: SpeechRecognitionResultList;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n    error: string;\n    message: string;\n}\n\ninterface SpeechRecognitionInterface extends EventTarget {\n    continuous: boolean;\n    interimResults: boolean;\n    lang: string;\n    onresult: ((event: SpeechRecognitionEvent) => void) | null;\n    onend: (() => void) | null;\n    onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\n    start(): void;\n    stop(): void;\n    abort(): void;\n}\n\ndeclare global {\n    interface Window {\n        SpeechRecognition: new () => SpeechRecognitionInterface;\n        webkitSpeechRecognition: new () => SpeechRecognitionInterface;\n    }\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SpeechService {\n    private recognition: SpeechRecognitionInterface | null = null;\n    private synthesis = window.speechSynthesis;\n\n    isListening = signal(false);\n    isSpeaking = signal(false);\n    transcript = signal('');\n\n    constructor() {\n        this.initRecognition();\n    }\n\n    private initRecognition(): void {\n        const SpeechRecognitionCtor = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognitionCtor) {\n            this.recognition = new SpeechRecognitionCtor();\n            this.recognition.continuous = false;\n            this.recognition.interimResults = true;\n            this.recognition.lang = 'en-US';\n\n            this.recognition.onresult = (event: SpeechRecognitionEvent) => {\n                let finalTranscript = '';\n                for (let i = event.resultIndex; i < event.results.length; i++) {\n                    if (event.results[i].isFinal) {\n                        finalTranscript += event.results[i][0].transcript;\n                    }\n                }\n                if (finalTranscript) {\n                    this.transcript.set(finalTranscript);\n                }\n            };\n\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n            };\n\n            this.recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n                console.error('Speech recognition error:', event.error);\n                this.isListening.set(false);\n            };\n        }\n    }\n\n    isSupported(): boolean {\n        return this.recognition !== null;\n    }\n\n    isTTSSupported(): boolean {\n        return 'speechSynthesis' in window;\n    }\n\n    startListening(): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (!this.recognition) {\n                reject(new Error('Speech recognition not supported'));\n                return;\n            }\n\n            this.transcript.set('');\n            this.isListening.set(true);\n\n            const originalOnEnd = this.recognition.onend;\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n                resolve(this.transcript());\n                this.recognition!.onend = originalOnEnd as any;\n            };\n\n            this.recognition.start();\n        });\n    }\n\n    stopListening(): void {\n        if (this.recognition && this.isListening()) {\n            this.recognition.stop();\n        }\n    }\n\n    speak(text: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            if (!this.isTTSSupported()) {\n                reject(new Error('Text-to-speech not supported'));\n                return;\n            }\n\n            // Cancel any ongoing speech\n            this.synthesis.cancel();\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.rate = 1.0;\n            utterance.pitch = 1.0;\n            utterance.volume = 1.0;\n\n            utterance.onstart = () => this.isSpeaking.set(true);\n            utterance.onend = () => {\n                this.isSpeaking.set(false);\n                resolve();\n            };\n            utterance.onerror = (event) => {\n                this.isSpeaking.set(false);\n                reject(event);\n            };\n\n            this.synthesis.speak(utterance);\n        });\n    }\n\n    stopSpeaking(): void {\n        this.synthesis.cancel();\n        this.isSpeaking.set(false);\n    }\n\n    getVoices(): SpeechSynthesisVoice[] {\n        return this.synthesis.getVoices();\n    }\n}\n",
            "properties": [
                {
                    "name": "resultIndex",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 5
                },
                {
                    "name": "results",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "SpeechRecognitionResultList",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 6
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": [
                "Event"
            ]
        },
        {
            "name": "SpeechRecognitionInterface",
            "id": "interface-SpeechRecognitionInterface-1b4fbb65bb82930d5a8bd2a489b547447f8e5cf3a2aed57b7a43accc37c9121316130722ce82a79ed26ff0299fcbf0ff2a012c411cde999ea062953b897c3d7d",
            "file": "src/app/core/services/speech.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n// Web Speech API type declarations (not included in standard TypeScript libs)\ninterface SpeechRecognitionEvent extends Event {\n    resultIndex: number;\n    results: SpeechRecognitionResultList;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n    error: string;\n    message: string;\n}\n\ninterface SpeechRecognitionInterface extends EventTarget {\n    continuous: boolean;\n    interimResults: boolean;\n    lang: string;\n    onresult: ((event: SpeechRecognitionEvent) => void) | null;\n    onend: (() => void) | null;\n    onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\n    start(): void;\n    stop(): void;\n    abort(): void;\n}\n\ndeclare global {\n    interface Window {\n        SpeechRecognition: new () => SpeechRecognitionInterface;\n        webkitSpeechRecognition: new () => SpeechRecognitionInterface;\n    }\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SpeechService {\n    private recognition: SpeechRecognitionInterface | null = null;\n    private synthesis = window.speechSynthesis;\n\n    isListening = signal(false);\n    isSpeaking = signal(false);\n    transcript = signal('');\n\n    constructor() {\n        this.initRecognition();\n    }\n\n    private initRecognition(): void {\n        const SpeechRecognitionCtor = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognitionCtor) {\n            this.recognition = new SpeechRecognitionCtor();\n            this.recognition.continuous = false;\n            this.recognition.interimResults = true;\n            this.recognition.lang = 'en-US';\n\n            this.recognition.onresult = (event: SpeechRecognitionEvent) => {\n                let finalTranscript = '';\n                for (let i = event.resultIndex; i < event.results.length; i++) {\n                    if (event.results[i].isFinal) {\n                        finalTranscript += event.results[i][0].transcript;\n                    }\n                }\n                if (finalTranscript) {\n                    this.transcript.set(finalTranscript);\n                }\n            };\n\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n            };\n\n            this.recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n                console.error('Speech recognition error:', event.error);\n                this.isListening.set(false);\n            };\n        }\n    }\n\n    isSupported(): boolean {\n        return this.recognition !== null;\n    }\n\n    isTTSSupported(): boolean {\n        return 'speechSynthesis' in window;\n    }\n\n    startListening(): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (!this.recognition) {\n                reject(new Error('Speech recognition not supported'));\n                return;\n            }\n\n            this.transcript.set('');\n            this.isListening.set(true);\n\n            const originalOnEnd = this.recognition.onend;\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n                resolve(this.transcript());\n                this.recognition!.onend = originalOnEnd as any;\n            };\n\n            this.recognition.start();\n        });\n    }\n\n    stopListening(): void {\n        if (this.recognition && this.isListening()) {\n            this.recognition.stop();\n        }\n    }\n\n    speak(text: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            if (!this.isTTSSupported()) {\n                reject(new Error('Text-to-speech not supported'));\n                return;\n            }\n\n            // Cancel any ongoing speech\n            this.synthesis.cancel();\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.rate = 1.0;\n            utterance.pitch = 1.0;\n            utterance.volume = 1.0;\n\n            utterance.onstart = () => this.isSpeaking.set(true);\n            utterance.onend = () => {\n                this.isSpeaking.set(false);\n                resolve();\n            };\n            utterance.onerror = (event) => {\n                this.isSpeaking.set(false);\n                reject(event);\n            };\n\n            this.synthesis.speak(utterance);\n        });\n    }\n\n    stopSpeaking(): void {\n        this.synthesis.cancel();\n        this.isSpeaking.set(false);\n    }\n\n    getVoices(): SpeechSynthesisVoice[] {\n        return this.synthesis.getVoices();\n    }\n}\n",
            "properties": [
                {
                    "name": "continuous",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 15
                },
                {
                    "name": "interimResults",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 16
                },
                {
                    "name": "lang",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17
                },
                {
                    "name": "onend",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 19
                },
                {
                    "name": "onerror",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 20
                },
                {
                    "name": "onresult",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 18
                }
            ],
            "indexSignatures": [],
            "kind": 174,
            "methods": [
                {
                    "name": "abort",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 23,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "start",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 21,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "stop",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 22,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "extends": [
                "EventTarget"
            ]
        },
        {
            "name": "ThemeOption",
            "id": "interface-ThemeOption-cf4d4f7d43f841e1e3f53c54464e69cf49a0a1dfec6677014b755195f7f2fc88177971a8bb172248a12802f9aa7627019a829553c0915fb55eba67980b35ba03",
            "file": "src/app/shared/components/theme-selector/theme-selector.component.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Component, input, output, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { TranslateModule } from '@ngx-translate/core';\n\nexport type ThemeMode = 'light' | 'dark' | 'system';\n\nexport interface ThemeOption {\n    mode: ThemeMode;\n    icon: string;\n    labelKey: string;\n}\n\nexport const THEME_OPTIONS: ThemeOption[] = [\n    { mode: 'system', icon: 'brightness_auto', labelKey: 'theme.system' },\n    { mode: 'light', icon: 'light_mode', labelKey: 'theme.light' },\n    { mode: 'dark', icon: 'dark_mode', labelKey: 'theme.dark' },\n];\n\n@Component({\n    selector: 'app-theme-selector',\n    standalone: true,\n    imports: [\n        CommonModule,\n        MatButtonModule,\n        MatIconModule,\n        MatMenuModule,\n        MatTooltipModule,\n        TranslateModule,\n    ],\n    template: `\n    @if (mode() === 'toggle') {\n      <!-- Toggle Mode: Single button that cycles through themes -->\n      <button mat-icon-button \n              class=\"theme-toggle-btn\"\n              [matTooltip]=\"getTooltip()\"\n              (click)=\"cycleTheme()\">\n        <mat-icon>{{ getIcon() }}</mat-icon>\n      </button>\n    } @else {\n      <!-- Dropdown Mode: Button with menu -->\n      <button mat-button \n              class=\"theme-select-btn\"\n              [matMenuTriggerFor]=\"themeMenu\">\n        <mat-icon>{{ getIcon() }}</mat-icon>\n        <span class=\"theme-label\">{{ getCurrentOption().labelKey | translate }}</span>\n        <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n      </button>\n      \n      <mat-menu #themeMenu=\"matMenu\" xPosition=\"before\">\n        @for (option of themeOptions; track option.mode) {\n          <button mat-menu-item \n                  class=\"theme-item\"\n                  [class.selected]=\"theme() === option.mode\"\n                  (click)=\"selectTheme(option.mode)\">\n            <mat-icon>{{ option.icon }}</mat-icon>\n            <span>{{ option.labelKey | translate }}</span>\n            @if (theme() === option.mode) {\n              <mat-icon class=\"check-icon\">check</mat-icon>\n            }\n          </button>\n        }\n      </mat-menu>\n    }\n  `,\n    styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n    }\n\n    .theme-toggle-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .theme-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n\n      mat-icon:first-child {\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .theme-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    .theme-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .check-icon {\n        margin-left: auto;\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  `]\n})\nexport class ThemeSelectorComponent {\n    /** Current theme mode */\n    theme = input<ThemeMode>('system');\n\n    /** Display mode: 'toggle' for single button, 'dropdown' for menu */\n    mode = input<'toggle' | 'dropdown'>('dropdown');\n\n    /** Emitted when theme changes */\n    themeChanged = output<ThemeMode>();\n\n    /** Available theme options */\n    readonly themeOptions = THEME_OPTIONS;\n\n    /** Get the current option based on theme */\n    getCurrentOption(): ThemeOption {\n        return this.themeOptions.find(o => o.mode === this.theme()) || this.themeOptions[0];\n    }\n\n    /** Get icon for current theme */\n    getIcon(): string {\n        return this.getCurrentOption().icon;\n    }\n\n    /** Get tooltip for toggle mode */\n    getTooltip(): string {\n        const mode = this.theme();\n        if (mode === 'system') return 'System theme';\n        if (mode === 'dark') return 'Dark theme';\n        return 'Light theme';\n    }\n\n    /** Cycle through themes (for toggle mode) */\n    cycleTheme(): void {\n        const current = this.theme();\n        const next: ThemeMode = current === 'system' ? 'light' : current === 'light' ? 'dark' : 'system';\n        this.themeChanged.emit(next);\n    }\n\n    /** Select a specific theme (for dropdown mode) */\n    selectTheme(mode: ThemeMode): void {\n        this.themeChanged.emit(mode);\n    }\n}\n",
            "properties": [
                {
                    "name": "icon",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40
                },
                {
                    "name": "labelKey",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41
                },
                {
                    "name": "mode",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ThemeMode",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 39
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "ToxicityPrediction",
            "id": "interface-ToxicityPrediction-e02109bb98cc3b3815a09681b8e26eb0e27e283d33b02bafb8835e20a5966d91415aa574bea9e4b72ee19ee62fbc8b8fe813d0bf143d72023fdebd44f41bbf56",
            "file": "src/app/core/services/content-safety.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n/**\n * Content Safety Service using TensorFlow.js Toxicity model.\n * \n * Detects harmful content client-side before sending to the server.\n * This provides a first line of defense against toxic content.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ContentSafetyService {\n    private toxicityModel: unknown = null;\n    private isModelLoading = false;\n\n    // Configurable threshold (0-1, lower = more strict)\n    private readonly toxicityThreshold = 0.85;\n\n    /** Whether content safety checks are enabled */\n    enabled = signal(true);\n\n    /** Whether the model is ready for use */\n    modelReady = signal(false);\n\n    /** Loading status */\n    loading = signal(false);\n\n    /**\n     * Lazily load the toxicity model.\n     * Called on first use to avoid blocking initial page load.\n     */\n    async loadModel(): Promise<void> {\n        if (this.toxicityModel || this.isModelLoading) return;\n\n        this.isModelLoading = true;\n        this.loading.set(true);\n\n        try {\n            // Dynamic import to reduce initial bundle size\n            const toxicity = await import('@tensorflow-models/toxicity');\n\n            // Load with configured threshold\n            // Labels: identity_attack, insult, obscene, severe_toxicity, \n            //         sexual_explicit, threat, toxicity\n            this.toxicityModel = await toxicity.load(this.toxicityThreshold, []);\n\n            this.modelReady.set(true);\n            console.log('Toxicity model loaded successfully');\n        } catch (error) {\n            console.error('Failed to load toxicity model:', error);\n            // Disable safety checks if model fails to load\n            this.enabled.set(false);\n        } finally {\n            this.isModelLoading = false;\n            this.loading.set(false);\n        }\n    }\n\n    /**\n     * Check if content is safe to send.\n     * Returns true if content is safe, false if harmful content detected.\n     */\n    async checkContent(text: string): Promise<ContentCheckResult> {\n        if (!this.enabled() || !text.trim()) {\n            return { safe: true, labels: [] };\n        }\n\n        // Load model if not ready\n        if (!this.modelReady()) {\n            await this.loadModel();\n        }\n\n        if (!this.toxicityModel) {\n            // Model not available, allow content\n            return { safe: true, labels: [] };\n        }\n\n        try {\n            const model = this.toxicityModel as {\n                classify: (text: string[]) => Promise<ToxicityPrediction[]>\n            };\n            const predictions = await model.classify([text]);\n\n            const flaggedLabels: string[] = [];\n\n            for (const prediction of predictions) {\n                // Check if any result has high probability of being toxic\n                const results = prediction.results[0];\n                if (results.match === true) {\n                    flaggedLabels.push(this.formatLabel(prediction.label));\n                }\n            }\n\n            if (flaggedLabels.length > 0) {\n                return {\n                    safe: false,\n                    labels: flaggedLabels,\n                    message: `Content may contain: ${flaggedLabels.join(', ')}`\n                };\n            }\n\n            return { safe: true, labels: [] };\n        } catch (error) {\n            console.error('Toxicity check failed:', error);\n            // On error, allow content to proceed\n            return { safe: true, labels: [] };\n        }\n    }\n\n    /**\n     * Toggle content safety on/off.\n     */\n    toggle(): void {\n        this.enabled.update(v => !v);\n\n        // Load model when enabling if not already loaded\n        if (this.enabled() && !this.modelReady()) {\n            this.loadModel();\n        }\n    }\n\n    /**\n     * Format label for display.\n     */\n    private formatLabel(label: string): string {\n        return label\n            .replace(/_/g, ' ')\n            .replace(/\\b\\w/g, c => c.toUpperCase());\n    }\n}\n\n/**\n * Result of content safety check.\n */\nexport interface ContentCheckResult {\n    safe: boolean;\n    labels: string[];\n    message?: string;\n}\n\n/**\n * TensorFlow toxicity prediction structure.\n */\ninterface ToxicityPrediction {\n    label: string;\n    results: Array<{\n        probabilities: Float32Array;\n        match: boolean | null;\n    }>;\n}\n",
            "properties": [
                {
                    "name": "label",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 145
                },
                {
                    "name": "results",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Array<literal type>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 146
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>TensorFlow toxicity prediction structure.</p>\n",
            "rawdescription": "\n\nTensorFlow toxicity prediction structure.\n",
            "methods": [],
            "extends": []
        },
        {
            "name": "User",
            "id": "interface-User-d4821beac0e4a852e513391b7470981c4353fdd95a18628bb68136c8695b489ee15b926e2e5031bc26cf30e1508e0a362c3ee13a06734702b4d15af140e485d5",
            "file": "src/stories/user.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "export interface User {\n  name: string;\n}\n",
            "properties": [
                {
                    "name": "name",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        },
        {
            "name": "UserPreferences",
            "id": "interface-UserPreferences-f0e62f4d67b2cfe2e8bd2184b6b53357fe0ab189fea4165da210986254bf79ed791a9bf5de50ff19abf052aa2bb526330c4af15d40e0dc90e6d59fbacd712dba",
            "file": "src/app/core/services/preferences.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal, effect } from '@angular/core';\n\n/**\n * User preferences stored in localStorage.\n */\nexport interface UserPreferences {\n    /** Selected model ID */\n    selectedModel?: string;\n    /** Recent model IDs (max 5) */\n    recentModels?: string[];\n    /** Streaming mode enabled */\n    streamingMode?: boolean;\n    /** Markdown rendering enabled */\n    markdownMode?: boolean;\n    /** Content safety enabled */\n    contentSafetyEnabled?: boolean;\n    /** Theme preference */\n    theme?: 'light' | 'dark' | 'system';\n    /** Language code */\n    language?: string;\n}\n\nconst STORAGE_KEY = 'genkit-chat-preferences';\nconst MAX_RECENT_MODELS = 5;\n\n/**\n * Service for persisting and retrieving user preferences from localStorage.\n * \n * Key Concepts:\n * ┌─────────────────────┬────────────────────────────────────────────────┐\n * │ Concept             │ Description                                    │\n * ├─────────────────────┼────────────────────────────────────────────────┤\n * │ Preferences         │ User settings that persist across sessions     │\n * │ localStorage        │ Browser storage that persists until cleared    │\n * │ Reactive signals    │ Angular signals for reactive updates           │\n * └─────────────────────┴────────────────────────────────────────────────┘\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class PreferencesService {\n    /** Current preferences (reactive) */\n    preferences = signal<UserPreferences>(this.load());\n\n    constructor() {\n        // Auto-save when preferences change\n        effect(() => {\n            this.save(this.preferences());\n        });\n    }\n\n    /**\n     * Load preferences from localStorage.\n     */\n    private load(): UserPreferences {\n        try {\n            const stored = localStorage.getItem(STORAGE_KEY);\n            if (stored) {\n                return JSON.parse(stored) as UserPreferences;\n            }\n        } catch (e) {\n            console.warn('Failed to load preferences:', e);\n        }\n        return this.getDefaults();\n    }\n\n    /**\n     * Save preferences to localStorage.\n     */\n    private save(prefs: UserPreferences): void {\n        try {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(prefs));\n        } catch (e) {\n            console.warn('Failed to save preferences:', e);\n        }\n    }\n\n    /**\n     * Get default preferences.\n     */\n    private getDefaults(): UserPreferences {\n        return {\n            streamingMode: true,\n            markdownMode: true,\n            contentSafetyEnabled: true,\n            theme: 'system',\n            recentModels: [],\n        };\n    }\n\n    // ────────────────────────────────────────────────────────────────\n    // Getters\n    // ────────────────────────────────────────────────────────────────\n\n    get selectedModel(): string | undefined {\n        return this.preferences().selectedModel;\n    }\n\n    get recentModels(): string[] {\n        return this.preferences().recentModels || [];\n    }\n\n    get streamingMode(): boolean {\n        return this.preferences().streamingMode ?? true;\n    }\n\n    get markdownMode(): boolean {\n        return this.preferences().markdownMode ?? true;\n    }\n\n    get contentSafetyEnabled(): boolean {\n        return this.preferences().contentSafetyEnabled ?? true;\n    }\n\n    get theme(): 'light' | 'dark' | 'system' {\n        return this.preferences().theme ?? 'system';\n    }\n\n    get language(): string | undefined {\n        return this.preferences().language;\n    }\n\n    // ────────────────────────────────────────────────────────────────\n    // Setters (update individual preferences)\n    // ────────────────────────────────────────────────────────────────\n\n    setSelectedModel(modelId: string): void {\n        this.preferences.update(p => ({\n            ...p,\n            selectedModel: modelId,\n        }));\n        this.addRecentModel(modelId);\n    }\n\n    addRecentModel(modelId: string): void {\n        this.preferences.update(p => {\n            const recent = (p.recentModels || []).filter(m => m !== modelId);\n            recent.unshift(modelId);\n            return {\n                ...p,\n                recentModels: recent.slice(0, MAX_RECENT_MODELS),\n            };\n        });\n    }\n\n    setStreamingMode(enabled: boolean): void {\n        this.preferences.update(p => ({\n            ...p,\n            streamingMode: enabled,\n        }));\n    }\n\n    setMarkdownMode(enabled: boolean): void {\n        this.preferences.update(p => ({\n            ...p,\n            markdownMode: enabled,\n        }));\n    }\n\n    setContentSafetyEnabled(enabled: boolean): void {\n        this.preferences.update(p => ({\n            ...p,\n            contentSafetyEnabled: enabled,\n        }));\n    }\n\n    setTheme(theme: 'light' | 'dark' | 'system'): void {\n        this.preferences.update(p => ({\n            ...p,\n            theme,\n        }));\n    }\n\n    setLanguage(languageCode: string): void {\n        this.preferences.update(p => ({\n            ...p,\n            language: languageCode,\n        }));\n    }\n\n    // ────────────────────────────────────────────────────────────────\n    // Clear all preferences\n    // ────────────────────────────────────────────────────────────────\n\n    /**\n     * Clear all stored preferences and reset to defaults.\n     */\n    clearAll(): void {\n        localStorage.removeItem(STORAGE_KEY);\n        this.preferences.set(this.getDefaults());\n    }\n\n    /**\n     * Check if there are any stored preferences.\n     */\n    hasStoredPreferences(): boolean {\n        return localStorage.getItem(STORAGE_KEY) !== null;\n    }\n}\n",
            "properties": [
                {
                    "name": "contentSafetyEnabled",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>Content safety enabled</p>\n",
                    "line": 32,
                    "rawdescription": "\nContent safety enabled"
                },
                {
                    "name": "language",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>Language code</p>\n",
                    "line": 36,
                    "rawdescription": "\nLanguage code"
                },
                {
                    "name": "markdownMode",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>Markdown rendering enabled</p>\n",
                    "line": 30,
                    "rawdescription": "\nMarkdown rendering enabled"
                },
                {
                    "name": "recentModels",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>Recent model IDs (max 5)</p>\n",
                    "line": 26,
                    "rawdescription": "\nRecent model IDs (max 5)"
                },
                {
                    "name": "selectedModel",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>Selected model ID</p>\n",
                    "line": 24,
                    "rawdescription": "\nSelected model ID"
                },
                {
                    "name": "streamingMode",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>Streaming mode enabled</p>\n",
                    "line": 28,
                    "rawdescription": "\nStreaming mode enabled"
                },
                {
                    "name": "theme",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"light\" | \"dark\" | \"system\"",
                    "indexKey": "",
                    "optional": true,
                    "description": "<p>Theme preference</p>\n",
                    "line": 34,
                    "rawdescription": "\nTheme preference"
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "description": "<p>User preferences stored in localStorage.</p>\n",
            "rawdescription": "\n\nUser preferences stored in localStorage.\n",
            "methods": [],
            "extends": []
        },
        {
            "name": "Window",
            "id": "interface-Window-1b4fbb65bb82930d5a8bd2a489b547447f8e5cf3a2aed57b7a43accc37c9121316130722ce82a79ed26ff0299fcbf0ff2a012c411cde999ea062953b897c3d7d",
            "file": "src/app/core/services/speech.service.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "interface",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n// Web Speech API type declarations (not included in standard TypeScript libs)\ninterface SpeechRecognitionEvent extends Event {\n    resultIndex: number;\n    results: SpeechRecognitionResultList;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n    error: string;\n    message: string;\n}\n\ninterface SpeechRecognitionInterface extends EventTarget {\n    continuous: boolean;\n    interimResults: boolean;\n    lang: string;\n    onresult: ((event: SpeechRecognitionEvent) => void) | null;\n    onend: (() => void) | null;\n    onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\n    start(): void;\n    stop(): void;\n    abort(): void;\n}\n\ndeclare global {\n    interface Window {\n        SpeechRecognition: new () => SpeechRecognitionInterface;\n        webkitSpeechRecognition: new () => SpeechRecognitionInterface;\n    }\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SpeechService {\n    private recognition: SpeechRecognitionInterface | null = null;\n    private synthesis = window.speechSynthesis;\n\n    isListening = signal(false);\n    isSpeaking = signal(false);\n    transcript = signal('');\n\n    constructor() {\n        this.initRecognition();\n    }\n\n    private initRecognition(): void {\n        const SpeechRecognitionCtor = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognitionCtor) {\n            this.recognition = new SpeechRecognitionCtor();\n            this.recognition.continuous = false;\n            this.recognition.interimResults = true;\n            this.recognition.lang = 'en-US';\n\n            this.recognition.onresult = (event: SpeechRecognitionEvent) => {\n                let finalTranscript = '';\n                for (let i = event.resultIndex; i < event.results.length; i++) {\n                    if (event.results[i].isFinal) {\n                        finalTranscript += event.results[i][0].transcript;\n                    }\n                }\n                if (finalTranscript) {\n                    this.transcript.set(finalTranscript);\n                }\n            };\n\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n            };\n\n            this.recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n                console.error('Speech recognition error:', event.error);\n                this.isListening.set(false);\n            };\n        }\n    }\n\n    isSupported(): boolean {\n        return this.recognition !== null;\n    }\n\n    isTTSSupported(): boolean {\n        return 'speechSynthesis' in window;\n    }\n\n    startListening(): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (!this.recognition) {\n                reject(new Error('Speech recognition not supported'));\n                return;\n            }\n\n            this.transcript.set('');\n            this.isListening.set(true);\n\n            const originalOnEnd = this.recognition.onend;\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n                resolve(this.transcript());\n                this.recognition!.onend = originalOnEnd as any;\n            };\n\n            this.recognition.start();\n        });\n    }\n\n    stopListening(): void {\n        if (this.recognition && this.isListening()) {\n            this.recognition.stop();\n        }\n    }\n\n    speak(text: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            if (!this.isTTSSupported()) {\n                reject(new Error('Text-to-speech not supported'));\n                return;\n            }\n\n            // Cancel any ongoing speech\n            this.synthesis.cancel();\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.rate = 1.0;\n            utterance.pitch = 1.0;\n            utterance.volume = 1.0;\n\n            utterance.onstart = () => this.isSpeaking.set(true);\n            utterance.onend = () => {\n                this.isSpeaking.set(false);\n                resolve();\n            };\n            utterance.onerror = (event) => {\n                this.isSpeaking.set(false);\n                reject(event);\n            };\n\n            this.synthesis.speak(utterance);\n        });\n    }\n\n    stopSpeaking(): void {\n        this.synthesis.cancel();\n        this.isSpeaking.set(false);\n    }\n\n    getVoices(): SpeechSynthesisVoice[] {\n        return this.synthesis.getVoices();\n    }\n}\n",
            "properties": [
                {
                    "name": "SpeechRecognition",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 28
                },
                {
                    "name": "webkitSpeechRecognition",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 29
                }
            ],
            "indexSignatures": [],
            "kind": 172,
            "methods": [],
            "extends": []
        }
    ],
    "injectables": [
        {
            "name": "AuthService",
            "id": "injectable-AuthService-b320d897681a3b0bfbb816f64314bcfddd9515ec40de82c68da245a6d2e9aa12989bddd0852ae8f0c7f86be270427c6381c82f306689ebeaa957139e2adf084a",
            "file": "src/app/core/services/auth.service.ts",
            "properties": [
                {
                    "name": "CLIENT_ID",
                    "defaultValue": "(typeof window !== 'undefined' && (window as any).__GOOGLE_OAUTH_CLIENT_ID__) ||\n        // Replace the empty string below with your Client ID:\n        ''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 73,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "DEMO_USER",
                    "defaultValue": "{\n        id: 'demo-user-123',\n        email: 'avyanna@genkit.dev',\n        name: 'Avyanna',\n        picture: 'https://lh3.googleusercontent.com/a/default-user=s96-c',\n        given_name: 'Avyanna',\n    }",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "GoogleUser",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 84,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "demoMode",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 81
                },
                {
                    "name": "isInitialized",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 79
                },
                {
                    "name": "isLoading",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 80
                },
                {
                    "name": "platformId",
                    "defaultValue": "inject(PLATFORM_ID)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 69,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "user",
                    "defaultValue": "signal<GoogleUser | null>(null)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 78
                }
            ],
            "methods": [
                {
                    "name": "decodeJwt",
                    "args": [
                        {
                            "name": "token",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "GoogleJwtPayload",
                    "typeParameters": [],
                    "line": 274,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nDecode a JWT token to extract the payload using jwt-decode library.\n\nUses the well-vetted jwt-decode library which properly handles:\n- Base64URL padding normalization\n- Safe JSON parsing with error handling\n- Unicode character encoding\n- Malformed token detection\n\nJWT Authentication Flow::\n\n    User clicks \"Sign in with Google\"\n                   │\n                   ▼\n    ┌─────────────────────────────┐\n    │ Google Identity Services    │\n    │ (OAuth 2.0 / OpenID Connect)│\n    └─────────────┬───────────────┘\n                  │ Returns signed JWT\n                  ▼\n    ┌─────────────────────────────┐\n    │ jwt-decode (this method)    │\n    │ - Validates structure       │\n    │ - Decodes Base64URL payload │\n    │ - Parses JSON safely        │\n    └─────────────┬───────────────┘\n                  │ GoogleJwtPayload\n                  ▼\n    ┌─────────────────────────────┐\n    │ handleCredentialResponse    │\n    │ - Creates GoogleUser        │\n    │ - Updates UI state          │\n    │ - Persists to localStorage  │\n    └─────────────────────────────┘\n\nSECURITY NOTE: The token's cryptographic signature is validated by Google's\nservers during the OAuth flow. This decode is only for extracting user info\nfor UI display, not for making security decisions.\n\n",
                    "description": "<p>Decode a JWT token to extract the payload using jwt-decode library.</p>\n<p>Uses the well-vetted jwt-decode library which properly handles:</p>\n<ul>\n<li>Base64URL padding normalization</li>\n<li>Safe JSON parsing with error handling</li>\n<li>Unicode character encoding</li>\n<li>Malformed token detection</li>\n</ul>\n<p>JWT Authentication Flow::</p>\n<b>Example :</b><div><pre class=\"line-numbers\"><code class=\"language-none\">User clicks &quot;Sign in with Google&quot;\n               │\n               ▼\n┌─────────────────────────────┐\n│ Google Identity Services    │\n│ (OAuth 2.0 / OpenID Connect)│\n└─────────────┬───────────────┘\n              │ Returns signed JWT\n              ▼\n┌─────────────────────────────┐\n│ jwt-decode (this method)    │\n│ - Validates structure       │\n│ - Decodes Base64URL payload │\n│ - Parses JSON safely        │\n└─────────────┬───────────────┘\n              │ GoogleJwtPayload\n              ▼\n┌─────────────────────────────┐\n│ handleCredentialResponse    │\n│ - Creates GoogleUser        │\n│ - Updates UI state          │\n│ - Persists to localStorage  │\n└─────────────────────────────┘</code></pre></div><p>SECURITY NOTE: The token&#39;s cryptographic signature is validated by Google&#39;s\nservers during the OAuth flow. This decode is only for extracting user info\nfor UI display, not for making security decisions.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": {
                                "pos": 9677,
                                "end": 9682,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "token"
                            },
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "pos": 9671,
                                "end": 9676,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "param"
                            },
                            "comment": "<ul>\n<li>The JWT token string from Google Identity Services</li>\n</ul>\n"
                        },
                        {
                            "tagName": {
                                "pos": 9744,
                                "end": 9751,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "returns"
                            },
                            "comment": "<p>The decoded payload with Google user claims</p>\n"
                        }
                    ]
                },
                {
                    "name": "getInitials",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 356,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet initials for avatar display.\n",
                    "description": "<p>Get initials for avatar display.</p>\n"
                },
                {
                    "name": "getToken",
                    "args": [],
                    "optional": false,
                    "returnType": "string | null",
                    "typeParameters": [],
                    "line": 368,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet the stored OAuth token (for API calls).\n",
                    "description": "<p>Get the stored OAuth token (for API calls).</p>\n"
                },
                {
                    "name": "handleCredentialResponse",
                    "args": [
                        {
                            "name": "response",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 206,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "response",
                            "type": "any",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "initGoogleSignIn",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 128,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isSignedIn",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 349,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCheck if user is signed in.\n",
                    "description": "<p>Check if user is signed in.</p>\n"
                },
                {
                    "name": "restoreDemoMode",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 121,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "restoreSession",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 332,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRestore session from localStorage.\n",
                    "description": "<p>Restore session from localStorage.</p>\n"
                },
                {
                    "name": "setupGoogleSignIn",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 147,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "showOneTap",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 190,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "signIn",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 282,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nInitiate sign-in flow.\nShows One Tap if CLIENT_ID is configured, otherwise uses demo mode.\n",
                    "description": "<p>Initiate sign-in flow.\nShows One Tap if CLIENT_ID is configured, otherwise uses demo mode.</p>\n"
                },
                {
                    "name": "signOut",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 311,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSign out the current user.\n",
                    "description": "<p>Sign out the current user.</p>\n"
                },
                {
                    "name": "toggleDemoMode",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 104,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nToggle demo mode on/off.\nWhen enabled, simulates a signed-in user session.\n",
                    "description": "<p>Toggle demo mode on/off.\nWhen enabled, simulates a signed-in user session.</p>\n"
                },
                {
                    "name": "updateName",
                    "args": [
                        {
                            "name": "givenName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 375,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nUpdate the user's display name.\n",
                    "description": "<p>Update the user&#39;s display name.</p>\n",
                    "jsdoctags": [
                        {
                            "name": "givenName",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Auth Service - Handles Google One Tap Sign-In using Google Identity Services.</p>\n<p>SETUP INSTRUCTIONS:</p>\n<ol>\n<li><p>Go to Google Cloud Console:\n<a href=\"https://console.cloud.google.com/apis/credentials\">https://console.cloud.google.com/apis/credentials</a></p>\n</li>\n<li><p>Create an OAuth 2.0 Client ID:</p>\n<ul>\n<li>Click &quot;Create Credentials&quot; &gt; &quot;OAuth client ID&quot;</li>\n<li>Select &quot;Web application&quot;</li>\n<li>Name: &quot;Genkit Chat&quot;</li>\n</ul>\n</li>\n<li><p>Configure authorized origins:</p>\n<ul>\n<li>Add: <a href=\"http://localhost:4200\">http://localhost:4200</a></li>\n<li>Add: <a href=\"http://localhost:49230\">http://localhost:49230</a></li>\n<li>Add your production domain</li>\n</ul>\n</li>\n<li><p>Copy the Client ID and set it:</p>\n<ul>\n<li>Option A: Set GOOGLE_OAUTH_CLIENT_ID environment variable</li>\n<li>Option B: Replace CLIENT_ID constant below</li>\n</ul>\n</li>\n<li><p>Ensure OAuth consent screen is configured:</p>\n<ul>\n<li>Publishing status: Testing (or Production)</li>\n<li>Add test users if in Testing mode</li>\n</ul>\n</li>\n</ol>\n<p>Future: This will be extended to support Google Drive API for file attachments.</p>\n",
            "rawdescription": "\n\nAuth Service - Handles Google One Tap Sign-In using Google Identity Services.\n\nSETUP INSTRUCTIONS:\n\n1. Go to Google Cloud Console:\n   https://console.cloud.google.com/apis/credentials\n\n2. Create an OAuth 2.0 Client ID:\n   - Click \"Create Credentials\" > \"OAuth client ID\"\n   - Select \"Web application\"\n   - Name: \"Genkit Chat\"\n\n3. Configure authorized origins:\n   - Add: http://localhost:4200\n   - Add: http://localhost:49230\n   - Add your production domain\n\n4. Copy the Client ID and set it:\n   - Option A: Set GOOGLE_OAUTH_CLIENT_ID environment variable\n   - Option B: Replace CLIENT_ID constant below\n\n5. Ensure OAuth consent screen is configured:\n   - Publishing status: Testing (or Production)\n   - Add test users if in Testing mode\n\nFuture: This will be extended to support Google Drive API for file attachments.\n",
            "sourceCode": "import { Injectable, signal, PLATFORM_ID, inject } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { jwtDecode, JwtPayload } from 'jwt-decode';\n\ndeclare const google: any;\n\nexport interface GoogleUser {\n    id: string;\n    email: string;\n    name: string;\n    picture: string;\n    given_name?: string;\n    family_name?: string;\n}\n\n/**\n * JWT payload structure for Google Identity Services tokens.\n * Extends standard JWT claims with Google-specific user info.\n * \n * @see https://developers.google.com/identity/gsi/web/reference/js-reference#credential\n */\nexport interface GoogleJwtPayload extends JwtPayload {\n    /** User's email address */\n    email: string;\n    /** Whether the email is verified */\n    email_verified: boolean;\n    /** User's full name */\n    name: string;\n    /** URL to user's profile picture */\n    picture: string;\n    /** User's given (first) name */\n    given_name?: string;\n    /** User's family (last) name */\n    family_name?: string;\n}\n\n/**\n * Auth Service - Handles Google One Tap Sign-In using Google Identity Services.\n * \n * SETUP INSTRUCTIONS:\n * \n * 1. Go to Google Cloud Console:\n *    https://console.cloud.google.com/apis/credentials\n * \n * 2. Create an OAuth 2.0 Client ID:\n *    - Click \"Create Credentials\" > \"OAuth client ID\"\n *    - Select \"Web application\"\n *    - Name: \"Genkit Chat\"\n * \n * 3. Configure authorized origins:\n *    - Add: http://localhost:4200\n *    - Add: http://localhost:49230\n *    - Add your production domain\n * \n * 4. Copy the Client ID and set it:\n *    - Option A: Set GOOGLE_OAUTH_CLIENT_ID environment variable\n *    - Option B: Replace CLIENT_ID constant below\n * \n * 5. Ensure OAuth consent screen is configured:\n *    - Publishing status: Testing (or Production)\n *    - Add test users if in Testing mode\n * \n * Future: This will be extended to support Google Drive API for file attachments.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n    private platformId = inject(PLATFORM_ID);\n\n    // Set your Google OAuth Client ID here\n    // Get one from: https://console.cloud.google.com/apis/credentials\n    private readonly CLIENT_ID =\n        (typeof window !== 'undefined' && (window as any).__GOOGLE_OAUTH_CLIENT_ID__) ||\n        // Replace the empty string below with your Client ID:\n        '';\n\n    user = signal<GoogleUser | null>(null);\n    isInitialized = signal(false);\n    isLoading = signal(false);\n    demoMode = signal(false);\n\n    // Demo user for testing UI\n    private readonly DEMO_USER: GoogleUser = {\n        id: 'demo-user-123',\n        email: 'avyanna@genkit.dev',\n        name: 'Avyanna',\n        picture: 'https://lh3.googleusercontent.com/a/default-user=s96-c',\n        given_name: 'Avyanna',\n    };\n\n    constructor() {\n        if (isPlatformBrowser(this.platformId)) {\n            this.restoreDemoMode();\n            this.restoreSession();\n            this.initGoogleSignIn();\n        }\n    }\n\n    /**\n     * Toggle demo mode on/off.\n     * When enabled, simulates a signed-in user session.\n     */\n    toggleDemoMode(): void {\n        const newValue = !this.demoMode();\n        this.demoMode.set(newValue);\n        localStorage.setItem('gauth_demo_mode', String(newValue));\n\n        if (newValue) {\n            // Enable demo mode - sign in as demo user\n            this.user.set(this.DEMO_USER);\n            localStorage.setItem('gauth_user', JSON.stringify(this.DEMO_USER));\n        } else {\n            // Disable demo mode - sign out\n            this.user.set(null);\n            localStorage.removeItem('gauth_user');\n            localStorage.removeItem('gauth_token');\n        }\n    }\n\n    private restoreDemoMode(): void {\n        const stored = localStorage.getItem('gauth_demo_mode');\n        if (stored === 'true') {\n            this.demoMode.set(true);\n        }\n    }\n\n    private initGoogleSignIn(): void {\n        // Wait for Google Identity Services to load\n        const checkGoogle = setInterval(() => {\n            if (typeof google !== 'undefined' && google.accounts) {\n                clearInterval(checkGoogle);\n                this.setupGoogleSignIn();\n            }\n        }, 100);\n\n        // Timeout after 5 seconds\n        setTimeout(() => {\n            clearInterval(checkGoogle);\n            if (!this.isInitialized()) {\n                console.log('Google Identity Services did not load. Check if the GSI script is included in index.html');\n                this.isInitialized.set(true);\n            }\n        }, 5000);\n    }\n\n    private setupGoogleSignIn(): void {\n        if (!this.CLIENT_ID) {\n            console.log(`\n╔══════════════════════════════════════════════════════════════════════════╗\n║  Google Sign-In: Demo User                                                ║\n╠══════════════════════════════════════════════════════════════════════════╣\n║  No CLIENT_ID configured. Using demo user for testing.                    ║\n║                                                                           ║\n║  To enable real Google Sign-In:                                           ║\n║  1. Create OAuth Client ID at:                                            ║\n║     https://console.cloud.google.com/apis/credentials                     ║\n║  2. Add localhost origins (4200, 49230)                                   ║\n║  3. Set CLIENT_ID in auth.service.ts                                      ║\n╚══════════════════════════════════════════════════════════════════════════╝\n            `);\n            this.isInitialized.set(true);\n            return;\n        }\n\n        try {\n            google.accounts.id.initialize({\n                client_id: this.CLIENT_ID,\n                callback: (response: any) => this.handleCredentialResponse(response),\n                auto_select: true,        // Auto sign-in if one account\n                cancel_on_tap_outside: true,\n                itp_support: true,        // Support for Intelligent Tracking Prevention\n                prompt_parent_id: 'g_id_onload', // Parent element ID\n                context: 'signin',\n            });\n\n            this.isInitialized.set(true);\n            console.log('Google Sign-In initialized successfully');\n\n            // Show One Tap prompt if user is not signed in\n            if (!this.user()) {\n                this.showOneTap();\n            }\n        } catch (error) {\n            console.error('Failed to initialize Google Sign-In:', error);\n            this.isInitialized.set(true);\n        }\n    }\n\n    private showOneTap(): void {\n        if (!this.CLIENT_ID || typeof google === 'undefined') return;\n\n        google.accounts.id.prompt((notification: any) => {\n            if (notification.isDisplayed()) {\n                console.log('One Tap prompt displayed');\n            } else if (notification.isNotDisplayed()) {\n                console.log('One Tap not displayed:', notification.getNotDisplayedReason());\n            } else if (notification.isSkippedMoment()) {\n                console.log('One Tap skipped:', notification.getSkippedReason());\n            } else if (notification.isDismissedMoment()) {\n                console.log('One Tap dismissed:', notification.getDismissedReason());\n            }\n        });\n    }\n\n    private handleCredentialResponse(response: any): void {\n        if (response.credential) {\n            // Decode the JWT token to get user info\n            const payload = this.decodeJwt(response.credential);\n\n            const user: GoogleUser = {\n                id: payload.sub ?? payload.email,  // sub is the unique user ID\n                email: payload.email,\n                name: payload.name,\n                picture: payload.picture,\n                given_name: payload.given_name,\n                family_name: payload.family_name,\n            };\n\n            this.user.set(user);\n\n            // Store in localStorage for persistence\n            localStorage.setItem('gauth_user', JSON.stringify(user));\n            localStorage.setItem('gauth_token', response.credential);\n\n            console.log('User signed in:', payload.email);\n        }\n        this.isLoading.set(false);\n    }\n\n    /**\n     * Decode a JWT token to extract the payload using jwt-decode library.\n     * \n     * Uses the well-vetted jwt-decode library which properly handles:\n     * - Base64URL padding normalization\n     * - Safe JSON parsing with error handling  \n     * - Unicode character encoding\n     * - Malformed token detection\n     * \n     * JWT Authentication Flow::\n     * \n     *     User clicks \"Sign in with Google\"\n     *                    │\n     *                    ▼\n     *     ┌─────────────────────────────┐\n     *     │ Google Identity Services    │\n     *     │ (OAuth 2.0 / OpenID Connect)│\n     *     └─────────────┬───────────────┘\n     *                   │ Returns signed JWT\n     *                   ▼\n     *     ┌─────────────────────────────┐\n     *     │ jwt-decode (this method)    │\n     *     │ - Validates structure       │\n     *     │ - Decodes Base64URL payload │\n     *     │ - Parses JSON safely        │\n     *     └─────────────┬───────────────┘\n     *                   │ GoogleJwtPayload\n     *                   ▼\n     *     ┌─────────────────────────────┐\n     *     │ handleCredentialResponse    │\n     *     │ - Creates GoogleUser        │\n     *     │ - Updates UI state          │\n     *     │ - Persists to localStorage  │\n     *     └─────────────────────────────┘\n     * \n     * SECURITY NOTE: The token's cryptographic signature is validated by Google's\n     * servers during the OAuth flow. This decode is only for extracting user info\n     * for UI display, not for making security decisions.\n     * \n     * @param token - The JWT token string from Google Identity Services\n     * @returns The decoded payload with Google user claims\n     * @throws Error if the token is malformed or cannot be decoded\n     */\n    private decodeJwt(token: string): GoogleJwtPayload {\n        return jwtDecode<GoogleJwtPayload>(token);\n    }\n\n    /**\n     * Initiate sign-in flow.\n     * Shows One Tap if CLIENT_ID is configured, otherwise uses demo mode.\n     */\n    signIn(): void {\n        if (!this.CLIENT_ID) {\n            // Demo mode - show a mock user\n            this.user.set({\n                id: 'demo-user',\n                email: 'demo@genkit.dev',\n                name: 'Demo User',\n                picture: '',\n                given_name: 'Demo',\n            });\n            localStorage.setItem('gauth_user', JSON.stringify(this.user()));\n            return;\n        }\n\n        if (typeof google !== 'undefined' && google.accounts) {\n            this.isLoading.set(true);\n            google.accounts.id.prompt((notification: any) => {\n                if (notification.isNotDisplayed() || notification.isSkippedMoment()) {\n                    // One Tap was blocked (e.g., by browser settings)\n                    this.isLoading.set(false);\n                    console.log('One Tap blocked. Consider adding a fallback sign-in button.');\n                }\n            });\n        }\n    }\n\n    /**\n     * Sign out the current user.\n     */\n    signOut(): void {\n        if (typeof google !== 'undefined' && google.accounts && this.CLIENT_ID) {\n            google.accounts.id.disableAutoSelect();\n            // Revoke the token\n            const token = localStorage.getItem('gauth_token');\n            if (token) {\n                google.accounts.id.revoke(this.user()?.email || '', () => {\n                    console.log('Token revoked');\n                });\n            }\n        }\n\n        this.user.set(null);\n        localStorage.removeItem('gauth_user');\n        localStorage.removeItem('gauth_token');\n        console.log('User signed out');\n    }\n\n    /**\n     * Restore session from localStorage.\n     */\n    restoreSession(): void {\n        const stored = localStorage.getItem('gauth_user');\n        if (stored) {\n            try {\n                const user = JSON.parse(stored);\n                this.user.set(user);\n                console.log('Session restored for:', user.email);\n            } catch {\n                localStorage.removeItem('gauth_user');\n                localStorage.removeItem('gauth_token');\n            }\n        }\n    }\n\n    /**\n     * Check if user is signed in.\n     */\n    isSignedIn(): boolean {\n        return this.user() !== null;\n    }\n\n    /**\n     * Get initials for avatar display.\n     */\n    getInitials(): string {\n        const u = this.user();\n        if (!u) return '?';\n        if (u.given_name && u.family_name) {\n            return (u.given_name[0] + u.family_name[0]).toUpperCase();\n        }\n        return u.name?.split(' ').map(n => n[0]).join('').slice(0, 2).toUpperCase() || '?';\n    }\n\n    /**\n     * Get the stored OAuth token (for API calls).\n     */\n    getToken(): string | null {\n        return localStorage.getItem('gauth_token');\n    }\n\n    /**\n     * Update the user's display name.\n     */\n    updateName(givenName: string): void {\n        const currentUser = this.user();\n        if (currentUser) {\n            const updatedUser = {\n                ...currentUser,\n                given_name: givenName,\n                name: givenName + (currentUser.family_name ? ' ' + currentUser.family_name : ''),\n            };\n            this.user.set(updatedUser);\n            localStorage.setItem('gauth_user', JSON.stringify(updatedUser));\n        }\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 90
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "ChatService",
            "id": "injectable-ChatService-b8fb92b258013208a1fd0531caf2980a9aad7454d302fda4e5b7f176a5752e338e7aca4d561afc38f6e2a3b47db471ee161c48afac4da61f444e5de8938e6482",
            "file": "src/app/core/services/chat.service.ts",
            "properties": [
                {
                    "name": "apiUrl",
                    "defaultValue": "'/api'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 57,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "http",
                    "defaultValue": "inject(HttpClient)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 55,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isLoading",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 60
                },
                {
                    "name": "isProcessingQueue",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 64,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "markdownMode",
                    "defaultValue": "signal(this.preferencesService.markdownMode)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 70
                },
                {
                    "name": "messages",
                    "defaultValue": "signal<Message[]>([])",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 59
                },
                {
                    "name": "preferencesService",
                    "defaultValue": "inject(PreferencesService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "promptQueue",
                    "defaultValue": "signal<QueuedPrompt[]>([])",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 63
                },
                {
                    "name": "streamingMode",
                    "defaultValue": "signal(this.preferencesService.streamingMode)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 67
                }
            ],
            "methods": [
                {
                    "name": "addAssistantMessage",
                    "args": [
                        {
                            "name": "response",
                            "type": "ChatResponse",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 118,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "response",
                            "type": "ChatResponse",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "addToQueue",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 257,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "clearHistory",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 252,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "clearQueue",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 273,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "compareModels",
                    "args": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "models",
                            "type": "string[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<CompareResponse>",
                    "typeParameters": [],
                    "line": 245,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "models",
                            "type": "string[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "moveQueuedPromptDown",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 316,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "moveQueuedPromptUp",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 304,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "processNextInQueue",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 138,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nProcess the next item in the queue automatically after a response is received.\n",
                    "description": "<p>Process the next item in the queue automatically after a response is received.</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "processQueue",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 328,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "removeFromQueue",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 269,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "sendAllFromQueue",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 288,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "sendFromQueue",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 277,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "sendMessage",
                    "args": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Observable<ChatResponse>",
                    "typeParameters": [],
                    "line": 84,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "sendStreamMessage",
                    "args": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "onComplete",
                            "type": "function",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": []
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 169,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "message",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "onComplete",
                            "type": "function",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [],
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "toggleMarkdownMode",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 164,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "toggleStreamingMode",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 160,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "updateQueuedPrompt",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 298,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable, inject, signal, effect } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface Message {\n    role: 'user' | 'assistant';\n    content: string;\n    timestamp?: Date;\n    model?: string;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface ChatRequest {\n    message: string;\n    model: string;\n    history?: { role: string; content: string }[];\n}\n\nexport interface ChatResponse {\n    response: string;\n    model: string;\n    latency_ms: number;\n    isError?: boolean;\n    errorDetails?: string;\n}\n\nexport interface CompareRequest {\n    prompt: string;\n    models: string[];\n}\n\nexport interface CompareResponse {\n    prompt: string;\n    responses: {\n        model: string;\n        response: string | null;\n        latency_ms: number;\n        error: string | null;\n    }[];\n}\n\nexport interface QueuedPrompt {\n    id: string;\n    content: string;\n    model: string;\n    timestamp: Date;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ChatService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n\n    messages = signal<Message[]>([]);\n    isLoading = signal(false);\n\n    // Prompt queue\n    promptQueue = signal<QueuedPrompt[]>([]);\n    private isProcessingQueue = false;\n\n    // Streaming mode (load from preferences)\n    streamingMode = signal(this.preferencesService.streamingMode);\n\n    // Markdown rendering mode (load from preferences)\n    markdownMode = signal(this.preferencesService.markdownMode);\n\n    constructor() {\n        // Persist streaming mode changes\n        effect(() => {\n            this.preferencesService.setStreamingMode(this.streamingMode());\n        });\n\n        // Persist markdown mode changes\n        effect(() => {\n            this.preferencesService.setMarkdownMode(this.markdownMode());\n        });\n    }\n\n    sendMessage(message: string, model: string): Observable<ChatResponse> {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        return this.http.post<ChatResponse>(`${this.apiUrl}/chat`, {\n            message,\n            model,\n            history,\n        }).pipe(\n            catchError(error => {\n                console.error('Chat error:', error);\n                const errorMessage = error?.error?.detail || error?.error?.message || error?.message || 'Unknown error';\n                const errorDetails = JSON.stringify(error, null, 2);\n                return of({\n                    response: `Error: ${errorMessage}`,\n                    model,\n                    latency_ms: 0,\n                    isError: true,\n                    errorDetails\n                });\n            }),\n        );\n    }\n\n    addAssistantMessage(response: ChatResponse): void {\n        this.messages.update(msgs => [\n            ...msgs,\n            {\n                role: 'assistant',\n                content: response.response,\n                timestamp: new Date(),\n                model: response.model,\n                isError: response.isError,\n                errorDetails: response.errorDetails,\n            },\n        ]);\n        this.isLoading.set(false);\n        // Process next queued prompt if any\n        this.processNextInQueue();\n    }\n\n    /**\n     * Process the next item in the queue automatically after a response is received.\n     */\n    private processNextInQueue(): void {\n        if (this.promptQueue().length > 0 && !this.isLoading()) {\n            const next = this.promptQueue()[0];\n            this.removeFromQueue(next.id);\n\n            if (this.streamingMode()) {\n                this.sendStreamMessage(next.content, next.model, () => {\n                    this.processNextInQueue();\n                });\n            } else {\n                this.sendMessage(next.content, next.model).subscribe({\n                    next: response => this.addAssistantMessage(response),\n                    error: err => {\n                        console.error('Queue send error:', err);\n                        this.isLoading.set(false);\n                        this.processNextInQueue();\n                    }\n                });\n            }\n        }\n    }\n\n    toggleStreamingMode(): void {\n        this.streamingMode.update(v => !v);\n    }\n\n    toggleMarkdownMode(): void {\n        this.markdownMode.update(v => !v);\n    }\n\n    // Send message with streaming (returns EventSource URL)\n    sendStreamMessage(message: string, model: string, onComplete?: () => void): void {\n        const history = this.messages().map(m => ({\n            role: m.role,\n            content: m.content,\n        }));\n\n        // Add user message to history immediately\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'user', content: message, timestamp: new Date() },\n        ]);\n\n        this.isLoading.set(true);\n\n        // Add placeholder assistant message\n        this.messages.update(msgs => [\n            ...msgs,\n            { role: 'assistant', content: '', timestamp: new Date(), model },\n        ]);\n\n        const eventSource = new EventSource(\n            `${this.apiUrl}/stream?message=${encodeURIComponent(message)}&model=${encodeURIComponent(model)}&history=${encodeURIComponent(JSON.stringify(history))}`\n        );\n\n        eventSource.onmessage = (event) => {\n            if (event.data === '[DONE]') {\n                eventSource.close();\n                this.isLoading.set(false);\n                onComplete?.();\n                return;\n            }\n\n            try {\n                const data = JSON.parse(event.data);\n                if (data.chunk) {\n                    // Update the last message (assistant) with new content\n                    this.messages.update(msgs => {\n                        const updated = [...msgs];\n                        const lastMsg = updated[updated.length - 1];\n                        if (lastMsg && lastMsg.role === 'assistant') {\n                            lastMsg.content += data.chunk;\n                        }\n                        return updated;\n                    });\n                }\n            } catch {\n                // Handle plain text chunks\n                this.messages.update(msgs => {\n                    const updated = [...msgs];\n                    const lastMsg = updated[updated.length - 1];\n                    if (lastMsg && lastMsg.role === 'assistant') {\n                        lastMsg.content += event.data;\n                    }\n                    return updated;\n                });\n            }\n        };\n\n        eventSource.onerror = (error) => {\n            console.error('Stream error:', error);\n            eventSource.close();\n            this.messages.update(msgs => {\n                const updated = [...msgs];\n                const lastMsg = updated[updated.length - 1];\n                if (lastMsg && lastMsg.role === 'assistant' && !lastMsg.content) {\n                    lastMsg.content = 'Error: Stream connection failed';\n                    lastMsg.isError = true;\n                    lastMsg.errorDetails = JSON.stringify(error, null, 2);\n                }\n                return updated;\n            });\n            this.isLoading.set(false);\n            onComplete?.();\n        };\n    }\n\n    compareModels(prompt: string, models: string[]): Observable<CompareResponse> {\n        return this.http.post<CompareResponse>(`${this.apiUrl}/compare`, {\n            prompt,\n            models,\n        });\n    }\n\n    clearHistory(): void {\n        this.messages.set([]);\n    }\n\n    // Queue management methods\n    addToQueue(content: string, model: string): void {\n        const queuedPrompt: QueuedPrompt = {\n            id: crypto.randomUUID(),\n            content,\n            model,\n            timestamp: new Date(),\n        };\n        this.promptQueue.update(queue => [...queue, queuedPrompt]);\n        // Note: Don't process here - queue items are added when model is busy\n        // Processing happens when the current request completes via addAssistantMessage\n    }\n\n    removeFromQueue(id: string): void {\n        this.promptQueue.update(queue => queue.filter(p => p.id !== id));\n    }\n\n    clearQueue(): void {\n        this.promptQueue.set([]);\n    }\n\n    sendFromQueue(id: string): void {\n        const item = this.promptQueue().find(p => p.id === id);\n        if (!item || this.isLoading()) return;\n\n        this.removeFromQueue(id);\n        this.sendMessage(item.content, item.model).subscribe({\n            next: response => this.addAssistantMessage(response),\n            error: err => console.error('Queue send error:', err)\n        });\n    }\n\n    sendAllFromQueue(): void {\n        // Move all queue items to be processed - they will be sent sequentially\n        // as the processNextInQueue is called after each response\n        // For now, just start processing the first one if not already loading\n        if (!this.isLoading() && this.promptQueue().length > 0) {\n            const first = this.promptQueue()[0];\n            this.sendFromQueue(first.id);\n        }\n    }\n\n    updateQueuedPrompt(id: string, content: string): void {\n        this.promptQueue.update(queue =>\n            queue.map(p => p.id === id ? { ...p, content } : p)\n        );\n    }\n\n    moveQueuedPromptUp(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index > 0) {\n                const newQueue = [...queue];\n                [newQueue[index - 1], newQueue[index]] = [newQueue[index], newQueue[index - 1]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    moveQueuedPromptDown(id: string): void {\n        this.promptQueue.update(queue => {\n            const index = queue.findIndex(p => p.id === id);\n            if (index >= 0 && index < queue.length - 1) {\n                const newQueue = [...queue];\n                [newQueue[index], newQueue[index + 1]] = [newQueue[index + 1], newQueue[index]];\n                return newQueue;\n            }\n            return queue;\n        });\n    }\n\n    private processQueue(): void {\n        if (this.isProcessingQueue || this.isLoading() || this.promptQueue().length === 0) {\n            return;\n        }\n\n        this.isProcessingQueue = true;\n        const [nextPrompt, ...remaining] = this.promptQueue();\n        this.promptQueue.set(remaining);\n\n        // Process the prompt\n        this.sendMessage(nextPrompt.content, nextPrompt.model).subscribe({\n            next: response => {\n                this.addAssistantMessage(response);\n                this.isProcessingQueue = false;\n                // Process next in queue\n                this.processQueue();\n            },\n            error: () => {\n                this.isProcessingQueue = false;\n                this.processQueue();\n            }\n        });\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 70
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "ContentSafetyService",
            "id": "injectable-ContentSafetyService-e02109bb98cc3b3815a09681b8e26eb0e27e283d33b02bafb8835e20a5966d91415aa574bea9e4b72ee19ee62fbc8b8fe813d0bf143d72023fdebd44f41bbf56",
            "file": "src/app/core/services/content-safety.service.ts",
            "properties": [
                {
                    "name": "enabled",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether content safety checks are enabled</p>\n",
                    "line": 20,
                    "rawdescription": "\nWhether content safety checks are enabled"
                },
                {
                    "name": "isModelLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 14,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "loading",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Loading status</p>\n",
                    "line": 26,
                    "rawdescription": "\nLoading status"
                },
                {
                    "name": "modelReady",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the model is ready for use</p>\n",
                    "line": 23,
                    "rawdescription": "\nWhether the model is ready for use"
                },
                {
                    "name": "toxicityModel",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 13,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "toxicityThreshold",
                    "defaultValue": "0.85",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 17,
                    "modifierKind": [
                        123,
                        148
                    ]
                }
            ],
            "methods": [
                {
                    "name": "checkContent",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<ContentCheckResult>",
                    "typeParameters": [],
                    "line": 63,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCheck if content is safe to send.\nReturns true if content is safe, false if harmful content detected.\n",
                    "description": "<p>Check if content is safe to send.\nReturns true if content is safe, false if harmful content detected.</p>\n",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "formatLabel",
                    "args": [
                        {
                            "name": "label",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 125,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nFormat label for display.\n",
                    "description": "<p>Format label for display.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "label",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadModel",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 32,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nLazily load the toxicity model.\nCalled on first use to avoid blocking initial page load.\n",
                    "description": "<p>Lazily load the toxicity model.\nCalled on first use to avoid blocking initial page load.</p>\n",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "toggle",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 113,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nToggle content safety on/off.\n",
                    "description": "<p>Toggle content safety on/off.</p>\n"
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Content Safety Service using TensorFlow.js Toxicity model.</p>\n<p>Detects harmful content client-side before sending to the server.\nThis provides a first line of defense against toxic content.</p>\n",
            "rawdescription": "\n\nContent Safety Service using TensorFlow.js Toxicity model.\n\nDetects harmful content client-side before sending to the server.\nThis provides a first line of defense against toxic content.\n",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n/**\n * Content Safety Service using TensorFlow.js Toxicity model.\n * \n * Detects harmful content client-side before sending to the server.\n * This provides a first line of defense against toxic content.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ContentSafetyService {\n    private toxicityModel: unknown = null;\n    private isModelLoading = false;\n\n    // Configurable threshold (0-1, lower = more strict)\n    private readonly toxicityThreshold = 0.85;\n\n    /** Whether content safety checks are enabled */\n    enabled = signal(true);\n\n    /** Whether the model is ready for use */\n    modelReady = signal(false);\n\n    /** Loading status */\n    loading = signal(false);\n\n    /**\n     * Lazily load the toxicity model.\n     * Called on first use to avoid blocking initial page load.\n     */\n    async loadModel(): Promise<void> {\n        if (this.toxicityModel || this.isModelLoading) return;\n\n        this.isModelLoading = true;\n        this.loading.set(true);\n\n        try {\n            // Dynamic import to reduce initial bundle size\n            const toxicity = await import('@tensorflow-models/toxicity');\n\n            // Load with configured threshold\n            // Labels: identity_attack, insult, obscene, severe_toxicity, \n            //         sexual_explicit, threat, toxicity\n            this.toxicityModel = await toxicity.load(this.toxicityThreshold, []);\n\n            this.modelReady.set(true);\n            console.log('Toxicity model loaded successfully');\n        } catch (error) {\n            console.error('Failed to load toxicity model:', error);\n            // Disable safety checks if model fails to load\n            this.enabled.set(false);\n        } finally {\n            this.isModelLoading = false;\n            this.loading.set(false);\n        }\n    }\n\n    /**\n     * Check if content is safe to send.\n     * Returns true if content is safe, false if harmful content detected.\n     */\n    async checkContent(text: string): Promise<ContentCheckResult> {\n        if (!this.enabled() || !text.trim()) {\n            return { safe: true, labels: [] };\n        }\n\n        // Load model if not ready\n        if (!this.modelReady()) {\n            await this.loadModel();\n        }\n\n        if (!this.toxicityModel) {\n            // Model not available, allow content\n            return { safe: true, labels: [] };\n        }\n\n        try {\n            const model = this.toxicityModel as {\n                classify: (text: string[]) => Promise<ToxicityPrediction[]>\n            };\n            const predictions = await model.classify([text]);\n\n            const flaggedLabels: string[] = [];\n\n            for (const prediction of predictions) {\n                // Check if any result has high probability of being toxic\n                const results = prediction.results[0];\n                if (results.match === true) {\n                    flaggedLabels.push(this.formatLabel(prediction.label));\n                }\n            }\n\n            if (flaggedLabels.length > 0) {\n                return {\n                    safe: false,\n                    labels: flaggedLabels,\n                    message: `Content may contain: ${flaggedLabels.join(', ')}`\n                };\n            }\n\n            return { safe: true, labels: [] };\n        } catch (error) {\n            console.error('Toxicity check failed:', error);\n            // On error, allow content to proceed\n            return { safe: true, labels: [] };\n        }\n    }\n\n    /**\n     * Toggle content safety on/off.\n     */\n    toggle(): void {\n        this.enabled.update(v => !v);\n\n        // Load model when enabling if not already loaded\n        if (this.enabled() && !this.modelReady()) {\n            this.loadModel();\n        }\n    }\n\n    /**\n     * Format label for display.\n     */\n    private formatLabel(label: string): string {\n        return label\n            .replace(/_/g, ' ')\n            .replace(/\\b\\w/g, c => c.toUpperCase());\n    }\n}\n\n/**\n * Result of content safety check.\n */\nexport interface ContentCheckResult {\n    safe: boolean;\n    labels: string[];\n    message?: string;\n}\n\n/**\n * TensorFlow toxicity prediction structure.\n */\ninterface ToxicityPrediction {\n    label: string;\n    results: Array<{\n        probabilities: Float32Array;\n        match: boolean | null;\n    }>;\n}\n",
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "LanguageService",
            "id": "injectable-LanguageService-88b5509f3943826c70d2e833f7910ea4903d19e0bddf37f6890540dcddb0001defc92b4bc0e7c1ca7b35e5594bc7ff2306c686edffa1ea1bd25a0f35b1305c7c",
            "file": "src/app/core/services/language.service.ts",
            "properties": [
                {
                    "name": "currentLanguage",
                    "defaultValue": "signal<string>('en')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Resolved language code (the actual language being used)</p>\n",
                    "line": 78,
                    "rawdescription": "\nResolved language code (the actual language being used)"
                },
                {
                    "name": "languageFilter",
                    "defaultValue": "signal<string>('')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Filter text for language search</p>\n",
                    "line": 81,
                    "rawdescription": "\nFilter text for language search"
                },
                {
                    "name": "languagePreference",
                    "defaultValue": "signal<string>('system')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Current language preference (&#39;system&#39; or a language code)</p>\n",
                    "line": 75,
                    "rawdescription": "\nCurrent language preference ('system' or a language code)"
                },
                {
                    "name": "languages",
                    "defaultValue": "[...SUPPORTED_LANGUAGES].sort((a, b) => a.name.localeCompare(b.name))",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>All supported languages sorted lexicographically by English name</p>\n",
                    "line": 84,
                    "rawdescription": "\nAll supported languages sorted lexicographically by English name",
                    "modifierKind": [
                        148
                    ]
                },
                {
                    "name": "translate",
                    "defaultValue": "inject(TranslateService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 72,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methods": [
                {
                    "name": "applyLanguage",
                    "args": [
                        {
                            "name": "code",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 143,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nApply a specific language code.\n",
                    "description": "<p>Apply a specific language code.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "code",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getCurrentLanguage",
                    "args": [],
                    "optional": false,
                    "returnType": "Language",
                    "typeParameters": [],
                    "line": 157,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet the current language object.\n",
                    "description": "<p>Get the current language object.</p>\n"
                },
                {
                    "name": "getLanguage",
                    "args": [
                        {
                            "name": "code",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Language | undefined",
                    "typeParameters": [],
                    "line": 164,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet language by code.\n",
                    "description": "<p>Get language by code.</p>\n",
                    "jsdoctags": [
                        {
                            "name": "code",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getLanguageLabel",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 171,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet display label for current preference.\n",
                    "description": "<p>Get display label for current preference.</p>\n"
                },
                {
                    "name": "initLanguage",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 104,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nInitialize language from storage or default to system.\n",
                    "description": "<p>Initialize language from storage or default to system.</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "setLanguagePreference",
                    "args": [
                        {
                            "name": "preference",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 122,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSet the language preference ('system' or a specific language code).\n",
                    "description": "<p>Set the language preference (&#39;system&#39; or a specific language code).</p>\n",
                    "jsdoctags": [
                        {
                            "name": "preference",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Language service for internationalization.\nManages language selection and persists preference to localStorage.\nSupports &#39;system&#39; as a special value that auto-detects browser language.</p>\n",
            "rawdescription": "\n\nLanguage service for internationalization.\nManages language selection and persists preference to localStorage.\nSupports 'system' as a special value that auto-detects browser language.\n",
            "sourceCode": "import { Injectable, signal, inject } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\n\n/**\n * Supported language configuration.\n */\nexport interface Language {\n    code: string;\n    name: string;\n    nativeName: string;\n    direction: 'ltr' | 'rtl';\n    flag: string;\n}\n\n/**\n * Available languages for the application.\n * Includes major global languages and Indian languages.\n */\nexport const SUPPORTED_LANGUAGES: Language[] = [\n    // Global Languages\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'pt', name: 'Portuguese', nativeName: 'Português', direction: 'ltr', flag: '🇧🇷' },\n    { code: 'it', name: 'Italian', nativeName: 'Italiano', direction: 'ltr', flag: '🇮🇹' },\n    { code: 'ru', name: 'Russian', nativeName: 'Русский', direction: 'ltr', flag: '🇷🇺' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n\n    // East Asian Languages\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'ko', name: 'Korean', nativeName: '한국어', direction: 'ltr', flag: '🇰🇷' },\n\n    // Indian Languages\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'bn', name: 'Bengali', nativeName: 'বাংলা', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'te', name: 'Telugu', nativeName: 'తెలుగు', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'ta', name: 'Tamil', nativeName: 'தமிழ்', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'mr', name: 'Marathi', nativeName: 'मराठी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'gu', name: 'Gujarati', nativeName: 'ગુજરાતી', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'kn', name: 'Kannada', nativeName: 'ಕನ್ನಡ', direction: 'ltr', flag: '🇮🇳' },\n];\n\nconst STORAGE_KEY = 'genkit-chat-language';\n\n/**\n * Language service for internationalization.\n * Manages language selection and persists preference to localStorage.\n * Supports 'system' as a special value that auto-detects browser language.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class LanguageService {\n    private translate = inject(TranslateService);\n\n    /** Current language preference ('system' or a language code) */\n    languagePreference = signal<string>('system');\n\n    /** Resolved language code (the actual language being used) */\n    currentLanguage = signal<string>('en');\n\n    /** Filter text for language search */\n    languageFilter = signal<string>('');\n\n    /** All supported languages sorted lexicographically by English name */\n    readonly languages = [...SUPPORTED_LANGUAGES].sort((a, b) => a.name.localeCompare(b.name));\n\n    /** Filtered languages based on search */\n    get filteredLanguages(): Language[] {\n        const filter = this.languageFilter().toLowerCase();\n        if (!filter) return this.languages;\n        return this.languages.filter(lang =>\n            lang.name.toLowerCase().includes(filter) ||\n            lang.nativeName.toLowerCase().includes(filter) ||\n            lang.code.toLowerCase().includes(filter)\n        );\n    }\n\n    constructor() {\n        this.initLanguage();\n    }\n\n    /**\n     * Initialize language from storage or default to system.\n     */\n    private initLanguage(): void {\n        // Set available languages\n        this.translate.addLangs(this.languages.map(l => l.code));\n        this.translate.setDefaultLang('en');\n\n        // Try to restore from storage\n        const stored = localStorage.getItem(STORAGE_KEY);\n        if (stored) {\n            this.setLanguagePreference(stored);\n        } else {\n            // Default to system\n            this.setLanguagePreference('system');\n        }\n    }\n\n    /**\n     * Set the language preference ('system' or a specific language code).\n     */\n    setLanguagePreference(preference: string): void {\n        this.languagePreference.set(preference);\n        localStorage.setItem(STORAGE_KEY, preference);\n\n        let code: string;\n        if (preference === 'system') {\n            // Auto-detect from browser\n            const browserLang = this.translate.getBrowserLang();\n            code = (browserLang && this.languages.find(l => l.code === browserLang))\n                ? browserLang\n                : 'en';\n        } else {\n            code = this.languages.find(l => l.code === preference) ? preference : 'en';\n        }\n\n        this.applyLanguage(code);\n    }\n\n    /**\n     * Apply a specific language code.\n     */\n    private applyLanguage(code: string): void {\n        const lang = this.languages.find(l => l.code === code) || this.languages[0];\n\n        this.translate.use(code);\n        this.currentLanguage.set(code);\n\n        // Update document direction for RTL languages\n        document.documentElement.dir = lang.direction;\n        document.documentElement.lang = code;\n    }\n\n    /**\n     * Get the current language object.\n     */\n    getCurrentLanguage(): Language {\n        return this.languages.find(l => l.code === this.currentLanguage()) || this.languages[0];\n    }\n\n    /**\n     * Get language by code.\n     */\n    getLanguage(code: string): Language | undefined {\n        return this.languages.find(l => l.code === code);\n    }\n\n    /**\n     * Get display label for current preference.\n     */\n    getLanguageLabel(): string {\n        const pref = this.languagePreference();\n        if (pref === 'system') {\n            return `System (${this.getCurrentLanguage().nativeName})`;\n        }\n        return this.getCurrentLanguage().nativeName;\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 95
            },
            "accessors": {
                "filteredLanguages": {
                    "name": "filteredLanguages",
                    "getSignature": {
                        "name": "filteredLanguages",
                        "type": "[]",
                        "returnType": "Language[]",
                        "line": 87,
                        "rawdescription": "\nFiltered languages based on search",
                        "description": "<p>Filtered languages based on search</p>\n"
                    }
                }
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "ModelService",
            "id": "injectable-ModelService-130f0ea262270750803a43353ab064969a2c2f5b42cfd8bfff6bd0011e403f30699bce7615f4ed76188cbd0d972c471e22ea95fd972d4fcda2a9c9024353c7f6",
            "file": "src/app/core/services/model.service.ts",
            "properties": [
                {
                    "name": "allModels",
                    "defaultValue": "computed(() =>\n        this.providers().flatMap(p =>\n            p.models.map(m => ({\n                ...m,\n                provider: p.name,\n                providerId: p.id,\n            }))\n        )\n    )",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42
                },
                {
                    "name": "apiUrl",
                    "defaultValue": "'/api'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 34,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "defaultModel",
                    "defaultValue": "computed(() => this.allModels()[0]?.id || 'ollama/llama3.2')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53
                },
                {
                    "name": "DEMO_PROVIDERS",
                    "defaultValue": "[\n        {\n            id: 'google-genai',\n            name: 'Google AI',\n            available: true,\n            models: [\n                { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'anthropic',\n            name: 'Anthropic',\n            available: true,\n            models: [\n                { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'openai',\n            name: 'OpenAI',\n            available: true,\n            models: [\n                { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'openai/gpt-4o', name: 'GPT-4o', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n    ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Provider[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 56,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "error",
                    "defaultValue": "signal<string | null>(null)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 39
                },
                {
                    "name": "http",
                    "defaultValue": "inject(HttpClient)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 33,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isLoading",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38
                },
                {
                    "name": "providers",
                    "defaultValue": "signal<Provider[]>([])",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37
                }
            ],
            "methods": [
                {
                    "name": "fetchModels",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 98,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nFetch available models from the backend.\nFalls back to demo models if backend is unavailable.\n",
                    "description": "<p>Fetch available models from the backend.\nFalls back to demo models if backend is unavailable.</p>\n"
                },
                {
                    "name": "getModel",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Model | undefined",
                    "typeParameters": [],
                    "line": 123,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet a model by its ID.\n",
                    "description": "<p>Get a model by its ID.</p>\n",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getProviderName",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 130,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet the provider name for a model ID.\n",
                    "description": "<p>Get the provider name for a model ID.</p>\n",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "hasCapability",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "capability",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 138,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCheck if a model supports a capability.\n",
                    "description": "<p>Check if a model supports a capability.</p>\n",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "capability",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Service for fetching available models from the backend.\nFalls back to demo models if backend is unavailable.</p>\n",
            "rawdescription": "\n\nService for fetching available models from the backend.\nFalls back to demo models if backend is unavailable.\n",
            "sourceCode": "import { Injectable, inject, signal, computed } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { catchError, of, tap } from 'rxjs';\n\n/**\n * Model information from the backend.\n */\nexport interface Model {\n    id: string;\n    name: string;\n    capabilities: string[];\n    context_window?: number;\n}\n\n/**\n * Provider with available models.\n */\nexport interface Provider {\n    id: string;\n    name: string;\n    available: boolean;\n    models: Model[];\n}\n\n/**\n * Service for fetching available models from the backend.\n * Falls back to demo models if backend is unavailable.\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelService {\n    private http = inject(HttpClient);\n    private apiUrl = '/api';\n\n    // All providers with their models\n    providers = signal<Provider[]>([]);\n    isLoading = signal(false);\n    error = signal<string | null>(null);\n\n    // Flattened list of all available models\n    allModels = computed(() =>\n        this.providers().flatMap(p =>\n            p.models.map(m => ({\n                ...m,\n                provider: p.name,\n                providerId: p.id,\n            }))\n        )\n    );\n\n    // Default model (first available or Ollama local)\n    defaultModel = computed(() => this.allModels()[0]?.id || 'ollama/llama3.2');\n\n    // Demo models for when backend is unavailable\n    private readonly DEMO_PROVIDERS: Provider[] = [\n        {\n            id: 'google-genai',\n            name: 'Google AI',\n            available: true,\n            models: [\n                { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'anthropic',\n            name: 'Anthropic',\n            available: true,\n            models: [\n                { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n        {\n            id: 'openai',\n            name: 'OpenAI',\n            available: true,\n            models: [\n                { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision', 'streaming'] },\n                { id: 'openai/gpt-4o', name: 'GPT-4o', capabilities: ['text', 'vision', 'streaming'] },\n            ],\n        },\n    ];\n\n    constructor() {\n        // Fetch models on service initialization\n        this.fetchModels();\n    }\n\n    /**\n     * Fetch available models from the backend.\n     * Falls back to demo models if backend is unavailable.\n     */\n    fetchModels(): void {\n        this.isLoading.set(true);\n        this.error.set(null);\n\n        this.http.get<Provider[]>(`${this.apiUrl}/models`)\n            .pipe(\n                tap(providers => {\n                    this.providers.set(providers);\n                    this.isLoading.set(false);\n                    console.log('Loaded models from backend:', providers);\n                }),\n                catchError(err => {\n                    console.warn('Backend unavailable, using demo models:', err.message);\n                    this.providers.set(this.DEMO_PROVIDERS);\n                    this.error.set('Using demo models (backend unavailable)');\n                    this.isLoading.set(false);\n                    return of(this.DEMO_PROVIDERS);\n                }),\n            )\n            .subscribe();\n    }\n\n    /**\n     * Get a model by its ID.\n     */\n    getModel(id: string): Model | undefined {\n        return this.allModels().find(m => m.id === id);\n    }\n\n    /**\n     * Get the provider name for a model ID.\n     */\n    getProviderName(modelId: string): string {\n        const model = this.allModels().find(m => m.id === modelId);\n        return (model as any)?.provider || 'Unknown';\n    }\n\n    /**\n     * Check if a model supports a capability.\n     */\n    hasCapability(modelId: string, capability: string): boolean {\n        const model = this.getModel(modelId);\n        return model?.capabilities?.includes(capability) ?? false;\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 87
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "ModelsService",
            "id": "injectable-ModelsService-d5315f72d4ad5aaed6c7fd66f6f665581b8bab5b22ac57b12dfc2f9ccd92f55739196cbec8d877a3410886f5cbc91b08aedb7e9a482ff090076c28be25d8c9b2",
            "file": "src/app/core/services/models.service.ts",
            "properties": [
                {
                    "name": "apiUrl",
                    "defaultValue": "'/api'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 110,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "http",
                    "defaultValue": "inject(HttpClient)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 108,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isBackendConnected",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 119
                },
                {
                    "name": "isLoading",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 118
                },
                {
                    "name": "MAX_RECENT",
                    "defaultValue": "3",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 111,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "preferencesService",
                    "defaultValue": "inject(PreferencesService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 109,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "providers",
                    "defaultValue": "signal<ProviderInfo[]>(DEFAULT_PROVIDERS)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 113
                },
                {
                    "name": "recentModels",
                    "defaultValue": "signal<string[]>(this.preferencesService.recentModels)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 117
                },
                {
                    "name": "selectedModel",
                    "defaultValue": "signal<string>(this.preferencesService.selectedModel || DEFAULT_MODEL)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 115
                }
            ],
            "methods": [
                {
                    "name": "addToRecent",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 193,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "filterModels",
                    "args": [
                        {
                            "name": "query",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "ModelInfo[]",
                    "typeParameters": [],
                    "line": 152,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet models filtered by search query",
                    "description": "<p>Get models filtered by search query</p>\n",
                    "jsdoctags": [
                        {
                            "name": "query",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getAllModels",
                    "args": [],
                    "optional": false,
                    "returnType": "ModelInfo[]",
                    "typeParameters": [],
                    "line": 142,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getModelName",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 167,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getModelsByProvider",
                    "args": [
                        {
                            "name": "providerId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "ModelInfo[]",
                    "typeParameters": [],
                    "line": 162,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet models for a provider, sorted alphabetically",
                    "description": "<p>Get models for a provider, sorted alphabetically</p>\n",
                    "jsdoctags": [
                        {
                            "name": "providerId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getProviderName",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 172,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getRecentModels",
                    "args": [],
                    "optional": false,
                    "returnType": "ModelInfo[]",
                    "typeParameters": [],
                    "line": 186,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet recent models as ModelInfo objects",
                    "description": "<p>Get recent models as ModelInfo objects</p>\n"
                },
                {
                    "name": "getSortedModels",
                    "args": [],
                    "optional": false,
                    "returnType": "ModelInfo[]",
                    "typeParameters": [],
                    "line": 147,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet all models sorted lexicographically by name",
                    "description": "<p>Get all models sorted lexicographically by name</p>\n"
                },
                {
                    "name": "loadModels",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 125,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "selectModel",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 179,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nSelect a model and add to recent",
                    "description": "<p>Select a model and add to recent</p>\n",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "supportsStreaming",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 202,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nCheck if the selected model supports streaming",
                    "description": "<p>Check if the selected model supports streaming</p>\n",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable, inject, signal } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, of } from 'rxjs';\nimport { PreferencesService } from './preferences.service';\n\nexport interface ModelInfo {\n    id: string;\n    name: string;\n    capabilities: string[];\n    context_window: number;\n    supportsStreaming?: boolean;\n}\n\nexport interface ProviderInfo {\n    id: string;\n    name: string;\n    available: boolean;\n    models: ModelInfo[];\n}\n\nexport interface ModelsResponse {\n    providers: ProviderInfo[];\n}\n\n// Default models when backend is unavailable - only latest, non-deprecated models\nconst DEFAULT_PROVIDERS: ProviderInfo[] = [\n    {\n        id: 'googleai',\n        name: 'Google AI',\n        available: true,\n        models: [\n            { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision'], context_window: 2097152 },\n            { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision'], context_window: 1048576 },\n        ],\n    },\n    {\n        id: 'vertexai',\n        name: 'Vertex AI',\n        available: true,\n        models: [\n            { id: 'vertexai/gemini-3-flash', name: 'Gemini 3 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'vertexai/gemini-3-pro', name: 'Gemini 3 Pro', capabilities: ['text', 'vision'], context_window: 2097152 },\n        ],\n    },\n    {\n        id: 'anthropic',\n        name: 'Anthropic',\n        available: true,\n        models: [\n            { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'openai',\n        name: 'OpenAI',\n        available: true,\n        models: [\n            { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-mini', name: 'GPT-4.1 Mini', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-nano', name: 'GPT-4.1 Nano', capabilities: ['text'], context_window: 1047576 },\n            { id: 'openai/o3', name: 'o3', capabilities: ['text', 'reasoning'], context_window: 200000 },\n            { id: 'openai/o4-mini', name: 'o4 Mini', capabilities: ['text', 'reasoning'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'mistral',\n        name: 'Mistral AI',\n        available: true,\n        models: [\n            { id: 'mistral/mistral-large-latest', name: 'Mistral Large', capabilities: ['text'], context_window: 128000 },\n            { id: 'mistral/mistral-small-latest', name: 'Mistral Small', capabilities: ['text'], context_window: 32000 },\n            { id: 'mistral/codestral-latest', name: 'Codestral', capabilities: ['text', 'code'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'cf-ai',\n        name: 'Cloudflare AI',\n        available: true,\n        models: [\n            { id: 'cf-ai/@cf/meta/llama-3.3-70b-instruct-fp8-fast', name: 'Llama 3.3 70B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/google/gemma-7b-it-lora', name: 'Gemma 7B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/deepseek-ai/deepseek-r1-distill-qwen-32b', name: 'DeepSeek R1 32B', capabilities: ['text', 'reasoning'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'ollama',\n        name: 'Ollama (Local)',\n        available: true,\n        models: [\n            { id: 'ollama/llama3.2', name: 'Llama 3.2', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/gemma3:4b', name: 'Gemma 3 4B', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/mistral', name: 'Mistral', capabilities: ['text'], context_window: 32768 },\n            { id: 'ollama/qwen2.5-coder', name: 'Qwen 2.5 Coder', capabilities: ['text', 'code'], context_window: 128000 },\n        ],\n    },\n];\n\nconst DEFAULT_MODEL = 'ollama/gemma3:4b';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ModelsService {\n    private http = inject(HttpClient);\n    private preferencesService = inject(PreferencesService);\n    private apiUrl = '/api';\n    private readonly MAX_RECENT = 3;\n\n    providers = signal<ProviderInfo[]>(DEFAULT_PROVIDERS);\n    // Load selected model from preferences, fallback to default\n    selectedModel = signal<string>(this.preferencesService.selectedModel || DEFAULT_MODEL);\n    // Load recent models from preferences\n    recentModels = signal<string[]>(this.preferencesService.recentModels);\n    isLoading = signal(false);\n    isBackendConnected = signal(false);\n\n    constructor() {\n        this.loadModels();\n    }\n\n    loadModels(): void {\n        this.isLoading.set(true);\n        this.http.get<ModelsResponse>(`${this.apiUrl}/models`).pipe(\n            catchError(error => {\n                console.log('Backend unavailable, using default model list');\n                this.isBackendConnected.set(false);\n                return of({ providers: DEFAULT_PROVIDERS });\n            }),\n        ).subscribe(response => {\n            if (response.providers.length > 0) {\n                this.providers.set(response.providers);\n                this.isBackendConnected.set(true);\n            }\n            this.isLoading.set(false);\n        });\n    }\n\n    getAllModels(): ModelInfo[] {\n        return this.providers().flatMap(p => p.models);\n    }\n\n    /** Get all models sorted lexicographically by name */\n    getSortedModels(): ModelInfo[] {\n        return this.getAllModels().sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    /** Get models filtered by search query */\n    filterModels(query: string): ModelInfo[] {\n        const q = query.toLowerCase().trim();\n        if (!q) return this.getSortedModels();\n        return this.getSortedModels().filter(m =>\n            m.name.toLowerCase().includes(q) ||\n            m.id.toLowerCase().includes(q)\n        );\n    }\n\n    /** Get models for a provider, sorted alphabetically */\n    getModelsByProvider(providerId: string): ModelInfo[] {\n        const provider = this.providers().find(p => p.id === providerId);\n        return (provider?.models || []).sort((a, b) => a.name.localeCompare(b.name));\n    }\n\n    getModelName(modelId: string): string {\n        const model = this.getAllModels().find(m => m.id === modelId);\n        return model?.name || modelId.split('/').pop() || modelId;\n    }\n\n    getProviderName(modelId: string): string {\n        const providerId = modelId.split('/')[0];\n        const provider = this.providers().find(p => p.id === providerId);\n        return provider?.name || providerId;\n    }\n\n    /** Select a model and add to recent */\n    selectModel(modelId: string): void {\n        this.selectedModel.set(modelId);\n        this.preferencesService.setSelectedModel(modelId);\n        this.addToRecent(modelId);\n    }\n\n    /** Get recent models as ModelInfo objects */\n    getRecentModels(): ModelInfo[] {\n        const all = this.getAllModels();\n        return this.recentModels()\n            .map(id => all.find(m => m.id === id))\n            .filter((m): m is ModelInfo => m !== undefined);\n    }\n\n    private addToRecent(modelId: string): void {\n        const recent = this.recentModels().filter(id => id !== modelId);\n        recent.unshift(modelId);\n        const updated = recent.slice(0, this.MAX_RECENT);\n        this.recentModels.set(updated);\n        // PreferencesService handles persistence via setSelectedModel\n    }\n\n    /** Check if the selected model supports streaming */\n    supportsStreaming(modelId?: string): boolean {\n        const id = modelId || this.selectedModel();\n        // Ollama models may have unreliable streaming support\n        // For now, assume all cloud models support streaming\n        if (id.startsWith('ollama/')) {\n            return false;\n        }\n        // Check if model explicitly declares streaming support\n        const model = this.getAllModels().find(m => m.id === id);\n        if (model?.supportsStreaming !== undefined) {\n            return model.supportsStreaming;\n        }\n        // Default: all non-Ollama models support streaming\n        return true;\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 119
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "PreferencesService",
            "id": "injectable-PreferencesService-f0e62f4d67b2cfe2e8bd2184b6b53357fe0ab189fea4165da210986254bf79ed791a9bf5de50ff19abf052aa2bb526330c4af15d40e0dc90e6d59fbacd712dba",
            "file": "src/app/core/services/preferences.service.ts",
            "properties": [
                {
                    "name": "preferences",
                    "defaultValue": "signal<UserPreferences>(this.load())",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Current preferences (reactive)</p>\n",
                    "line": 59,
                    "rawdescription": "\nCurrent preferences (reactive)"
                }
            ],
            "methods": [
                {
                    "name": "addRecentModel",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 151,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "clearAll",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 204,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nClear all stored preferences and reset to defaults.\n",
                    "description": "<p>Clear all stored preferences and reset to defaults.</p>\n"
                },
                {
                    "name": "getDefaults",
                    "args": [],
                    "optional": false,
                    "returnType": "UserPreferences",
                    "typeParameters": [],
                    "line": 97,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet default preferences.\n",
                    "description": "<p>Get default preferences.</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "hasStoredPreferences",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 212,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nCheck if there are any stored preferences.\n",
                    "description": "<p>Check if there are any stored preferences.</p>\n"
                },
                {
                    "name": "load",
                    "args": [],
                    "optional": false,
                    "returnType": "UserPreferences",
                    "typeParameters": [],
                    "line": 71,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nLoad preferences from localStorage.\n",
                    "description": "<p>Load preferences from localStorage.</p>\n",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "save",
                    "args": [
                        {
                            "name": "prefs",
                            "type": "UserPreferences",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 86,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nSave preferences to localStorage.\n",
                    "description": "<p>Save preferences to localStorage.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "prefs",
                            "type": "UserPreferences",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setContentSafetyEnabled",
                    "args": [
                        {
                            "name": "enabled",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 176,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "enabled",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setLanguage",
                    "args": [
                        {
                            "name": "languageCode",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 190,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "languageCode",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setMarkdownMode",
                    "args": [
                        {
                            "name": "enabled",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 169,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "enabled",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setSelectedModel",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 143,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setStreamingMode",
                    "args": [
                        {
                            "name": "enabled",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 162,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "enabled",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "setTheme",
                    "args": [
                        {
                            "name": "theme",
                            "type": "\"light\" | \"dark\" | \"system\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 183,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "theme",
                            "type": "\"light\" | \"dark\" | \"system\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Service for persisting and retrieving user preferences from localStorage.</p>\n<p>Key Concepts:\n┌─────────────────────┬────────────────────────────────────────────────┐\n│ Concept             │ Description                                    │\n├─────────────────────┼────────────────────────────────────────────────┤\n│ Preferences         │ User settings that persist across sessions     │\n│ localStorage        │ Browser storage that persists until cleared    │\n│ Reactive signals    │ Angular signals for reactive updates           │\n└─────────────────────┴────────────────────────────────────────────────┘</p>\n",
            "rawdescription": "\n\nService for persisting and retrieving user preferences from localStorage.\n\nKey Concepts:\n┌─────────────────────┬────────────────────────────────────────────────┐\n│ Concept             │ Description                                    │\n├─────────────────────┼────────────────────────────────────────────────┤\n│ Preferences         │ User settings that persist across sessions     │\n│ localStorage        │ Browser storage that persists until cleared    │\n│ Reactive signals    │ Angular signals for reactive updates           │\n└─────────────────────┴────────────────────────────────────────────────┘\n",
            "sourceCode": "import { Injectable, signal, effect } from '@angular/core';\n\n/**\n * User preferences stored in localStorage.\n */\nexport interface UserPreferences {\n    /** Selected model ID */\n    selectedModel?: string;\n    /** Recent model IDs (max 5) */\n    recentModels?: string[];\n    /** Streaming mode enabled */\n    streamingMode?: boolean;\n    /** Markdown rendering enabled */\n    markdownMode?: boolean;\n    /** Content safety enabled */\n    contentSafetyEnabled?: boolean;\n    /** Theme preference */\n    theme?: 'light' | 'dark' | 'system';\n    /** Language code */\n    language?: string;\n}\n\nconst STORAGE_KEY = 'genkit-chat-preferences';\nconst MAX_RECENT_MODELS = 5;\n\n/**\n * Service for persisting and retrieving user preferences from localStorage.\n * \n * Key Concepts:\n * ┌─────────────────────┬────────────────────────────────────────────────┐\n * │ Concept             │ Description                                    │\n * ├─────────────────────┼────────────────────────────────────────────────┤\n * │ Preferences         │ User settings that persist across sessions     │\n * │ localStorage        │ Browser storage that persists until cleared    │\n * │ Reactive signals    │ Angular signals for reactive updates           │\n * └─────────────────────┴────────────────────────────────────────────────┘\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class PreferencesService {\n    /** Current preferences (reactive) */\n    preferences = signal<UserPreferences>(this.load());\n\n    constructor() {\n        // Auto-save when preferences change\n        effect(() => {\n            this.save(this.preferences());\n        });\n    }\n\n    /**\n     * Load preferences from localStorage.\n     */\n    private load(): UserPreferences {\n        try {\n            const stored = localStorage.getItem(STORAGE_KEY);\n            if (stored) {\n                return JSON.parse(stored) as UserPreferences;\n            }\n        } catch (e) {\n            console.warn('Failed to load preferences:', e);\n        }\n        return this.getDefaults();\n    }\n\n    /**\n     * Save preferences to localStorage.\n     */\n    private save(prefs: UserPreferences): void {\n        try {\n            localStorage.setItem(STORAGE_KEY, JSON.stringify(prefs));\n        } catch (e) {\n            console.warn('Failed to save preferences:', e);\n        }\n    }\n\n    /**\n     * Get default preferences.\n     */\n    private getDefaults(): UserPreferences {\n        return {\n            streamingMode: true,\n            markdownMode: true,\n            contentSafetyEnabled: true,\n            theme: 'system',\n            recentModels: [],\n        };\n    }\n\n    // ────────────────────────────────────────────────────────────────\n    // Getters\n    // ────────────────────────────────────────────────────────────────\n\n    get selectedModel(): string | undefined {\n        return this.preferences().selectedModel;\n    }\n\n    get recentModels(): string[] {\n        return this.preferences().recentModels || [];\n    }\n\n    get streamingMode(): boolean {\n        return this.preferences().streamingMode ?? true;\n    }\n\n    get markdownMode(): boolean {\n        return this.preferences().markdownMode ?? true;\n    }\n\n    get contentSafetyEnabled(): boolean {\n        return this.preferences().contentSafetyEnabled ?? true;\n    }\n\n    get theme(): 'light' | 'dark' | 'system' {\n        return this.preferences().theme ?? 'system';\n    }\n\n    get language(): string | undefined {\n        return this.preferences().language;\n    }\n\n    // ────────────────────────────────────────────────────────────────\n    // Setters (update individual preferences)\n    // ────────────────────────────────────────────────────────────────\n\n    setSelectedModel(modelId: string): void {\n        this.preferences.update(p => ({\n            ...p,\n            selectedModel: modelId,\n        }));\n        this.addRecentModel(modelId);\n    }\n\n    addRecentModel(modelId: string): void {\n        this.preferences.update(p => {\n            const recent = (p.recentModels || []).filter(m => m !== modelId);\n            recent.unshift(modelId);\n            return {\n                ...p,\n                recentModels: recent.slice(0, MAX_RECENT_MODELS),\n            };\n        });\n    }\n\n    setStreamingMode(enabled: boolean): void {\n        this.preferences.update(p => ({\n            ...p,\n            streamingMode: enabled,\n        }));\n    }\n\n    setMarkdownMode(enabled: boolean): void {\n        this.preferences.update(p => ({\n            ...p,\n            markdownMode: enabled,\n        }));\n    }\n\n    setContentSafetyEnabled(enabled: boolean): void {\n        this.preferences.update(p => ({\n            ...p,\n            contentSafetyEnabled: enabled,\n        }));\n    }\n\n    setTheme(theme: 'light' | 'dark' | 'system'): void {\n        this.preferences.update(p => ({\n            ...p,\n            theme,\n        }));\n    }\n\n    setLanguage(languageCode: string): void {\n        this.preferences.update(p => ({\n            ...p,\n            language: languageCode,\n        }));\n    }\n\n    // ────────────────────────────────────────────────────────────────\n    // Clear all preferences\n    // ────────────────────────────────────────────────────────────────\n\n    /**\n     * Clear all stored preferences and reset to defaults.\n     */\n    clearAll(): void {\n        localStorage.removeItem(STORAGE_KEY);\n        this.preferences.set(this.getDefaults());\n    }\n\n    /**\n     * Check if there are any stored preferences.\n     */\n    hasStoredPreferences(): boolean {\n        return localStorage.getItem(STORAGE_KEY) !== null;\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 59
            },
            "accessors": {
                "selectedModel": {
                    "name": "selectedModel",
                    "getSignature": {
                        "name": "selectedModel",
                        "type": "unknown",
                        "returnType": "string | undefined",
                        "line": 111
                    }
                },
                "recentModels": {
                    "name": "recentModels",
                    "getSignature": {
                        "name": "recentModels",
                        "type": "[]",
                        "returnType": "string[]",
                        "line": 115
                    }
                },
                "streamingMode": {
                    "name": "streamingMode",
                    "getSignature": {
                        "name": "streamingMode",
                        "type": "boolean",
                        "returnType": "boolean",
                        "line": 119
                    }
                },
                "markdownMode": {
                    "name": "markdownMode",
                    "getSignature": {
                        "name": "markdownMode",
                        "type": "boolean",
                        "returnType": "boolean",
                        "line": 123
                    }
                },
                "contentSafetyEnabled": {
                    "name": "contentSafetyEnabled",
                    "getSignature": {
                        "name": "contentSafetyEnabled",
                        "type": "boolean",
                        "returnType": "boolean",
                        "line": 127
                    }
                },
                "theme": {
                    "name": "theme",
                    "getSignature": {
                        "name": "theme",
                        "type": "unknown",
                        "returnType": "\"light\" | \"dark\" | \"system\"",
                        "line": 131
                    }
                },
                "language": {
                    "name": "language",
                    "getSignature": {
                        "name": "language",
                        "type": "unknown",
                        "returnType": "string | undefined",
                        "line": 135
                    }
                }
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "RenderingService",
            "id": "injectable-RenderingService-63663d18722e3cc7acfbe4572ef3bc29d87b0af2f9fb37fca60db3413ec417e576d6bfcda3182417bf86c3638e844d5b6ac5f857dd268e29c4a1c1f4eb970645",
            "file": "src/app/core/services/rendering.service.ts",
            "properties": [
                {
                    "name": "diagramCounter",
                    "defaultValue": "0",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Counter for unique diagram IDs</p>\n",
                    "line": 21,
                    "rawdescription": "\nCounter for unique diagram IDs",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "mathjaxReady",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether MathJax is ready</p>\n",
                    "line": 18,
                    "rawdescription": "\nWhether MathJax is ready"
                },
                {
                    "name": "mermaidInitialized",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 12,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "mermaidModule",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 11,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "mermaidReady",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether Mermaid is ready</p>\n",
                    "line": 15,
                    "rawdescription": "\nWhether Mermaid is ready"
                }
            ],
            "methods": [
                {
                    "name": "decodeHtmlEntities",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 189,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nDecode HTML entities back to characters.\n",
                    "description": "<p>Decode HTML entities back to characters.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "initMermaid",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 26,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nInitialize Mermaid for diagram rendering.\n",
                    "description": "<p>Initialize Mermaid for diagram rendering.</p>\n",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "processMermaidBlocks",
                    "args": [
                        {
                            "name": "html",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<string>",
                    "typeParameters": [],
                    "line": 167,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nProcess content to extract and render Mermaid diagrams.\nLooks for ```mermaid code blocks.\n",
                    "description": "<p>Process content to extract and render Mermaid diagrams.\nLooks for ```mermaid code blocks.</p>\n",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "html",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderMath",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<string>",
                    "typeParameters": [],
                    "line": 80,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRender MathJax equations.\nSupports both inline ($...$) and display ($$...$$) math.\n",
                    "description": "<p>Render MathJax equations.\nSupports both inline ($...$) and display ($$...$$) math.</p>\n",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderMathToHtml",
                    "args": [
                        {
                            "name": "latex",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "display",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 102,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nConvert LaTeX to HTML using basic substitutions.\nFor production, use full MathJax, but this provides basic support.\n",
                    "description": "<p>Convert LaTeX to HTML using basic substitutions.\nFor production, use full MathJax, but this provides basic support.</p>\n",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "latex",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "display",
                            "type": "boolean",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "renderMermaid",
                    "args": [
                        {
                            "name": "definition",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<string>",
                    "typeParameters": [],
                    "line": 57,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nRender a Mermaid diagram from definition.\nReturns SVG string or error message.\n",
                    "description": "<p>Render a Mermaid diagram from definition.\nReturns SVG string or error message.</p>\n",
                    "modifierKind": [
                        134
                    ],
                    "jsdoctags": [
                        {
                            "name": "definition",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "<p>Service for rendering Mermaid diagrams and MathJax equations.\nUses lazy loading to avoid blocking initial page load.</p>\n",
            "rawdescription": "\n\nService for rendering Mermaid diagrams and MathJax equations.\nUses lazy loading to avoid blocking initial page load.\n",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n/**\n * Service for rendering Mermaid diagrams and MathJax equations.\n * Uses lazy loading to avoid blocking initial page load.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class RenderingService {\n    private mermaidModule: typeof import('mermaid') | null = null;\n    private mermaidInitialized = false;\n\n    /** Whether Mermaid is ready */\n    mermaidReady = signal(false);\n\n    /** Whether MathJax is ready */\n    mathjaxReady = signal(false);\n\n    /** Counter for unique diagram IDs */\n    private diagramCounter = 0;\n\n    /**\n     * Initialize Mermaid for diagram rendering.\n     */\n    async initMermaid(): Promise<void> {\n        if (this.mermaidInitialized) return;\n\n        try {\n            this.mermaidModule = await import('mermaid');\n            this.mermaidModule.default.initialize({\n                startOnLoad: false,\n                theme: 'neutral',\n                securityLevel: 'strict',\n                fontFamily: 'Inter, sans-serif',\n                flowchart: {\n                    curve: 'basis',\n                    padding: 20\n                },\n                sequence: {\n                    diagramMarginX: 50,\n                    diagramMarginY: 10\n                }\n            });\n            this.mermaidInitialized = true;\n            this.mermaidReady.set(true);\n            console.log('Mermaid initialized successfully');\n        } catch (error) {\n            console.error('Failed to initialize Mermaid:', error);\n        }\n    }\n\n    /**\n     * Render a Mermaid diagram from definition.\n     * Returns SVG string or error message.\n     */\n    async renderMermaid(definition: string): Promise<string> {\n        if (!this.mermaidInitialized) {\n            await this.initMermaid();\n        }\n\n        if (!this.mermaidModule) {\n            return `<div class=\"mermaid-error\">Mermaid not available</div>`;\n        }\n\n        try {\n            const id = `mermaid-${++this.diagramCounter}`;\n            const { svg } = await this.mermaidModule.default.render(id, definition);\n            return `<div class=\"mermaid-diagram\">${svg}</div>`;\n        } catch (error) {\n            const errorMsg = error instanceof Error ? error.message : 'Unknown error';\n            return `<div class=\"mermaid-error\">Diagram error: ${errorMsg}</div>`;\n        }\n    }\n\n    /**\n     * Render MathJax equations.\n     * Supports both inline ($...$) and display ($$...$$) math.\n     */\n    async renderMath(content: string): Promise<string> {\n        // Simple regex-based math rendering\n        // For inline: $...$\n        // For display: $$...$$\n\n        // Replace display math first (greedy)\n        let result = content.replace(/\\$\\$([^$]+)\\$\\$/g, (_, math) => {\n            return this.renderMathToHtml(math.trim(), true);\n        });\n\n        // Replace inline math\n        result = result.replace(/\\$([^$\\n]+)\\$/g, (_, math) => {\n            return this.renderMathToHtml(math.trim(), false);\n        });\n\n        return result;\n    }\n\n    /**\n     * Convert LaTeX to HTML using basic substitutions.\n     * For production, use full MathJax, but this provides basic support.\n     */\n    private renderMathToHtml(latex: string, display: boolean): string {\n        // Basic LaTeX to HTML/Unicode substitutions\n        const substitutions: Record<string, string> = {\n            '\\\\alpha': 'α', '\\\\beta': 'β', '\\\\gamma': 'γ', '\\\\delta': 'δ',\n            '\\\\epsilon': 'ε', '\\\\zeta': 'ζ', '\\\\eta': 'η', '\\\\theta': 'θ',\n            '\\\\iota': 'ι', '\\\\kappa': 'κ', '\\\\lambda': 'λ', '\\\\mu': 'μ',\n            '\\\\nu': 'ν', '\\\\xi': 'ξ', '\\\\pi': 'π', '\\\\rho': 'ρ',\n            '\\\\sigma': 'σ', '\\\\tau': 'τ', '\\\\upsilon': 'υ', '\\\\phi': 'φ',\n            '\\\\chi': 'χ', '\\\\psi': 'ψ', '\\\\omega': 'ω',\n            '\\\\Alpha': 'Α', '\\\\Beta': 'Β', '\\\\Gamma': 'Γ', '\\\\Delta': 'Δ',\n            '\\\\Epsilon': 'Ε', '\\\\Zeta': 'Ζ', '\\\\Eta': 'Η', '\\\\Theta': 'Θ',\n            '\\\\Iota': 'Ι', '\\\\Kappa': 'Κ', '\\\\Lambda': 'Λ', '\\\\Mu': 'Μ',\n            '\\\\Nu': 'Ν', '\\\\Xi': 'Ξ', '\\\\Pi': 'Π', '\\\\Rho': 'Ρ',\n            '\\\\Sigma': 'Σ', '\\\\Tau': 'Τ', '\\\\Upsilon': 'Υ', '\\\\Phi': 'Φ',\n            '\\\\Chi': 'Χ', '\\\\Psi': 'Ψ', '\\\\Omega': 'Ω',\n            '\\\\infty': '∞', '\\\\partial': '∂', '\\\\nabla': '∇',\n            '\\\\sum': '∑', '\\\\prod': '∏', '\\\\int': '∫',\n            '\\\\sqrt': '√', '\\\\pm': '±', '\\\\mp': '∓',\n            '\\\\times': '×', '\\\\div': '÷', '\\\\cdot': '·',\n            '\\\\leq': '≤', '\\\\geq': '≥', '\\\\neq': '≠',\n            '\\\\approx': '≈', '\\\\equiv': '≡', '\\\\sim': '∼',\n            '\\\\in': '∈', '\\\\notin': '∉', '\\\\subset': '⊂',\n            '\\\\supset': '⊃', '\\\\subseteq': '⊆', '\\\\supseteq': '⊇',\n            '\\\\cup': '∪', '\\\\cap': '∩', '\\\\emptyset': '∅',\n            '\\\\forall': '∀', '\\\\exists': '∃', '\\\\neg': '¬',\n            '\\\\wedge': '∧', '\\\\vee': '∨', '\\\\Rightarrow': '⇒',\n            '\\\\Leftarrow': '⇐', '\\\\Leftrightarrow': '⇔',\n            '\\\\rightarrow': '→', '\\\\leftarrow': '←', '\\\\leftrightarrow': '↔',\n            '\\\\to': '→',\n            '\\\\langle': '⟨', '\\\\rangle': '⟩',\n            '\\\\lfloor': '⌊', '\\\\rfloor': '⌋',\n            '\\\\lceil': '⌈', '\\\\rceil': '⌉',\n        };\n\n        let html = latex;\n\n        // Apply substitutions\n        for (const [key, value] of Object.entries(substitutions)) {\n            html = html.split(key).join(value);\n        }\n\n        // Handle subscripts: x_n or x_{abc}\n        html = html.replace(/_\\{([^}]+)\\}/g, '<sub>$1</sub>');\n        html = html.replace(/_([a-zA-Z0-9])/g, '<sub>$1</sub>');\n\n        // Handle superscripts: x^n or x^{abc}\n        html = html.replace(/\\^\\{([^}]+)\\}/g, '<sup>$1</sup>');\n        html = html.replace(/\\^([a-zA-Z0-9])/g, '<sup>$1</sup>');\n\n        // Handle fractions: \\frac{a}{b}\n        html = html.replace(/\\\\frac\\{([^}]+)\\}\\{([^}]+)\\}/g,\n            '<span class=\"math-frac\"><span class=\"math-num\">$1</span><span class=\"math-denom\">$2</span></span>');\n\n        // Clean up remaining backslashes and braces\n        html = html.replace(/\\\\[a-zA-Z]+/g, ''); // Remove unknown commands\n        html = html.replace(/[{}]/g, ''); // Remove braces\n\n        const className = display ? 'math-display' : 'math-inline';\n        return `<span class=\"${className}\">${html}</span>`;\n    }\n\n    /**\n     * Process content to extract and render Mermaid diagrams.\n     * Looks for ```mermaid code blocks.\n     */\n    async processMermaidBlocks(html: string): Promise<string> {\n        // Match mermaid code blocks\n        const mermaidRegex = /<pre><code class=\"language-mermaid\">([\\s\\S]*?)<\\/code><\\/pre>/gi;\n        const matches = [...html.matchAll(mermaidRegex)];\n\n        if (matches.length === 0) {\n            return html;\n        }\n\n        let result = html;\n        for (const match of matches) {\n            const definition = this.decodeHtmlEntities(match[1]);\n            const rendered = await this.renderMermaid(definition);\n            result = result.replace(match[0], rendered);\n        }\n\n        return result;\n    }\n\n    /**\n     * Decode HTML entities back to characters.\n     */\n    private decodeHtmlEntities(text: string): string {\n        const entities: Record<string, string> = {\n            '&lt;': '<',\n            '&gt;': '>',\n            '&amp;': '&',\n            '&quot;': '\"',\n            '&#39;': \"'\",\n            '&nbsp;': ' ',\n        };\n\n        let result = text;\n        for (const [entity, char] of Object.entries(entities)) {\n            result = result.split(entity).join(char);\n        }\n        return result;\n    }\n}\n",
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "SpeechService",
            "id": "injectable-SpeechService-1b4fbb65bb82930d5a8bd2a489b547447f8e5cf3a2aed57b7a43accc37c9121316130722ce82a79ed26ff0299fcbf0ff2a012c411cde999ea062953b897c3d7d",
            "file": "src/app/core/services/speech.service.ts",
            "properties": [
                {
                    "name": "isListening",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 40
                },
                {
                    "name": "isSpeaking",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 41
                },
                {
                    "name": "recognition",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "SpeechRecognitionInterface | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 37,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "synthesis",
                    "defaultValue": "window.speechSynthesis",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 38,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "transcript",
                    "defaultValue": "signal('')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 42
                }
            ],
            "methods": [
                {
                    "name": "getVoices",
                    "args": [],
                    "optional": false,
                    "returnType": "SpeechSynthesisVoice[]",
                    "typeParameters": [],
                    "line": 148,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "initRecognition",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 48,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "isSupported",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 79,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "isTTSSupported",
                    "args": [],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 83,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "speak",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 114,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "startListening",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<string>",
                    "typeParameters": [],
                    "line": 87,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "stopListening",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 108,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "stopSpeaking",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 143,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable, signal } from '@angular/core';\n\n// Web Speech API type declarations (not included in standard TypeScript libs)\ninterface SpeechRecognitionEvent extends Event {\n    resultIndex: number;\n    results: SpeechRecognitionResultList;\n}\n\ninterface SpeechRecognitionErrorEvent extends Event {\n    error: string;\n    message: string;\n}\n\ninterface SpeechRecognitionInterface extends EventTarget {\n    continuous: boolean;\n    interimResults: boolean;\n    lang: string;\n    onresult: ((event: SpeechRecognitionEvent) => void) | null;\n    onend: (() => void) | null;\n    onerror: ((event: SpeechRecognitionErrorEvent) => void) | null;\n    start(): void;\n    stop(): void;\n    abort(): void;\n}\n\ndeclare global {\n    interface Window {\n        SpeechRecognition: new () => SpeechRecognitionInterface;\n        webkitSpeechRecognition: new () => SpeechRecognitionInterface;\n    }\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SpeechService {\n    private recognition: SpeechRecognitionInterface | null = null;\n    private synthesis = window.speechSynthesis;\n\n    isListening = signal(false);\n    isSpeaking = signal(false);\n    transcript = signal('');\n\n    constructor() {\n        this.initRecognition();\n    }\n\n    private initRecognition(): void {\n        const SpeechRecognitionCtor = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognitionCtor) {\n            this.recognition = new SpeechRecognitionCtor();\n            this.recognition.continuous = false;\n            this.recognition.interimResults = true;\n            this.recognition.lang = 'en-US';\n\n            this.recognition.onresult = (event: SpeechRecognitionEvent) => {\n                let finalTranscript = '';\n                for (let i = event.resultIndex; i < event.results.length; i++) {\n                    if (event.results[i].isFinal) {\n                        finalTranscript += event.results[i][0].transcript;\n                    }\n                }\n                if (finalTranscript) {\n                    this.transcript.set(finalTranscript);\n                }\n            };\n\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n            };\n\n            this.recognition.onerror = (event: SpeechRecognitionErrorEvent) => {\n                console.error('Speech recognition error:', event.error);\n                this.isListening.set(false);\n            };\n        }\n    }\n\n    isSupported(): boolean {\n        return this.recognition !== null;\n    }\n\n    isTTSSupported(): boolean {\n        return 'speechSynthesis' in window;\n    }\n\n    startListening(): Promise<string> {\n        return new Promise((resolve, reject) => {\n            if (!this.recognition) {\n                reject(new Error('Speech recognition not supported'));\n                return;\n            }\n\n            this.transcript.set('');\n            this.isListening.set(true);\n\n            const originalOnEnd = this.recognition.onend;\n            this.recognition.onend = () => {\n                this.isListening.set(false);\n                resolve(this.transcript());\n                this.recognition!.onend = originalOnEnd as any;\n            };\n\n            this.recognition.start();\n        });\n    }\n\n    stopListening(): void {\n        if (this.recognition && this.isListening()) {\n            this.recognition.stop();\n        }\n    }\n\n    speak(text: string): Promise<void> {\n        return new Promise((resolve, reject) => {\n            if (!this.isTTSSupported()) {\n                reject(new Error('Text-to-speech not supported'));\n                return;\n            }\n\n            // Cancel any ongoing speech\n            this.synthesis.cancel();\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.rate = 1.0;\n            utterance.pitch = 1.0;\n            utterance.volume = 1.0;\n\n            utterance.onstart = () => this.isSpeaking.set(true);\n            utterance.onend = () => {\n                this.isSpeaking.set(false);\n                resolve();\n            };\n            utterance.onerror = (event) => {\n                this.isSpeaking.set(false);\n                reject(event);\n            };\n\n            this.synthesis.speak(utterance);\n        });\n    }\n\n    stopSpeaking(): void {\n        this.synthesis.cancel();\n        this.isSpeaking.set(false);\n    }\n\n    getVoices(): SpeechSynthesisVoice[] {\n        return this.synthesis.getVoices();\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 42
            },
            "extends": [],
            "type": "injectable"
        },
        {
            "name": "ThemeService",
            "id": "injectable-ThemeService-3a105519ce91ccf719c36f75ae36b56827dc977ed314560e6b928118284381938712c5723375e5e31c3702056a8b3620738a2152390857a9e7618a6bf9585e52",
            "file": "src/app/core/services/theme.service.ts",
            "properties": [
                {
                    "name": "isDarkTheme",
                    "defaultValue": "computed(() => {\n        const mode = this.themeMode();\n        if (mode === 'system') {\n            return window.matchMedia('(prefers-color-scheme: dark)').matches;\n        }\n        return mode === 'dark';\n    })",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the current effective theme is dark (resolves &#39;system&#39; to actual)</p>\n",
                    "line": 15,
                    "rawdescription": "\nWhether the current effective theme is dark (resolves 'system' to actual)"
                },
                {
                    "name": "THEME_KEY",
                    "defaultValue": "'genkit-chat-theme'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 9,
                    "modifierKind": [
                        123,
                        148
                    ]
                },
                {
                    "name": "themeMode",
                    "defaultValue": "signal<ThemeMode>(this.getInitialTheme())",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>The user&#39;s selected theme preference (light, dark, or system)</p>\n",
                    "line": 12,
                    "rawdescription": "\nThe user's selected theme preference (light, dark, or system)"
                }
            ],
            "methods": [
                {
                    "name": "cycleTheme",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 55,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nCycle through themes: system -> light -> dark -> system",
                    "description": "<p>Cycle through themes: system -&gt; light -&gt; dark -&gt; system</p>\n"
                },
                {
                    "name": "getInitialTheme",
                    "args": [],
                    "optional": false,
                    "returnType": "ThemeMode",
                    "typeParameters": [],
                    "line": 46,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "getThemeIcon",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 67,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet the icon for the current theme",
                    "description": "<p>Get the icon for the current theme</p>\n"
                },
                {
                    "name": "getThemeLabel",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 75,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet the label for the current theme",
                    "description": "<p>Get the label for the current theme</p>\n"
                },
                {
                    "name": "setTheme",
                    "args": [
                        {
                            "name": "mode",
                            "type": "ThemeMode",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 62,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nSet a specific theme",
                    "description": "<p>Set a specific theme</p>\n",
                    "jsdoctags": [
                        {
                            "name": "mode",
                            "type": "ThemeMode",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "description": "",
            "rawdescription": "\n",
            "sourceCode": "import { Injectable, signal, effect, computed } from '@angular/core';\n\nexport type ThemeMode = 'light' | 'dark' | 'system';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ThemeService {\n    private readonly THEME_KEY = 'genkit-chat-theme';\n\n    /** The user's selected theme preference (light, dark, or system) */\n    themeMode = signal<ThemeMode>(this.getInitialTheme());\n\n    /** Whether the current effective theme is dark (resolves 'system' to actual) */\n    isDarkTheme = computed(() => {\n        const mode = this.themeMode();\n        if (mode === 'system') {\n            return window.matchMedia('(prefers-color-scheme: dark)').matches;\n        }\n        return mode === 'dark';\n    });\n\n    constructor() {\n        // Apply theme changes to body\n        effect(() => {\n            const dark = this.isDarkTheme();\n            document.body.classList.toggle('dark-theme', dark);\n        });\n\n        // Persist theme preference\n        effect(() => {\n            const mode = this.themeMode();\n            localStorage.setItem(this.THEME_KEY, mode);\n        });\n\n        // Listen for system theme changes\n        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {\n            // This will trigger the isDarkTheme computed to re-evaluate\n            if (this.themeMode() === 'system') {\n                // Force a re-evaluation by toggling and restoring\n                this.themeMode.set('system');\n            }\n        });\n    }\n\n    private getInitialTheme(): ThemeMode {\n        const saved = localStorage.getItem(this.THEME_KEY);\n        if (saved === 'light' || saved === 'dark' || saved === 'system') {\n            return saved;\n        }\n        return 'system'; // Default to system preference\n    }\n\n    /** Cycle through themes: system -> light -> dark -> system */\n    cycleTheme(): void {\n        const current = this.themeMode();\n        const next: ThemeMode = current === 'system' ? 'light' : current === 'light' ? 'dark' : 'system';\n        this.themeMode.set(next);\n    }\n\n    /** Set a specific theme */\n    setTheme(mode: ThemeMode): void {\n        this.themeMode.set(mode);\n    }\n\n    /** Get the icon for the current theme */\n    getThemeIcon(): string {\n        const mode = this.themeMode();\n        if (mode === 'system') return 'brightness_auto';\n        if (mode === 'dark') return 'dark_mode';\n        return 'light_mode';\n    }\n\n    /** Get the label for the current theme */\n    getThemeLabel(): string {\n        const mode = this.themeMode();\n        if (mode === 'system') return 'System';\n        if (mode === 'dark') return 'Dark';\n        return 'Light';\n    }\n}\n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 21
            },
            "extends": [],
            "type": "injectable"
        }
    ],
    "guards": [],
    "interceptors": [],
    "classes": [
        {
            "name": "ResizeObserverMock",
            "id": "class-ResizeObserverMock-cd88e5c3f25e56e30afe7dd244c9326c28af5e630d05290e934b94991c082e5855f90b4f3ec3e7914a1e792299281bd856fb6b01e2c80b3ea91f29e0ce3641b7",
            "file": "src/test-setup.ts",
            "deprecated": false,
            "deprecationMessage": "",
            "type": "class",
            "sourceCode": "import { vi } from 'vitest';\n\n// Mock localStorage\nconst localStorageMock = {\n    getItem: vi.fn(),\n    setItem: vi.fn(),\n    removeItem: vi.fn(),\n    clear: vi.fn(),\n};\nObject.defineProperty(globalThis, 'localStorage', { value: localStorageMock });\n\n// Mock matchMedia\nObject.defineProperty(globalThis, 'matchMedia', {\n    writable: true,\n    value: vi.fn().mockImplementation((query: string) => ({\n        matches: false,\n        media: query,\n        onchange: null,\n        addListener: vi.fn(),\n        removeListener: vi.fn(),\n        addEventListener: vi.fn(),\n        removeEventListener: vi.fn(),\n        dispatchEvent: vi.fn(),\n    })),\n});\n\n// Mock SpeechRecognition\nObject.defineProperty(globalThis, 'SpeechRecognition', {\n    writable: true,\n    value: undefined,\n});\nObject.defineProperty(globalThis, 'webkitSpeechRecognition', {\n    writable: true,\n    value: undefined,\n});\n\n// Mock speechSynthesis\nconst speechSynthesisMock = {\n    cancel: vi.fn(),\n    speak: vi.fn(),\n    getVoices: vi.fn().mockReturnValue([]),\n};\nObject.defineProperty(globalThis, 'speechSynthesis', {\n    writable: true,\n    value: speechSynthesisMock,\n});\n\n// Mock ResizeObserver\nclass ResizeObserverMock {\n    observe = vi.fn();\n    unobserve = vi.fn();\n    disconnect = vi.fn();\n}\nObject.defineProperty(globalThis, 'ResizeObserver', {\n    writable: true,\n    value: ResizeObserverMock,\n});\n\n// Mock document properties\nObject.defineProperty(document.documentElement, 'dir', {\n    writable: true,\n    value: 'ltr',\n});\nObject.defineProperty(document.documentElement, 'lang', {\n    writable: true,\n    value: 'en',\n});\n",
            "inputsClass": [],
            "outputsClass": [],
            "properties": [
                {
                    "name": "disconnect",
                    "defaultValue": "vi.fn()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 53
                },
                {
                    "name": "observe",
                    "defaultValue": "vi.fn()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 51
                },
                {
                    "name": "unobserve",
                    "defaultValue": "vi.fn()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 52
                }
            ],
            "methods": [],
            "indexSignatures": [],
            "extends": [],
            "hostBindings": [],
            "hostListeners": []
        }
    ],
    "directives": [],
    "components": [
        {
            "name": "AppComponent",
            "id": "component-AppComponent-9ad9e9dc59ca33335f133203dc2b54d4fad775942d72eae3a3d2663f4f94de204e94a3b2d1a3203b33433f8cfbb3bb1c3a23381d45915dbef126a67236a3b410",
            "file": "src/app/app.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-root",
            "styleUrls": [],
            "styles": [
                "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .app-container {\n      height: 100vh;\n    }\n\n    /* Sidenav */\n    mat-sidenav {\n      width: 280px;\n      border-right: none !important;\n      background: var(--sidebar-bg) !important;\n      transition: width 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n      overflow-x: hidden;\n      \n      &.collapsed {\n        width: 72px;\n        \n        .sidenav-header {\n          justify-content: center;\n        }\n        \n        .new-chat-btn {\n          width: 48px;\n          min-width: 48px;\n          padding: 0 !important;\n          justify-content: center;\n          \n          mat-icon {\n            margin: 0;\n          }\n        }\n        \n        .mat-mdc-nav-list {\n          padding: 4px;\n        }\n        \n        .mat-mdc-list-item {\n          padding: 0 !important;\n          justify-content: center;\n          min-height: 48px;\n          width: 48px;\n          margin: 2px auto;\n          border-radius: 50% !important;\n          \n          .mdc-list-item__content {\n            justify-content: center;\n            padding: 0;\n          }\n          \n          mat-icon {\n            margin: 0 !important;\n          }\n        }\n      }\n    }\n    \n    mat-sidenav-content {\n      display: flex;\n      flex-direction: column;\n      height: 100vh;\n      transition: margin-left 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n      background: #ffffff;\n      \n      &.sidebar-collapsed {\n        margin-left: 72px !important;\n      }\n    }\n\n    .sidenav-content {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      padding: 12px;\n      background: var(--surface-dim);\n    }\n\n    .sidenav-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px;\n      margin-bottom: 12px;\n    }\n\n    .menu-btn {\n      flex-shrink: 0;\n      \n      &:hover {\n        background: transparent !important;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    .logo-link {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      text-decoration: none;\n    }\n\n    .logo-img {\n      height: 36px;\n      width: auto;\n      opacity: 0.7;\n      \n      &.dark {\n        /* filter: invert(1); removed */\n      }\n      \n      &.small {\n        height: 24px;\n      }\n    }\n\n    .app-name {\n      font-size: 16px;\n      font-weight: 500;\n      color: var(--on-surface);\n      letter-spacing: -0.3px;\n    }\n\n    .new-chat-btn {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      gap: 12px;\n      width: 100%;\n      padding: 10px 16px;\n      margin-bottom: 8px;\n      border-radius: var(--radius-full) !important;\n      border-color: var(--surface-variant) !important;\n      font-weight: 500;\n      \n      mat-icon {\n        margin: 0;\n      }\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n    }\n\n    .main-nav,\n    .footer-nav {\n      mat-nav-list,\n      .mat-mdc-nav-list {\n        padding: 0 !important;\n      }\n      \n      a[mat-list-item], \n      button[mat-list-item] {\n        border-radius: var(--radius-full) !important;\n        margin: 2px 0;\n        height: 40px !important;\n        border: none !important;\n        background: transparent !important;\n        \n        // Proper icon/label alignment\n        .mdc-list-item__content {\n          display: flex !important;\n          align-items: center !important;\n        }\n        \n        mat-icon {\n          margin-right: 16px !important;\n          color: var(--on-surface-variant);\n          flex-shrink: 0;\n        }\n        \n        span[matListItemTitle] {\n          font-size: 14px;\n          font-weight: 400;\n        }\n        \n        &:hover {\n          background: var(--surface-container) !important;\n        }\n        \n        &.active {\n          background: var(--user-bubble-bg) !important;\n          color: var(--gemini-blue-dark) !important;\n          \n          mat-icon {\n            color: var(--gemini-blue-dark) !important;\n          }\n        }\n        \n        &.demo-active {\n          mat-icon {\n            color: #34a853 !important;\n          }\n        }\n      }\n    }\n\n    .spacer {\n      flex: 1;\n    }\n\n    /* User Item in Sidebar */\n    .user-item,\n    .sign-in-item {\n      height: auto !important;\n      padding: 8px 16px !important;\n    }\n\n    .user-avatar {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      .avatar-initials {\n        color: white;\n        font-size: 12px;\n        font-weight: 500;\n      }\n    }\n\n    .user-info {\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    .user-name {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--on-surface);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .user-email {\n      font-size: 12px;\n      color: var(--on-surface-variant);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    /* Top Bar */\n    .top-bar {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: 56px;\n      padding: 0 12px;\n      border-bottom: 1px solid var(--surface-variant);\n      background: var(--surface);\n    }\n\n    .top-bar-left,\n    .top-bar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      min-width: 120px;\n    }\n\n    .top-bar-right {\n      justify-content: flex-end;\n    }\n\n    .mobile-logo {\n      display: flex;\n      align-items: center;\n    }\n\n    .top-bar-center {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .app-title {\n      font-size: 16px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .version-badge {\n      font-size: 10px;\n      font-weight: 500;\n      text-transform: uppercase;\n      padding: 2px 6px;\n      background: var(--surface-container);\n      color: var(--on-surface-variant);\n      border-radius: 4px;\n      letter-spacing: 0.5px;\n    }\n\n    .header-avatar {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      span {\n        color: white;\n        font-size: 12px;\n        font-weight: 500;\n      }\n    }\n\n    .header-signin {\n      border-radius: var(--radius-full) !important;\n      font-size: 14px;\n      padding: 0 16px !important;\n      height: 36px;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 6px;\n      }\n    }\n\n    .profile-btn {\n      margin-left: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 0 !important;\n      width: 40px;\n      height: 40px;\n    }\n\n    /* User Menu */\n    .user-menu-header {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n    }\n\n    .user-menu-avatar {\n      width: 48px;\n      height: 48px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      span {\n        color: white;\n        font-size: 18px;\n        font-weight: 500;\n      }\n    }\n\n    .user-menu-info {\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      flex: 1;\n      \n      .name {\n        font-size: 15px;\n        font-weight: 500;\n        color: var(--on-surface);\n      }\n      \n      .name-input {\n        font-size: 15px;\n        font-weight: 500;\n        color: var(--on-surface);\n        border: none;\n        border-bottom: 2px solid var(--gemini-blue);\n        background: transparent;\n        padding: 2px 0;\n        outline: none;\n        width: 100%;\n      }\n      \n      .email {\n        font-size: 13px;\n        color: var(--on-surface-variant);\n      }\n    }\n    \n    .edit-name-btn {\n      width: 32px;\n      height: 32px;\n      flex-shrink: 0;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n\n    /* Main Content */\n    .main-content {\n      flex: 1;\n      overflow: hidden;\n      background: var(--surface-dim);\n    }\n\n    /* Footer */\n    .app-footer {\n      flex-shrink: 0;\n      padding: 12px 24px;\n      text-align: center;\n      border-top: 1px solid var(--outline-variant);\n      background: var(--surface-dim);\n    }\n\n    .footer-links {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      gap: 8px;\n      margin-bottom: 6px;\n      flex-wrap: wrap;\n      \n      a {\n        color: var(--on-surface-muted);\n        text-decoration: none;\n        font-size: 12px;\n        \n        &:hover {\n          color: var(--gemini-blue);\n          text-decoration: underline;\n        }\n      }\n      \n      .separator {\n        color: var(--on-surface-muted);\n        opacity: 0.5;\n      }\n    }\n\n    .copyright {\n      font-size: 11px;\n      color: var(--on-surface-muted);\n      opacity: 0.7;\n    }\n\n    /* Responsive */\n    /* Responsive Breakpoints */\n    \n    /* Language Menu Styles */\n    ::ng-deep .language-menu {\n      min-width: 320px !important;\n      max-width: 400px;\n    }\n    \n    .lang-filter-container {\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      gap: 8px;\n      \n      .filter-icon {\n        color: var(--on-surface-muted);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      .lang-filter-input {\n        flex: 1;\n        border: none;\n        background: transparent;\n        font-size: 14px;\n        color: var(--on-surface);\n        outline: none;\n        padding: 4px 0;\n        \n        &::placeholder {\n          color: var(--on-surface-muted);\n        }\n      }\n      \n      .clear-filter-btn {\n        width: 24px !important;\n        height: 24px !important;\n        padding: 0 !important;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n    \n    .lang-list-container {\n      max-height: 350px;\n      overflow-y: auto;\n    }\n    \n    ::ng-deep .lang-menu-item {\n      display: flex !important;\n      align-items: center;\n      gap: 16px;\n      min-height: 48px;\n      padding: 8px 16px !important;\n      \n      .lang-flag {\n        font-size: 20px;\n        flex-shrink: 0;\n        width: 24px;\n        text-align: center;\n        margin-right: 8px;\n      }\n      \n      .lang-native-name {\n        flex: 1;\n        font-weight: 500;\n        white-space: nowrap;\n      }\n      \n      .lang-english-name {\n        color: var(--on-surface-muted);\n        font-size: 13px;\n        margin-left: auto;\n        text-align: right;\n        padding-left: 16px;\n      }\n      \n      .check-icon {\n        color: var(--gemini-blue);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n        margin-right: 8px;\n        visibility: hidden;\n        \n        &.visible {\n          visibility: visible;\n        }\n      }\n    }\n    \n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--on-surface-muted);\n      font-size: 14px;\n    }\n\n    /* Mobile (< 480px) */\n    @media (max-width: 479px) {\n      mat-sidenav {\n        width: 85vw; /* Almost full width */\n        max-width: 320px;\n        position: fixed;\n        z-index: 1000;\n        height: 100%;\n      }\n      \n      mat-sidenav.collapsed {\n        transform: translateX(-100%);\n        width: 85vw;\n      }\n      \n      mat-sidenav-content.sidebar-collapsed {\n        margin-left: 0 !important;\n      }\n    }\n\n    /* Tablet (480px - 768px) */\n    @media (min-width: 480px) and (max-width: 768px) {\n      mat-sidenav {\n        width: 100%;\n        max-width: 280px;\n      }\n    }\n\n    /* Laptop (768px - 1024px) */\n    @media (min-width: 769px) and (max-width: 1024px) {\n      mat-sidenav {\n        width: 260px;\n      }\n    }\n\n    /* Desktop (> 1024px) */\n    @media (min-width: 1025px) {\n      /* Standard layout */\n    }\n  "
            ],
            "template": "<mat-sidenav-container class=\"app-container\">\n  <!-- Sidebar -->\n  <mat-sidenav #sidenav mode=\"side\" opened [class.collapsed]=\"!sidenavOpened()\">\n    <div class=\"sidenav-content\">\n      <!-- Logo & Brand -->\n      <div class=\"sidenav-header\">\n        <button mat-icon-button\n                (click)=\"toggleSidenav()\"\n                class=\"menu-btn\"\n                [attr.aria-label]=\"sidenavOpened() ? 'Collapse menu' : 'Expand menu'\"\n                [matTooltip]=\"sidenavOpened() ? 'Collapse menu' : 'Expand menu'\">\n          <mat-icon>menu</mat-icon>\n        </button>\n        @if (sidenavOpened()) {\n          <a routerLink=\"/\" class=\"logo-link\">\n            <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"logo-img\">\n            <span class=\"app-name\">Genkit Chat</span>\n          </a>\n        }\n      </div>\n\n      <!-- New Chat Button -->\n      <button mat-stroked-button class=\"new-chat-btn\" routerLink=\"/\" (click)=\"startNewChat()\" matRipple [matTooltip]=\"sidenavOpened() ? '' : ('app.newChat' | translate)\" matTooltipPosition=\"right\">\n        <mat-icon>add</mat-icon>\n        @if (sidenavOpened()) {\n          <span>{{ 'app.newChat' | translate }}</span>\n        }\n      </button>\n\n      <mat-nav-list class=\"main-nav\">\n        <a mat-list-item routerLink=\"/\" routerLinkActive=\"active\" [routerLinkActiveOptions]=\"{exact: true}\" [matTooltip]=\"sidenavOpened() ? '' : ('nav.chat' | translate)\" matTooltipPosition=\"right\">\n          <mat-icon matListItemIcon>chat_bubble_outline</mat-icon>\n          @if (sidenavOpened()) {\n            <span matListItemTitle>{{ 'nav.chat' | translate }}</span>\n          }\n        </a>\n        <a mat-list-item routerLink=\"/compare\" routerLinkActive=\"active\" [matTooltip]=\"sidenavOpened() ? '' : ('nav.compare' | translate)\" matTooltipPosition=\"right\">\n          <mat-icon matListItemIcon>compare_arrows</mat-icon>\n          @if (sidenavOpened()) {\n            <span matListItemTitle>{{ 'nav.compare' | translate }}</span>\n          }\n        </a>\n      </mat-nav-list>\n\n      <!-- Spacer -->\n      <div class=\"spacer\"></div>\n\n      <!-- Footer Navigation -->\n      <mat-nav-list class=\"footer-nav\">\n        <!-- Demo User Toggle -->\n        <button mat-list-item (click)=\"authService.toggleDemoMode()\"\n                [matTooltip]=\"sidenavOpened() ? '' : ('nav.demoUser' | translate)\"\n                matTooltipPosition=\"right\"\n                [class.demo-active]=\"authService.demoMode()\">\n          <mat-icon matListItemIcon>{{ authService.demoMode() ? 'toggle_on' : 'toggle_off' }}</mat-icon>\n          @if (sidenavOpened()) {\n            <span matListItemTitle>{{ 'nav.demoUser' | translate }}</span>\n          }\n        </button>\n        <a mat-list-item routerLink=\"/settings\" routerLinkActive=\"active\" [matTooltip]=\"sidenavOpened() ? '' : ('nav.settings' | translate)\" matTooltipPosition=\"right\">\n          <mat-icon matListItemIcon>settings</mat-icon>\n          @if (sidenavOpened()) {\n            <span matListItemTitle>{{ 'nav.settings' | translate }}</span>\n          }\n        </a>\n        <button mat-list-item [matMenuTriggerFor]=\"themeMenu\" [matTooltip]=\"sidenavOpened() ? '' : (('theme.' + themeService.themeMode()) | translate)\" matTooltipPosition=\"right\">\n          <mat-icon matListItemIcon>{{ themeService.getThemeIcon() }}</mat-icon>\n          @if (sidenavOpened()) {\n            <span matListItemTitle>{{ 'theme.label' | translate }}: {{ ('theme.' + themeService.themeMode()) | translate }}</span>\n          }\n        </button>\n        <mat-menu #themeMenu=\"matMenu\">\n          <button mat-menu-item (click)=\"themeService.setTheme('system')\">\n            <mat-icon>brightness_auto</mat-icon>\n            <span>{{ 'theme.system' | translate }}</span>\n          </button>\n          <button mat-menu-item (click)=\"themeService.setTheme('light')\">\n            <mat-icon>light_mode</mat-icon>\n            <span>{{ 'theme.light' | translate }}</span>\n          </button>\n          <button mat-menu-item (click)=\"themeService.setTheme('dark')\">\n            <mat-icon>dark_mode</mat-icon>\n            <span>{{ 'theme.dark' | translate }}</span>\n          </button>\n        </mat-menu>\n\n        <!-- Language Selector -->\n        <button mat-list-item [matMenuTriggerFor]=\"langMenu\" [matTooltip]=\"sidenavOpened() ? '' : languageService.getLanguageLabel()\" matTooltipPosition=\"right\">\n          <mat-icon matListItemIcon>language</mat-icon>\n          @if (sidenavOpened()) {\n            <span matListItemTitle>{{ languageService.getLanguageLabel() }}</span>\n          }\n        </button>\n        <mat-menu #langMenu=\"matMenu\" class=\"language-menu\">\n          <!-- Filter Input -->\n          <div class=\"lang-filter-container\" (click)=\"$event.stopPropagation()\">\n            <mat-icon class=\"filter-icon\">search</mat-icon>\n            <input type=\"text\"\n                   class=\"lang-filter-input\"\n                   [placeholder]=\"'language.searchLanguages' | translate\"\n                   [ngModel]=\"languageService.languageFilter()\"\n                   (ngModelChange)=\"languageService.languageFilter.set($event)\"\n                   (keydown)=\"$event.stopPropagation()\">\n            @if (languageService.languageFilter()) {\n              <button mat-icon-button class=\"clear-filter-btn\" (click)=\"languageService.languageFilter.set('')\">\n                <mat-icon>close</mat-icon>\n              </button>\n            }\n          </div>\n          <mat-divider></mat-divider>\n          <button mat-menu-item (click)=\"languageService.setLanguagePreference('system')\">\n            <mat-icon>{{ languageService.languagePreference() === 'system' ? 'check' : '' }}</mat-icon>\n            <span>{{ 'theme.system' | translate }}</span>\n          </button>\n          <mat-divider></mat-divider>\n          <div class=\"lang-list-container\">\n            @for (lang of languageService.filteredLanguages; track lang.code) {\n              <button mat-menu-item class=\"lang-menu-item\" (click)=\"languageService.setLanguagePreference(lang.code)\">\n                <mat-icon class=\"check-icon\" [class.visible]=\"languageService.languagePreference() === lang.code\">check</mat-icon>\n                <span class=\"lang-flag\">{{ lang.flag }}</span>\n                <span class=\"lang-native-name\">{{ lang.nativeName }}</span>\n                <span class=\"lang-english-name\">{{ lang.name }}</span>\n              </button>\n            }\n            @if (languageService.filteredLanguages.length === 0) {\n              <div class=\"no-results\">{{ 'language.noLanguagesFound' | translate }}</div>\n            }\n          </div>\n        </mat-menu>\n      </mat-nav-list>\n    </div>\n  </mat-sidenav>\n\n  <!-- Main Content Area -->\n  <mat-sidenav-content [class.sidebar-collapsed]=\"!sidenavOpened()\">\n    <!-- Top Header Bar -->\n    <header class=\"top-bar\">\n      <div class=\"top-bar-left\">\n        <a routerLink=\"/\" class=\"brand-link\">\n          <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"logo-img small\">\n        </a>\n      </div>\n\n      <div class=\"top-bar-center\">\n        <span class=\"app-title\">{{ 'app.title' | translate }}</span>\n        <span class=\"version-badge\">{{ 'app.version' | translate }}</span>\n      </div>\n\n      <div class=\"top-bar-right\">\n        <button mat-icon-button\n                [matMenuTriggerFor]=\"helpMenu\"\n                [attr.aria-label]=\"'help.label' | translate\"\n                [matTooltip]=\"'help.label' | translate\">\n          <mat-icon>help_outline</mat-icon>\n        </button>\n        <mat-menu #helpMenu=\"matMenu\" xPosition=\"before\">\n          <a mat-menu-item href=\"https://firebase.google.com/docs/genkit\" target=\"_blank\">\n            <mat-icon>menu_book</mat-icon>\n            <span>{{ 'help.documentation' | translate }}</span>\n          </a>\n          <a mat-menu-item href=\"https://github.com/firebase/genkit\" target=\"_blank\">\n            <mat-icon>code</mat-icon>\n            <span>{{ 'help.github' | translate }}</span>\n          </a>\n          <mat-divider></mat-divider>\n          <button mat-menu-item disabled>\n            <mat-icon>info</mat-icon>\n            <span>Version 0.1.0</span>\n          </button>\n        </mat-menu>\n\n        <!-- Always show user profile / sign-in in header -->\n        @if (authService.user()) {\n          <button mat-icon-button [matMenuTriggerFor]=\"userMenu\" [matTooltip]=\"'auth.account' | translate\" class=\"profile-btn\">\n            <div class=\"header-avatar\">\n              @if (authService.user()!.picture) {\n                <img [src]=\"authService.user()!.picture\" alt=\"Profile\">\n              } @else {\n                <span>{{ authService.getInitials() }}</span>\n              }\n            </div>\n          </button>\n        } @else {\n          <button mat-flat-button color=\"primary\" class=\"header-signin\" (click)=\"authService.signIn()\">\n            <mat-icon>login</mat-icon>\n            {{ 'auth.signIn' | translate }}\n          </button>\n        }\n      </div>\n    </header>\n\n    <!-- User Menu (shared) -->\n    <mat-menu #userMenu=\"matMenu\" xPosition=\"before\">\n      <div class=\"user-menu-header\" (click)=\"$event.stopPropagation()\">\n        <div class=\"user-menu-avatar\">\n          @if (authService.user()?.picture) {\n            <img [src]=\"authService.user()!.picture\" alt=\"Profile\">\n          } @else {\n            <span>{{ authService.getInitials() }}</span>\n          }\n        </div>\n        <div class=\"user-menu-info\">\n          @if (editingName()) {\n            <input class=\"name-input\"\n                   type=\"text\"\n                   [value]=\"authService.user()?.given_name || ''\"\n                   (keydown.enter)=\"saveName($event)\"\n                   (keydown.escape)=\"cancelNameEdit()\"\n                   (blur)=\"saveName($event)\"\n                   #nameInput\n                   autofocus>\n          } @else {\n            <span class=\"name\">{{ authService.user()?.given_name || authService.user()?.name }}</span>\n          }\n          <span class=\"email\">{{ authService.user()?.email }}</span>\n        </div>\n        <button mat-icon-button class=\"edit-name-btn\" (click)=\"toggleNameEdit($event)\">\n          <mat-icon>{{ editingName() ? 'check' : 'edit' }}</mat-icon>\n        </button>\n      </div>\n      <mat-divider></mat-divider>\n      <button mat-menu-item disabled>\n        <mat-icon>cloud</mat-icon>\n        <span>{{ 'auth.connectDrive' | translate }}</span>\n      </button>\n      <mat-divider></mat-divider>\n      <button mat-menu-item (click)=\"authService.signOut()\">\n        <mat-icon>logout</mat-icon>\n        <span>{{ 'auth.signOut' | translate }}</span>\n      </button>\n    </mat-menu>\n\n    <!-- Page Content -->\n    <main class=\"main-content\">\n      <router-outlet />\n    </main>\n\n    <!-- Footer -->\n    <footer class=\"app-footer\">\n      <div class=\"footer-links\">\n        <a href=\"https://genkit.dev\" target=\"_blank\" rel=\"noopener\">About Genkit</a>\n        <span class=\"separator\">·</span>\n        <a href=\"https://policies.google.com/privacy\" target=\"_blank\" rel=\"noopener\">Privacy</a>\n        <span class=\"separator\">·</span>\n        <a href=\"https://policies.google.com/terms\" target=\"_blank\" rel=\"noopener\">Terms</a>\n        <span class=\"separator\">·</span>\n        <a href=\"https://github.com/firebase/genkit\" target=\"_blank\" rel=\"noopener\">GitHub</a>\n      </div>\n      <div class=\"copyright\">\n        © {{ currentYear }} Google LLC. Licensed under Apache 2.0.\n      </div>\n    </footer>\n  </mat-sidenav-content>\n</mat-sidenav-container>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "authService",
                    "defaultValue": "inject(AuthService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 922
                },
                {
                    "name": "chatService",
                    "defaultValue": "inject(ChatService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 924,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "currentYear",
                    "defaultValue": "new Date().getFullYear()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 927
                },
                {
                    "name": "editingName",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 926
                },
                {
                    "name": "languageService",
                    "defaultValue": "inject(LanguageService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 923
                },
                {
                    "name": "sidenavOpened",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 925
                },
                {
                    "name": "themeService",
                    "defaultValue": "inject(ThemeService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 921
                }
            ],
            "methodsClass": [
                {
                    "name": "cancelNameEdit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 954,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 929,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "saveName",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 945,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "startNewChat",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 958,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "toggleNameEdit",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 937,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "toggleSidenav",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 933,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "RouterOutlet"
                },
                {
                    "name": "RouterLink"
                },
                {
                    "name": "RouterLinkActive"
                },
                {
                    "name": "MatSidenavModule",
                    "type": "module"
                },
                {
                    "name": "MatToolbarModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatListModule",
                    "type": "module"
                },
                {
                    "name": "MatTooltipModule",
                    "type": "module"
                },
                {
                    "name": "MatMenuModule",
                    "type": "module"
                },
                {
                    "name": "MatDividerModule",
                    "type": "module"
                },
                {
                    "name": "MatRippleModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, inject, signal, OnInit } from '@angular/core';\nimport { RouterOutlet, RouterLink, RouterLinkActive } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatRippleModule } from '@angular/material/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ThemeService } from './core/services/theme.service';\nimport { AuthService } from './core/services/auth.service';\nimport { ChatService } from './core/services/chat.service';\nimport { LanguageService } from './core/services/language.service';\n\n@Component({\n  selector: 'app-root',\n  imports: [\n    CommonModule,\n    FormsModule,\n    RouterOutlet,\n    RouterLink,\n    RouterLinkActive,\n    MatSidenavModule,\n    MatToolbarModule,\n    MatIconModule,\n    MatButtonModule,\n    MatListModule,\n    MatTooltipModule,\n    MatMenuModule,\n    MatDividerModule,\n    MatRippleModule,\n    TranslateModule,\n  ],\n  template: `\n    <mat-sidenav-container class=\"app-container\">\n      <!-- Sidebar -->\n      <mat-sidenav #sidenav mode=\"side\" opened [class.collapsed]=\"!sidenavOpened()\">\n        <div class=\"sidenav-content\">\n          <!-- Logo & Brand -->\n          <div class=\"sidenav-header\">\n            <button mat-icon-button \n                    (click)=\"toggleSidenav()\" \n                    class=\"menu-btn\" \n                    [attr.aria-label]=\"sidenavOpened() ? 'Collapse menu' : 'Expand menu'\"\n                    [matTooltip]=\"sidenavOpened() ? 'Collapse menu' : 'Expand menu'\">\n              <mat-icon>menu</mat-icon>\n            </button>\n            @if (sidenavOpened()) {\n              <a routerLink=\"/\" class=\"logo-link\">\n                <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"logo-img\">\n                <span class=\"app-name\">Genkit Chat</span>\n              </a>\n            }\n          </div>\n\n          <!-- New Chat Button -->\n          <button mat-stroked-button class=\"new-chat-btn\" routerLink=\"/\" (click)=\"startNewChat()\" matRipple [matTooltip]=\"sidenavOpened() ? '' : ('app.newChat' | translate)\" matTooltipPosition=\"right\">\n            <mat-icon>add</mat-icon>\n            @if (sidenavOpened()) {\n              <span>{{ 'app.newChat' | translate }}</span>\n            }\n          </button>\n\n          <mat-nav-list class=\"main-nav\">\n            <a mat-list-item routerLink=\"/\" routerLinkActive=\"active\" [routerLinkActiveOptions]=\"{exact: true}\" [matTooltip]=\"sidenavOpened() ? '' : ('nav.chat' | translate)\" matTooltipPosition=\"right\">\n              <mat-icon matListItemIcon>chat_bubble_outline</mat-icon>\n              @if (sidenavOpened()) {\n                <span matListItemTitle>{{ 'nav.chat' | translate }}</span>\n              }\n            </a>\n            <a mat-list-item routerLink=\"/compare\" routerLinkActive=\"active\" [matTooltip]=\"sidenavOpened() ? '' : ('nav.compare' | translate)\" matTooltipPosition=\"right\">\n              <mat-icon matListItemIcon>compare_arrows</mat-icon>\n              @if (sidenavOpened()) {\n                <span matListItemTitle>{{ 'nav.compare' | translate }}</span>\n              }\n            </a>\n          </mat-nav-list>\n\n          <!-- Spacer -->\n          <div class=\"spacer\"></div>\n\n          <!-- Footer Navigation -->\n          <mat-nav-list class=\"footer-nav\">\n            <!-- Demo User Toggle -->\n            <button mat-list-item (click)=\"authService.toggleDemoMode()\" \n                    [matTooltip]=\"sidenavOpened() ? '' : ('nav.demoUser' | translate)\" \n                    matTooltipPosition=\"right\"\n                    [class.demo-active]=\"authService.demoMode()\">\n              <mat-icon matListItemIcon>{{ authService.demoMode() ? 'toggle_on' : 'toggle_off' }}</mat-icon>\n              @if (sidenavOpened()) {\n                <span matListItemTitle>{{ 'nav.demoUser' | translate }}</span>\n              }\n            </button>\n            <a mat-list-item routerLink=\"/settings\" routerLinkActive=\"active\" [matTooltip]=\"sidenavOpened() ? '' : ('nav.settings' | translate)\" matTooltipPosition=\"right\">\n              <mat-icon matListItemIcon>settings</mat-icon>\n              @if (sidenavOpened()) {\n                <span matListItemTitle>{{ 'nav.settings' | translate }}</span>\n              }\n            </a>\n            <button mat-list-item [matMenuTriggerFor]=\"themeMenu\" [matTooltip]=\"sidenavOpened() ? '' : (('theme.' + themeService.themeMode()) | translate)\" matTooltipPosition=\"right\">\n              <mat-icon matListItemIcon>{{ themeService.getThemeIcon() }}</mat-icon>\n              @if (sidenavOpened()) {\n                <span matListItemTitle>{{ 'theme.label' | translate }}: {{ ('theme.' + themeService.themeMode()) | translate }}</span>\n              }\n            </button>\n            <mat-menu #themeMenu=\"matMenu\">\n              <button mat-menu-item (click)=\"themeService.setTheme('system')\">\n                <mat-icon>brightness_auto</mat-icon>\n                <span>{{ 'theme.system' | translate }}</span>\n              </button>\n              <button mat-menu-item (click)=\"themeService.setTheme('light')\">\n                <mat-icon>light_mode</mat-icon>\n                <span>{{ 'theme.light' | translate }}</span>\n              </button>\n              <button mat-menu-item (click)=\"themeService.setTheme('dark')\">\n                <mat-icon>dark_mode</mat-icon>\n                <span>{{ 'theme.dark' | translate }}</span>\n              </button>\n            </mat-menu>\n            \n            <!-- Language Selector -->\n            <button mat-list-item [matMenuTriggerFor]=\"langMenu\" [matTooltip]=\"sidenavOpened() ? '' : languageService.getLanguageLabel()\" matTooltipPosition=\"right\">\n              <mat-icon matListItemIcon>language</mat-icon>\n              @if (sidenavOpened()) {\n                <span matListItemTitle>{{ languageService.getLanguageLabel() }}</span>\n              }\n            </button>\n            <mat-menu #langMenu=\"matMenu\" class=\"language-menu\">\n              <!-- Filter Input -->\n              <div class=\"lang-filter-container\" (click)=\"$event.stopPropagation()\">\n                <mat-icon class=\"filter-icon\">search</mat-icon>\n                <input type=\"text\" \n                       class=\"lang-filter-input\" \n                       [placeholder]=\"'language.searchLanguages' | translate\"\n                       [ngModel]=\"languageService.languageFilter()\"\n                       (ngModelChange)=\"languageService.languageFilter.set($event)\"\n                       (keydown)=\"$event.stopPropagation()\">\n                @if (languageService.languageFilter()) {\n                  <button mat-icon-button class=\"clear-filter-btn\" (click)=\"languageService.languageFilter.set('')\">\n                    <mat-icon>close</mat-icon>\n                  </button>\n                }\n              </div>\n              <mat-divider></mat-divider>\n              <button mat-menu-item (click)=\"languageService.setLanguagePreference('system')\">\n                <mat-icon>{{ languageService.languagePreference() === 'system' ? 'check' : '' }}</mat-icon>\n                <span>{{ 'theme.system' | translate }}</span>\n              </button>\n              <mat-divider></mat-divider>\n              <div class=\"lang-list-container\">\n                @for (lang of languageService.filteredLanguages; track lang.code) {\n                  <button mat-menu-item class=\"lang-menu-item\" (click)=\"languageService.setLanguagePreference(lang.code)\">\n                    <mat-icon class=\"check-icon\" [class.visible]=\"languageService.languagePreference() === lang.code\">check</mat-icon>\n                    <span class=\"lang-flag\">{{ lang.flag }}</span>\n                    <span class=\"lang-native-name\">{{ lang.nativeName }}</span>\n                    <span class=\"lang-english-name\">{{ lang.name }}</span>\n                  </button>\n                }\n                @if (languageService.filteredLanguages.length === 0) {\n                  <div class=\"no-results\">{{ 'language.noLanguagesFound' | translate }}</div>\n                }\n              </div>\n            </mat-menu>\n          </mat-nav-list>\n        </div>\n      </mat-sidenav>\n\n      <!-- Main Content Area -->\n      <mat-sidenav-content [class.sidebar-collapsed]=\"!sidenavOpened()\">\n        <!-- Top Header Bar -->\n        <header class=\"top-bar\">\n          <div class=\"top-bar-left\">\n            <a routerLink=\"/\" class=\"brand-link\">\n              <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"logo-img small\">\n            </a>\n          </div>\n          \n          <div class=\"top-bar-center\">\n            <span class=\"app-title\">{{ 'app.title' | translate }}</span>\n            <span class=\"version-badge\">{{ 'app.version' | translate }}</span>\n          </div>\n          \n          <div class=\"top-bar-right\">\n            <button mat-icon-button \n                    [matMenuTriggerFor]=\"helpMenu\" \n                    [attr.aria-label]=\"'help.label' | translate\"\n                    [matTooltip]=\"'help.label' | translate\">\n              <mat-icon>help_outline</mat-icon>\n            </button>\n            <mat-menu #helpMenu=\"matMenu\" xPosition=\"before\">\n              <a mat-menu-item href=\"https://firebase.google.com/docs/genkit\" target=\"_blank\">\n                <mat-icon>menu_book</mat-icon>\n                <span>{{ 'help.documentation' | translate }}</span>\n              </a>\n              <a mat-menu-item href=\"https://github.com/firebase/genkit\" target=\"_blank\">\n                <mat-icon>code</mat-icon>\n                <span>{{ 'help.github' | translate }}</span>\n              </a>\n              <mat-divider></mat-divider>\n              <button mat-menu-item disabled>\n                <mat-icon>info</mat-icon>\n                <span>Version 0.1.0</span>\n              </button>\n            </mat-menu>\n            \n            <!-- Always show user profile / sign-in in header -->\n            @if (authService.user()) {\n              <button mat-icon-button [matMenuTriggerFor]=\"userMenu\" [matTooltip]=\"'auth.account' | translate\" class=\"profile-btn\">\n                <div class=\"header-avatar\">\n                  @if (authService.user()!.picture) {\n                    <img [src]=\"authService.user()!.picture\" alt=\"Profile\">\n                  } @else {\n                    <span>{{ authService.getInitials() }}</span>\n                  }\n                </div>\n              </button>\n            } @else {\n              <button mat-flat-button color=\"primary\" class=\"header-signin\" (click)=\"authService.signIn()\">\n                <mat-icon>login</mat-icon>\n                {{ 'auth.signIn' | translate }}\n              </button>\n            }\n          </div>\n        </header>\n\n        <!-- User Menu (shared) -->\n        <mat-menu #userMenu=\"matMenu\" xPosition=\"before\">\n          <div class=\"user-menu-header\" (click)=\"$event.stopPropagation()\">\n            <div class=\"user-menu-avatar\">\n              @if (authService.user()?.picture) {\n                <img [src]=\"authService.user()!.picture\" alt=\"Profile\">\n              } @else {\n                <span>{{ authService.getInitials() }}</span>\n              }\n            </div>\n            <div class=\"user-menu-info\">\n              @if (editingName()) {\n                <input class=\"name-input\" \n                       type=\"text\" \n                       [value]=\"authService.user()?.given_name || ''\"\n                       (keydown.enter)=\"saveName($event)\"\n                       (keydown.escape)=\"cancelNameEdit()\"\n                       (blur)=\"saveName($event)\"\n                       #nameInput\n                       autofocus>\n              } @else {\n                <span class=\"name\">{{ authService.user()?.given_name || authService.user()?.name }}</span>\n              }\n              <span class=\"email\">{{ authService.user()?.email }}</span>\n            </div>\n            <button mat-icon-button class=\"edit-name-btn\" (click)=\"toggleNameEdit($event)\">\n              <mat-icon>{{ editingName() ? 'check' : 'edit' }}</mat-icon>\n            </button>\n          </div>\n          <mat-divider></mat-divider>\n          <button mat-menu-item disabled>\n            <mat-icon>cloud</mat-icon>\n            <span>{{ 'auth.connectDrive' | translate }}</span>\n          </button>\n          <mat-divider></mat-divider>\n          <button mat-menu-item (click)=\"authService.signOut()\">\n            <mat-icon>logout</mat-icon>\n            <span>{{ 'auth.signOut' | translate }}</span>\n          </button>\n        </mat-menu>\n\n        <!-- Page Content -->\n        <main class=\"main-content\">\n          <router-outlet />\n        </main>\n        \n        <!-- Footer -->\n        <footer class=\"app-footer\">\n          <div class=\"footer-links\">\n            <a href=\"https://genkit.dev\" target=\"_blank\" rel=\"noopener\">About Genkit</a>\n            <span class=\"separator\">·</span>\n            <a href=\"https://policies.google.com/privacy\" target=\"_blank\" rel=\"noopener\">Privacy</a>\n            <span class=\"separator\">·</span>\n            <a href=\"https://policies.google.com/terms\" target=\"_blank\" rel=\"noopener\">Terms</a>\n            <span class=\"separator\">·</span>\n            <a href=\"https://github.com/firebase/genkit\" target=\"_blank\" rel=\"noopener\">GitHub</a>\n          </div>\n          <div class=\"copyright\">\n            © {{ currentYear }} Google LLC. Licensed under Apache 2.0.\n          </div>\n        </footer>\n      </mat-sidenav-content>\n    </mat-sidenav-container>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .app-container {\n      height: 100vh;\n    }\n\n    /* Sidenav */\n    mat-sidenav {\n      width: 280px;\n      border-right: none !important;\n      background: var(--sidebar-bg) !important;\n      transition: width 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n      overflow-x: hidden;\n      \n      &.collapsed {\n        width: 72px;\n        \n        .sidenav-header {\n          justify-content: center;\n        }\n        \n        .new-chat-btn {\n          width: 48px;\n          min-width: 48px;\n          padding: 0 !important;\n          justify-content: center;\n          \n          mat-icon {\n            margin: 0;\n          }\n        }\n        \n        .mat-mdc-nav-list {\n          padding: 4px;\n        }\n        \n        .mat-mdc-list-item {\n          padding: 0 !important;\n          justify-content: center;\n          min-height: 48px;\n          width: 48px;\n          margin: 2px auto;\n          border-radius: 50% !important;\n          \n          .mdc-list-item__content {\n            justify-content: center;\n            padding: 0;\n          }\n          \n          mat-icon {\n            margin: 0 !important;\n          }\n        }\n      }\n    }\n    \n    mat-sidenav-content {\n      display: flex;\n      flex-direction: column;\n      height: 100vh;\n      transition: margin-left 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n      background: #ffffff;\n      \n      &.sidebar-collapsed {\n        margin-left: 72px !important;\n      }\n    }\n\n    .sidenav-content {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      padding: 12px;\n      background: var(--surface-dim);\n    }\n\n    .sidenav-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px;\n      margin-bottom: 12px;\n    }\n\n    .menu-btn {\n      flex-shrink: 0;\n      \n      &:hover {\n        background: transparent !important;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    .logo-link {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      text-decoration: none;\n    }\n\n    .logo-img {\n      height: 36px;\n      width: auto;\n      opacity: 0.7;\n      \n      &.dark {\n        /* filter: invert(1); removed */\n      }\n      \n      &.small {\n        height: 24px;\n      }\n    }\n\n    .app-name {\n      font-size: 16px;\n      font-weight: 500;\n      color: var(--on-surface);\n      letter-spacing: -0.3px;\n    }\n\n    .new-chat-btn {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      gap: 12px;\n      width: 100%;\n      padding: 10px 16px;\n      margin-bottom: 8px;\n      border-radius: var(--radius-full) !important;\n      border-color: var(--surface-variant) !important;\n      font-weight: 500;\n      \n      mat-icon {\n        margin: 0;\n      }\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n    }\n\n    .main-nav,\n    .footer-nav {\n      mat-nav-list,\n      .mat-mdc-nav-list {\n        padding: 0 !important;\n      }\n      \n      a[mat-list-item], \n      button[mat-list-item] {\n        border-radius: var(--radius-full) !important;\n        margin: 2px 0;\n        height: 40px !important;\n        border: none !important;\n        background: transparent !important;\n        \n        // Proper icon/label alignment\n        .mdc-list-item__content {\n          display: flex !important;\n          align-items: center !important;\n        }\n        \n        mat-icon {\n          margin-right: 16px !important;\n          color: var(--on-surface-variant);\n          flex-shrink: 0;\n        }\n        \n        span[matListItemTitle] {\n          font-size: 14px;\n          font-weight: 400;\n        }\n        \n        &:hover {\n          background: var(--surface-container) !important;\n        }\n        \n        &.active {\n          background: var(--user-bubble-bg) !important;\n          color: var(--gemini-blue-dark) !important;\n          \n          mat-icon {\n            color: var(--gemini-blue-dark) !important;\n          }\n        }\n        \n        &.demo-active {\n          mat-icon {\n            color: #34a853 !important;\n          }\n        }\n      }\n    }\n\n    .spacer {\n      flex: 1;\n    }\n\n    /* User Item in Sidebar */\n    .user-item,\n    .sign-in-item {\n      height: auto !important;\n      padding: 8px 16px !important;\n    }\n\n    .user-avatar {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      .avatar-initials {\n        color: white;\n        font-size: 12px;\n        font-weight: 500;\n      }\n    }\n\n    .user-info {\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    .user-name {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--on-surface);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .user-email {\n      font-size: 12px;\n      color: var(--on-surface-variant);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    /* Top Bar */\n    .top-bar {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: 56px;\n      padding: 0 12px;\n      border-bottom: 1px solid var(--surface-variant);\n      background: var(--surface);\n    }\n\n    .top-bar-left,\n    .top-bar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      min-width: 120px;\n    }\n\n    .top-bar-right {\n      justify-content: flex-end;\n    }\n\n    .mobile-logo {\n      display: flex;\n      align-items: center;\n    }\n\n    .top-bar-center {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .app-title {\n      font-size: 16px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .version-badge {\n      font-size: 10px;\n      font-weight: 500;\n      text-transform: uppercase;\n      padding: 2px 6px;\n      background: var(--surface-container);\n      color: var(--on-surface-variant);\n      border-radius: 4px;\n      letter-spacing: 0.5px;\n    }\n\n    .header-avatar {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      span {\n        color: white;\n        font-size: 12px;\n        font-weight: 500;\n      }\n    }\n\n    .header-signin {\n      border-radius: var(--radius-full) !important;\n      font-size: 14px;\n      padding: 0 16px !important;\n      height: 36px;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 6px;\n      }\n    }\n\n    .profile-btn {\n      margin-left: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 0 !important;\n      width: 40px;\n      height: 40px;\n    }\n\n    /* User Menu */\n    .user-menu-header {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n    }\n\n    .user-menu-avatar {\n      width: 48px;\n      height: 48px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      span {\n        color: white;\n        font-size: 18px;\n        font-weight: 500;\n      }\n    }\n\n    .user-menu-info {\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      flex: 1;\n      \n      .name {\n        font-size: 15px;\n        font-weight: 500;\n        color: var(--on-surface);\n      }\n      \n      .name-input {\n        font-size: 15px;\n        font-weight: 500;\n        color: var(--on-surface);\n        border: none;\n        border-bottom: 2px solid var(--gemini-blue);\n        background: transparent;\n        padding: 2px 0;\n        outline: none;\n        width: 100%;\n      }\n      \n      .email {\n        font-size: 13px;\n        color: var(--on-surface-variant);\n      }\n    }\n    \n    .edit-name-btn {\n      width: 32px;\n      height: 32px;\n      flex-shrink: 0;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n\n    /* Main Content */\n    .main-content {\n      flex: 1;\n      overflow: hidden;\n      background: var(--surface-dim);\n    }\n\n    /* Footer */\n    .app-footer {\n      flex-shrink: 0;\n      padding: 12px 24px;\n      text-align: center;\n      border-top: 1px solid var(--outline-variant);\n      background: var(--surface-dim);\n    }\n\n    .footer-links {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      gap: 8px;\n      margin-bottom: 6px;\n      flex-wrap: wrap;\n      \n      a {\n        color: var(--on-surface-muted);\n        text-decoration: none;\n        font-size: 12px;\n        \n        &:hover {\n          color: var(--gemini-blue);\n          text-decoration: underline;\n        }\n      }\n      \n      .separator {\n        color: var(--on-surface-muted);\n        opacity: 0.5;\n      }\n    }\n\n    .copyright {\n      font-size: 11px;\n      color: var(--on-surface-muted);\n      opacity: 0.7;\n    }\n\n    /* Responsive */\n    /* Responsive Breakpoints */\n    \n    /* Language Menu Styles */\n    ::ng-deep .language-menu {\n      min-width: 320px !important;\n      max-width: 400px;\n    }\n    \n    .lang-filter-container {\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      gap: 8px;\n      \n      .filter-icon {\n        color: var(--on-surface-muted);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      .lang-filter-input {\n        flex: 1;\n        border: none;\n        background: transparent;\n        font-size: 14px;\n        color: var(--on-surface);\n        outline: none;\n        padding: 4px 0;\n        \n        &::placeholder {\n          color: var(--on-surface-muted);\n        }\n      }\n      \n      .clear-filter-btn {\n        width: 24px !important;\n        height: 24px !important;\n        padding: 0 !important;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n    \n    .lang-list-container {\n      max-height: 350px;\n      overflow-y: auto;\n    }\n    \n    ::ng-deep .lang-menu-item {\n      display: flex !important;\n      align-items: center;\n      gap: 16px;\n      min-height: 48px;\n      padding: 8px 16px !important;\n      \n      .lang-flag {\n        font-size: 20px;\n        flex-shrink: 0;\n        width: 24px;\n        text-align: center;\n        margin-right: 8px;\n      }\n      \n      .lang-native-name {\n        flex: 1;\n        font-weight: 500;\n        white-space: nowrap;\n      }\n      \n      .lang-english-name {\n        color: var(--on-surface-muted);\n        font-size: 13px;\n        margin-left: auto;\n        text-align: right;\n        padding-left: 16px;\n      }\n      \n      .check-icon {\n        color: var(--gemini-blue);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n        margin-right: 8px;\n        visibility: hidden;\n        \n        &.visible {\n          visibility: visible;\n        }\n      }\n    }\n    \n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--on-surface-muted);\n      font-size: 14px;\n    }\n\n    /* Mobile (< 480px) */\n    @media (max-width: 479px) {\n      mat-sidenav {\n        width: 85vw; /* Almost full width */\n        max-width: 320px;\n        position: fixed;\n        z-index: 1000;\n        height: 100%;\n      }\n      \n      mat-sidenav.collapsed {\n        transform: translateX(-100%);\n        width: 85vw;\n      }\n      \n      mat-sidenav-content.sidebar-collapsed {\n        margin-left: 0 !important;\n      }\n    }\n\n    /* Tablet (480px - 768px) */\n    @media (min-width: 480px) and (max-width: 768px) {\n      mat-sidenav {\n        width: 100%;\n        max-width: 280px;\n      }\n    }\n\n    /* Laptop (768px - 1024px) */\n    @media (min-width: 769px) and (max-width: 1024px) {\n      mat-sidenav {\n        width: 260px;\n      }\n    }\n\n    /* Desktop (> 1024px) */\n    @media (min-width: 1025px) {\n      /* Standard layout */\n    }\n  `],\n})\nexport class AppComponent implements OnInit {\n  themeService = inject(ThemeService);\n  authService = inject(AuthService);\n  languageService = inject(LanguageService);\n  private chatService = inject(ChatService);\n  sidenavOpened = signal(true);\n  editingName = signal(false);\n  currentYear = new Date().getFullYear();\n\n  ngOnInit(): void {\n    this.authService.restoreSession();\n  }\n\n  toggleSidenav(): void {\n    this.sidenavOpened.update(v => !v);\n  }\n\n  toggleNameEdit(event: Event): void {\n    event.stopPropagation();\n    if (this.editingName()) {\n      // Save was clicked, no-op (handled by blur/enter)\n    }\n    this.editingName.update(v => !v);\n  }\n\n  saveName(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    const newName = input.value.trim();\n    if (newName) {\n      this.authService.updateName(newName);\n    }\n    this.editingName.set(false);\n  }\n\n  cancelNameEdit(): void {\n    this.editingName.set(false);\n  }\n\n  startNewChat(): void {\n    this.chatService.clearHistory();\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .app-container {\n      height: 100vh;\n    }\n\n    /* Sidenav */\n    mat-sidenav {\n      width: 280px;\n      border-right: none !important;\n      background: var(--sidebar-bg) !important;\n      transition: width 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n      overflow-x: hidden;\n      \n      &.collapsed {\n        width: 72px;\n        \n        .sidenav-header {\n          justify-content: center;\n        }\n        \n        .new-chat-btn {\n          width: 48px;\n          min-width: 48px;\n          padding: 0 !important;\n          justify-content: center;\n          \n          mat-icon {\n            margin: 0;\n          }\n        }\n        \n        .mat-mdc-nav-list {\n          padding: 4px;\n        }\n        \n        .mat-mdc-list-item {\n          padding: 0 !important;\n          justify-content: center;\n          min-height: 48px;\n          width: 48px;\n          margin: 2px auto;\n          border-radius: 50% !important;\n          \n          .mdc-list-item__content {\n            justify-content: center;\n            padding: 0;\n          }\n          \n          mat-icon {\n            margin: 0 !important;\n          }\n        }\n      }\n    }\n    \n    mat-sidenav-content {\n      display: flex;\n      flex-direction: column;\n      height: 100vh;\n      transition: margin-left 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n      background: #ffffff;\n      \n      &.sidebar-collapsed {\n        margin-left: 72px !important;\n      }\n    }\n\n    .sidenav-content {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      padding: 12px;\n      background: var(--surface-dim);\n    }\n\n    .sidenav-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px;\n      margin-bottom: 12px;\n    }\n\n    .menu-btn {\n      flex-shrink: 0;\n      \n      &:hover {\n        background: transparent !important;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    .logo-link {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      text-decoration: none;\n    }\n\n    .logo-img {\n      height: 36px;\n      width: auto;\n      opacity: 0.7;\n      \n      &.dark {\n        /* filter: invert(1); removed */\n      }\n      \n      &.small {\n        height: 24px;\n      }\n    }\n\n    .app-name {\n      font-size: 16px;\n      font-weight: 500;\n      color: var(--on-surface);\n      letter-spacing: -0.3px;\n    }\n\n    .new-chat-btn {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      gap: 12px;\n      width: 100%;\n      padding: 10px 16px;\n      margin-bottom: 8px;\n      border-radius: var(--radius-full) !important;\n      border-color: var(--surface-variant) !important;\n      font-weight: 500;\n      \n      mat-icon {\n        margin: 0;\n      }\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n    }\n\n    .main-nav,\n    .footer-nav {\n      mat-nav-list,\n      .mat-mdc-nav-list {\n        padding: 0 !important;\n      }\n      \n      a[mat-list-item], \n      button[mat-list-item] {\n        border-radius: var(--radius-full) !important;\n        margin: 2px 0;\n        height: 40px !important;\n        border: none !important;\n        background: transparent !important;\n        \n        // Proper icon/label alignment\n        .mdc-list-item__content {\n          display: flex !important;\n          align-items: center !important;\n        }\n        \n        mat-icon {\n          margin-right: 16px !important;\n          color: var(--on-surface-variant);\n          flex-shrink: 0;\n        }\n        \n        span[matListItemTitle] {\n          font-size: 14px;\n          font-weight: 400;\n        }\n        \n        &:hover {\n          background: var(--surface-container) !important;\n        }\n        \n        &.active {\n          background: var(--user-bubble-bg) !important;\n          color: var(--gemini-blue-dark) !important;\n          \n          mat-icon {\n            color: var(--gemini-blue-dark) !important;\n          }\n        }\n        \n        &.demo-active {\n          mat-icon {\n            color: #34a853 !important;\n          }\n        }\n      }\n    }\n\n    .spacer {\n      flex: 1;\n    }\n\n    /* User Item in Sidebar */\n    .user-item,\n    .sign-in-item {\n      height: auto !important;\n      padding: 8px 16px !important;\n    }\n\n    .user-avatar {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      .avatar-initials {\n        color: white;\n        font-size: 12px;\n        font-weight: 500;\n      }\n    }\n\n    .user-info {\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    .user-name {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--on-surface);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .user-email {\n      font-size: 12px;\n      color: var(--on-surface-variant);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    /* Top Bar */\n    .top-bar {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: 56px;\n      padding: 0 12px;\n      border-bottom: 1px solid var(--surface-variant);\n      background: var(--surface);\n    }\n\n    .top-bar-left,\n    .top-bar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      min-width: 120px;\n    }\n\n    .top-bar-right {\n      justify-content: flex-end;\n    }\n\n    .mobile-logo {\n      display: flex;\n      align-items: center;\n    }\n\n    .top-bar-center {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .app-title {\n      font-size: 16px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .version-badge {\n      font-size: 10px;\n      font-weight: 500;\n      text-transform: uppercase;\n      padding: 2px 6px;\n      background: var(--surface-container);\n      color: var(--on-surface-variant);\n      border-radius: 4px;\n      letter-spacing: 0.5px;\n    }\n\n    .header-avatar {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      span {\n        color: white;\n        font-size: 12px;\n        font-weight: 500;\n      }\n    }\n\n    .header-signin {\n      border-radius: var(--radius-full) !important;\n      font-size: 14px;\n      padding: 0 16px !important;\n      height: 36px;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 6px;\n      }\n    }\n\n    .profile-btn {\n      margin-left: 4px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 0 !important;\n      width: 40px;\n      height: 40px;\n    }\n\n    /* User Menu */\n    .user-menu-header {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n    }\n\n    .user-menu-avatar {\n      width: 48px;\n      height: 48px;\n      border-radius: 50%;\n      overflow: hidden;\n      background: var(--gemini-blue);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n      \n      img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      span {\n        color: white;\n        font-size: 18px;\n        font-weight: 500;\n      }\n    }\n\n    .user-menu-info {\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      flex: 1;\n      \n      .name {\n        font-size: 15px;\n        font-weight: 500;\n        color: var(--on-surface);\n      }\n      \n      .name-input {\n        font-size: 15px;\n        font-weight: 500;\n        color: var(--on-surface);\n        border: none;\n        border-bottom: 2px solid var(--gemini-blue);\n        background: transparent;\n        padding: 2px 0;\n        outline: none;\n        width: 100%;\n      }\n      \n      .email {\n        font-size: 13px;\n        color: var(--on-surface-variant);\n      }\n    }\n    \n    .edit-name-btn {\n      width: 32px;\n      height: 32px;\n      flex-shrink: 0;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n\n    /* Main Content */\n    .main-content {\n      flex: 1;\n      overflow: hidden;\n      background: var(--surface-dim);\n    }\n\n    /* Footer */\n    .app-footer {\n      flex-shrink: 0;\n      padding: 12px 24px;\n      text-align: center;\n      border-top: 1px solid var(--outline-variant);\n      background: var(--surface-dim);\n    }\n\n    .footer-links {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      gap: 8px;\n      margin-bottom: 6px;\n      flex-wrap: wrap;\n      \n      a {\n        color: var(--on-surface-muted);\n        text-decoration: none;\n        font-size: 12px;\n        \n        &:hover {\n          color: var(--gemini-blue);\n          text-decoration: underline;\n        }\n      }\n      \n      .separator {\n        color: var(--on-surface-muted);\n        opacity: 0.5;\n      }\n    }\n\n    .copyright {\n      font-size: 11px;\n      color: var(--on-surface-muted);\n      opacity: 0.7;\n    }\n\n    /* Responsive */\n    /* Responsive Breakpoints */\n    \n    /* Language Menu Styles */\n    ::ng-deep .language-menu {\n      min-width: 320px !important;\n      max-width: 400px;\n    }\n    \n    .lang-filter-container {\n      display: flex;\n      align-items: center;\n      padding: 8px 16px;\n      gap: 8px;\n      \n      .filter-icon {\n        color: var(--on-surface-muted);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      .lang-filter-input {\n        flex: 1;\n        border: none;\n        background: transparent;\n        font-size: 14px;\n        color: var(--on-surface);\n        outline: none;\n        padding: 4px 0;\n        \n        &::placeholder {\n          color: var(--on-surface-muted);\n        }\n      }\n      \n      .clear-filter-btn {\n        width: 24px !important;\n        height: 24px !important;\n        padding: 0 !important;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n    \n    .lang-list-container {\n      max-height: 350px;\n      overflow-y: auto;\n    }\n    \n    ::ng-deep .lang-menu-item {\n      display: flex !important;\n      align-items: center;\n      gap: 16px;\n      min-height: 48px;\n      padding: 8px 16px !important;\n      \n      .lang-flag {\n        font-size: 20px;\n        flex-shrink: 0;\n        width: 24px;\n        text-align: center;\n        margin-right: 8px;\n      }\n      \n      .lang-native-name {\n        flex: 1;\n        font-weight: 500;\n        white-space: nowrap;\n      }\n      \n      .lang-english-name {\n        color: var(--on-surface-muted);\n        font-size: 13px;\n        margin-left: auto;\n        text-align: right;\n        padding-left: 16px;\n      }\n      \n      .check-icon {\n        color: var(--gemini-blue);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n        margin-right: 8px;\n        visibility: hidden;\n        \n        &.visible {\n          visibility: visible;\n        }\n      }\n    }\n    \n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--on-surface-muted);\n      font-size: 14px;\n    }\n\n    /* Mobile (< 480px) */\n    @media (max-width: 479px) {\n      mat-sidenav {\n        width: 85vw; /* Almost full width */\n        max-width: 320px;\n        position: fixed;\n        z-index: 1000;\n        height: 100%;\n      }\n      \n      mat-sidenav.collapsed {\n        transform: translateX(-100%);\n        width: 85vw;\n      }\n      \n      mat-sidenav-content.sidebar-collapsed {\n        margin-left: 0 !important;\n      }\n    }\n\n    /* Tablet (480px - 768px) */\n    @media (min-width: 480px) and (max-width: 768px) {\n      mat-sidenav {\n        width: 100%;\n        max-width: 280px;\n      }\n    }\n\n    /* Laptop (768px - 1024px) */\n    @media (min-width: 769px) and (max-width: 1024px) {\n      mat-sidenav {\n        width: 260px;\n      }\n    }\n\n    /* Desktop (> 1024px) */\n    @media (min-width: 1025px) {\n      /* Standard layout */\n    }\n  \n",
            "extends": [],
            "implements": [
                "OnInit"
            ]
        },
        {
            "name": "ButtonComponent",
            "id": "component-ButtonComponent-d7bf0323e6da130e2609e2af0117b4a8d7cd874132206af50bf43dfc37044485fe50f2867ea76525730dd195b9b95a43802a12dadc6ad5cd7bf2faa07f19f0da",
            "file": "src/stories/button.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-button",
            "styleUrls": [
                "./button.css"
            ],
            "styles": [],
            "template": " <button  type=\"button\"\n  (click)=\"onClick.emit($event)\"\n  [ngClass]=\"classes\"\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\n>\n  {{ label }}\n</button>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "backgroundColor",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nWhat background color to use",
                    "description": "<p>What background color to use</p>\n",
                    "line": 25,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "label",
                    "defaultValue": "'Button'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "pos": 760,
                            "end": 773,
                            "kind": 328,
                            "id": 0,
                            "flags": 16842752,
                            "modifierFlagsCache": 0,
                            "transformFlags": 0,
                            "tagName": {
                                "pos": 761,
                                "end": 769,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "required"
                            },
                            "comment": ""
                        }
                    ],
                    "rawdescription": "\n\nButton contents\n\n",
                    "description": "<p>Button contents</p>\n",
                    "line": 37,
                    "type": "string",
                    "decorators": []
                },
                {
                    "name": "primary",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nIs this the principal call to action on the page?",
                    "description": "<p>Is this the principal call to action on the page?</p>\n",
                    "line": 21,
                    "type": "boolean",
                    "decorators": []
                },
                {
                    "name": "size",
                    "defaultValue": "'medium'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nHow large should the button be?",
                    "description": "<p>How large should the button be?</p>\n",
                    "line": 29,
                    "type": "\"small\" | \"medium\" | \"large\"",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onClick",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nOptional click handler",
                    "description": "<p>Optional click handler</p>\n",
                    "line": 41,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { CommonModule } from '@angular/common';\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'storybook-button',\n  standalone: true,\n  imports: [CommonModule],\n  template: ` <button\n  type=\"button\"\n  (click)=\"onClick.emit($event)\"\n  [ngClass]=\"classes\"\n  [ngStyle]=\"{ 'background-color': backgroundColor }\"\n>\n  {{ label }}\n</button>`,\n  styleUrls: ['./button.css'],\n})\nexport class ButtonComponent {\n  /** Is this the principal call to action on the page? */\n  @Input()\n  primary = false;\n\n  /** What background color to use */\n  @Input()\n  backgroundColor?: string;\n\n  /** How large should the button be? */\n  @Input()\n  size: 'small' | 'medium' | 'large' = 'medium';\n\n  /**\n   * Button contents\n   *\n   * @required\n   */\n  @Input()\n  label = 'Button';\n\n  /** Optional click handler */\n  @Output()\n  onClick = new EventEmitter<Event>();\n\n  public get classes(): string[] {\n    const mode = this.primary ? 'storybook-button--primary' : 'storybook-button--secondary';\n\n    return ['storybook-button', `storybook-button--${this.size}`, mode];\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-button {\n  display: inline-block;\n  cursor: pointer;\n  border: 0;\n  border-radius: 3em;\n  font-weight: 700;\n  line-height: 1;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n.storybook-button--primary {\n  background-color: #555ab9;\n  color: white;\n}\n.storybook-button--secondary {\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;\n  background-color: transparent;\n  color: #333;\n}\n.storybook-button--small {\n  padding: 10px 16px;\n  font-size: 12px;\n}\n.storybook-button--medium {\n  padding: 11px 20px;\n  font-size: 14px;\n}\n.storybook-button--large {\n  padding: 12px 24px;\n  font-size: 16px;\n}\n",
                    "styleUrl": "./button.css"
                }
            ],
            "stylesData": "",
            "extends": [],
            "accessors": {
                "classes": {
                    "name": "classes",
                    "getSignature": {
                        "name": "classes",
                        "type": "[]",
                        "returnType": "string[]",
                        "line": 43
                    }
                }
            }
        },
        {
            "name": "ChatBoxComponent",
            "id": "component-ChatBoxComponent-b37707bb8cc8b0899caaaae7660bc79e3d5f0c93a3227f551003c14679aa3fd063c3593e4576a2fb78bf2f25c2e5dcc503af9b7ca6fc8acd242e699efc7b1181",
            "file": "src/app/features/chat/components/chat-box/chat-box.component.ts",
            "changeDetection": "ChangeDetectionStrategy.OnPush",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-chat-box",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      \n      --_surface: var(--surface, #fafafa);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .chat-box {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      background: var(--_surface);\n    }\n\n    .messages-area {\n      flex: 1;\n      overflow-y: auto;\n      padding: 16px;\n    }\n\n    .input-area {\n      flex-shrink: 0;\n      padding: 16px;\n      border-top: 1px solid var(--_outline-variant);\n      background: var(--_surface-container);\n    }\n\n    /* Loading state styling */\n    .chat-box.loading {\n      .input-area {\n        opacity: 0.7;\n        pointer-events: none;\n      }\n    }\n  "
            ],
            "template": "<div class=\"chat-box\" [class.loading]=\"isLoading()\">\n  <!-- Messages Area -->\n  <div class=\"messages-area\">\n    @if (messages().length === 0 && !isLoading()) {\n      <app-welcome-screen\n        [greetings]=\"greetings()\"\n        [quickActions]=\"quickActions()\"\n        [logoUrl]=\"logoUrl()\"\n        (actionSelected)=\"onQuickAction($event)\" />\n    } @else {\n      <app-message-list\n        [messages]=\"messages()\"\n        [isLoading]=\"isLoading()\"\n        [error]=\"error()\"\n        [markdownMode]=\"effectiveMarkdownEnabled()\"\n        [avatarUrl]=\"avatarUrl()\"\n        (copy)=\"copyMessage.emit($event)\"\n        (speak)=\"onSpeak($event)\"\n        (retry)=\"retryMessage.emit()\"\n        (thumbUp)=\"thumbUp.emit($event)\"\n        (thumbDown)=\"thumbDown.emit($event)\" />\n    }\n  </div>\n\n  <!-- Input Area -->\n  <div class=\"input-area\">\n    <app-chat-input\n      [disabled]=\"disabled() || isLoading()\"\n      [placeholder]=\"placeholder()\"\n      [streamingEnabled]=\"effectiveStreamingEnabled()\"\n      [markdownEnabled]=\"effectiveMarkdownEnabled()\"\n      [safetyEnabled]=\"effectiveSafetyEnabled()\"\n      [isRecording]=\"effectiveIsRecording()\"\n      [voiceSupported]=\"effectiveVoiceSupported()\"\n      [contentFlagged]=\"contentFlagged()\"\n      [flaggedLabels]=\"flaggedLabels()\"\n      [injectedText]=\"injectedText()\"\n      (send)=\"onSend($event)\"\n      (inputChange)=\"inputChange.emit($event)\"\n      (toggleVoice)=\"onToggleVoice()\"\n      (toggleStreaming)=\"onToggleStreaming()\"\n      (toggleMarkdown)=\"onToggleMarkdown()\"\n      (toggleSafety)=\"onToggleSafety()\"\n      (filesSelected)=\"filesSelected.emit($event)\">\n\n      <!-- Model Selector Slot -->\n      @if (showModelSelector() && providers().length > 0) {\n        <app-model-selector modelSelector\n          [selectedModel]=\"selectedModel()?.id ?? ''\"\n          [providers]=\"providers()\"\n          [recentModels]=\"recentModels()\"\n          (modelSelected)=\"onModelSelected($event)\" />\n      }\n    </app-chat-input>\n  </div>\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "avatarUrl",
                    "defaultValue": "'genkit-logo.png'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Avatar URL for assistant messages</p>\n",
                    "line": 251,
                    "rawdescription": "\nAvatar URL for assistant messages",
                    "required": false
                },
                {
                    "name": "contentFlagged",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether current input content is flagged</p>\n",
                    "line": 312,
                    "rawdescription": "\nWhether current input content is flagged",
                    "required": false
                },
                {
                    "name": "disabled",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the input is disabled</p>\n",
                    "line": 271,
                    "rawdescription": "\nWhether the input is disabled",
                    "required": false
                },
                {
                    "name": "error",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Error message to display</p>\n",
                    "line": 248,
                    "rawdescription": "\nError message to display",
                    "required": false
                },
                {
                    "name": "flaggedLabels",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Labels of flagged content</p>\n",
                    "line": 315,
                    "rawdescription": "\nLabels of flagged content",
                    "required": false
                },
                {
                    "name": "greetings",
                    "defaultValue": "DEFAULT_GREETINGS",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Greeting[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Greetings to display on welcome screen</p>\n",
                    "line": 258,
                    "rawdescription": "\nGreetings to display on welcome screen",
                    "required": false
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the assistant is generating a response</p>\n",
                    "line": 245,
                    "rawdescription": "\nWhether the assistant is generating a response",
                    "required": false
                },
                {
                    "name": "isRecording",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether voice is currently recording (external mode)</p>\n",
                    "line": 302,
                    "rawdescription": "\nWhether voice is currently recording (external mode)",
                    "required": false
                },
                {
                    "name": "logoUrl",
                    "defaultValue": "'genkit-logo.png'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Logo URL for welcome screen</p>\n",
                    "line": 264,
                    "rawdescription": "\nLogo URL for welcome screen",
                    "required": false
                },
                {
                    "name": "markdownEnabled",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether markdown rendering is enabled</p>\n",
                    "line": 280,
                    "rawdescription": "\nWhether markdown rendering is enabled",
                    "required": false
                },
                {
                    "name": "messages",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Message[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>List of chat messages to display</p>\n",
                    "line": 242,
                    "rawdescription": "\nList of chat messages to display",
                    "required": false
                },
                {
                    "name": "placeholder",
                    "defaultValue": "'Type a message...'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Placeholder text for the input</p>\n",
                    "line": 274,
                    "rawdescription": "\nPlaceholder text for the input",
                    "required": false
                },
                {
                    "name": "providers",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Provider[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Available model providers</p>\n",
                    "line": 328,
                    "rawdescription": "\nAvailable model providers",
                    "required": false
                },
                {
                    "name": "quickActions",
                    "defaultValue": "DEFAULT_QUICK_ACTIONS",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "QuickAction[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Quick action buttons on welcome screen</p>\n",
                    "line": 261,
                    "rawdescription": "\nQuick action buttons on welcome screen",
                    "required": false
                },
                {
                    "name": "recentModels",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Model[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Recently used models</p>\n",
                    "line": 331,
                    "rawdescription": "\nRecently used models",
                    "required": false
                },
                {
                    "name": "safetyEnabled",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether content safety checking is enabled</p>\n",
                    "line": 283,
                    "rawdescription": "\nWhether content safety checking is enabled",
                    "required": false
                },
                {
                    "name": "selectedModel",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Model | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Currently selected model</p>\n",
                    "line": 325,
                    "rawdescription": "\nCurrently selected model",
                    "required": false
                },
                {
                    "name": "selfManagedVoice",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>When true, the component manages voice input internally using Web Speech API.\nWhen false (default), parent provides isRecording/voiceSupported and handles toggleVoice.</p>\n",
                    "line": 293,
                    "rawdescription": "\n\nWhen true, the component manages voice input internally using Web Speech API.\nWhen false (default), parent provides isRecording/voiceSupported and handles toggleVoice.\n",
                    "required": false
                },
                {
                    "name": "showModelSelector",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether to show the model selector</p>\n",
                    "line": 322,
                    "rawdescription": "\nWhether to show the model selector",
                    "required": false
                },
                {
                    "name": "speechLanguage",
                    "defaultValue": "'en-US'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Language for speech recognition (BCP-47 format, e.g., &#39;en-US&#39;).\nOnly used when selfManagedVoice is true.</p>\n",
                    "line": 299,
                    "rawdescription": "\n\nLanguage for speech recognition (BCP-47 format, e.g., 'en-US').\nOnly used when selfManagedVoice is true.\n",
                    "required": false
                },
                {
                    "name": "streamingEnabled",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether streaming is enabled</p>\n",
                    "line": 277,
                    "rawdescription": "\nWhether streaming is enabled",
                    "required": false
                },
                {
                    "name": "voiceSupported",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether voice input is supported (external mode)</p>\n",
                    "line": 305,
                    "rawdescription": "\nWhether voice input is supported (external mode)",
                    "required": false
                }
            ],
            "outputsClass": [
                {
                    "name": "copyMessage",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks copy on a message</p>\n",
                    "line": 356,
                    "rawdescription": "\nEmitted when user clicks copy on a message",
                    "required": false
                },
                {
                    "name": "filesSelected",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "File[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when files are selected</p>\n",
                    "line": 353,
                    "rawdescription": "\nEmitted when files are selected",
                    "required": false
                },
                {
                    "name": "inputChange",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when input text changes</p>\n",
                    "line": 341,
                    "rawdescription": "\nEmitted when input text changes",
                    "required": false
                },
                {
                    "name": "modelSelected",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Model",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user selects a model</p>\n",
                    "line": 344,
                    "rawdescription": "\nEmitted when user selects a model",
                    "required": false
                },
                {
                    "name": "retryMessage",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks retry after error</p>\n",
                    "line": 362,
                    "rawdescription": "\nEmitted when user clicks retry after error",
                    "required": false
                },
                {
                    "name": "send",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "SendEvent",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user sends a message</p>\n",
                    "line": 338,
                    "rawdescription": "\nEmitted when user sends a message",
                    "required": false
                },
                {
                    "name": "settingsChanged",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ChatSettings",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when settings change</p>\n",
                    "line": 347,
                    "rawdescription": "\nEmitted when settings change",
                    "required": false
                },
                {
                    "name": "speakMessage",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks speak on a message</p>\n",
                    "line": 359,
                    "rawdescription": "\nEmitted when user clicks speak on a message",
                    "required": false
                },
                {
                    "name": "thumbDown",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Message",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user gives thumbs down</p>\n",
                    "line": 368,
                    "rawdescription": "\nEmitted when user gives thumbs down",
                    "required": false
                },
                {
                    "name": "thumbUp",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Message",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user gives thumbs up</p>\n",
                    "line": 365,
                    "rawdescription": "\nEmitted when user gives thumbs up",
                    "required": false
                },
                {
                    "name": "toggleVoice",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when voice toggle is clicked (external voice mode only)</p>\n",
                    "line": 350,
                    "rawdescription": "\nEmitted when voice toggle is clicked (external voice mode only)",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "_internalIsRecording",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Internal voice state (for self-managed mode)</p>\n",
                    "line": 383,
                    "rawdescription": "\nInternal voice state (for self-managed mode)",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "_internalVoiceSupported",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 384,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "_markdownEnabled",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 379,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "_safetyEnabled",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 380,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "_streamingEnabled",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Internal settings state</p>\n",
                    "line": 378,
                    "rawdescription": "\nInternal settings state",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "effectiveIsRecording",
                    "defaultValue": "computed(() =>\n        this.selfManagedVoice() ? this._internalIsRecording() : this.isRecording()\n    )",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Effective values combining external and internal state</p>\n",
                    "line": 403,
                    "rawdescription": "\nEffective values combining external and internal state"
                },
                {
                    "name": "effectiveMarkdownEnabled",
                    "defaultValue": "computed(() => this._markdownEnabled())",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 412
                },
                {
                    "name": "effectiveSafetyEnabled",
                    "defaultValue": "computed(() => this._safetyEnabled())",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 413
                },
                {
                    "name": "effectiveStreamingEnabled",
                    "defaultValue": "computed(() => this._streamingEnabled())",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 411
                },
                {
                    "name": "effectiveVoiceSupported",
                    "defaultValue": "computed(() =>\n        this.selfManagedVoice() ? this._internalVoiceSupported() : this.voiceSupported()\n    )",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 407
                },
                {
                    "name": "injectedText",
                    "defaultValue": "signal<string | null>(null)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Signal for injected text from quick actions</p>\n",
                    "line": 375,
                    "rawdescription": "\nSignal for injected text from quick actions"
                },
                {
                    "name": "recognition",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Speech recognition instance (uses the global Window interface type)</p>\n",
                    "line": 387,
                    "rawdescription": "\nSpeech recognition instance (uses the global Window interface type)",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "synthesis",
                    "defaultValue": "typeof window !== 'undefined' ? window.speechSynthesis : null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Speech synthesis for speaking messages</p>\n",
                    "line": 400,
                    "rawdescription": "\nSpeech synthesis for speaking messages",
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methodsClass": [
                {
                    "name": "emitSettings",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 559,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "initVoice",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 442,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 431,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onModelSelected",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 506,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onQuickAction",
                    "args": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 496,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onSend",
                    "args": [
                        {
                            "name": "event",
                            "type": "SendEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 500,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "SendEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onSpeak",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 532,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nSpeak a message using Speech Synthesis API",
                    "description": "<p>Speak a message using Speech Synthesis API</p>\n",
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onToggleMarkdown",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 549,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onToggleSafety",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 554,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onToggleStreaming",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 544,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onToggleVoice",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 517,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "startRecording",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 477,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "stopRecording",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 485,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                },
                {
                    "name": "MessageListComponent",
                    "type": "component"
                },
                {
                    "name": "WelcomeScreenComponent",
                    "type": "component"
                },
                {
                    "name": "ChatInputComponent",
                    "type": "component"
                },
                {
                    "name": "ModelSelectorComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import {\n    Component, input, output, signal, computed, effect,\n    ChangeDetectionStrategy, OnDestroy\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TranslateModule } from '@ngx-translate/core';\n\n// Import sub-components\nimport { MessageListComponent, Message } from '../message-list/message-list.component';\nimport { WelcomeScreenComponent, Greeting, QuickAction } from '../welcome-screen/welcome-screen.component';\nimport { ChatInputComponent, SendEvent, AttachedFile } from '../chat-input/chat-input.component';\nimport { ModelSelectorComponent, Model, Provider } from '../model-selector/model-selector.component';\n\n/**\n * Chat settings that can be toggled by user.\n */\nexport interface ChatSettings {\n    streamingEnabled: boolean;\n    markdownEnabled: boolean;\n    safetyEnabled: boolean;\n}\n\n/**\n * Default greetings for the welcome screen.\n */\nexport const DEFAULT_GREETINGS: Greeting[] = [\n    { text: 'Hello', lang: 'en', dir: 'ltr', anim: 'type' },\n    { text: 'Bonjour', lang: 'fr', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'es', dir: 'ltr', anim: 'type' },\n    { text: 'こんにちは', lang: 'ja', dir: 'ltr', anim: 'slide' },\n    { text: 'नमस्ते', lang: 'hi', dir: 'ltr', anim: 'slide' },\n    { text: 'مرحبا', lang: 'ar', dir: 'rtl', anim: 'slide' },\n];\n\n/**\n * Default quick actions for the welcome screen.\n */\nexport const DEFAULT_QUICK_ACTIONS: QuickAction[] = [\n    { icon: 'lightbulb', labelKey: 'chat.actions.explain', prompt: 'Explain the concept of ', color: '#fbbc04' },\n    { icon: 'code', labelKey: 'chat.actions.code', prompt: 'Write code that ', color: '#34a853' },\n    { icon: 'edit', labelKey: 'chat.actions.write', prompt: 'Help me write ', color: '#4285f4' },\n    { icon: 'psychology', labelKey: 'chat.actions.brainstorm', prompt: 'Brainstorm ideas for ', color: '#ea4335' },\n];\n\n@Component({\n    selector: 'app-chat-box',\n    standalone: true,\n    imports: [\n        CommonModule,\n        TranslateModule,\n        MessageListComponent,\n        WelcomeScreenComponent,\n        ChatInputComponent,\n        ModelSelectorComponent,\n    ],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    template: `\n    <div class=\"chat-box\" [class.loading]=\"isLoading()\">\n      <!-- Messages Area -->\n      <div class=\"messages-area\">\n        @if (messages().length === 0 && !isLoading()) {\n          <app-welcome-screen\n            [greetings]=\"greetings()\"\n            [quickActions]=\"quickActions()\"\n            [logoUrl]=\"logoUrl()\"\n            (actionSelected)=\"onQuickAction($event)\" />\n        } @else {\n          <app-message-list\n            [messages]=\"messages()\"\n            [isLoading]=\"isLoading()\"\n            [error]=\"error()\"\n            [markdownMode]=\"effectiveMarkdownEnabled()\"\n            [avatarUrl]=\"avatarUrl()\"\n            (copy)=\"copyMessage.emit($event)\"\n            (speak)=\"onSpeak($event)\"\n            (retry)=\"retryMessage.emit()\"\n            (thumbUp)=\"thumbUp.emit($event)\"\n            (thumbDown)=\"thumbDown.emit($event)\" />\n        }\n      </div>\n      \n      <!-- Input Area -->\n      <div class=\"input-area\">\n        <app-chat-input\n          [disabled]=\"disabled() || isLoading()\"\n          [placeholder]=\"placeholder()\"\n          [streamingEnabled]=\"effectiveStreamingEnabled()\"\n          [markdownEnabled]=\"effectiveMarkdownEnabled()\"\n          [safetyEnabled]=\"effectiveSafetyEnabled()\"\n          [isRecording]=\"effectiveIsRecording()\"\n          [voiceSupported]=\"effectiveVoiceSupported()\"\n          [contentFlagged]=\"contentFlagged()\"\n          [flaggedLabels]=\"flaggedLabels()\"\n          [injectedText]=\"injectedText()\"\n          (send)=\"onSend($event)\"\n          (inputChange)=\"inputChange.emit($event)\"\n          (toggleVoice)=\"onToggleVoice()\"\n          (toggleStreaming)=\"onToggleStreaming()\"\n          (toggleMarkdown)=\"onToggleMarkdown()\"\n          (toggleSafety)=\"onToggleSafety()\"\n          (filesSelected)=\"filesSelected.emit($event)\">\n          \n          <!-- Model Selector Slot -->\n          @if (showModelSelector() && providers().length > 0) {\n            <app-model-selector modelSelector\n              [selectedModel]=\"selectedModel()?.id ?? ''\"\n              [providers]=\"providers()\"\n              [recentModels]=\"recentModels()\"\n              (modelSelected)=\"onModelSelected($event)\" />\n          }\n        </app-chat-input>\n      </div>\n    </div>\n  `,\n    styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      \n      --_surface: var(--surface, #fafafa);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .chat-box {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      background: var(--_surface);\n    }\n\n    .messages-area {\n      flex: 1;\n      overflow-y: auto;\n      padding: 16px;\n    }\n\n    .input-area {\n      flex-shrink: 0;\n      padding: 16px;\n      border-top: 1px solid var(--_outline-variant);\n      background: var(--_surface-container);\n    }\n\n    /* Loading state styling */\n    .chat-box.loading {\n      .input-area {\n        opacity: 0.7;\n        pointer-events: none;\n      }\n    }\n  `]\n})\nexport class ChatBoxComponent implements OnDestroy {\n    // =====================================================================\n    // Message Display Inputs\n    // =====================================================================\n\n    /** List of chat messages to display */\n    messages = input<Message[]>([]);\n\n    /** Whether the assistant is generating a response */\n    isLoading = input<boolean>(false);\n\n    /** Error message to display */\n    error = input<string | null>(null);\n\n    /** Avatar URL for assistant messages */\n    avatarUrl = input<string>('genkit-logo.png');\n\n    // =====================================================================\n    // Welcome Screen Inputs\n    // =====================================================================\n\n    /** Greetings to display on welcome screen */\n    greetings = input<Greeting[]>(DEFAULT_GREETINGS);\n\n    /** Quick action buttons on welcome screen */\n    quickActions = input<QuickAction[]>(DEFAULT_QUICK_ACTIONS);\n\n    /** Logo URL for welcome screen */\n    logoUrl = input<string>('genkit-logo.png');\n\n    // =====================================================================\n    // Input Configuration\n    // =====================================================================\n\n    /** Whether the input is disabled */\n    disabled = input<boolean>(false);\n\n    /** Placeholder text for the input */\n    placeholder = input<string>('Type a message...');\n\n    /** Whether streaming is enabled */\n    streamingEnabled = input<boolean>(true);\n\n    /** Whether markdown rendering is enabled */\n    markdownEnabled = input<boolean>(true);\n\n    /** Whether content safety checking is enabled */\n    safetyEnabled = input<boolean>(true);\n\n    // =====================================================================\n    // Voice Input Configuration\n    // =====================================================================\n\n    /**\n     * When true, the component manages voice input internally using Web Speech API.\n     * When false (default), parent provides isRecording/voiceSupported and handles toggleVoice.\n     */\n    selfManagedVoice = input<boolean>(false);\n\n    /** \n     * Language for speech recognition (BCP-47 format, e.g., 'en-US').\n     * Only used when selfManagedVoice is true.\n     */\n    speechLanguage = input<string>('en-US');\n\n    /** Whether voice is currently recording (external mode) */\n    isRecording = input<boolean>(false);\n\n    /** Whether voice input is supported (external mode) */\n    voiceSupported = input<boolean>(false);\n\n    // =====================================================================\n    // Content Safety\n    // =====================================================================\n\n    /** Whether current input content is flagged */\n    contentFlagged = input<boolean>(false);\n\n    /** Labels of flagged content */\n    flaggedLabels = input<string[]>([]);\n\n    // =====================================================================\n    // Model Selection\n    // =====================================================================\n\n    /** Whether to show the model selector */\n    showModelSelector = input<boolean>(true);\n\n    /** Currently selected model */\n    selectedModel = input<Model | null>(null);\n\n    /** Available model providers */\n    providers = input<Provider[]>([]);\n\n    /** Recently used models */\n    recentModels = input<Model[]>([]);\n\n    // =====================================================================\n    // Outputs\n    // =====================================================================\n\n    /** Emitted when user sends a message */\n    send = output<SendEvent>();\n\n    /** Emitted when input text changes */\n    inputChange = output<string>();\n\n    /** Emitted when user selects a model */\n    modelSelected = output<Model>();\n\n    /** Emitted when settings change */\n    settingsChanged = output<ChatSettings>();\n\n    /** Emitted when voice toggle is clicked (external voice mode only) */\n    toggleVoice = output<void>();\n\n    /** Emitted when files are selected */\n    filesSelected = output<File[]>();\n\n    /** Emitted when user clicks copy on a message */\n    copyMessage = output<string>();\n\n    /** Emitted when user clicks speak on a message */\n    speakMessage = output<string>();\n\n    /** Emitted when user clicks retry after error */\n    retryMessage = output<void>();\n\n    /** Emitted when user gives thumbs up */\n    thumbUp = output<Message>();\n\n    /** Emitted when user gives thumbs down */\n    thumbDown = output<Message>();\n\n    // =====================================================================\n    // Internal State\n    // =====================================================================\n\n    /** Signal for injected text from quick actions */\n    injectedText = signal<string | null>(null);\n\n    /** Internal settings state */\n    private _streamingEnabled = signal(true);\n    private _markdownEnabled = signal(true);\n    private _safetyEnabled = signal(true);\n\n    /** Internal voice state (for self-managed mode) */\n    private _internalIsRecording = signal(false);\n    private _internalVoiceSupported = signal(false);\n\n    /** Speech recognition instance (uses the global Window interface type) */\n    private recognition: {\n        continuous: boolean;\n        interimResults: boolean;\n        lang: string;\n        start(): void;\n        stop(): void;\n        abort(): void;\n        onresult: ((event: { results: SpeechRecognitionResultList; resultIndex: number }) => void) | null;\n        onerror: ((event: Event) => void) | null;\n        onend: (() => void) | null;\n    } | null = null;\n\n    /** Speech synthesis for speaking messages */\n    private synthesis = typeof window !== 'undefined' ? window.speechSynthesis : null;\n\n    /** Effective values combining external and internal state */\n    effectiveIsRecording = computed(() =>\n        this.selfManagedVoice() ? this._internalIsRecording() : this.isRecording()\n    );\n\n    effectiveVoiceSupported = computed(() =>\n        this.selfManagedVoice() ? this._internalVoiceSupported() : this.voiceSupported()\n    );\n\n    effectiveStreamingEnabled = computed(() => this._streamingEnabled());\n    effectiveMarkdownEnabled = computed(() => this._markdownEnabled());\n    effectiveSafetyEnabled = computed(() => this._safetyEnabled());\n\n    constructor() {\n        // Sync inputs to internal state\n        effect(() => {\n            this._streamingEnabled.set(this.streamingEnabled());\n            this._markdownEnabled.set(this.markdownEnabled());\n            this._safetyEnabled.set(this.safetyEnabled());\n        });\n\n        // Initialize voice if self-managed\n        effect(() => {\n            if (this.selfManagedVoice()) {\n                this.initVoice();\n            }\n        });\n    }\n\n    ngOnDestroy(): void {\n        this.stopRecording();\n        if (this.synthesis) {\n            this.synthesis.cancel();\n        }\n    }\n\n    // =====================================================================\n    // Voice Management (Self-Managed Mode)\n    // =====================================================================\n\n    private initVoice(): void {\n        if (typeof window === 'undefined') return;\n\n        const SpeechRecognitionCtor = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognitionCtor) {\n            this._internalVoiceSupported.set(true);\n            const recognition = new SpeechRecognitionCtor();\n            recognition.continuous = false;\n            recognition.interimResults = true;\n            recognition.lang = this.speechLanguage();\n\n            recognition.onresult = (event: { results: SpeechRecognitionResultList; resultIndex: number }) => {\n                const transcript = Array.from(event.results)\n                    .map((result: SpeechRecognitionResult) => result[0].transcript)\n                    .join('');\n\n                // Inject the transcribed text\n                if (event.results[0].isFinal) {\n                    this.injectedText.set(transcript);\n                }\n            };\n\n            recognition.onend = () => {\n                this._internalIsRecording.set(false);\n            };\n\n            recognition.onerror = () => {\n                this._internalIsRecording.set(false);\n            };\n\n            // Store as the correctly typed interface\n            this.recognition = recognition as typeof this.recognition;\n        }\n    }\n\n    private startRecording(): void {\n        if (this.recognition && !this._internalIsRecording()) {\n            this.recognition.lang = this.speechLanguage();\n            this.recognition.start();\n            this._internalIsRecording.set(true);\n        }\n    }\n\n    private stopRecording(): void {\n        if (this.recognition && this._internalIsRecording()) {\n            this.recognition.stop();\n            this._internalIsRecording.set(false);\n        }\n    }\n\n    // =====================================================================\n    // Event Handlers\n    // =====================================================================\n\n    onQuickAction(prompt: string): void {\n        this.injectedText.set(prompt);\n    }\n\n    onSend(event: SendEvent): void {\n        // Clear injected text after send\n        this.injectedText.set(null);\n        this.send.emit(event);\n    }\n\n    onModelSelected(modelId: string): void {\n        // Find the model from providers\n        for (const provider of this.providers()) {\n            const model = provider.models.find((m: Model) => m.id === modelId);\n            if (model) {\n                this.modelSelected.emit(model);\n                return;\n            }\n        }\n    }\n\n    onToggleVoice(): void {\n        if (this.selfManagedVoice()) {\n            // Self-managed: toggle recording internally\n            if (this._internalIsRecording()) {\n                this.stopRecording();\n            } else {\n                this.startRecording();\n            }\n        } else {\n            // External: emit event for parent to handle\n            this.toggleVoice.emit();\n        }\n    }\n\n    /** Speak a message using Speech Synthesis API */\n    onSpeak(text: string): void {\n        if (this.synthesis) {\n            // Cancel any ongoing speech\n            this.synthesis.cancel();\n\n            const utterance = new SpeechSynthesisUtterance(text);\n            utterance.lang = this.speechLanguage();\n            this.synthesis.speak(utterance);\n        }\n        this.speakMessage.emit(text);\n    }\n\n    onToggleStreaming(): void {\n        this._streamingEnabled.update((v: boolean) => !v);\n        this.emitSettings();\n    }\n\n    onToggleMarkdown(): void {\n        this._markdownEnabled.update((v: boolean) => !v);\n        this.emitSettings();\n    }\n\n    onToggleSafety(): void {\n        this._safetyEnabled.update((v: boolean) => !v);\n        this.emitSettings();\n    }\n\n    private emitSettings(): void {\n        this.settingsChanged.emit({\n            streamingEnabled: this._streamingEnabled(),\n            markdownEnabled: this._markdownEnabled(),\n            safetyEnabled: this._safetyEnabled(),\n        });\n    }\n}\n\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      \n      --_surface: var(--surface, #fafafa);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .chat-box {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      background: var(--_surface);\n    }\n\n    .messages-area {\n      flex: 1;\n      overflow-y: auto;\n      padding: 16px;\n    }\n\n    .input-area {\n      flex-shrink: 0;\n      padding: 16px;\n      border-top: 1px solid var(--_outline-variant);\n      background: var(--_surface-container);\n    }\n\n    /* Loading state styling */\n    .chat-box.loading {\n      .input-area {\n        opacity: 0.7;\n        pointer-events: none;\n      }\n    }\n  \n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 413
            },
            "extends": [],
            "implements": [
                "OnDestroy"
            ]
        },
        {
            "name": "ChatComponent",
            "id": "component-ChatComponent-c6596ea0402c14d0ec804897d6574d1a3c2c24983a0b8934c99907ab22d258d9fad204c61f6e82b4f8fb2c06c3f8eeef5d3acfabe7414294a05754e728c91d1c",
            "file": "src/app/features/chat/chat.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-chat",
            "styleUrls": [],
            "styles": [
                "\n    :host {\n      display: block;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .chat-container {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      max-width: 860px;\n      margin: 0 auto;\n      padding: 0 24px;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    /* When in welcome mode (no messages), center content */\n    .chat-container.welcome-mode {\n      justify-content: center;\n    }\n    \n    /* When has messages, use flex layout for scroll */\n    .chat-container.has-messages {\n      justify-content: flex-start;\n    }\n\n    /* Welcome Section */\n    .welcome-section {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      padding: 40px 16px;\n      text-align: center;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n        \n        &.dark {\n          /* filter: invert(1); removed */\n        }\n      }\n    }\n\n    .welcome-title {\n      font-size: 40px;\n      font-weight: 400;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n    }\n\n    .welcome-subtitle {\n      font-size: 16px;\n      color: var(--on-surface-variant);\n      margin: 0 0 40px;\n    }\n\n    .suggestions-grid {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 12px;\n      width: 100%;\n      max-width: 500px;\n    }\n\n    @media (max-width: 500px) {\n      .suggestions-grid {\n        grid-template-columns: 1fr;\n      }\n    }\n\n    .suggestion-card {\n      display: flex;\n      align-items: flex-start;\n      gap: 12px;\n      padding: 16px;\n      background: var(--surface);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      cursor: pointer;\n      text-align: left;\n      transition: all var(--transition-fast);\n      font-family: inherit;\n      \n      &:hover {\n        background: var(--surface-dim);\n        border-color: var(--gemini-blue-light);\n      }\n      \n      &:active {\n        transform: scale(0.98);\n      }\n    }\n\n    .suggestion-icon {\n      color: var(--gemini-blue);\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n    }\n\n    .suggestion-text {\n      flex: 1;\n      font-size: 14px;\n      color: var(--on-surface);\n      line-height: 1.4;\n    }\n\n    /* Messages */\n    .messages-container {\n      flex: 1;\n      min-height: 0; /* Critical for flexbox scrolling */\n      overflow-y: auto;\n      padding: 24px 0;\n      padding-bottom: 120px; /* Large space before input section + queue */\n    }\n\n    .message-row {\n      display: flex;\n      align-items: flex-start;\n      gap: 16px;\n      padding: 16px 0;\n      \n      &.user-row {\n        justify-content: flex-end;\n      }\n    }\n\n    .message-avatar {\n      flex-shrink: 0;\n      width: 28px;\n      height: 28px;\n      width: 28px;\n      height: 28px;\n      margin-top: 0; /* Align with first line text baseline */\n    }\n\n    .avatar-logo {\n      width: 28px;\n      height: auto;\n      \n      &.dark {\n        /* filter: invert(1); removed */\n      }\n      \n      &.loading {\n        animation: pulse 1.2s ease-in-out infinite;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    .message-content {\n      flex: 1;\n      max-width: 720px;\n    }\n\n    .user-message {\n      background: var(--user-bubble-bg);\n      padding: 12px 16px;\n      border-radius: 20px;\n      max-width: fit-content;\n      margin-left: auto;\n    }\n\n    .message-text {\n      font-size: 15px;\n      line-height: 1.7;\n      color: var(--on-surface);\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n    \n    /* Markdown content styling */\n    .markdown-content {\n      white-space: normal;\n      \n      p {\n        margin: 0 0 0.75em;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n      \n      h1, h2, h3, h4, h5, h6 {\n        margin: 1em 0 0.5em;\n        font-weight: 600;\n        line-height: 1.3;\n        &:first-child {\n          margin-top: 0;\n        }\n      }\n      \n      h1 { font-size: 1.4em; }\n      h2 { font-size: 1.25em; }\n      h3 { font-size: 1.1em; }\n      h4, h5, h6 { font-size: 1em; }\n      \n      code {\n        font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', monospace;\n        font-size: 0.85em;\n        padding: 2px 6px;\n        background: var(--surface-variant);\n        border-radius: 4px;\n      }\n      \n      pre {\n        margin: 0.75em 0;\n        padding: 12px 16px;\n        background: var(--surface-variant);\n        border-radius: 8px;\n        overflow-x: auto;\n        \n        code {\n          padding: 0;\n          background: none;\n          font-size: 0.85em;\n        }\n      }\n      \n      ul, ol {\n        margin: 0.5em 0;\n        padding-left: 1.5em;\n      }\n      \n      li {\n        margin: 0.25em 0;\n      }\n      \n      blockquote {\n        margin: 0.75em 0;\n        padding: 8px 16px;\n        border-left: 3px solid var(--gemini-blue);\n        background: var(--surface-variant);\n        font-style: italic;\n      }\n      \n      a {\n        color: var(--gemini-blue);\n        text-decoration: none;\n        &:hover {\n          text-decoration: underline;\n        }\n      }\n      \n      table {\n        border-collapse: collapse;\n        margin: 0.75em 0;\n        width: 100%;\n      }\n      \n      th, td {\n        padding: 8px 12px;\n        border: 1px solid var(--outline);\n        text-align: left;\n      }\n      \n      th {\n        background: var(--surface-variant);\n        font-weight: 600;\n      }\n      \n      hr {\n        border: none;\n        border-top: 1px solid var(--outline);\n        margin: 1em 0;\n      }\n      \n      img {\n        max-width: 100%;\n        height: auto;\n        border-radius: 8px;\n      }\n      \n      /* Mermaid diagram styling */\n      .mermaid-diagram {\n        margin: 1em 0;\n        padding: 16px;\n        background: var(--surface-variant);\n        border-radius: 12px;\n        overflow-x: auto;\n        \n        svg {\n          max-width: 100%;\n          height: auto;\n        }\n      }\n      \n      .mermaid-error {\n        padding: 12px 16px;\n        background: rgba(217, 48, 37, 0.1);\n        border: 1px solid rgba(217, 48, 37, 0.3);\n        border-radius: 8px;\n        color: #d93025;\n        font-family: monospace;\n        font-size: 0.9em;\n      }\n      \n      /* Math equation styling */\n      .math-inline {\n        font-family: 'Cambria Math', 'Times New Roman', serif;\n        font-style: italic;\n        padding: 0 2px;\n      }\n      \n      .math-display {\n        display: block;\n        text-align: center;\n        font-family: 'Cambria Math', 'Times New Roman', serif;\n        font-size: 1.2em;\n        margin: 1em 0;\n        padding: 16px;\n        background: var(--surface-variant);\n        border-radius: 8px;\n      }\n      \n      .math-frac {\n        display: inline-flex;\n        flex-direction: column;\n        align-items: center;\n        vertical-align: middle;\n        margin: 0 4px;\n        \n        .math-num {\n          border-bottom: 1px solid currentColor;\n          padding-bottom: 2px;\n        }\n        \n        .math-denom {\n          padding-top: 2px;\n        }\n      }\n    }\n\n    .user-message .message-text {\n      color: var(--user-bubble-text);\n    }\n\n    /* Error message styling */\n    .error-message {\n      .message-text {\n        color: #d93025;\n      }\n    }\n    \n    .error-details-btn {\n      margin-top: 8px;\n      font-size: 12px;\n      color: #d93025;\n      border-color: #d93025;\n      padding: 4px 12px;\n      height: auto;\n      line-height: 1.4;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        margin-right: 4px;\n      }\n      \n      &:hover {\n        background: rgba(217, 48, 37, 0.08);\n      }\n    }\n\n    .message-actions {\n      display: flex;\n      gap: 2px;\n      margin-top: 8px;\n      opacity: 0;\n      transition: opacity var(--transition-fast);\n      \n      .message-row:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-muted);\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n      }\n    }\n\n    .message-model {\n      display: inline-flex;\n      align-items: center;\n      gap: 4px;\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 8px;\n      \n      mat-icon {\n        font-size: 14px;\n        width: 14px;\n        height: 14px;\n      }\n    }\n\n    /* Typing Indicator */\n    .typing-indicator {\n      display: flex;\n      gap: 4px;\n      padding: 8px 0;\n      \n      span {\n        width: 8px;\n        height: 8px;\n        background: var(--on-surface-muted);\n        border-radius: 50%;\n        animation: bounce 1.4s infinite ease-in-out;\n        \n        &:nth-child(1) { animation-delay: -0.32s; }\n        &:nth-child(2) { animation-delay: -0.16s; }\n      }\n    }\n\n    @keyframes bounce {\n      0%, 80%, 100% { \n        transform: scale(0.8);\n        opacity: 0.5;\n      }\n      40% { \n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n\n    /* Attached Files */\n    .attached-files {\n      display: flex;\n      gap: 8px;\n      padding: 12px 0;\n      flex-wrap: wrap;\n    }\n\n    .file-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--surface-container);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-full);\n    }\n\n    .file-thumb {\n      width: 24px;\n      height: 24px;\n      border-radius: 4px;\n      object-fit: cover;\n    }\n\n    .file-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      color: var(--on-surface-variant);\n    }\n\n    .file-name {\n      font-size: 13px;\n      color: var(--on-surface);\n      max-width: 150px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-remove {\n      width: 24px !important;\n      height: 24px !important;\n      margin: -4px -4px -4px 0;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    /* Prompt Queue */\n    .prompt-queue {\n      width: 90%;\n      max-width: 740px;\n      margin: 0 auto 0; /* No bottom margin - chatbox overlays */\n      background: var(--surface-container);\n      border-radius: var(--radius-lg) var(--radius-lg) 0 0; /* Rounded top only */\n      border: 1px solid var(--surface-variant);\n      border-bottom: none; /* Remove bottom border - hidden by chatbox */\n      overflow: hidden;\n      box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08), 0 -2px 8px rgba(0, 0, 0, 0.04);\n      position: relative;\n      z-index: 1; /* Below chatbox */\n      \n      &.slide-up {\n        animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n    }\n    \n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .queue-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 8px 12px 8px 16px;\n      transition: background 0.2s;\n    }\n    \n    .queue-header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      flex: 1;\n      \n      &:hover {\n        opacity: 0.8;\n      }\n    }\n    \n    .queue-header-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .send-all-btn,\n    .clear-all-btn {\n      width: 24px !important;\n      height: 24px !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      padding: 0 !important;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        color: var(--on-surface-variant);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n    \n    .send-all-btn:hover mat-icon {\n      color: var(--gemini-blue);\n    }\n    \n    .clear-all-btn:hover mat-icon {\n      color: var(--error);\n    }\n\n    .expand-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      color: var(--on-surface-variant);\n      transition: transform 0.2s;\n      \n      &.expanded {\n        transform: rotate(180deg);\n      }\n    }\n\n    .queue-count {\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n    }\n\n    .queue-items {\n      border-top: 1px solid var(--surface-variant);\n      max-height: 150px;\n      overflow-y: auto;\n    }\n\n    .queue-item {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 6px 10px;\n      border-bottom: 1px solid var(--surface-variant);\n      background: var(--surface-container);\n      transition: box-shadow 0.2s, transform 0.2s;\n      \n      &:last-child {\n        border-bottom: none;\n      }\n      \n      &.cdk-drag-preview {\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n        border-radius: var(--radius-md);\n      }\n      \n      &.cdk-drag-placeholder {\n        opacity: 0.4;\n      }\n      \n      &.cdk-drag-animating {\n        transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n      }\n    }\n    \n    .drag-handle {\n      cursor: grab;\n      color: var(--on-surface-variant);\n      font-size: 16px;\n      width: 16px;\n      height: 16px;\n      flex-shrink: 0;\n      \n      &:active {\n        cursor: grabbing;\n      }\n    }\n    \n    .cdk-drop-list-dragging .queue-item:not(.cdk-drag-placeholder) {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .queue-item-content {\n      flex: 1;\n      font-size: 12px;\n      color: var(--on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .queue-edit-input {\n      flex: 1;\n      padding: 6px 10px;\n      font-size: 14px;\n      border: 1px solid var(--gemini-blue);\n      border-radius: var(--radius-md);\n      background: var(--surface);\n      color: var(--on-surface);\n      outline: none;\n      \n      &:focus {\n        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);\n      }\n    }\n\n    .queue-item-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n      flex-shrink: 0;\n      \n      button {\n        width: 32px !important;\n        height: 32px !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        padding: 0 !important;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-variant);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n        \n        &:disabled mat-icon {\n          color: var(--outline);\n        }\n      }\n    }\n\n    /* Input Section */\n    .input-section {\n      flex-shrink: 0; /* Don't shrink - stay at bottom */\n      padding: 16px 24px 24px;\n      width: 100%;\n      max-width: 820px;\n      margin: 0 auto;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n      background: var(--surface-dim);\n    }\n    \n    /* Welcome header above chatbox */\n    .welcome-header {\n      text-align: center;\n      margin-bottom: 32px;\n      animation: fadeIn 0.3s ease-out;\n      \n      .welcome-logo {\n        margin-bottom: 24px;\n        \n        img {\n          height: 56px;\n          width: auto;\n          border-radius: 12px;\n        }\n      }\n      \n      .welcome-title {\n        font-size: 52px;\n        font-weight: 400;\n        margin: 0 0 8px;\n        color: var(--on-surface);\n        display: inline-flex;\n        align-items: center;\n        \n        &.rtl {\n          direction: rtl;\n          .typewriter-text {\n            direction: rtl;\n            unicode-bidi: bidi-override;\n          }\n        }\n        \n        &.slide-in {\n          .typewriter-text {\n            animation: slideInFade 0.5s ease-out;\n          }\n        }\n        \n        .typewriter-text {\n          display: inline;\n        }\n        \n        .cursor {\n          opacity: 0;\n          font-weight: 300;\n          color: #9aa0a6;\n          margin-left: 2px;\n          \n          &.visible {\n            opacity: 1;\n          }\n        }\n      }\n      \n      .welcome-subtitle {\n        font-size: 20px;\n        color: var(--on-surface-variant);\n        margin: 0;\n      }\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; transform: translateY(-10px); }\n      to { opacity: 1; transform: translateY(0); }\n    }\n    \n    @keyframes slideInFade {\n      from { \n        opacity: 0; \n        transform: translateY(15px);\n      }\n      to { \n        opacity: 1; \n        transform: translateY(0);\n      }\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; transform: translateY(-10px); }\n      to { opacity: 1; transform: translateY(0); }\n    }\n    \n    @keyframes slideUpType {\n      0% { \n        opacity: 0; \n        transform: translateY(20px);\n        clip-path: inset(0 100% 0 0);\n      }\n      50% {\n        opacity: 1;\n        transform: translateY(0);\n        clip-path: inset(0 50% 0 0);\n      }\n      100% { \n        opacity: 1; \n        transform: translateY(0);\n        clip-path: inset(0 0 0 0);\n      }\n    }\n    \n    /* Centered welcome state - vertically centered */\n    .chat-container.welcome-mode {\n      justify-content: center;\n      align-items: center;\n      \n      .messages-container {\n        display: none;\n      }\n      \n      .input-section {\n        position: absolute;\n        top: 50%;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n        transform: translateY(-50%);\n        max-width: 820px;\n        width: calc(100% - 48px);\n      }\n    }\n    \n    /* After typing starts - slide down to bottom */\n    .chat-container.has-messages {\n      justify-content: flex-start;\n      \n      .messages-container {\n        display: block;\n        flex: 1;\n      }\n      \n      .input-section {\n        position: absolute;\n        bottom: 24px;\n        top: auto;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n        transform: translateY(0);\n      }\n    }\n\n    .input-box {\n      display: flex;\n      flex-direction: column;\n      background: var(--surface);\n      border: 1px solid transparent;\n      border-radius: 28px;\n      padding: 16px 20px;\n      transition: all var(--transition-fast);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 4px 16px rgba(0, 0, 0, 0.04);\n      width: 100%;\n      position: relative;\n      z-index: 2; /* Above queue */\n      \n      &:hover {\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 8px 24px rgba(0, 0, 0, 0.06);\n      }\n      \n      &.focused {\n        border-color: var(--gemini-blue);\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n      \n      &.pulse-send {\n        animation: sendPulse 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      \n      &.is-dragging {\n        border: 2px dashed var(--gemini-blue);\n        background: rgba(66, 133, 244, 0.05);\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.2), 0 8px 32px rgba(66, 133, 244, 0.15);\n      }\n    }\n    \n    body.dark-theme .input-box.is-dragging {\n      background: rgba(138, 180, 248, 0.08);\n    }\n    \n    /* Drop Zone Overlay - absolutely positioned within input-box */\n    .drop-zone-overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(255, 255, 255, 0.95);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      z-index: 10;\n      border-radius: 28px;\n      pointer-events: none;\n    }\n\n    body.dark-theme .drop-zone-overlay {\n      background: rgba(31, 31, 31, 0.95);\n    }\n\n    .drop-icon {\n      font-size: 40px;\n      width: 40px;\n      height: 40px;\n      color: var(--gemini-blue);\n      animation: dropBounce 0.8s ease infinite;\n    }\n    \n    @keyframes dropBounce {\n      0%, 100% { transform: translateY(0); }\n      50% { transform: translateY(-6px); }\n    }\n\n    .drop-caption {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n    }\n    \n    @keyframes sendPulse {\n      0% {\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n      50% {\n        box-shadow: 0 6px 24px rgba(66, 133, 244, 0.4), 0 12px 48px rgba(66, 133, 244, 0.25);\n      }\n      100% {\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n    }\n    \n    .chat-input {\n      width: 100%;\n      border: none;\n      background: transparent;\n      font-size: 18px;\n      font-family: inherit;\n      color: var(--on-surface);\n      outline: none;\n      padding: 4px 0;\n      resize: none;\n      min-height: 24px;\n      max-height: 200px;\n      line-height: 1.5;\n      padding-right: 40px; /* Space for clear button */\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:disabled {\n        opacity: 0.7;\n      }\n      \n      /* Squiggly red underline for flagged content */\n      &.content-flagged {\n        text-decoration: underline wavy var(--error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n        color: var(--error);\n        \n        /* Fallback for browsers that don't support wavy */\n        @supports not (text-decoration-style: wavy) {\n          text-decoration: underline;\n          text-decoration-color: var(--error);\n        }\n      }\n    }\n    \n    /* Tooltip styling for flagged content */\n    ::ng-deep .flagged-content-tooltip {\n      background: var(--error) !important;\n      color: white !important;\n      font-weight: 500;\n    }\n    \n    /* Attached Files Container (wrapper with header and dropzone capability) */\n    .attached-files-container {\n      margin: -8px auto 0;\n      width: 85%;\n      max-width: 700px;\n      background: var(--surface-container);\n      border-radius: 0 0 var(--radius-md) var(--radius-md);\n      border: 1px solid var(--outline-variant);\n      border-top: none;\n      box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15);\n      position: relative;\n      overflow: hidden;\n      transition: border-color 0.2s, box-shadow 0.2s;\n      \n      &.is-dragging {\n        border-color: var(--gemini-blue);\n        box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15), 0 0 0 2px var(--gemini-blue-light);\n      }\n    }\n    \n    /* Attachments header toolbar */\n    .attachments-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 12px 12px 6px 16px;\n      border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n      box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15);\n      background: var(--surface-container);\n    }\n    \n    .attachments-count {\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n    }\n    \n    .attachments-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .add-more-btn,\n    .clear-all-btn {\n      width: 28px !important;\n      height: 28px !important;\n      padding: 0 !important;\n      \n      .mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        color: var(--on-surface-variant);\n      }\n      \n      &:hover .mat-icon {\n        color: var(--on-surface);\n      }\n    }\n    \n    .clear-all-btn:hover .mat-icon {\n      color: var(--error) !important;\n    }\n    \n    /* Drop overlay for attachments container */\n    .attachments-drop-overlay {\n      position: absolute;\n      inset: 0;\n      background: rgba(var(--gemini-blue-rgb, 66, 133, 244), 0.1);\n      backdrop-filter: blur(2px);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      z-index: 10;\n      \n      mat-icon {\n        font-size: 32px;\n        width: 32px;\n        height: 32px;\n        color: var(--gemini-blue);\n      }\n      \n      span {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--gemini-blue);\n      }\n    }\n    \n    /* Attached Files List (scrollable file list) */\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n      padding: 8px 16px 12px 16px;\n      max-height: 180px; /* Height for 3 items without scroll */\n      overflow-x: hidden;\n      overflow-y: auto;\n      scrollbar-width: thin;\n      \n      &::-webkit-scrollbar {\n        width: 4px;\n      }\n      \n      &::-webkit-scrollbar-track {\n        background: transparent;\n      }\n      \n      &::-webkit-scrollbar-thumb {\n        background: transparent;\n        border-radius: 2px;\n      }\n      \n      &:hover::-webkit-scrollbar-thumb {\n        background: var(--outline-variant);\n      }\n    }\n    \n    /* File row - horizontal layout */\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 6px 4px;\n      border-radius: 6px;\n      transition: background var(--transition-fast);\n      \n      &:not(:last-child) {\n        border-bottom: 1px solid var(--outline-variant);\n        padding-bottom: 8px;\n        margin-bottom: 4px;\n      }\n      \n      &:hover {\n        background: rgba(255, 255, 255, 0.5);\n        \n        .file-remove-btn-small {\n          opacity: 1;\n        }\n      }\n    }\n    \n    /* File icon wrapper */\n    .file-icon-wrapper {\n      width: 28px;\n      height: 28px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n    \n    .file-thumb-small {\n      width: 28px;\n      height: 28px;\n      object-fit: cover;\n      border-radius: 4px;\n    }\n    \n    .file-type-icon-small {\n      font-size: 22px;\n      width: 22px;\n      height: 22px;\n      color: var(--gemini-blue);\n    }\n    \n    /* File name text */\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      font-weight: 500;\n      color: var(--on-surface);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    \n    /* File size text */\n    .file-size-text {\n      font-size: 11px;\n      color: var(--on-surface-muted);\n      flex-shrink: 0;\n    }\n    \n    /* Remove button - small circular */\n    .file-remove-btn-small {\n      width: 24px !important;\n      height: 24px !important;\n      padding: 0 !important;\n      opacity: 0.6;\n      transition: opacity var(--transition-fast);\n      flex-shrink: 0;\n      display: flex !important;\n      align-items: center;\n      justify-content: center;\n      \n      .mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        color: var(--on-surface-variant);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      &:hover {\n        opacity: 1;\n        \n        .mat-icon {\n          color: var(--error);\n        }\n      }\n    }\n    \n    .input-toolbar {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin-top: 8px;\n      padding-top: 8px;\n    }\n    \n    .toolbar-left,\n    .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .toolbar-btn {\n      color: var(--on-surface-variant);\n      \n      &:hover {\n        color: var(--on-surface);\n        background: var(--surface-container);\n      }\n    }\n    \n    .add-btn {\n      background: var(--surface-container);\n      border-radius: 50%;\n    }\n    \n    .tools-btn {\n      font-size: 14px;\n      padding: 4px 12px !important;\n      min-width: auto;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 4px;\n      }\n      \n      span {\n        font-weight: 500;\n      }\n    }\n    \n    .streaming-btn {\n      font-size: 14px;\n      padding: 4px 12px !important;\n      min-width: auto;\n      transition: all var(--transition-fast);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 4px;\n      }\n      \n      span {\n        font-weight: 500;\n      }\n      \n      &.active {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue);\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n      \n      &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n        \n        &:hover {\n          background: transparent;\n        }\n      }\n    }\n    \n    /* Settings dropdown button */\n    .settings-btn {\n      width: 36px !important;\n      height: 36px !important;\n      padding: 0 !important;\n      \n      mat-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n    \n    /* Toggle indicators in settings menu */\n    ::ng-deep .settings-menu {\n      .mat-mdc-menu-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        \n        .toggle-indicator {\n          margin-left: auto;\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-muted);\n          \n          &.active {\n            color: #34a853;\n          }\n          \n          &.loading {\n            animation: pulse 1.5s infinite;\n          }\n        }\n      }\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n    \n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px 4px 12px !important;\n      font-size: 14px;\n      color: var(--on-surface);\n      background: transparent;\n      border-radius: 8px;\n      min-width: auto;\n      \n      .model-info {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n        line-height: 1.2;\n        order: 0;\n      }\n      \n      .model-name {\n        font-weight: 500;\n        font-size: 13px;\n        white-space: nowrap;\n      }\n      \n      .provider-name {\n        font-weight: 400;\n        font-size: 10px;\n        color: var(--on-surface-muted);\n        white-space: nowrap;\n        opacity: 0.7;\n      }\n      \n      .dropdown-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        color: var(--on-surface-muted);\n        order: 1;\n        margin-left: 2px;\n      }\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n    }\n    \n    .mic-btn {\n      &.recording {\n        color: #ea4335 !important;\n        animation: pulse 1s infinite;\n      }\n    }\n    \n    /* Action button container for send/mic transition */\n    .action-btn-container {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 40px;\n      height: 40px;\n      overflow: hidden;\n      position: relative;\n      margin-top: -4px;\n    }\n    \n    .send-btn {\n      color: var(--gemini-blue) !important;\n      \n      &:hover {\n        background: rgba(66, 133, 244, 0.1) !important;\n      }\n    }\n    \n    /* Quick Action Chips */\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n      justify-content: center;\n      margin: 24px 0;\n      padding: 0 16px;\n    }\n    \n    .quick-chip {\n      display: inline-flex !important;\n      align-items: center;\n      gap: 6px;\n      border-radius: 20px !important;\n      font-size: 14px;\n      padding: 8px 14px !important;\n      background: var(--surface) !important;\n      border: 1px solid var(--surface-variant) !important;\n      color: var(--on-surface) !important;\n      \n      .chip-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n      \n      &:hover {\n        background: var(--surface-container) !important;\n        border-color: var(--on-surface-muted) !important;\n      }\n    }\n    \n    .disclaimer {\n      margin: 16px 0 0;\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      text-align: center;\n    }\n\n    .input-wrapper {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 8px 12px;\n      background: var(--surface-container);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-full);\n      transition: all var(--transition-fast);\n      \n      &:hover {\n        border-color: var(--on-surface-muted);\n      }\n      \n      &.focused {\n        background: var(--surface);\n        border-color: var(--gemini-blue);\n        box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.15);\n      }\n    }\n\n    .input-action {\n      color: var(--on-surface-variant);\n      flex-shrink: 0;\n      \n      &:hover {\n        color: var(--on-surface);\n      }\n      \n      &.recording {\n        color: #ea4335 !important;\n        animation: pulse 1s infinite;\n      }\n    }\n\n    .chat-input {\n      flex: 1;\n      min-width: 0;\n      border: none;\n      background: transparent;\n      font-size: 18px;\n      font-family: inherit;\n      color: var(--on-surface);\n      outline: none;\n      padding: 8px;\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:disabled {\n        opacity: 0.7;\n      }\n    }\n\n    .model-select-container {\n      flex-shrink: 0;\n    }\n    \n    .model-select-trigger {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px !important;\n      min-width: 160px;\n      max-width: 200px;\n      background: var(--surface) !important;\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-sm) !important;\n      font-size: 13px;\n      height: 32px;\n      \n      .selected-model {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        flex: 1;\n        text-align: left;\n      }\n      \n      .dropdown-arrow {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin: 0 -4px 0 0;\n        color: var(--on-surface-muted);\n      }\n      \n      &:hover {\n        background: var(--surface-container) !important;\n        border-color: var(--gemini-blue);\n      }\n    }\n\n    .send-btn {\n      color: var(--on-surface-muted);\n      flex-shrink: 0;\n      transition: all var(--transition-fast);\n      \n      &.active {\n        color: var(--gemini-blue);\n        \n        &:hover {\n          background: var(--user-bubble-bg);\n        }\n      }\n      \n      &:disabled {\n        opacity: 0.4;\n      }\n    }\n\n\n\n    /* Animations */\n    .animate-fade-in {\n      animation: fadeIn 0.2s ease-out forwards;\n    }\n\n    @keyframes fadeIn {\n      from {\n        opacity: 0;\n        transform: translateY(8px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 20px;\n      right: 20px;\n      width: 32px !important;\n      height: 32px !important;\n      padding: 0 !important;\n      display: flex !important;\n      align-items: center;\n      justify-content: center;\n\n      mat-icon {\n        font-size: 22px;\n        width: 22px;\n        height: 22px;\n        color: var(--on-surface-muted);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      &:hover mat-icon {\n        color: var(--on-surface);\n      }\n    }\n  "
            ],
            "template": "<div class=\"chat-container\"\n     [class.welcome-mode]=\"chatService.messages().length === 0\"\n     [class.has-messages]=\"chatService.messages().length > 0\"\n     (dragover)=\"onDragOver($event)\"\n     (dragleave)=\"onDragLeave($event)\"\n     (drop)=\"onDrop($event)\">\n\n  <!-- Drag zone covers entire container to detect drags, but overlay shows in input box -->\n\n  <!-- Messages -->\n  <div class=\"messages-container\" #messagesContainer>\n    @for (message of chatService.messages(); track message.timestamp; let i = $index) {\n      <div class=\"message-row animate-fade-in\"\n           [class.user-row]=\"message.role === 'user'\"\n           [class.assistant-row]=\"message.role === 'assistant'\"\n           [style.animation-delay]=\"i * 30 + 'ms'\">\n\n        <!-- Assistant Avatar -->\n        @if (message.role === 'assistant') {\n          <div class=\"message-avatar\">\n            <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"avatar-logo\">\n          </div>\n        }\n\n        <div class=\"message-content\" [class.user-message]=\"message.role === 'user'\" [class.error-message]=\"message.isError\">\n          @if (message.role === 'assistant' && chatService.markdownMode()) {\n            <div class=\"message-text markdown-content\" [innerHTML]=\"message.content | safeMarkdown\"></div>\n          } @else {\n            <div class=\"message-text\">{{ message.content }}</div>\n          }\n\n          @if (message.isError && message.errorDetails) {\n            <button mat-stroked-button class=\"error-details-btn\" (click)=\"showErrorDetails(message.errorDetails)\">\n              <mat-icon>info_outline</mat-icon>\n              View Details\n            </button>\n          }\n\n          @if (message.role === 'assistant') {\n            <div class=\"message-actions\">\n              <button mat-icon-button [matTooltip]=\"'actions.copy' | translate\" (click)=\"copyMessage(message.content)\">\n                <mat-icon>content_copy</mat-icon>\n              </button>\n              <button mat-icon-button [matTooltip]=\"'actions.readAloud' | translate\" (click)=\"speakMessage(message.content)\">\n                <mat-icon>{{ speechService.isSpeaking() ? 'stop' : 'volume_up' }}</mat-icon>\n              </button>\n              <button mat-icon-button [matTooltip]=\"'actions.goodResponse' | translate\">\n                <mat-icon>thumb_up</mat-icon>\n              </button>\n              <button mat-icon-button [matTooltip]=\"'actions.badResponse' | translate\">\n                <mat-icon>thumb_down</mat-icon>\n              </button>\n              <button mat-icon-button [matMenuTriggerFor]=\"moreMenu\" [matTooltip]=\"'actions.more' | translate\">\n                <mat-icon>more_vert</mat-icon>\n              </button>\n              <mat-menu #moreMenu=\"matMenu\">\n                <button mat-menu-item (click)=\"copyMessage(message.content)\">\n                  <mat-icon>content_copy</mat-icon>\n                  <span>Copy</span>\n                </button>\n                <button mat-menu-item>\n                  <mat-icon>refresh</mat-icon>\n                  <span>Regenerate</span>\n                </button>\n                <button mat-menu-item>\n                  <mat-icon>share</mat-icon>\n                  <span>Share</span>\n                </button>\n                <mat-divider></mat-divider>\n                <button mat-menu-item>\n                  <mat-icon>flag</mat-icon>\n                  <span>Report issue</span>\n                </button>\n              </mat-menu>\n            </div>\n          }\n\n          @if (message.model) {\n            <div class=\"message-model\">\n              <mat-icon>smart_toy</mat-icon>\n              {{ message.model }}\n            </div>\n          }\n        </div>\n      </div>\n    }\n\n    <!-- Loading State -->\n    @if (chatService.isLoading()) {\n      <div class=\"message-row assistant-row animate-fade-in\">\n        <div class=\"message-avatar\">\n          <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"avatar-logo loading\">\n        </div>\n        <div class=\"message-content\">\n          <div class=\"typing-indicator\">\n            <span></span>\n            <span></span>\n            <span></span>\n          </div>\n        </div>\n      </div>\n    }\n  </div>\n\n  <!-- Input Section - Gemini Style -->\n  <div class=\"input-section\">\n    <!-- Welcome Content (above chatbox) - hides when responses start streaming -->\n    @if (chatService.messages().length === 0) {\n      <div class=\"welcome-header\">\n        <div class=\"welcome-logo\">\n          <img src=\"genkit-logo.png\" alt=\"Genkit\">\n        </div>\n        <h1 class=\"welcome-title\"\n            [class.rtl]=\"greetings[currentGreetingIndex()].dir === 'rtl'\"\n            [class.slide-in]=\"greetings[currentGreetingIndex()].anim === 'slide'\">\n          <span class=\"typewriter-text\">{{ typewriterText() }}</span><span class=\"cursor\" [class.visible]=\"showCursor()\">|</span>\n        </h1>\n        <p class=\"welcome-subtitle\">{{ 'chat.greetingSubtitle' | translate }}</p>\n      </div>\n\n      <!-- Quick Action Chips (between greeting and chatbox) -->\n      <div class=\"quick-chips\">\n        @for (action of quickActions; track action.labelKey) {\n          <button mat-stroked-button\n                  class=\"quick-chip\"\n                  (click)=\"useQuickAction(action.prompt)\">\n            <mat-icon class=\"chip-icon\" [style.color]=\"action.color\">{{ action.icon }}</mat-icon>\n            <span>{{ action.labelKey | translate }}</span>\n          </button>\n        }\n      </div>\n    }\n\n    <!-- Prompt Queue (shows when loading and has queued items) -->\n    @if (chatService.isLoading() && chatService.promptQueue().length > 0) {\n      <div class=\"prompt-queue slide-up\">\n        <div class=\"queue-header\">\n          <div class=\"queue-header-left\" (click)=\"queueExpanded = !queueExpanded\">\n            <mat-icon class=\"expand-icon\" [class.expanded]=\"queueExpanded\">expand_more</mat-icon>\n            <span class=\"queue-count\">{{ chatService.promptQueue().length }} {{ 'queue.queued' | translate }}</span>\n          </div>\n          <div class=\"queue-header-actions\">\n            <button mat-icon-button class=\"send-all-btn\" [matTooltip]=\"'queue.sendAll' | translate\" (click)=\"chatService.sendAllFromQueue(); $event.stopPropagation()\">\n              <mat-icon>double_arrow</mat-icon>\n            </button>\n            <button mat-icon-button class=\"clear-all-btn\" [matTooltip]=\"'queue.clearAll' | translate\" (click)=\"chatService.clearQueue(); $event.stopPropagation()\">\n              <mat-icon>clear_all</mat-icon>\n            </button>\n          </div>\n        </div>\n        @if (queueExpanded) {\n          <div class=\"queue-items\" cdkDropList (cdkDropListDropped)=\"onQueueDrop($event)\">\n            @for (item of chatService.promptQueue(); track item.id; let i = $index) {\n              <div class=\"queue-item\" cdkDrag @slideIn>\n                <mat-icon class=\"drag-handle\" cdkDragHandle>drag_indicator</mat-icon>\n                @if (editingQueueId === item.id) {\n                  <input\n                    class=\"queue-edit-input\"\n                    [(ngModel)]=\"editingQueueContent\"\n                    (blur)=\"saveQueueEdit(item.id)\"\n                    (keydown.enter)=\"saveQueueEdit(item.id)\"\n                    (keydown.escape)=\"cancelQueueEdit()\"\n                    #queueEditInput>\n                } @else {\n                  <span class=\"queue-item-content\">{{ item.content }}</span>\n                }\n                <div class=\"queue-item-actions\">\n                  <button mat-icon-button [matTooltip]=\"'queue.sendNow' | translate\" (click)=\"chatService.sendFromQueue(item.id)\">\n                    <mat-icon>send</mat-icon>\n                  </button>\n                  <button mat-icon-button [matTooltip]=\"'actions.edit' | translate\" (click)=\"startEditQueue(item)\">\n                    <mat-icon>edit</mat-icon>\n                  </button>\n                  <button mat-icon-button [matTooltip]=\"'actions.delete' | translate\" (click)=\"chatService.removeFromQueue(item.id)\">\n                    <mat-icon>delete</mat-icon>\n                  </button>\n                </div>\n              </div>\n            }\n          </div>\n        }\n      </div>\n    }\n\n    <div class=\"input-box\" [class.focused]=\"inputFocused\" [class.pulse-send]=\"isPulsing\" [class.is-dragging]=\"isDragging()\" (click)=\"focusInput($event)\">\n      <!-- Drop Zone Overlay (inside input box) -->\n      @if (isDragging()) {\n        <div class=\"drop-zone-overlay\">\n          <mat-icon class=\"drop-icon\">cloud_upload</mat-icon>\n          <span class=\"drop-caption\">Drop files to attach</span>\n        </div>\n      }\n\n      <textarea class=\"chat-input\"\n                [class.content-flagged]=\"contentFlagged()\"\n                [(ngModel)]=\"userMessage\"\n                [placeholder]=\"'chat.placeholder' | translate\"\n                [attr.aria-label]=\"'chat.placeholder' | translate\"\n                (keydown.enter)=\"onEnterKey($event)\"\n                (focus)=\"inputFocused = true\"\n                (blur)=\"inputFocused = false\"\n                (input)=\"onInputChange()\"\n                [matTooltip]=\"contentFlagged() ? 'Content flagged: ' + flaggedLabels().join(', ') : ''\"\n                [matTooltipClass]=\"'flagged-content-tooltip'\"\n                rows=\"1\"\n                #chatTextarea></textarea>\n\n      @if (userMessage) {\n        <button mat-icon-button class=\"clear-input-btn\" (click)=\"clearInput()\" [attr.aria-label]=\"'chat.clearInput' | translate\" [matTooltip]=\"'chat.clearInput' | translate\">\n          <mat-icon>close</mat-icon>\n        </button>\n      }\n\n      <!-- Bottom Toolbar -->\n      <div class=\"input-toolbar\">\n        <div class=\"toolbar-left\">\n          <!-- Add/Attach Button -->\n          <button mat-icon-button\n                  class=\"toolbar-btn add-btn\"\n                  [attr.aria-label]=\"'chat.addFiles' | translate\"\n                  [matTooltip]=\"'chat.addFiles' | translate\"\n                  [matMenuTriggerFor]=\"attachMenu\">\n            <mat-icon>add</mat-icon>\n          </button>\n\n          <mat-menu #attachMenu=\"matMenu\" class=\"attach-menu\">\n            <button mat-menu-item (click)=\"anyInput.click()\">\n              <mat-icon>upload_file</mat-icon>\n              <span>{{ 'chat.uploadFiles' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"openGoogleDrive()\"\n                    [disabled]=\"authService.demoMode()\"\n                    [matTooltip]=\"authService.demoMode() ? ('nav.demoUser' | translate) : ''\">\n              <mat-icon>add_to_drive</mat-icon>\n              <span>{{ 'chat.googleDrive' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"imageInput.click()\">\n              <mat-icon>image</mat-icon>\n              <span>{{ 'attach.photos' | translate }}</span>\n            </button>\n            <mat-divider></mat-divider>\n            <button mat-menu-item (click)=\"audioInput.click()\">\n              <mat-icon>audio_file</mat-icon>\n              <span>{{ 'attach.audio' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"videoInput.click()\">\n              <mat-icon>videocam</mat-icon>\n              <span>{{ 'attach.video' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"pdfInput.click()\">\n              <mat-icon>picture_as_pdf</mat-icon>\n              <span>{{ 'attach.pdf' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"textInput.click()\">\n              <mat-icon>code</mat-icon>\n              <span>{{ 'attach.code' | translate }}</span>\n            </button>\n          </mat-menu>\n\n          <!-- Hidden file inputs -->\n          <input #imageInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"image/*\">\n          <input #videoInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"video/*\">\n          <input #audioInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"audio/*\">\n          <input #pdfInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".pdf\">\n          <input #textInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".txt,.md,.json,.csv,.xml,.yaml,.yml,.py,.ts,.js,.go,.rs,.java\">\n          <input #anyInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple>\n\n          <!-- Tools Button -->\n          <button mat-button class=\"toolbar-btn tools-btn\">\n            <mat-icon>handyman</mat-icon>\n            <span>{{ 'toolbar.tools' | translate }}</span>\n          </button>\n\n        </div>\n\n        <div class=\"toolbar-right\">\n          <!-- Model Selector -->\n          <button mat-button\n                  class=\"model-select-btn\"\n                  [matMenuTriggerFor]=\"modelMenu\"\n                  (menuOpened)=\"onModelMenuOpened()\">\n            <div class=\"model-info\">\n              <span class=\"model-name\">{{ modelsService.getModelName(modelsService.selectedModel()) }}</span>\n              <span class=\"provider-name\">{{ modelsService.getProviderName(modelsService.selectedModel()) }}</span>\n            </div>\n            <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n          </button>\n\n          <mat-menu #modelMenu=\"matMenu\" class=\"model-panel\" xPosition=\"before\">\n            <!-- Search Input -->\n            <div class=\"model-search\" (click)=\"$event.stopPropagation()\">\n              <mat-icon>search</mat-icon>\n              <input type=\"text\"\n                     placeholder=\"Search models...\"\n                     [(ngModel)]=\"modelSearchQuery\"\n                     (input)=\"filterModels()\"\n                     (keydown)=\"$event.stopPropagation()\">\n              @if (modelSearchQuery) {\n                <button mat-icon-button class=\"clear-search\" (click)=\"clearModelSearch()\">\n                  <mat-icon>close</mat-icon>\n                </button>\n              }\n            </div>\n\n            <!-- Recent Models -->\n            @if (!modelSearchQuery && modelsService.getRecentModels().length > 0) {\n              <div class=\"model-group\">\n                <div class=\"group-header\">Recent</div>\n                @for (model of modelsService.getRecentModels(); track model.id) {\n                  <button mat-menu-item\n                          class=\"model-item\"\n                          [class.selected]=\"modelsService.selectedModel() === model.id\"\n                          (click)=\"selectModel(model.id)\">\n                    <span class=\"model-name\">{{ model.name }}</span>\n                    <span class=\"model-badge\">{{ modelsService.getProviderName(model.id) }}</span>\n                  </button>\n                }\n              </div>\n              <mat-divider></mat-divider>\n            }\n\n            <!-- Models Grouped by Provider -->\n            <div class=\"model-list\">\n              @if (modelSearchQuery) {\n                <div class=\"model-group\">\n                  <div class=\"group-header\">Results</div>\n                  @for (model of filteredModels(); track model.id) {\n                    <button mat-menu-item\n                            class=\"model-item\"\n                            [class.selected]=\"modelsService.selectedModel() === model.id\"\n                            (click)=\"selectModel(model.id)\">\n                      <span class=\"model-name\">{{ model.name }}</span>\n                      <span class=\"model-badge\">{{ modelsService.getProviderName(model.id) }}</span>\n                    </button>\n                  } @empty {\n                    <div class=\"no-results\">No models found</div>\n                  }\n                </div>\n              } @else {\n                @for (provider of modelsService.providers(); track provider.id) {\n                  <div class=\"model-group\">\n                    <div class=\"group-header\">{{ provider.name }}</div>\n                    @for (model of modelsService.getModelsByProvider(provider.id); track model.id) {\n                      <button mat-menu-item\n                              class=\"model-item\"\n                              [class.selected]=\"modelsService.selectedModel() === model.id\"\n                              (click)=\"selectModel(model.id)\">\n                        <span class=\"model-name\">{{ model.name }}</span>\n                      </button>\n                    }\n                  </div>\n                }\n              }\n            </div>\n          </mat-menu>\n\n          <!-- Settings Dropdown (icon only) - between model selector and mic -->\n          <button mat-icon-button\n                  class=\"toolbar-btn settings-btn\"\n                  [matMenuTriggerFor]=\"settingsMenu\"\n                  [attr.aria-label]=\"'toolbar.settings' | translate\"\n                  [matTooltip]=\"'toolbar.settings' | translate\">\n            <mat-icon>tune</mat-icon>\n          </button>\n          <mat-menu #settingsMenu=\"matMenu\" class=\"settings-menu\">\n            <!-- Streaming Toggle -->\n            <button mat-menu-item\n                    [disabled]=\"!modelsService.supportsStreaming()\"\n                    (click)=\"toggleStreaming(); $event.stopPropagation()\">\n              <mat-icon>{{ chatService.streamingMode() && modelsService.supportsStreaming() ? 'stream' : 'pause_circle' }}</mat-icon>\n              <span>{{ 'toolbar.stream' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\"\n                        [class.active]=\"chatService.streamingMode() && modelsService.supportsStreaming()\">\n                {{ chatService.streamingMode() && modelsService.supportsStreaming() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n\n            <!-- Markdown Toggle -->\n            <button mat-menu-item (click)=\"chatService.toggleMarkdownMode(); $event.stopPropagation()\">\n              <mat-icon>{{ chatService.markdownMode() ? 'code' : 'code_off' }}</mat-icon>\n              <span>{{ 'toolbar.markdown' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"chatService.markdownMode()\">\n                {{ chatService.markdownMode() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n\n            <!-- Content Safety Toggle -->\n            <button mat-menu-item (click)=\"contentSafetyService.toggle(); $event.stopPropagation()\">\n              <mat-icon>{{ contentSafetyService.enabled() ? 'shield' : 'shield_outlined' }}</mat-icon>\n              <span>{{ 'toolbar.safe' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\"\n                        [class.active]=\"contentSafetyService.enabled()\"\n                        [class.loading]=\"contentSafetyService.loading()\">\n                {{ contentSafetyService.enabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n\n            <mat-divider></mat-divider>\n\n            <!-- Clear Preferences -->\n            <button mat-menu-item (click)=\"clearPreferences()\">\n              <mat-icon>delete_outline</mat-icon>\n              <span>{{ 'settings.clearPreferences' | translate }}</span>\n            </button>\n          </mat-menu>\n\n          <!-- Send Button (when text is entered) or Voice Input -->\n          <div class=\"action-btn-container\">\n            @if (showSendButton()) {\n              <button mat-icon-button\n                      class=\"toolbar-btn send-btn\"\n                      @slideButton\n                      [attr.aria-label]=\"'chat.sendMessage' | translate\"\n                      [matTooltip]=\"'chat.sendMessage' | translate\"\n                      (click)=\"sendMessage()\">\n                <mat-icon>send</mat-icon>\n              </button>\n            } @else if (speechService.isSupported()) {\n              <button mat-icon-button\n                      class=\"toolbar-btn mic-btn\"\n                      @slideButton\n                      [class.recording]=\"speechService.isListening()\"\n                      [attr.aria-label]=\"speechService.isListening() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      [matTooltip]=\"speechService.isListening() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      (click)=\"toggleVoiceInput()\">\n                <mat-icon>{{ speechService.isListening() ? 'mic_off' : 'mic' }}</mat-icon>\n              </button>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Attached Files List (below chatbox) - also acts as dropzone -->\n    @if (attachedFiles().length > 0) {\n      <div class=\"attached-files-container\"\n           (dragover)=\"onDragOver($event)\"\n           (dragleave)=\"onDragLeave($event)\"\n           (drop)=\"onDrop($event)\"\n           [class.is-dragging]=\"isDragging()\">\n        <!-- Header toolbar -->\n        <div class=\"attachments-header\">\n          <span class=\"attachments-count\">{{ attachedFiles().length }} file{{ attachedFiles().length > 1 ? 's' : '' }} attached</span>\n          <div class=\"attachments-actions\">\n            <button mat-icon-button\n                    class=\"add-more-btn\"\n                    (click)=\"anyInput.click()\"\n                    [attr.aria-label]=\"'chat.addMoreFiles' | translate\"\n                    [matTooltip]=\"'chat.addMoreFiles' | translate\">\n              <mat-icon>add</mat-icon>\n            </button>\n            <button mat-icon-button\n                    class=\"clear-all-btn\"\n                    (click)=\"clearAllFiles()\"\n                    [attr.aria-label]=\"'actions.clearAll' | translate\"\n                    [matTooltip]=\"'actions.clearAll' | translate\">\n              <mat-icon>delete_sweep</mat-icon>\n            </button>\n          </div>\n        </div>\n\n        <!-- File list -->\n        <div class=\"attached-files-list\">\n          @for (file of attachedFiles(); track file.name) {\n            <div class=\"file-row\">\n              <!-- Icon or Thumbnail -->\n              <div class=\"file-icon-wrapper\">\n                @if (file.type.startsWith('image/')) {\n                  <img [src]=\"file.preview\" alt=\"preview\" class=\"file-thumb-small\">\n                } @else {\n                  <mat-icon class=\"file-type-icon-small\">{{ getFileIcon(file.type) }}</mat-icon>\n                }\n              </div>\n\n              <!-- File name (truncated with tooltip for full name) -->\n              <span class=\"file-name-text\" [matTooltip]=\"file.name\">{{ file.name }}</span>\n\n              <!-- File size -->\n              <span class=\"file-size-text\">{{ formatFileSize(file.size) }}</span>\n\n              <!-- Remove button -->\n              <button mat-icon-button\n                      class=\"file-remove-btn-small\"\n                      (click)=\"removeFile(file)\"\n                      [attr.aria-label]=\"('actions.remove' | translate) + ' ' + file.name\"\n                      [matTooltip]=\"'actions.remove' | translate\">\n                <mat-icon>close</mat-icon>\n              </button>\n            </div>\n          }\n        </div>\n\n        <!-- Drop overlay for adding more files -->\n        @if (isDragging()) {\n          <div class=\"attachments-drop-overlay\">\n            <mat-icon>add_circle</mat-icon>\n            <span>Drop to add more files</span>\n          </div>\n        }\n      </div>\n    }\n\n  </div>\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "attachedFiles",
                    "defaultValue": "signal<{ name: string; type: string; size: number; preview: string; data: string }[]>([])",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2273
                },
                {
                    "name": "authService",
                    "defaultValue": "inject(AuthService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2261
                },
                {
                    "name": "chatService",
                    "defaultValue": "inject(ChatService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2257
                },
                {
                    "name": "chatTextarea",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ElementRef<HTMLTextAreaElement>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2268,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "'chatTextarea'"
                        }
                    ],
                    "modifierKind": [
                        171
                    ]
                },
                {
                    "name": "contentFlagged",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2281
                },
                {
                    "name": "contentSafetyService",
                    "defaultValue": "inject(ContentSafetyService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2262
                },
                {
                    "name": "currentGreetingIndex",
                    "defaultValue": "signal(0)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2352
                },
                {
                    "name": "cursorInterval",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown> | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2358,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "debounceTimer",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown> | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2277,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "dialog",
                    "defaultValue": "inject(MatDialog)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2265,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "editingQueueContent",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2294
                },
                {
                    "name": "editingQueueId",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2293
                },
                {
                    "name": "filteredModels",
                    "defaultValue": "signal(this.modelsService.getSortedModels())",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2362
                },
                {
                    "name": "flaggedLabels",
                    "defaultValue": "signal<string[]>([])",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2282
                },
                {
                    "name": "greetingFading",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2353
                },
                {
                    "name": "greetingInterval",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown> | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2356,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "greetings",
                    "defaultValue": "[\n    { text: 'Hello', lang: 'English', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'Spanish', dir: 'ltr', anim: 'type' },\n    { text: 'Bonjour', lang: 'French', dir: 'ltr', anim: 'type' },\n    { text: '你好', lang: 'Chinese', dir: 'ltr', anim: 'slide' },\n    { text: 'こんにちは', lang: 'Japanese', dir: 'ltr', anim: 'slide' },\n    { text: '안녕하세요', lang: 'Korean', dir: 'ltr', anim: 'slide' },\n    { text: 'مرحبا', lang: 'Arabic', dir: 'rtl', anim: 'type' },\n    { text: 'שלום', lang: 'Hebrew', dir: 'rtl', anim: 'type' },\n    { text: 'سلام', lang: 'Persian', dir: 'rtl', anim: 'type' },\n    { text: 'نمستے', lang: 'Urdu', dir: 'rtl', anim: 'type' },\n    { text: 'नमस्ते', lang: 'Hindi', dir: 'ltr', anim: 'slide' },\n    { text: 'Ciao', lang: 'Italian', dir: 'ltr', anim: 'type' },\n    { text: 'Olá', lang: 'Portuguese', dir: 'ltr', anim: 'type' },\n    { text: 'Привет', lang: 'Russian', dir: 'ltr', anim: 'type' },\n    { text: 'Hallo', lang: 'German', dir: 'ltr', anim: 'type' },\n    { text: 'Merhaba', lang: 'Turkish', dir: 'ltr', anim: 'type' },\n    { text: 'Xin chào', lang: 'Vietnamese', dir: 'ltr', anim: 'type' },\n    { text: 'สวัสดี', lang: 'Thai', dir: 'ltr', anim: 'slide' },\n    { text: 'Γεια σου', lang: 'Greek', dir: 'ltr', anim: 'type' },\n    { text: 'Cześć', lang: 'Polish', dir: 'ltr', anim: 'type' },\n    { text: 'Hoi', lang: 'Dutch', dir: 'ltr', anim: 'type' },\n    { text: 'Hej', lang: 'Swedish', dir: 'ltr', anim: 'type' },\n    { text: 'Halo', lang: 'Indonesian', dir: 'ltr', anim: 'type' },\n    { text: 'Habari', lang: 'Swahili', dir: 'ltr', anim: 'type' },\n    { text: 'Привіт', lang: 'Ukrainian', dir: 'ltr', anim: 'type' },\n    { text: 'Ahoj', lang: 'Czech', dir: 'ltr', anim: 'type' },\n    { text: 'Kumusta', lang: 'Filipino', dir: 'ltr', anim: 'type' },\n    { text: 'স্বাগতম', lang: 'Bengali', dir: 'ltr', anim: 'slide' },\n    { text: 'வணக்கம்', lang: 'Tamil', dir: 'ltr', anim: 'slide' },\n    { text: 'Selamat', lang: 'Malay', dir: 'ltr', anim: 'type' },\n    { text: 'Hei', lang: 'Norwegian', dir: 'ltr', anim: 'type' },\n    { text: 'Hej', lang: 'Danish', dir: 'ltr', anim: 'type' },\n    { text: 'Moi', lang: 'Finnish', dir: 'ltr', anim: 'type' },\n    { text: 'Szia', lang: 'Hungarian', dir: 'ltr', anim: 'type' },\n    { text: 'Salut', lang: 'Romanian', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'Catalan', dir: 'ltr', anim: 'type' },\n    { text: 'Ahoj', lang: 'Slovak', dir: 'ltr', anim: 'type' },\n    { text: 'Bok', lang: 'Croatian', dir: 'ltr', anim: 'type' },\n    { text: 'Здраво', lang: 'Serbian', dir: 'ltr', anim: 'type' },\n    { text: 'Živjo', lang: 'Slovenian', dir: 'ltr', anim: 'type' },\n    { text: 'Sveiki', lang: 'Latvian', dir: 'ltr', anim: 'type' },\n    { text: 'Labas', lang: 'Lithuanian', dir: 'ltr', anim: 'type' },\n    { text: 'Tere', lang: 'Estonian', dir: 'ltr', anim: 'type' },\n    { text: 'Halló', lang: 'Icelandic', dir: 'ltr', anim: 'type' },\n    { text: 'Helo', lang: 'Welsh', dir: 'ltr', anim: 'type' },\n    { text: 'Dia dhuit', lang: 'Irish', dir: 'ltr', anim: 'type' },\n    { text: 'Halò', lang: 'Scottish Gaelic', dir: 'ltr', anim: 'type' },\n    { text: 'Kia ora', lang: 'Māori', dir: 'ltr', anim: 'type' },\n    { text: 'Aloha', lang: 'Hawaiian', dir: 'ltr', anim: 'type' },\n    { text: 'Talofa', lang: 'Samoan', dir: 'ltr', anim: 'type' },\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2300
                },
                {
                    "name": "inputFocused",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2271
                },
                {
                    "name": "isDragging",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2272
                },
                {
                    "name": "isPulsing",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2297
                },
                {
                    "name": "maxAttachments",
                    "defaultValue": "CHAT_CONFIG.maxAttachments",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2285
                },
                {
                    "name": "maxFileSizeBytes",
                    "defaultValue": "CHAT_CONFIG.maxFileSizeBytes",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2286
                },
                {
                    "name": "messagesContainer",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ElementRef",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2267,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "'messagesContainer'"
                        }
                    ],
                    "modifierKind": [
                        171
                    ]
                },
                {
                    "name": "modelSearchQuery",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2361
                },
                {
                    "name": "modelsService",
                    "defaultValue": "inject(ModelsService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2258
                },
                {
                    "name": "preferencesService",
                    "defaultValue": "inject(PreferencesService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2263
                },
                {
                    "name": "queueExpanded",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2292
                },
                {
                    "name": "quickActions",
                    "defaultValue": "[\n    { labelKey: 'quickActions.createImage', prompt: 'Create an image of', icon: 'image', color: '#EA4335' },\n    { labelKey: 'quickActions.writeAnything', prompt: 'Write a poem about', icon: 'edit_note', color: '#4285F4' },\n    { labelKey: 'quickActions.helpMeLearn', prompt: 'Explain in simple terms:', icon: 'school', color: '#34A853' },\n    { labelKey: 'quickActions.createVideo', prompt: 'Create a video about', icon: 'videocam', color: '#FBBC04' },\n  ]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2364
                },
                {
                    "name": "safetyDebounceTimer",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown> | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2278,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "showCursor",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2355
                },
                {
                    "name": "showSendButton",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2276
                },
                {
                    "name": "snackBar",
                    "defaultValue": "inject(MatSnackBar)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2264,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "speechService",
                    "defaultValue": "inject(SpeechService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2259
                },
                {
                    "name": "themeService",
                    "defaultValue": "inject(ThemeService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2260
                },
                {
                    "name": "typewriterText",
                    "defaultValue": "signal('')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2354
                },
                {
                    "name": "typewriterTimeout",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown> | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2357,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "userMessage",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 2270
                }
            ],
            "methodsClass": [
                {
                    "name": "cancelQueueEdit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2704,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "clearAllFiles",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2874,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nClear all attached files.\n",
                    "description": "<p>Clear all attached files.</p>\n"
                },
                {
                    "name": "clearInput",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2681,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "clearModelSearch",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2521,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "clearPreferences",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2784,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "copyMessage",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2743,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "eraseGreeting",
                    "args": [
                        {
                            "name": "callback",
                            "type": "function",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": []
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2488,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "callback",
                            "type": "function",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [],
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "filterModels",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2517,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "focusChatInput",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2420,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nFocus the chat textarea input",
                    "description": "<p>Focus the chat textarea input</p>\n"
                },
                {
                    "name": "focusInput",
                    "args": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2552,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "formatFileSize",
                    "args": [
                        {
                            "name": "bytes",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 2888,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nFormat file size to human-readable string.\n",
                    "description": "<p>Format file size to human-readable string.</p>\n",
                    "jsdoctags": [
                        {
                            "name": "bytes",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getFileIcon",
                    "args": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 2881,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nGet Material Icon name for a MIME type.\n",
                    "description": "<p>Get Material Icon name for a MIME type.</p>\n",
                    "jsdoctags": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getSafetyTooltip",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 2772,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getShortModelName",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 2530,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getStreamingTooltip",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 2763,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngAfterViewInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2414,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2402,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onDragLeave",
                    "args": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2799,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onDragOver",
                    "args": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2793,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onDrop",
                    "args": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2805,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onEnterKey",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2537,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onFileSelected",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2816,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onInputChange",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2571,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nClear content flagging when user edits their message.\nAlso debounce the send button visibility for smooth animation.\nReal-time content safety is debounced (500ms) to avoid excessive API calls.\n",
                    "description": "<p>Clear content flagging when user edits their message.\nAlso debounce the send button visibility for smooth animation.\nReal-time content safety is debounced (500ms) to avoid excessive API calls.</p>\n"
                },
                {
                    "name": "onModelMenuOpened",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2512,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onQueueDrop",
                    "args": [
                        {
                            "name": "event",
                            "type": "CdkDragDrop<unknown[]>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2709,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "CdkDragDrop<unknown[]>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "openGoogleDrive",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2714,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "processFiles",
                    "args": [
                        {
                            "name": "files",
                            "type": "File[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2824,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "files",
                            "type": "File[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "removeFile",
                    "args": [
                        {
                            "name": "file",
                            "type": "literal type",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2865,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "file",
                            "type": "literal type",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "saveQueueEdit",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2697,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "selectModel",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2526,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "sendMessage",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 2617,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "sendQuickAction",
                    "args": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2687,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "showErrorDetails",
                    "args": [
                        {
                            "name": "details",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2749,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "details",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "speakMessage",
                    "args": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2735,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "text",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "startEditQueue",
                    "args": [
                        {
                            "name": "item",
                            "type": "literal type",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2692,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "item",
                            "type": "literal type",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "startGreetingCarousel",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2429,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "toggleStreaming",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2757,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "toggleVoiceInput",
                    "args": [],
                    "optional": false,
                    "returnType": "Promise<void>",
                    "typeParameters": [],
                    "line": 2719,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        134
                    ]
                },
                {
                    "name": "typeGreeting",
                    "args": [
                        {
                            "name": "greetingText",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'"
                        },
                        {
                            "name": "dir",
                            "type": "\"ltr\" | \"rtl\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'ltr'"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2456,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "greetingText",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "dir",
                            "type": "\"ltr\" | \"rtl\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'ltr'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "useQuickAction",
                    "args": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 2562,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "prompt",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "DragDropModule",
                    "type": "module"
                },
                {
                    "name": "MatCardModule",
                    "type": "module"
                },
                {
                    "name": "MatInputModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatSelectModule",
                    "type": "module"
                },
                {
                    "name": "MatProgressSpinnerModule",
                    "type": "module"
                },
                {
                    "name": "MatChipsModule",
                    "type": "module"
                },
                {
                    "name": "MatTooltipModule",
                    "type": "module"
                },
                {
                    "name": "MatMenuModule",
                    "type": "module"
                },
                {
                    "name": "MatRippleModule",
                    "type": "module"
                },
                {
                    "name": "MatSnackBarModule",
                    "type": "module"
                },
                {
                    "name": "MatDividerModule",
                    "type": "module"
                },
                {
                    "name": "MatDialogModule",
                    "type": "module"
                },
                {
                    "name": "SafeMarkdownPipe",
                    "type": "pipe"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                }
            ],
            "description": "<p>Main chat interface component for Genkit Chat.</p>\n<p>This is the legacy monolithic component. For new development, prefer using\nthe refactored components from <code>./components/</code>:</p>\n<p>Component Architecture::</p>\n<b>Example :</b><div><pre class=\"line-numbers\"><code class=\"language-none\">ChatComponent (this file - legacy container)\n│\n└── Refactored Components (./components/)\n    ├── MessageListComponent      - Message display with markdown\n    ├── WelcomeScreenComponent    - Greeting animation, quick actions\n    ├── PromptQueueComponent      - Queue with drag-and-drop\n    ├── ChatInputComponent        - Input, attachments, voice, settings\n    │   └── [slot: modelSelector]\n    └── ModelSelectorComponent    - Searchable model dropdown</code></pre></div><p>Migration Path:</p>\n<ol>\n<li>Import components from &#39;./components&#39;</li>\n<li>Replace template sections with component usages</li>\n<li>Wire up inputs/outputs to existing services</li>\n<li>Remove redundant code from this file</li>\n</ol>\n<p>Example using new components::</p>\n<b>Example :</b><div><pre class=\"line-numbers\"><code class=\"language-none\">&lt;!-- Message list --&gt;\n&lt;app-message-list\n  [messages]=&quot;chatService.messages()&quot;\n  [isLoading]=&quot;chatService.isLoading()&quot;\n  [markdownMode]=&quot;chatService.markdownMode()&quot;\n  (copy)=&quot;copyMessage($event)&quot;\n  (speak)=&quot;speakMessage($event)&quot; /&gt;\n\n&lt;!-- Welcome screen (when no messages) --&gt;\n&#64;if (chatService.messages().length === 0) {\n  &lt;app-welcome-screen\n    [greetings]=&quot;greetings&quot;\n    [quickActions]=&quot;quickActions&quot;\n    (actionSelected)=&quot;useQuickAction($event)&quot; /&gt;\n}\n\n&lt;!-- Input area --&gt;\n&lt;app-chat-input\n  [streamingEnabled]=&quot;chatService.streamingMode()&quot;\n  [markdownEnabled]=&quot;chatService.markdownMode()&quot;\n  [safetyEnabled]=&quot;contentSafetyService.enabled()&quot;\n  (send)=&quot;handleSend($event)&quot;&gt;\n  &lt;app-model-selector modelSelector\n    [selectedModel]=&quot;modelsService.selectedModel()&quot;\n    [providers]=&quot;modelsService.providers()&quot;\n    (modelSelected)=&quot;modelsService.setSelectedModel($event)&quot; /&gt;\n&lt;/app-chat-input&gt;</code></pre></div><p>See ./components/index.ts for all available components</p>\n",
            "rawdescription": "\n\nMain chat interface component for Genkit Chat.\n\nThis is the legacy monolithic component. For new development, prefer using\nthe refactored components from `./components/`:\n\nComponent Architecture::\n\n    ChatComponent (this file - legacy container)\n    │\n    └── Refactored Components (./components/)\n        ├── MessageListComponent      - Message display with markdown\n        ├── WelcomeScreenComponent    - Greeting animation, quick actions\n        ├── PromptQueueComponent      - Queue with drag-and-drop\n        ├── ChatInputComponent        - Input, attachments, voice, settings\n        │   └── [slot: modelSelector]\n        └── ModelSelectorComponent    - Searchable model dropdown\n\nMigration Path:\n1. Import components from './components'\n2. Replace template sections with component usages\n3. Wire up inputs/outputs to existing services\n4. Remove redundant code from this file\n\nExample using new components::\n\n    <!-- Message list -->\n    <app-message-list\n      [messages]=\"chatService.messages()\"\n      [isLoading]=\"chatService.isLoading()\"\n      [markdownMode]=\"chatService.markdownMode()\"\n      (copy)=\"copyMessage($event)\"\n      (speak)=\"speakMessage($event)\" />\n\n    <!-- Welcome screen (when no messages) -->\n    @if (chatService.messages().length === 0) {\n      <app-welcome-screen\n        [greetings]=\"greetings\"\n        [quickActions]=\"quickActions\"\n        (actionSelected)=\"useQuickAction($event)\" />\n    }\n\n    <!-- Input area -->\n    <app-chat-input\n      [streamingEnabled]=\"chatService.streamingMode()\"\n      [markdownEnabled]=\"chatService.markdownMode()\"\n      [safetyEnabled]=\"contentSafetyService.enabled()\"\n      (send)=\"handleSend($event)\">\n      <app-model-selector modelSelector\n        [selectedModel]=\"modelsService.selectedModel()\"\n        [providers]=\"modelsService.providers()\"\n        (modelSelected)=\"modelsService.setSelectedModel($event)\" />\n    </app-chat-input>\n\nSee ./components/index.ts for all available components\n",
            "type": "component",
            "sourceCode": "import { Component, inject, signal, effect, ElementRef, ViewChild, OnDestroy, AfterViewInit } from '@angular/core';\nimport { trigger, transition, style, animate } from '@angular/animations';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { CdkDragDrop, DragDropModule, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatRippleModule } from '@angular/material/core';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { ChatService, Message } from '../../core/services/chat.service';\nimport { ModelsService } from '../../core/services/models.service';\nimport { SpeechService } from '../../core/services/speech.service';\nimport { ThemeService } from '../../core/services/theme.service';\nimport { AuthService } from '../../core/services/auth.service';\nimport { ContentSafetyService } from '../../core/services/content-safety.service';\nimport { PreferencesService } from '../../core/services/preferences.service';\nimport { ErrorDetailsDialogComponent } from '../../shared/error-details-dialog/error-details-dialog.component';\nimport { SafeMarkdownPipe } from '../../shared/pipes/safe-markdown.pipe';\nimport { CHAT_CONFIG, getMimeTypeIcon } from '../../core/config/chat.config';\nimport { TranslateModule } from '@ngx-translate/core';\n\n\n/**\n * Main chat interface component for Genkit Chat.\n * \n * This is the legacy monolithic component. For new development, prefer using\n * the refactored components from `./components/`:\n * \n * Component Architecture::\n * \n *     ChatComponent (this file - legacy container)\n *     │\n *     └── Refactored Components (./components/)\n *         ├── MessageListComponent      - Message display with markdown\n *         ├── WelcomeScreenComponent    - Greeting animation, quick actions  \n *         ├── PromptQueueComponent      - Queue with drag-and-drop\n *         ├── ChatInputComponent        - Input, attachments, voice, settings\n *         │   └── [slot: modelSelector]\n *         └── ModelSelectorComponent    - Searchable model dropdown\n * \n * Migration Path:\n * 1. Import components from './components'\n * 2. Replace template sections with component usages\n * 3. Wire up inputs/outputs to existing services\n * 4. Remove redundant code from this file\n * \n * Example using new components::\n * \n *     <!-- Message list -->\n *     <app-message-list \n *       [messages]=\"chatService.messages()\"\n *       [isLoading]=\"chatService.isLoading()\"\n *       [markdownMode]=\"chatService.markdownMode()\"\n *       (copy)=\"copyMessage($event)\"\n *       (speak)=\"speakMessage($event)\" />\n *     \n *     <!-- Welcome screen (when no messages) -->\n *     @if (chatService.messages().length === 0) {\n *       <app-welcome-screen\n *         [greetings]=\"greetings\"\n *         [quickActions]=\"quickActions\"\n *         (actionSelected)=\"useQuickAction($event)\" />\n *     }\n *     \n *     <!-- Input area -->\n *     <app-chat-input\n *       [streamingEnabled]=\"chatService.streamingMode()\"\n *       [markdownEnabled]=\"chatService.markdownMode()\"\n *       [safetyEnabled]=\"contentSafetyService.enabled()\"\n *       (send)=\"handleSend($event)\">\n *       <app-model-selector modelSelector\n *         [selectedModel]=\"modelsService.selectedModel()\"\n *         [providers]=\"modelsService.providers()\"\n *         (modelSelected)=\"modelsService.setSelectedModel($event)\" />\n *     </app-chat-input>\n * \n * @see ./components/index.ts for all available components\n */\n@Component({\n  selector: 'app-chat',\n  imports: [\n    CommonModule,\n    FormsModule,\n    DragDropModule,\n    MatCardModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSelectModule,\n    MatProgressSpinnerModule,\n    MatChipsModule,\n    MatTooltipModule,\n    MatMenuModule,\n    MatRippleModule,\n    MatSnackBarModule,\n    MatDividerModule,\n    MatDialogModule,\n    SafeMarkdownPipe,\n    TranslateModule,\n  ],\n  animations: [\n    trigger('slideIn', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateY(10px)' }),\n        animate('200ms ease-out', style({ opacity: 1, transform: 'translateY(0)' }))\n      ]),\n      transition(':leave', [\n        animate('150ms ease-in', style({ opacity: 0, transform: 'translateY(-10px)' }))\n      ])\n    ]),\n    // Slide animation for mic/send button transition - slide left\n    trigger('slideButton', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateX(10px)' }),\n        animate('150ms ease-out', style({ opacity: 1, transform: 'translateX(0)' }))\n      ]),\n      transition(':leave', [\n        animate('100ms ease-in', style({ opacity: 0, transform: 'translateX(-10px)' }))\n      ])\n    ])\n  ],\n  template: `\n    <div class=\"chat-container\" \n         [class.welcome-mode]=\"chatService.messages().length === 0\"\n         [class.has-messages]=\"chatService.messages().length > 0\"\n         (dragover)=\"onDragOver($event)\" \n         (dragleave)=\"onDragLeave($event)\"\n         (drop)=\"onDrop($event)\">\n      \n      <!-- Drag zone covers entire container to detect drags, but overlay shows in input box -->\n      \n      <!-- Messages -->\n      <div class=\"messages-container\" #messagesContainer>\n        @for (message of chatService.messages(); track message.timestamp; let i = $index) {\n          <div class=\"message-row animate-fade-in\" \n               [class.user-row]=\"message.role === 'user'\" \n               [class.assistant-row]=\"message.role === 'assistant'\"\n               [style.animation-delay]=\"i * 30 + 'ms'\">\n            \n            <!-- Assistant Avatar -->\n            @if (message.role === 'assistant') {\n              <div class=\"message-avatar\">\n                <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"avatar-logo\">\n              </div>\n            }\n            \n            <div class=\"message-content\" [class.user-message]=\"message.role === 'user'\" [class.error-message]=\"message.isError\">\n              @if (message.role === 'assistant' && chatService.markdownMode()) {\n                <div class=\"message-text markdown-content\" [innerHTML]=\"message.content | safeMarkdown\"></div>\n              } @else {\n                <div class=\"message-text\">{{ message.content }}</div>\n              }\n              \n              @if (message.isError && message.errorDetails) {\n                <button mat-stroked-button class=\"error-details-btn\" (click)=\"showErrorDetails(message.errorDetails)\">\n                  <mat-icon>info_outline</mat-icon>\n                  View Details\n                </button>\n              }\n              \n              @if (message.role === 'assistant') {\n                <div class=\"message-actions\">\n                  <button mat-icon-button [matTooltip]=\"'actions.copy' | translate\" (click)=\"copyMessage(message.content)\">\n                    <mat-icon>content_copy</mat-icon>\n                  </button>\n                  <button mat-icon-button [matTooltip]=\"'actions.readAloud' | translate\" (click)=\"speakMessage(message.content)\">\n                    <mat-icon>{{ speechService.isSpeaking() ? 'stop' : 'volume_up' }}</mat-icon>\n                  </button>\n                  <button mat-icon-button [matTooltip]=\"'actions.goodResponse' | translate\">\n                    <mat-icon>thumb_up</mat-icon>\n                  </button>\n                  <button mat-icon-button [matTooltip]=\"'actions.badResponse' | translate\">\n                    <mat-icon>thumb_down</mat-icon>\n                  </button>\n                  <button mat-icon-button [matMenuTriggerFor]=\"moreMenu\" [matTooltip]=\"'actions.more' | translate\">\n                    <mat-icon>more_vert</mat-icon>\n                  </button>\n                  <mat-menu #moreMenu=\"matMenu\">\n                    <button mat-menu-item (click)=\"copyMessage(message.content)\">\n                      <mat-icon>content_copy</mat-icon>\n                      <span>Copy</span>\n                    </button>\n                    <button mat-menu-item>\n                      <mat-icon>refresh</mat-icon>\n                      <span>Regenerate</span>\n                    </button>\n                    <button mat-menu-item>\n                      <mat-icon>share</mat-icon>\n                      <span>Share</span>\n                    </button>\n                    <mat-divider></mat-divider>\n                    <button mat-menu-item>\n                      <mat-icon>flag</mat-icon>\n                      <span>Report issue</span>\n                    </button>\n                  </mat-menu>\n                </div>\n              }\n              \n              @if (message.model) {\n                <div class=\"message-model\">\n                  <mat-icon>smart_toy</mat-icon>\n                  {{ message.model }}\n                </div>\n              }\n            </div>\n          </div>\n        }\n\n        <!-- Loading State -->\n        @if (chatService.isLoading()) {\n          <div class=\"message-row assistant-row animate-fade-in\">\n            <div class=\"message-avatar\">\n              <img src=\"genkit-logo.png\" alt=\"Genkit\" class=\"avatar-logo loading\">\n            </div>\n            <div class=\"message-content\">\n              <div class=\"typing-indicator\">\n                <span></span>\n                <span></span>\n                <span></span>\n              </div>\n            </div>\n          </div>\n        }\n      </div>\n\n      <!-- Input Section - Gemini Style -->\n      <div class=\"input-section\">\n        <!-- Welcome Content (above chatbox) - hides when responses start streaming -->\n        @if (chatService.messages().length === 0) {\n          <div class=\"welcome-header\">\n            <div class=\"welcome-logo\">\n              <img src=\"genkit-logo.png\" alt=\"Genkit\">\n            </div>\n            <h1 class=\"welcome-title\" \n                [class.rtl]=\"greetings[currentGreetingIndex()].dir === 'rtl'\"\n                [class.slide-in]=\"greetings[currentGreetingIndex()].anim === 'slide'\">\n              <span class=\"typewriter-text\">{{ typewriterText() }}</span><span class=\"cursor\" [class.visible]=\"showCursor()\">|</span>\n            </h1>\n            <p class=\"welcome-subtitle\">{{ 'chat.greetingSubtitle' | translate }}</p>\n          </div>\n          \n          <!-- Quick Action Chips (between greeting and chatbox) -->\n          <div class=\"quick-chips\">\n            @for (action of quickActions; track action.labelKey) {\n              <button mat-stroked-button \n                      class=\"quick-chip\"\n                      (click)=\"useQuickAction(action.prompt)\">\n                <mat-icon class=\"chip-icon\" [style.color]=\"action.color\">{{ action.icon }}</mat-icon>\n                <span>{{ action.labelKey | translate }}</span>\n              </button>\n            }\n          </div>\n        }\n        \n        <!-- Prompt Queue (shows when loading and has queued items) -->\n        @if (chatService.isLoading() && chatService.promptQueue().length > 0) {\n          <div class=\"prompt-queue slide-up\">\n            <div class=\"queue-header\">\n              <div class=\"queue-header-left\" (click)=\"queueExpanded = !queueExpanded\">\n                <mat-icon class=\"expand-icon\" [class.expanded]=\"queueExpanded\">expand_more</mat-icon>\n                <span class=\"queue-count\">{{ chatService.promptQueue().length }} {{ 'queue.queued' | translate }}</span>\n              </div>\n              <div class=\"queue-header-actions\">\n                <button mat-icon-button class=\"send-all-btn\" [matTooltip]=\"'queue.sendAll' | translate\" (click)=\"chatService.sendAllFromQueue(); $event.stopPropagation()\">\n                  <mat-icon>double_arrow</mat-icon>\n                </button>\n                <button mat-icon-button class=\"clear-all-btn\" [matTooltip]=\"'queue.clearAll' | translate\" (click)=\"chatService.clearQueue(); $event.stopPropagation()\">\n                  <mat-icon>clear_all</mat-icon>\n                </button>\n              </div>\n            </div>\n            @if (queueExpanded) {\n              <div class=\"queue-items\" cdkDropList (cdkDropListDropped)=\"onQueueDrop($event)\">\n                @for (item of chatService.promptQueue(); track item.id; let i = $index) {\n                  <div class=\"queue-item\" cdkDrag @slideIn>\n                    <mat-icon class=\"drag-handle\" cdkDragHandle>drag_indicator</mat-icon>\n                    @if (editingQueueId === item.id) {\n                      <input \n                        class=\"queue-edit-input\" \n                        [(ngModel)]=\"editingQueueContent\"\n                        (blur)=\"saveQueueEdit(item.id)\"\n                        (keydown.enter)=\"saveQueueEdit(item.id)\"\n                        (keydown.escape)=\"cancelQueueEdit()\"\n                        #queueEditInput>\n                    } @else {\n                      <span class=\"queue-item-content\">{{ item.content }}</span>\n                    }\n                    <div class=\"queue-item-actions\">\n                      <button mat-icon-button [matTooltip]=\"'queue.sendNow' | translate\" (click)=\"chatService.sendFromQueue(item.id)\">\n                        <mat-icon>send</mat-icon>\n                      </button>\n                      <button mat-icon-button [matTooltip]=\"'actions.edit' | translate\" (click)=\"startEditQueue(item)\">\n                        <mat-icon>edit</mat-icon>\n                      </button>\n                      <button mat-icon-button [matTooltip]=\"'actions.delete' | translate\" (click)=\"chatService.removeFromQueue(item.id)\">\n                        <mat-icon>delete</mat-icon>\n                      </button>\n                    </div>\n                  </div>\n                }\n              </div>\n            }\n          </div>\n        }\n        \n        <div class=\"input-box\" [class.focused]=\"inputFocused\" [class.pulse-send]=\"isPulsing\" [class.is-dragging]=\"isDragging()\" (click)=\"focusInput($event)\">\n          <!-- Drop Zone Overlay (inside input box) -->\n          @if (isDragging()) {\n            <div class=\"drop-zone-overlay\">\n              <mat-icon class=\"drop-icon\">cloud_upload</mat-icon>\n              <span class=\"drop-caption\">Drop files to attach</span>\n            </div>\n          }\n          \n          <textarea class=\"chat-input\" \n                    [class.content-flagged]=\"contentFlagged()\"\n                    [(ngModel)]=\"userMessage\" \n                    [placeholder]=\"'chat.placeholder' | translate\"\n                    [attr.aria-label]=\"'chat.placeholder' | translate\"\n                    (keydown.enter)=\"onEnterKey($event)\"\n                    (focus)=\"inputFocused = true\"\n                    (blur)=\"inputFocused = false\"\n                    (input)=\"onInputChange()\"\n                    [matTooltip]=\"contentFlagged() ? 'Content flagged: ' + flaggedLabels().join(', ') : ''\"\n                    [matTooltipClass]=\"'flagged-content-tooltip'\"\n                    rows=\"1\"\n                    #chatTextarea></textarea>\n\n          @if (userMessage) {\n            <button mat-icon-button class=\"clear-input-btn\" (click)=\"clearInput()\" [attr.aria-label]=\"'chat.clearInput' | translate\" [matTooltip]=\"'chat.clearInput' | translate\">\n              <mat-icon>close</mat-icon>\n            </button>\n          }\n          \n          <!-- Bottom Toolbar -->\n          <div class=\"input-toolbar\">\n            <div class=\"toolbar-left\">\n              <!-- Add/Attach Button -->\n              <button mat-icon-button \n                      class=\"toolbar-btn add-btn\"\n                      [attr.aria-label]=\"'chat.addFiles' | translate\"\n                      [matTooltip]=\"'chat.addFiles' | translate\"\n                      [matMenuTriggerFor]=\"attachMenu\">\n                <mat-icon>add</mat-icon>\n              </button>\n              \n              <mat-menu #attachMenu=\"matMenu\" class=\"attach-menu\">\n                <button mat-menu-item (click)=\"anyInput.click()\">\n                  <mat-icon>upload_file</mat-icon>\n                  <span>{{ 'chat.uploadFiles' | translate }}</span>\n                </button>\n                <button mat-menu-item (click)=\"openGoogleDrive()\" \n                        [disabled]=\"authService.demoMode()\"\n                        [matTooltip]=\"authService.demoMode() ? ('nav.demoUser' | translate) : ''\">\n                  <mat-icon>add_to_drive</mat-icon>\n                  <span>{{ 'chat.googleDrive' | translate }}</span>\n                </button>\n                <button mat-menu-item (click)=\"imageInput.click()\">\n                  <mat-icon>image</mat-icon>\n                  <span>{{ 'attach.photos' | translate }}</span>\n                </button>\n                <mat-divider></mat-divider>\n                <button mat-menu-item (click)=\"audioInput.click()\">\n                  <mat-icon>audio_file</mat-icon>\n                  <span>{{ 'attach.audio' | translate }}</span>\n                </button>\n                <button mat-menu-item (click)=\"videoInput.click()\">\n                  <mat-icon>videocam</mat-icon>\n                  <span>{{ 'attach.video' | translate }}</span>\n                </button>\n                <button mat-menu-item (click)=\"pdfInput.click()\">\n                  <mat-icon>picture_as_pdf</mat-icon>\n                  <span>{{ 'attach.pdf' | translate }}</span>\n                </button>\n                <button mat-menu-item (click)=\"textInput.click()\">\n                  <mat-icon>code</mat-icon>\n                  <span>{{ 'attach.code' | translate }}</span>\n                </button>\n              </mat-menu>\n              \n              <!-- Hidden file inputs -->\n              <input #imageInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"image/*\">\n              <input #videoInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"video/*\">\n              <input #audioInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"audio/*\">\n              <input #pdfInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".pdf\">\n              <input #textInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".txt,.md,.json,.csv,.xml,.yaml,.yml,.py,.ts,.js,.go,.rs,.java\">\n              <input #anyInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple>\n              \n              <!-- Tools Button -->\n              <button mat-button class=\"toolbar-btn tools-btn\">\n                <mat-icon>handyman</mat-icon>\n                <span>{{ 'toolbar.tools' | translate }}</span>\n              </button>\n              \n            </div>\n            \n            <div class=\"toolbar-right\">\n              <!-- Model Selector -->\n              <button mat-button \n                      class=\"model-select-btn\"\n                      [matMenuTriggerFor]=\"modelMenu\"\n                      (menuOpened)=\"onModelMenuOpened()\">\n                <div class=\"model-info\">\n                  <span class=\"model-name\">{{ modelsService.getModelName(modelsService.selectedModel()) }}</span>\n                  <span class=\"provider-name\">{{ modelsService.getProviderName(modelsService.selectedModel()) }}</span>\n                </div>\n                <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n              </button>\n              \n              <mat-menu #modelMenu=\"matMenu\" class=\"model-panel\" xPosition=\"before\">\n                <!-- Search Input -->\n                <div class=\"model-search\" (click)=\"$event.stopPropagation()\">\n                  <mat-icon>search</mat-icon>\n                  <input type=\"text\" \n                         placeholder=\"Search models...\" \n                         [(ngModel)]=\"modelSearchQuery\"\n                         (input)=\"filterModels()\"\n                         (keydown)=\"$event.stopPropagation()\">\n                  @if (modelSearchQuery) {\n                    <button mat-icon-button class=\"clear-search\" (click)=\"clearModelSearch()\">\n                      <mat-icon>close</mat-icon>\n                    </button>\n                  }\n                </div>\n                \n                <!-- Recent Models -->\n                @if (!modelSearchQuery && modelsService.getRecentModels().length > 0) {\n                  <div class=\"model-group\">\n                    <div class=\"group-header\">Recent</div>\n                    @for (model of modelsService.getRecentModels(); track model.id) {\n                      <button mat-menu-item \n                              class=\"model-item\"\n                              [class.selected]=\"modelsService.selectedModel() === model.id\"\n                              (click)=\"selectModel(model.id)\">\n                        <span class=\"model-name\">{{ model.name }}</span>\n                        <span class=\"model-badge\">{{ modelsService.getProviderName(model.id) }}</span>\n                      </button>\n                    }\n                  </div>\n                  <mat-divider></mat-divider>\n                }\n                \n                <!-- Models Grouped by Provider -->\n                <div class=\"model-list\">\n                  @if (modelSearchQuery) {\n                    <div class=\"model-group\">\n                      <div class=\"group-header\">Results</div>\n                      @for (model of filteredModels(); track model.id) {\n                        <button mat-menu-item \n                                class=\"model-item\"\n                                [class.selected]=\"modelsService.selectedModel() === model.id\"\n                                (click)=\"selectModel(model.id)\">\n                          <span class=\"model-name\">{{ model.name }}</span>\n                          <span class=\"model-badge\">{{ modelsService.getProviderName(model.id) }}</span>\n                        </button>\n                      } @empty {\n                        <div class=\"no-results\">No models found</div>\n                      }\n                    </div>\n                  } @else {\n                    @for (provider of modelsService.providers(); track provider.id) {\n                      <div class=\"model-group\">\n                        <div class=\"group-header\">{{ provider.name }}</div>\n                        @for (model of modelsService.getModelsByProvider(provider.id); track model.id) {\n                          <button mat-menu-item \n                                  class=\"model-item\"\n                                  [class.selected]=\"modelsService.selectedModel() === model.id\"\n                                  (click)=\"selectModel(model.id)\">\n                            <span class=\"model-name\">{{ model.name }}</span>\n                          </button>\n                        }\n                      </div>\n                    }\n                  }\n                </div>\n              </mat-menu>\n              \n              <!-- Settings Dropdown (icon only) - between model selector and mic -->\n              <button mat-icon-button \n                      class=\"toolbar-btn settings-btn\"\n                      [matMenuTriggerFor]=\"settingsMenu\"\n                      [attr.aria-label]=\"'toolbar.settings' | translate\"\n                      [matTooltip]=\"'toolbar.settings' | translate\">\n                <mat-icon>tune</mat-icon>\n              </button>\n              <mat-menu #settingsMenu=\"matMenu\" class=\"settings-menu\">\n                <!-- Streaming Toggle -->\n                <button mat-menu-item \n                        [disabled]=\"!modelsService.supportsStreaming()\"\n                        (click)=\"toggleStreaming(); $event.stopPropagation()\">\n                  <mat-icon>{{ chatService.streamingMode() && modelsService.supportsStreaming() ? 'stream' : 'pause_circle' }}</mat-icon>\n                  <span>{{ 'toolbar.stream' | translate }}</span>\n                  <mat-icon class=\"toggle-indicator\" \n                            [class.active]=\"chatService.streamingMode() && modelsService.supportsStreaming()\">\n                    {{ chatService.streamingMode() && modelsService.supportsStreaming() ? 'check_circle' : 'radio_button_unchecked' }}\n                  </mat-icon>\n                </button>\n                \n                <!-- Markdown Toggle -->\n                <button mat-menu-item (click)=\"chatService.toggleMarkdownMode(); $event.stopPropagation()\">\n                  <mat-icon>{{ chatService.markdownMode() ? 'code' : 'code_off' }}</mat-icon>\n                  <span>{{ 'toolbar.markdown' | translate }}</span>\n                  <mat-icon class=\"toggle-indicator\" [class.active]=\"chatService.markdownMode()\">\n                    {{ chatService.markdownMode() ? 'check_circle' : 'radio_button_unchecked' }}\n                  </mat-icon>\n                </button>\n                \n                <!-- Content Safety Toggle -->\n                <button mat-menu-item (click)=\"contentSafetyService.toggle(); $event.stopPropagation()\">\n                  <mat-icon>{{ contentSafetyService.enabled() ? 'shield' : 'shield_outlined' }}</mat-icon>\n                  <span>{{ 'toolbar.safe' | translate }}</span>\n                  <mat-icon class=\"toggle-indicator\" \n                            [class.active]=\"contentSafetyService.enabled()\"\n                            [class.loading]=\"contentSafetyService.loading()\">\n                    {{ contentSafetyService.enabled() ? 'check_circle' : 'radio_button_unchecked' }}\n                  </mat-icon>\n                </button>\n                \n                <mat-divider></mat-divider>\n                \n                <!-- Clear Preferences -->\n                <button mat-menu-item (click)=\"clearPreferences()\">\n                  <mat-icon>delete_outline</mat-icon>\n                  <span>{{ 'settings.clearPreferences' | translate }}</span>\n                </button>\n              </mat-menu>\n              \n              <!-- Send Button (when text is entered) or Voice Input -->\n              <div class=\"action-btn-container\">\n                @if (showSendButton()) {\n                  <button mat-icon-button \n                          class=\"toolbar-btn send-btn\"\n                          @slideButton\n                          [attr.aria-label]=\"'chat.sendMessage' | translate\"\n                          [matTooltip]=\"'chat.sendMessage' | translate\"\n                          (click)=\"sendMessage()\">\n                    <mat-icon>send</mat-icon>\n                  </button>\n                } @else if (speechService.isSupported()) {\n                  <button mat-icon-button \n                          class=\"toolbar-btn mic-btn\"\n                          @slideButton\n                          [class.recording]=\"speechService.isListening()\"\n                          [attr.aria-label]=\"speechService.isListening() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                          [matTooltip]=\"speechService.isListening() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                          (click)=\"toggleVoiceInput()\">\n                    <mat-icon>{{ speechService.isListening() ? 'mic_off' : 'mic' }}</mat-icon>\n                  </button>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Attached Files List (below chatbox) - also acts as dropzone -->\n        @if (attachedFiles().length > 0) {\n          <div class=\"attached-files-container\"\n               (dragover)=\"onDragOver($event)\" \n               (dragleave)=\"onDragLeave($event)\"\n               (drop)=\"onDrop($event)\"\n               [class.is-dragging]=\"isDragging()\">\n            <!-- Header toolbar -->\n            <div class=\"attachments-header\">\n              <span class=\"attachments-count\">{{ attachedFiles().length }} file{{ attachedFiles().length > 1 ? 's' : '' }} attached</span>\n              <div class=\"attachments-actions\">\n                <button mat-icon-button \n                        class=\"add-more-btn\"\n                        (click)=\"anyInput.click()\"\n                        [attr.aria-label]=\"'chat.addMoreFiles' | translate\"\n                        [matTooltip]=\"'chat.addMoreFiles' | translate\">\n                  <mat-icon>add</mat-icon>\n                </button>\n                <button mat-icon-button \n                        class=\"clear-all-btn\"\n                        (click)=\"clearAllFiles()\"\n                        [attr.aria-label]=\"'actions.clearAll' | translate\"\n                        [matTooltip]=\"'actions.clearAll' | translate\">\n                  <mat-icon>delete_sweep</mat-icon>\n                </button>\n              </div>\n            </div>\n            \n            <!-- File list -->\n            <div class=\"attached-files-list\">\n              @for (file of attachedFiles(); track file.name) {\n                <div class=\"file-row\">\n                  <!-- Icon or Thumbnail -->\n                  <div class=\"file-icon-wrapper\">\n                    @if (file.type.startsWith('image/')) {\n                      <img [src]=\"file.preview\" alt=\"preview\" class=\"file-thumb-small\">\n                    } @else {\n                      <mat-icon class=\"file-type-icon-small\">{{ getFileIcon(file.type) }}</mat-icon>\n                    }\n                  </div>\n                  \n                  <!-- File name (truncated with tooltip for full name) -->\n                  <span class=\"file-name-text\" [matTooltip]=\"file.name\">{{ file.name }}</span>\n                  \n                  <!-- File size -->\n                  <span class=\"file-size-text\">{{ formatFileSize(file.size) }}</span>\n                  \n                  <!-- Remove button -->\n                  <button mat-icon-button \n                          class=\"file-remove-btn-small\" \n                          (click)=\"removeFile(file)\" \n                          [attr.aria-label]=\"('actions.remove' | translate) + ' ' + file.name\"\n                          [matTooltip]=\"'actions.remove' | translate\">\n                    <mat-icon>close</mat-icon>\n                  </button>\n                </div>\n              }\n            </div>\n            \n            <!-- Drop overlay for adding more files -->\n            @if (isDragging()) {\n              <div class=\"attachments-drop-overlay\">\n                <mat-icon>add_circle</mat-icon>\n                <span>Drop to add more files</span>\n              </div>\n            }\n          </div>\n        }\n\n      </div>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .chat-container {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      max-width: 860px;\n      margin: 0 auto;\n      padding: 0 24px;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    /* When in welcome mode (no messages), center content */\n    .chat-container.welcome-mode {\n      justify-content: center;\n    }\n    \n    /* When has messages, use flex layout for scroll */\n    .chat-container.has-messages {\n      justify-content: flex-start;\n    }\n\n    /* Welcome Section */\n    .welcome-section {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      padding: 40px 16px;\n      text-align: center;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n        \n        &.dark {\n          /* filter: invert(1); removed */\n        }\n      }\n    }\n\n    .welcome-title {\n      font-size: 40px;\n      font-weight: 400;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n    }\n\n    .welcome-subtitle {\n      font-size: 16px;\n      color: var(--on-surface-variant);\n      margin: 0 0 40px;\n    }\n\n    .suggestions-grid {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 12px;\n      width: 100%;\n      max-width: 500px;\n    }\n\n    @media (max-width: 500px) {\n      .suggestions-grid {\n        grid-template-columns: 1fr;\n      }\n    }\n\n    .suggestion-card {\n      display: flex;\n      align-items: flex-start;\n      gap: 12px;\n      padding: 16px;\n      background: var(--surface);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      cursor: pointer;\n      text-align: left;\n      transition: all var(--transition-fast);\n      font-family: inherit;\n      \n      &:hover {\n        background: var(--surface-dim);\n        border-color: var(--gemini-blue-light);\n      }\n      \n      &:active {\n        transform: scale(0.98);\n      }\n    }\n\n    .suggestion-icon {\n      color: var(--gemini-blue);\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n    }\n\n    .suggestion-text {\n      flex: 1;\n      font-size: 14px;\n      color: var(--on-surface);\n      line-height: 1.4;\n    }\n\n    /* Messages */\n    .messages-container {\n      flex: 1;\n      min-height: 0; /* Critical for flexbox scrolling */\n      overflow-y: auto;\n      padding: 24px 0;\n      padding-bottom: 120px; /* Large space before input section + queue */\n    }\n\n    .message-row {\n      display: flex;\n      align-items: flex-start;\n      gap: 16px;\n      padding: 16px 0;\n      \n      &.user-row {\n        justify-content: flex-end;\n      }\n    }\n\n    .message-avatar {\n      flex-shrink: 0;\n      width: 28px;\n      height: 28px;\n      width: 28px;\n      height: 28px;\n      margin-top: 0; /* Align with first line text baseline */\n    }\n\n    .avatar-logo {\n      width: 28px;\n      height: auto;\n      \n      &.dark {\n        /* filter: invert(1); removed */\n      }\n      \n      &.loading {\n        animation: pulse 1.2s ease-in-out infinite;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    .message-content {\n      flex: 1;\n      max-width: 720px;\n    }\n\n    .user-message {\n      background: var(--user-bubble-bg);\n      padding: 12px 16px;\n      border-radius: 20px;\n      max-width: fit-content;\n      margin-left: auto;\n    }\n\n    .message-text {\n      font-size: 15px;\n      line-height: 1.7;\n      color: var(--on-surface);\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n    \n    /* Markdown content styling */\n    .markdown-content {\n      white-space: normal;\n      \n      p {\n        margin: 0 0 0.75em;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n      \n      h1, h2, h3, h4, h5, h6 {\n        margin: 1em 0 0.5em;\n        font-weight: 600;\n        line-height: 1.3;\n        &:first-child {\n          margin-top: 0;\n        }\n      }\n      \n      h1 { font-size: 1.4em; }\n      h2 { font-size: 1.25em; }\n      h3 { font-size: 1.1em; }\n      h4, h5, h6 { font-size: 1em; }\n      \n      code {\n        font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', monospace;\n        font-size: 0.85em;\n        padding: 2px 6px;\n        background: var(--surface-variant);\n        border-radius: 4px;\n      }\n      \n      pre {\n        margin: 0.75em 0;\n        padding: 12px 16px;\n        background: var(--surface-variant);\n        border-radius: 8px;\n        overflow-x: auto;\n        \n        code {\n          padding: 0;\n          background: none;\n          font-size: 0.85em;\n        }\n      }\n      \n      ul, ol {\n        margin: 0.5em 0;\n        padding-left: 1.5em;\n      }\n      \n      li {\n        margin: 0.25em 0;\n      }\n      \n      blockquote {\n        margin: 0.75em 0;\n        padding: 8px 16px;\n        border-left: 3px solid var(--gemini-blue);\n        background: var(--surface-variant);\n        font-style: italic;\n      }\n      \n      a {\n        color: var(--gemini-blue);\n        text-decoration: none;\n        &:hover {\n          text-decoration: underline;\n        }\n      }\n      \n      table {\n        border-collapse: collapse;\n        margin: 0.75em 0;\n        width: 100%;\n      }\n      \n      th, td {\n        padding: 8px 12px;\n        border: 1px solid var(--outline);\n        text-align: left;\n      }\n      \n      th {\n        background: var(--surface-variant);\n        font-weight: 600;\n      }\n      \n      hr {\n        border: none;\n        border-top: 1px solid var(--outline);\n        margin: 1em 0;\n      }\n      \n      img {\n        max-width: 100%;\n        height: auto;\n        border-radius: 8px;\n      }\n      \n      /* Mermaid diagram styling */\n      .mermaid-diagram {\n        margin: 1em 0;\n        padding: 16px;\n        background: var(--surface-variant);\n        border-radius: 12px;\n        overflow-x: auto;\n        \n        svg {\n          max-width: 100%;\n          height: auto;\n        }\n      }\n      \n      .mermaid-error {\n        padding: 12px 16px;\n        background: rgba(217, 48, 37, 0.1);\n        border: 1px solid rgba(217, 48, 37, 0.3);\n        border-radius: 8px;\n        color: #d93025;\n        font-family: monospace;\n        font-size: 0.9em;\n      }\n      \n      /* Math equation styling */\n      .math-inline {\n        font-family: 'Cambria Math', 'Times New Roman', serif;\n        font-style: italic;\n        padding: 0 2px;\n      }\n      \n      .math-display {\n        display: block;\n        text-align: center;\n        font-family: 'Cambria Math', 'Times New Roman', serif;\n        font-size: 1.2em;\n        margin: 1em 0;\n        padding: 16px;\n        background: var(--surface-variant);\n        border-radius: 8px;\n      }\n      \n      .math-frac {\n        display: inline-flex;\n        flex-direction: column;\n        align-items: center;\n        vertical-align: middle;\n        margin: 0 4px;\n        \n        .math-num {\n          border-bottom: 1px solid currentColor;\n          padding-bottom: 2px;\n        }\n        \n        .math-denom {\n          padding-top: 2px;\n        }\n      }\n    }\n\n    .user-message .message-text {\n      color: var(--user-bubble-text);\n    }\n\n    /* Error message styling */\n    .error-message {\n      .message-text {\n        color: #d93025;\n      }\n    }\n    \n    .error-details-btn {\n      margin-top: 8px;\n      font-size: 12px;\n      color: #d93025;\n      border-color: #d93025;\n      padding: 4px 12px;\n      height: auto;\n      line-height: 1.4;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        margin-right: 4px;\n      }\n      \n      &:hover {\n        background: rgba(217, 48, 37, 0.08);\n      }\n    }\n\n    .message-actions {\n      display: flex;\n      gap: 2px;\n      margin-top: 8px;\n      opacity: 0;\n      transition: opacity var(--transition-fast);\n      \n      .message-row:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-muted);\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n      }\n    }\n\n    .message-model {\n      display: inline-flex;\n      align-items: center;\n      gap: 4px;\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 8px;\n      \n      mat-icon {\n        font-size: 14px;\n        width: 14px;\n        height: 14px;\n      }\n    }\n\n    /* Typing Indicator */\n    .typing-indicator {\n      display: flex;\n      gap: 4px;\n      padding: 8px 0;\n      \n      span {\n        width: 8px;\n        height: 8px;\n        background: var(--on-surface-muted);\n        border-radius: 50%;\n        animation: bounce 1.4s infinite ease-in-out;\n        \n        &:nth-child(1) { animation-delay: -0.32s; }\n        &:nth-child(2) { animation-delay: -0.16s; }\n      }\n    }\n\n    @keyframes bounce {\n      0%, 80%, 100% { \n        transform: scale(0.8);\n        opacity: 0.5;\n      }\n      40% { \n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n\n    /* Attached Files */\n    .attached-files {\n      display: flex;\n      gap: 8px;\n      padding: 12px 0;\n      flex-wrap: wrap;\n    }\n\n    .file-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--surface-container);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-full);\n    }\n\n    .file-thumb {\n      width: 24px;\n      height: 24px;\n      border-radius: 4px;\n      object-fit: cover;\n    }\n\n    .file-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      color: var(--on-surface-variant);\n    }\n\n    .file-name {\n      font-size: 13px;\n      color: var(--on-surface);\n      max-width: 150px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-remove {\n      width: 24px !important;\n      height: 24px !important;\n      margin: -4px -4px -4px 0;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    /* Prompt Queue */\n    .prompt-queue {\n      width: 90%;\n      max-width: 740px;\n      margin: 0 auto 0; /* No bottom margin - chatbox overlays */\n      background: var(--surface-container);\n      border-radius: var(--radius-lg) var(--radius-lg) 0 0; /* Rounded top only */\n      border: 1px solid var(--surface-variant);\n      border-bottom: none; /* Remove bottom border - hidden by chatbox */\n      overflow: hidden;\n      box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08), 0 -2px 8px rgba(0, 0, 0, 0.04);\n      position: relative;\n      z-index: 1; /* Below chatbox */\n      \n      &.slide-up {\n        animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n    }\n    \n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .queue-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 8px 12px 8px 16px;\n      transition: background 0.2s;\n    }\n    \n    .queue-header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      flex: 1;\n      \n      &:hover {\n        opacity: 0.8;\n      }\n    }\n    \n    .queue-header-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .send-all-btn,\n    .clear-all-btn {\n      width: 24px !important;\n      height: 24px !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      padding: 0 !important;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        color: var(--on-surface-variant);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n    \n    .send-all-btn:hover mat-icon {\n      color: var(--gemini-blue);\n    }\n    \n    .clear-all-btn:hover mat-icon {\n      color: var(--error);\n    }\n\n    .expand-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      color: var(--on-surface-variant);\n      transition: transform 0.2s;\n      \n      &.expanded {\n        transform: rotate(180deg);\n      }\n    }\n\n    .queue-count {\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n    }\n\n    .queue-items {\n      border-top: 1px solid var(--surface-variant);\n      max-height: 150px;\n      overflow-y: auto;\n    }\n\n    .queue-item {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 6px 10px;\n      border-bottom: 1px solid var(--surface-variant);\n      background: var(--surface-container);\n      transition: box-shadow 0.2s, transform 0.2s;\n      \n      &:last-child {\n        border-bottom: none;\n      }\n      \n      &.cdk-drag-preview {\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n        border-radius: var(--radius-md);\n      }\n      \n      &.cdk-drag-placeholder {\n        opacity: 0.4;\n      }\n      \n      &.cdk-drag-animating {\n        transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n      }\n    }\n    \n    .drag-handle {\n      cursor: grab;\n      color: var(--on-surface-variant);\n      font-size: 16px;\n      width: 16px;\n      height: 16px;\n      flex-shrink: 0;\n      \n      &:active {\n        cursor: grabbing;\n      }\n    }\n    \n    .cdk-drop-list-dragging .queue-item:not(.cdk-drag-placeholder) {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .queue-item-content {\n      flex: 1;\n      font-size: 12px;\n      color: var(--on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .queue-edit-input {\n      flex: 1;\n      padding: 6px 10px;\n      font-size: 14px;\n      border: 1px solid var(--gemini-blue);\n      border-radius: var(--radius-md);\n      background: var(--surface);\n      color: var(--on-surface);\n      outline: none;\n      \n      &:focus {\n        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);\n      }\n    }\n\n    .queue-item-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n      flex-shrink: 0;\n      \n      button {\n        width: 32px !important;\n        height: 32px !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        padding: 0 !important;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-variant);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n        \n        &:disabled mat-icon {\n          color: var(--outline);\n        }\n      }\n    }\n\n    /* Input Section */\n    .input-section {\n      flex-shrink: 0; /* Don't shrink - stay at bottom */\n      padding: 16px 24px 24px;\n      width: 100%;\n      max-width: 820px;\n      margin: 0 auto;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n      background: var(--surface-dim);\n    }\n    \n    /* Welcome header above chatbox */\n    .welcome-header {\n      text-align: center;\n      margin-bottom: 32px;\n      animation: fadeIn 0.3s ease-out;\n      \n      .welcome-logo {\n        margin-bottom: 24px;\n        \n        img {\n          height: 56px;\n          width: auto;\n          border-radius: 12px;\n        }\n      }\n      \n      .welcome-title {\n        font-size: 52px;\n        font-weight: 400;\n        margin: 0 0 8px;\n        color: var(--on-surface);\n        display: inline-flex;\n        align-items: center;\n        \n        &.rtl {\n          direction: rtl;\n          .typewriter-text {\n            direction: rtl;\n            unicode-bidi: bidi-override;\n          }\n        }\n        \n        &.slide-in {\n          .typewriter-text {\n            animation: slideInFade 0.5s ease-out;\n          }\n        }\n        \n        .typewriter-text {\n          display: inline;\n        }\n        \n        .cursor {\n          opacity: 0;\n          font-weight: 300;\n          color: #9aa0a6;\n          margin-left: 2px;\n          \n          &.visible {\n            opacity: 1;\n          }\n        }\n      }\n      \n      .welcome-subtitle {\n        font-size: 20px;\n        color: var(--on-surface-variant);\n        margin: 0;\n      }\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; transform: translateY(-10px); }\n      to { opacity: 1; transform: translateY(0); }\n    }\n    \n    @keyframes slideInFade {\n      from { \n        opacity: 0; \n        transform: translateY(15px);\n      }\n      to { \n        opacity: 1; \n        transform: translateY(0);\n      }\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; transform: translateY(-10px); }\n      to { opacity: 1; transform: translateY(0); }\n    }\n    \n    @keyframes slideUpType {\n      0% { \n        opacity: 0; \n        transform: translateY(20px);\n        clip-path: inset(0 100% 0 0);\n      }\n      50% {\n        opacity: 1;\n        transform: translateY(0);\n        clip-path: inset(0 50% 0 0);\n      }\n      100% { \n        opacity: 1; \n        transform: translateY(0);\n        clip-path: inset(0 0 0 0);\n      }\n    }\n    \n    /* Centered welcome state - vertically centered */\n    .chat-container.welcome-mode {\n      justify-content: center;\n      align-items: center;\n      \n      .messages-container {\n        display: none;\n      }\n      \n      .input-section {\n        position: absolute;\n        top: 50%;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n        transform: translateY(-50%);\n        max-width: 820px;\n        width: calc(100% - 48px);\n      }\n    }\n    \n    /* After typing starts - slide down to bottom */\n    .chat-container.has-messages {\n      justify-content: flex-start;\n      \n      .messages-container {\n        display: block;\n        flex: 1;\n      }\n      \n      .input-section {\n        position: absolute;\n        bottom: 24px;\n        top: auto;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n        transform: translateY(0);\n      }\n    }\n\n    .input-box {\n      display: flex;\n      flex-direction: column;\n      background: var(--surface);\n      border: 1px solid transparent;\n      border-radius: 28px;\n      padding: 16px 20px;\n      transition: all var(--transition-fast);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 4px 16px rgba(0, 0, 0, 0.04);\n      width: 100%;\n      position: relative;\n      z-index: 2; /* Above queue */\n      \n      &:hover {\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 8px 24px rgba(0, 0, 0, 0.06);\n      }\n      \n      &.focused {\n        border-color: var(--gemini-blue);\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n      \n      &.pulse-send {\n        animation: sendPulse 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      \n      &.is-dragging {\n        border: 2px dashed var(--gemini-blue);\n        background: rgba(66, 133, 244, 0.05);\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.2), 0 8px 32px rgba(66, 133, 244, 0.15);\n      }\n    }\n    \n    body.dark-theme .input-box.is-dragging {\n      background: rgba(138, 180, 248, 0.08);\n    }\n    \n    /* Drop Zone Overlay - absolutely positioned within input-box */\n    .drop-zone-overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(255, 255, 255, 0.95);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      z-index: 10;\n      border-radius: 28px;\n      pointer-events: none;\n    }\n\n    body.dark-theme .drop-zone-overlay {\n      background: rgba(31, 31, 31, 0.95);\n    }\n\n    .drop-icon {\n      font-size: 40px;\n      width: 40px;\n      height: 40px;\n      color: var(--gemini-blue);\n      animation: dropBounce 0.8s ease infinite;\n    }\n    \n    @keyframes dropBounce {\n      0%, 100% { transform: translateY(0); }\n      50% { transform: translateY(-6px); }\n    }\n\n    .drop-caption {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n    }\n    \n    @keyframes sendPulse {\n      0% {\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n      50% {\n        box-shadow: 0 6px 24px rgba(66, 133, 244, 0.4), 0 12px 48px rgba(66, 133, 244, 0.25);\n      }\n      100% {\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n    }\n    \n    .chat-input {\n      width: 100%;\n      border: none;\n      background: transparent;\n      font-size: 18px;\n      font-family: inherit;\n      color: var(--on-surface);\n      outline: none;\n      padding: 4px 0;\n      resize: none;\n      min-height: 24px;\n      max-height: 200px;\n      line-height: 1.5;\n      padding-right: 40px; /* Space for clear button */\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:disabled {\n        opacity: 0.7;\n      }\n      \n      /* Squiggly red underline for flagged content */\n      &.content-flagged {\n        text-decoration: underline wavy var(--error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n        color: var(--error);\n        \n        /* Fallback for browsers that don't support wavy */\n        @supports not (text-decoration-style: wavy) {\n          text-decoration: underline;\n          text-decoration-color: var(--error);\n        }\n      }\n    }\n    \n    /* Tooltip styling for flagged content */\n    ::ng-deep .flagged-content-tooltip {\n      background: var(--error) !important;\n      color: white !important;\n      font-weight: 500;\n    }\n    \n    /* Attached Files Container (wrapper with header and dropzone capability) */\n    .attached-files-container {\n      margin: -8px auto 0;\n      width: 85%;\n      max-width: 700px;\n      background: var(--surface-container);\n      border-radius: 0 0 var(--radius-md) var(--radius-md);\n      border: 1px solid var(--outline-variant);\n      border-top: none;\n      box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15);\n      position: relative;\n      overflow: hidden;\n      transition: border-color 0.2s, box-shadow 0.2s;\n      \n      &.is-dragging {\n        border-color: var(--gemini-blue);\n        box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15), 0 0 0 2px var(--gemini-blue-light);\n      }\n    }\n    \n    /* Attachments header toolbar */\n    .attachments-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 12px 12px 6px 16px;\n      border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n      box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15);\n      background: var(--surface-container);\n    }\n    \n    .attachments-count {\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n    }\n    \n    .attachments-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .add-more-btn,\n    .clear-all-btn {\n      width: 28px !important;\n      height: 28px !important;\n      padding: 0 !important;\n      \n      .mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        color: var(--on-surface-variant);\n      }\n      \n      &:hover .mat-icon {\n        color: var(--on-surface);\n      }\n    }\n    \n    .clear-all-btn:hover .mat-icon {\n      color: var(--error) !important;\n    }\n    \n    /* Drop overlay for attachments container */\n    .attachments-drop-overlay {\n      position: absolute;\n      inset: 0;\n      background: rgba(var(--gemini-blue-rgb, 66, 133, 244), 0.1);\n      backdrop-filter: blur(2px);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      z-index: 10;\n      \n      mat-icon {\n        font-size: 32px;\n        width: 32px;\n        height: 32px;\n        color: var(--gemini-blue);\n      }\n      \n      span {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--gemini-blue);\n      }\n    }\n    \n    /* Attached Files List (scrollable file list) */\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n      padding: 8px 16px 12px 16px;\n      max-height: 180px; /* Height for 3 items without scroll */\n      overflow-x: hidden;\n      overflow-y: auto;\n      scrollbar-width: thin;\n      \n      &::-webkit-scrollbar {\n        width: 4px;\n      }\n      \n      &::-webkit-scrollbar-track {\n        background: transparent;\n      }\n      \n      &::-webkit-scrollbar-thumb {\n        background: transparent;\n        border-radius: 2px;\n      }\n      \n      &:hover::-webkit-scrollbar-thumb {\n        background: var(--outline-variant);\n      }\n    }\n    \n    /* File row - horizontal layout */\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 6px 4px;\n      border-radius: 6px;\n      transition: background var(--transition-fast);\n      \n      &:not(:last-child) {\n        border-bottom: 1px solid var(--outline-variant);\n        padding-bottom: 8px;\n        margin-bottom: 4px;\n      }\n      \n      &:hover {\n        background: rgba(255, 255, 255, 0.5);\n        \n        .file-remove-btn-small {\n          opacity: 1;\n        }\n      }\n    }\n    \n    /* File icon wrapper */\n    .file-icon-wrapper {\n      width: 28px;\n      height: 28px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n    \n    .file-thumb-small {\n      width: 28px;\n      height: 28px;\n      object-fit: cover;\n      border-radius: 4px;\n    }\n    \n    .file-type-icon-small {\n      font-size: 22px;\n      width: 22px;\n      height: 22px;\n      color: var(--gemini-blue);\n    }\n    \n    /* File name text */\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      font-weight: 500;\n      color: var(--on-surface);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    \n    /* File size text */\n    .file-size-text {\n      font-size: 11px;\n      color: var(--on-surface-muted);\n      flex-shrink: 0;\n    }\n    \n    /* Remove button - small circular */\n    .file-remove-btn-small {\n      width: 24px !important;\n      height: 24px !important;\n      padding: 0 !important;\n      opacity: 0.6;\n      transition: opacity var(--transition-fast);\n      flex-shrink: 0;\n      display: flex !important;\n      align-items: center;\n      justify-content: center;\n      \n      .mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        color: var(--on-surface-variant);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      &:hover {\n        opacity: 1;\n        \n        .mat-icon {\n          color: var(--error);\n        }\n      }\n    }\n    \n    .input-toolbar {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin-top: 8px;\n      padding-top: 8px;\n    }\n    \n    .toolbar-left,\n    .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .toolbar-btn {\n      color: var(--on-surface-variant);\n      \n      &:hover {\n        color: var(--on-surface);\n        background: var(--surface-container);\n      }\n    }\n    \n    .add-btn {\n      background: var(--surface-container);\n      border-radius: 50%;\n    }\n    \n    .tools-btn {\n      font-size: 14px;\n      padding: 4px 12px !important;\n      min-width: auto;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 4px;\n      }\n      \n      span {\n        font-weight: 500;\n      }\n    }\n    \n    .streaming-btn {\n      font-size: 14px;\n      padding: 4px 12px !important;\n      min-width: auto;\n      transition: all var(--transition-fast);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 4px;\n      }\n      \n      span {\n        font-weight: 500;\n      }\n      \n      &.active {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue);\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n      \n      &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n        \n        &:hover {\n          background: transparent;\n        }\n      }\n    }\n    \n    /* Settings dropdown button */\n    .settings-btn {\n      width: 36px !important;\n      height: 36px !important;\n      padding: 0 !important;\n      \n      mat-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n    \n    /* Toggle indicators in settings menu */\n    ::ng-deep .settings-menu {\n      .mat-mdc-menu-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        \n        .toggle-indicator {\n          margin-left: auto;\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-muted);\n          \n          &.active {\n            color: #34a853;\n          }\n          \n          &.loading {\n            animation: pulse 1.5s infinite;\n          }\n        }\n      }\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n    \n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px 4px 12px !important;\n      font-size: 14px;\n      color: var(--on-surface);\n      background: transparent;\n      border-radius: 8px;\n      min-width: auto;\n      \n      .model-info {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n        line-height: 1.2;\n        order: 0;\n      }\n      \n      .model-name {\n        font-weight: 500;\n        font-size: 13px;\n        white-space: nowrap;\n      }\n      \n      .provider-name {\n        font-weight: 400;\n        font-size: 10px;\n        color: var(--on-surface-muted);\n        white-space: nowrap;\n        opacity: 0.7;\n      }\n      \n      .dropdown-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        color: var(--on-surface-muted);\n        order: 1;\n        margin-left: 2px;\n      }\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n    }\n    \n    .mic-btn {\n      &.recording {\n        color: #ea4335 !important;\n        animation: pulse 1s infinite;\n      }\n    }\n    \n    /* Action button container for send/mic transition */\n    .action-btn-container {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 40px;\n      height: 40px;\n      overflow: hidden;\n      position: relative;\n      margin-top: -4px;\n    }\n    \n    .send-btn {\n      color: var(--gemini-blue) !important;\n      \n      &:hover {\n        background: rgba(66, 133, 244, 0.1) !important;\n      }\n    }\n    \n    /* Quick Action Chips */\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n      justify-content: center;\n      margin: 24px 0;\n      padding: 0 16px;\n    }\n    \n    .quick-chip {\n      display: inline-flex !important;\n      align-items: center;\n      gap: 6px;\n      border-radius: 20px !important;\n      font-size: 14px;\n      padding: 8px 14px !important;\n      background: var(--surface) !important;\n      border: 1px solid var(--surface-variant) !important;\n      color: var(--on-surface) !important;\n      \n      .chip-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n      \n      &:hover {\n        background: var(--surface-container) !important;\n        border-color: var(--on-surface-muted) !important;\n      }\n    }\n    \n    .disclaimer {\n      margin: 16px 0 0;\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      text-align: center;\n    }\n\n    .input-wrapper {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 8px 12px;\n      background: var(--surface-container);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-full);\n      transition: all var(--transition-fast);\n      \n      &:hover {\n        border-color: var(--on-surface-muted);\n      }\n      \n      &.focused {\n        background: var(--surface);\n        border-color: var(--gemini-blue);\n        box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.15);\n      }\n    }\n\n    .input-action {\n      color: var(--on-surface-variant);\n      flex-shrink: 0;\n      \n      &:hover {\n        color: var(--on-surface);\n      }\n      \n      &.recording {\n        color: #ea4335 !important;\n        animation: pulse 1s infinite;\n      }\n    }\n\n    .chat-input {\n      flex: 1;\n      min-width: 0;\n      border: none;\n      background: transparent;\n      font-size: 18px;\n      font-family: inherit;\n      color: var(--on-surface);\n      outline: none;\n      padding: 8px;\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:disabled {\n        opacity: 0.7;\n      }\n    }\n\n    .model-select-container {\n      flex-shrink: 0;\n    }\n    \n    .model-select-trigger {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px !important;\n      min-width: 160px;\n      max-width: 200px;\n      background: var(--surface) !important;\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-sm) !important;\n      font-size: 13px;\n      height: 32px;\n      \n      .selected-model {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        flex: 1;\n        text-align: left;\n      }\n      \n      .dropdown-arrow {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin: 0 -4px 0 0;\n        color: var(--on-surface-muted);\n      }\n      \n      &:hover {\n        background: var(--surface-container) !important;\n        border-color: var(--gemini-blue);\n      }\n    }\n\n    .send-btn {\n      color: var(--on-surface-muted);\n      flex-shrink: 0;\n      transition: all var(--transition-fast);\n      \n      &.active {\n        color: var(--gemini-blue);\n        \n        &:hover {\n          background: var(--user-bubble-bg);\n        }\n      }\n      \n      &:disabled {\n        opacity: 0.4;\n      }\n    }\n\n\n\n    /* Animations */\n    .animate-fade-in {\n      animation: fadeIn 0.2s ease-out forwards;\n    }\n\n    @keyframes fadeIn {\n      from {\n        opacity: 0;\n        transform: translateY(8px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 20px;\n      right: 20px;\n      width: 32px !important;\n      height: 32px !important;\n      padding: 0 !important;\n      display: flex !important;\n      align-items: center;\n      justify-content: center;\n\n      mat-icon {\n        font-size: 22px;\n        width: 22px;\n        height: 22px;\n        color: var(--on-surface-muted);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      &:hover mat-icon {\n        color: var(--on-surface);\n      }\n    }\n  `],\n})\nexport class ChatComponent implements OnDestroy, AfterViewInit {\n  chatService = inject(ChatService);\n  modelsService = inject(ModelsService);\n  speechService = inject(SpeechService);\n  themeService = inject(ThemeService);\n  authService = inject(AuthService);\n  contentSafetyService = inject(ContentSafetyService);\n  preferencesService = inject(PreferencesService);\n  private snackBar = inject(MatSnackBar);\n  private dialog = inject(MatDialog);\n\n  @ViewChild('messagesContainer') messagesContainer!: ElementRef;\n  @ViewChild('chatTextarea') chatTextarea!: ElementRef<HTMLTextAreaElement>;\n\n  userMessage = '';\n  inputFocused = false;\n  isDragging = signal(false);\n  attachedFiles = signal<{ name: string; type: string; size: number; preview: string; data: string }[]>([]);\n\n  // Debounced send button visibility to smooth animation\n  showSendButton = signal(false);\n  private debounceTimer: ReturnType<typeof setTimeout> | null = null;\n  private safetyDebounceTimer: ReturnType<typeof setTimeout> | null = null;\n\n  // Content safety - tracks flagged content for highlighting\n  contentFlagged = signal(false);\n  flaggedLabels = signal<string[]>([]);\n\n  // Attachment limits from config\n  maxAttachments = CHAT_CONFIG.maxAttachments;\n  maxFileSizeBytes = CHAT_CONFIG.maxFileSizeBytes;\n\n\n\n\n  // Queue editing state\n  queueExpanded = true;\n  editingQueueId: string | null = null;\n  editingQueueContent = '';\n\n  // Animation state\n  isPulsing = false;\n\n  // Greeting carousel - macOS style with RTL/LTR support (50 languages)\n  greetings: { text: string; lang: string; dir?: 'ltr' | 'rtl'; anim?: 'type' | 'slide' }[] = [\n    { text: 'Hello', lang: 'English', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'Spanish', dir: 'ltr', anim: 'type' },\n    { text: 'Bonjour', lang: 'French', dir: 'ltr', anim: 'type' },\n    { text: '你好', lang: 'Chinese', dir: 'ltr', anim: 'slide' },\n    { text: 'こんにちは', lang: 'Japanese', dir: 'ltr', anim: 'slide' },\n    { text: '안녕하세요', lang: 'Korean', dir: 'ltr', anim: 'slide' },\n    { text: 'مرحبا', lang: 'Arabic', dir: 'rtl', anim: 'type' },\n    { text: 'שלום', lang: 'Hebrew', dir: 'rtl', anim: 'type' },\n    { text: 'سلام', lang: 'Persian', dir: 'rtl', anim: 'type' },\n    { text: 'نمستے', lang: 'Urdu', dir: 'rtl', anim: 'type' },\n    { text: 'नमस्ते', lang: 'Hindi', dir: 'ltr', anim: 'slide' },\n    { text: 'Ciao', lang: 'Italian', dir: 'ltr', anim: 'type' },\n    { text: 'Olá', lang: 'Portuguese', dir: 'ltr', anim: 'type' },\n    { text: 'Привет', lang: 'Russian', dir: 'ltr', anim: 'type' },\n    { text: 'Hallo', lang: 'German', dir: 'ltr', anim: 'type' },\n    { text: 'Merhaba', lang: 'Turkish', dir: 'ltr', anim: 'type' },\n    { text: 'Xin chào', lang: 'Vietnamese', dir: 'ltr', anim: 'type' },\n    { text: 'สวัสดี', lang: 'Thai', dir: 'ltr', anim: 'slide' },\n    { text: 'Γεια σου', lang: 'Greek', dir: 'ltr', anim: 'type' },\n    { text: 'Cześć', lang: 'Polish', dir: 'ltr', anim: 'type' },\n    { text: 'Hoi', lang: 'Dutch', dir: 'ltr', anim: 'type' },\n    { text: 'Hej', lang: 'Swedish', dir: 'ltr', anim: 'type' },\n    { text: 'Halo', lang: 'Indonesian', dir: 'ltr', anim: 'type' },\n    { text: 'Habari', lang: 'Swahili', dir: 'ltr', anim: 'type' },\n    { text: 'Привіт', lang: 'Ukrainian', dir: 'ltr', anim: 'type' },\n    { text: 'Ahoj', lang: 'Czech', dir: 'ltr', anim: 'type' },\n    { text: 'Kumusta', lang: 'Filipino', dir: 'ltr', anim: 'type' },\n    { text: 'স্বাগতম', lang: 'Bengali', dir: 'ltr', anim: 'slide' },\n    { text: 'வணக்கம்', lang: 'Tamil', dir: 'ltr', anim: 'slide' },\n    { text: 'Selamat', lang: 'Malay', dir: 'ltr', anim: 'type' },\n    { text: 'Hei', lang: 'Norwegian', dir: 'ltr', anim: 'type' },\n    { text: 'Hej', lang: 'Danish', dir: 'ltr', anim: 'type' },\n    { text: 'Moi', lang: 'Finnish', dir: 'ltr', anim: 'type' },\n    { text: 'Szia', lang: 'Hungarian', dir: 'ltr', anim: 'type' },\n    { text: 'Salut', lang: 'Romanian', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'Catalan', dir: 'ltr', anim: 'type' },\n    { text: 'Ahoj', lang: 'Slovak', dir: 'ltr', anim: 'type' },\n    { text: 'Bok', lang: 'Croatian', dir: 'ltr', anim: 'type' },\n    { text: 'Здраво', lang: 'Serbian', dir: 'ltr', anim: 'type' },\n    { text: 'Živjo', lang: 'Slovenian', dir: 'ltr', anim: 'type' },\n    { text: 'Sveiki', lang: 'Latvian', dir: 'ltr', anim: 'type' },\n    { text: 'Labas', lang: 'Lithuanian', dir: 'ltr', anim: 'type' },\n    { text: 'Tere', lang: 'Estonian', dir: 'ltr', anim: 'type' },\n    { text: 'Halló', lang: 'Icelandic', dir: 'ltr', anim: 'type' },\n    { text: 'Helo', lang: 'Welsh', dir: 'ltr', anim: 'type' },\n    { text: 'Dia dhuit', lang: 'Irish', dir: 'ltr', anim: 'type' },\n    { text: 'Halò', lang: 'Scottish Gaelic', dir: 'ltr', anim: 'type' },\n    { text: 'Kia ora', lang: 'Māori', dir: 'ltr', anim: 'type' },\n    { text: 'Aloha', lang: 'Hawaiian', dir: 'ltr', anim: 'type' },\n    { text: 'Talofa', lang: 'Samoan', dir: 'ltr', anim: 'type' },\n  ];\n  currentGreetingIndex = signal(0);\n  greetingFading = signal(false);\n  typewriterText = signal('');\n  showCursor = signal(true);\n  private greetingInterval: ReturnType<typeof setInterval> | null = null;\n  private typewriterTimeout: ReturnType<typeof setTimeout> | null = null;\n  private cursorInterval: ReturnType<typeof setInterval> | null = null;\n\n  // Model selector\n  modelSearchQuery = '';\n  filteredModels = signal(this.modelsService.getSortedModels());\n\n  quickActions = [\n    { labelKey: 'quickActions.createImage', prompt: 'Create an image of', icon: 'image', color: '#EA4335' },\n    { labelKey: 'quickActions.writeAnything', prompt: 'Write a poem about', icon: 'edit_note', color: '#4285F4' },\n    { labelKey: 'quickActions.helpMeLearn', prompt: 'Explain in simple terms:', icon: 'school', color: '#34A853' },\n    { labelKey: 'quickActions.createVideo', prompt: 'Create a video about', icon: 'videocam', color: '#FBBC04' },\n  ];\n\n  constructor() {\n    // Start greeting carousel\n    this.startGreetingCarousel();\n\n    // Track previous message count to detect when chat is cleared\n    let prevMessageCount = 0;\n\n    effect(() => {\n      const messages = this.chatService.messages();\n\n      // When messages are cleared (new chat), focus the input\n      if (prevMessageCount > 0 && messages.length === 0) {\n        this.focusChatInput();\n      }\n      prevMessageCount = messages.length;\n\n      if (messages.length > 0 && this.messagesContainer) {\n        setTimeout(() => {\n          this.messagesContainer.nativeElement.scrollTop =\n            this.messagesContainer.nativeElement.scrollHeight;\n        }, 100);\n      }\n    });\n\n    // Update filtered models when providers change\n    effect(() => {\n      this.modelsService.providers();\n      this.filteredModels.set(this.modelsService.getSortedModels());\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.greetingInterval) {\n      clearInterval(this.greetingInterval);\n    }\n    if (this.typewriterTimeout) {\n      clearTimeout(this.typewriterTimeout);\n    }\n    if (this.cursorInterval) {\n      clearInterval(this.cursorInterval);\n    }\n  }\n\n  ngAfterViewInit(): void {\n    // Focus chat input when welcome screen is shown (initial load)\n    this.focusChatInput();\n  }\n\n  /** Focus the chat textarea input */\n  focusChatInput(): void {\n    // Use setTimeout to ensure the element is ready\n    setTimeout(() => {\n      if (this.chatTextarea?.nativeElement) {\n        this.chatTextarea.nativeElement.focus();\n      }\n    }, 100);\n  }\n\n  private startGreetingCarousel(): void {\n    // Start cursor blinking\n    this.cursorInterval = setInterval(() => {\n      this.showCursor.update(v => !v);\n    }, 530);\n\n    // Type the first greeting\n    const first = this.greetings[0];\n    this.typeGreeting(first.text, first.anim || 'type', first.dir || 'ltr');\n\n    // Schedule carousel\n    this.greetingInterval = setInterval(() => {\n      const current = this.greetings[this.currentGreetingIndex()];\n\n      // Erase current text\n      this.eraseGreeting(() => {\n        // Move to next greeting\n        const nextIndex = (this.currentGreetingIndex() + 1) % this.greetings.length;\n        this.currentGreetingIndex.set(nextIndex);\n\n        const next = this.greetings[nextIndex];\n        // Type new greeting\n        this.typeGreeting(next.text, next.anim || 'type', next.dir || 'ltr');\n      }, current.anim || 'type');\n    }, 8000);\n  }\n\n  private typeGreeting(greetingText: string, anim: 'type' | 'slide' = 'type', dir: 'ltr' | 'rtl' = 'ltr'): void {\n    // Build the full text including user's name (no comma, looks cooler)\n    const userName = this.authService.user()?.given_name;\n    const text = userName ? `${greetingText} ${userName}` : greetingText;\n\n    if (anim === 'slide') {\n      // For slide animation, show full text immediately\n      this.typewriterText.set(text);\n      return;\n    }\n\n    // Typewriter animation\n    let charIndex = 0;\n    this.typewriterText.set('');\n\n    const typeNext = () => {\n      if (charIndex < text.length) {\n        if (dir === 'rtl') {\n          // For RTL, build from right side\n          this.typewriterText.set(text.substring(text.length - charIndex - 1));\n        } else {\n          // For LTR, build from left side\n          this.typewriterText.set(text.substring(0, charIndex + 1));\n        }\n        charIndex++;\n        this.typewriterTimeout = setTimeout(typeNext, 80);\n      }\n    };\n\n    typeNext();\n  }\n\n  private eraseGreeting(callback: () => void, anim: 'type' | 'slide' = 'type'): void {\n    if (anim === 'slide') {\n      // For slide animation, clear immediately\n      this.typewriterText.set('');\n      callback();\n      return;\n    }\n\n    const currentText = this.typewriterText();\n    let charIndex = currentText.length;\n\n    const eraseNext = () => {\n      if (charIndex > 0) {\n        charIndex--;\n        this.typewriterText.set(currentText.substring(0, charIndex));\n        this.typewriterTimeout = setTimeout(eraseNext, 40);\n      } else {\n        callback();\n      }\n    };\n\n    eraseNext();\n  }\n\n  onModelMenuOpened(): void {\n    this.modelSearchQuery = '';\n    this.filteredModels.set(this.modelsService.getSortedModels());\n  }\n\n  filterModels(): void {\n    this.filteredModels.set(this.modelsService.filterModels(this.modelSearchQuery));\n  }\n\n  clearModelSearch(): void {\n    this.modelSearchQuery = '';\n    this.filteredModels.set(this.modelsService.getSortedModels());\n  }\n\n  selectModel(modelId: string): void {\n    this.modelsService.selectModel(modelId);\n  }\n\n  getShortModelName(): string {\n    const name = this.modelsService.getModelName(this.modelsService.selectedModel());\n    // Extract just the model variant (e.g., \"Flash\" from \"Gemini 2.0 Flash\")\n    const parts = name.split(' ');\n    return parts[parts.length - 1] || name;\n  }\n\n  onEnterKey(event: Event): void {\n    const keyEvent = event as KeyboardEvent;\n    if (!keyEvent.shiftKey) {\n      keyEvent.preventDefault();\n\n      // Trigger pulse animation\n      this.isPulsing = true;\n      setTimeout(() => this.isPulsing = false, 400);\n\n      this.sendMessage();\n      // Ensure focus stays on input after Angular's change detection\n      setTimeout(() => this.chatTextarea?.nativeElement?.focus(), 0);\n    }\n  }\n\n  focusInput(event: MouseEvent): void {\n    // Focus the textarea when clicking anywhere in the input box\n    // Ignore clicks on buttons, menus, and other interactive elements\n    const target = event.target as HTMLElement;\n    const isInteractive = target.closest('button, mat-icon, .mat-mdc-menu-trigger, input, select');\n    if (!isInteractive) {\n      this.chatTextarea?.nativeElement?.focus();\n    }\n  }\n\n  useQuickAction(prompt: string): void {\n    this.userMessage = prompt + ' ';\n  }\n\n  /**\n   * Clear content flagging when user edits their message.\n   * Also debounce the send button visibility for smooth animation.\n   * Real-time content safety is debounced (500ms) to avoid excessive API calls.\n   */\n  onInputChange(): void {\n    // Clear content flagging when user edits\n    if (this.contentFlagged()) {\n      this.contentFlagged.set(false);\n      this.flaggedLabels.set([]);\n    }\n\n    // Debounce send button visibility (150ms)\n    if (this.debounceTimer) {\n      clearTimeout(this.debounceTimer);\n    }\n\n    const hasText = !!this.userMessage.trim();\n\n    // If switching to send button, show immediately\n    // If switching to mic button, debounce to avoid flicker\n    if (hasText && !this.showSendButton()) {\n      this.showSendButton.set(true);\n    } else if (!hasText && this.showSendButton()) {\n      this.debounceTimer = setTimeout(() => {\n        if (!this.userMessage.trim()) {\n          this.showSendButton.set(false);\n        }\n      }, 150);\n    }\n\n    // Debounced real-time content safety check (500ms after user stops typing)\n    if (this.safetyDebounceTimer) {\n      clearTimeout(this.safetyDebounceTimer);\n    }\n\n    if (hasText && this.contentSafetyService.enabled()) {\n      this.safetyDebounceTimer = setTimeout(async () => {\n        const message = this.userMessage.trim();\n        if (message) {\n          const safetyResult = await this.contentSafetyService.checkContent(message);\n          // Only flag if user hasn't cleared the input\n          if (this.userMessage.trim() === message && !safetyResult.safe) {\n            this.contentFlagged.set(true);\n            this.flaggedLabels.set(safetyResult.labels);\n          }\n        }\n      }, 500);\n    }\n  }\n\n  async sendMessage(): Promise<void> {\n    if (!this.userMessage.trim()) return;\n\n    const message = this.userMessage;\n    this.userMessage = '';\n\n    // Reset send button state (will animate to mic)\n    this.showSendButton.set(false);\n\n    // Always keep focus on the input\n    this.chatTextarea?.nativeElement?.focus();\n\n    // Check content safety if enabled\n    if (this.contentSafetyService.enabled()) {\n      const safetyResult = await this.contentSafetyService.checkContent(message);\n      if (!safetyResult.safe) {\n        // Mark content as flagged for visual highlighting\n        this.contentFlagged.set(true);\n        this.flaggedLabels.set(safetyResult.labels);\n\n        this.snackBar.open(\n          `Message blocked: ${safetyResult.message || 'Potentially harmful content detected'}`,\n          'Dismiss',\n          { duration: 5000, panelClass: 'warning-snackbar' }\n        );\n        // Restore the message so user can edit it\n        this.userMessage = message;\n        return;\n      } else {\n        // Clear any previous flagging\n        this.contentFlagged.set(false);\n        this.flaggedLabels.set([]);\n      }\n    }\n\n    // If model is busy, queue the prompt\n    if (this.chatService.isLoading()) {\n      this.chatService.addToQueue(message, this.modelsService.selectedModel());\n      return;\n    }\n\n    // Use streaming if enabled\n    if (this.chatService.streamingMode() && this.modelsService.supportsStreaming()) {\n      this.chatService.sendStreamMessage(message, this.modelsService.selectedModel(), () => {\n        this.chatTextarea?.nativeElement?.focus();\n      });\n      return;\n    }\n\n    this.chatService.sendMessage(message, this.modelsService.selectedModel())\n      .subscribe({\n        next: response => {\n          this.chatService.addAssistantMessage(response);\n        },\n        error: err => {\n          this.snackBar.open('Failed to send message. Please try again.', 'Dismiss', {\n            duration: 5000,\n            panelClass: 'error-snackbar',\n          });\n          console.error('Chat error:', err);\n        }\n      });\n  }\n\n  clearInput(): void {\n    this.userMessage = '';\n    this.onInputChange();\n    this.chatTextarea?.nativeElement?.focus();\n  }\n\n  sendQuickAction(prompt: string): void {\n    this.userMessage = prompt;\n  }\n\n  // Queue editing methods\n  startEditQueue(item: { id: string; content: string }): void {\n    this.editingQueueId = item.id;\n    this.editingQueueContent = item.content;\n  }\n\n  saveQueueEdit(id: string): void {\n    if (this.editingQueueContent.trim()) {\n      this.chatService.updateQueuedPrompt(id, this.editingQueueContent);\n    }\n    this.cancelQueueEdit();\n  }\n\n  cancelQueueEdit(): void {\n    this.editingQueueId = null;\n    this.editingQueueContent = '';\n  }\n\n  onQueueDrop(event: CdkDragDrop<unknown[]>): void {\n    const queue = [...this.chatService.promptQueue()];\n    moveItemInArray(queue, event.previousIndex, event.currentIndex);\n    this.chatService.promptQueue.set(queue);\n  }\n  openGoogleDrive(): void {\n    // TODO: Implement Google Drive picker integration\n    this.snackBar.open('Google Drive integration coming soon!', 'Dismiss', { duration: 3000 });\n  }\n\n  async toggleVoiceInput(): Promise<void> {\n    if (this.speechService.isListening()) {\n      this.speechService.stopListening();\n    } else {\n      try {\n        const transcript = await this.speechService.startListening();\n        if (transcript) {\n          this.userMessage = transcript;\n        }\n      } catch (error) {\n        this.snackBar.open('Voice input not available', 'Dismiss', { duration: 3000 });\n        console.error('Voice input error:', error);\n      }\n    }\n  }\n\n  speakMessage(text: string): void {\n    if (this.speechService.isSpeaking()) {\n      this.speechService.stopSpeaking();\n    } else {\n      this.speechService.speak(text);\n    }\n  }\n\n  copyMessage(text: string): void {\n    navigator.clipboard.writeText(text).then(() => {\n      this.snackBar.open('Copied to clipboard', '', { duration: 2000 });\n    });\n  }\n\n  showErrorDetails(details: string): void {\n    this.dialog.open(ErrorDetailsDialogComponent, {\n      data: { errorDetails: details },\n      width: '600px',\n      maxHeight: '80vh',\n    });\n  }\n\n  toggleStreaming(): void {\n    if (this.modelsService.supportsStreaming()) {\n      this.chatService.toggleStreamingMode();\n    }\n  }\n\n  getStreamingTooltip(): string {\n    if (!this.modelsService.supportsStreaming()) {\n      return 'Streaming not supported for this model';\n    }\n    return this.chatService.streamingMode()\n      ? 'Streaming ON - click to disable'\n      : 'Streaming OFF - click to enable';\n  }\n\n  getSafetyTooltip(): string {\n    if (this.contentSafetyService.loading()) {\n      return 'Loading toxicity detection model...';\n    }\n    if (this.contentSafetyService.enabled()) {\n      return this.contentSafetyService.modelReady()\n        ? 'Content Safety ON - toxic content will be blocked'\n        : 'Content Safety ON - model loading on first use';\n    }\n    return 'Content Safety OFF - no client-side filtering';\n  }\n\n  clearPreferences(): void {\n    this.preferencesService.clearAll();\n    this.snackBar.open('Preferences cleared. Refresh to apply defaults.', 'Refresh', {\n      duration: 5000\n    }).onAction().subscribe(() => {\n      window.location.reload();\n    });\n  }\n\n  onDragOver(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(true);\n  }\n\n  onDragLeave(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n  }\n\n  onDrop(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n\n    const files = event.dataTransfer?.files;\n    if (files) {\n      this.processFiles(Array.from(files));\n    }\n  }\n\n  onFileSelected(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    if (input.files) {\n      this.processFiles(Array.from(input.files));\n    }\n    input.value = ''; // Reset for same file selection\n  }\n\n  private processFiles(files: File[]): void {\n    const currentCount = this.attachedFiles().length;\n    const remaining = this.maxAttachments - currentCount;\n\n    if (remaining <= 0) {\n      this.snackBar.open(`Maximum ${this.maxAttachments} attachments allowed`, 'Dismiss', { duration: 4000 });\n      return;\n    }\n\n    // Only process up to the remaining slots\n    const filesToProcess = files.slice(0, remaining);\n\n    if (files.length > remaining) {\n      this.snackBar.open(`Only ${remaining} more file(s) can be attached`, 'Dismiss', { duration: 4000 });\n    }\n\n    filesToProcess.forEach(file => {\n      if (file.size > this.maxFileSizeBytes) {\n        const maxSizeMB = (this.maxFileSizeBytes / (1024 * 1024)).toFixed(0);\n        this.snackBar.open(`File \"${file.name}\" is too large (max ${maxSizeMB}MB)`, 'Dismiss', { duration: 4000 });\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onload = () => {\n        const dataUrl = reader.result as string;\n        this.attachedFiles.update(current => [\n          ...current,\n          {\n            name: file.name,\n            type: file.type || 'application/octet-stream',\n            size: file.size,\n            preview: dataUrl,\n            data: dataUrl,\n          },\n        ]);\n      };\n      reader.readAsDataURL(file);\n    });\n  }\n\n  removeFile(file: { name: string }): void {\n    this.attachedFiles.update(current =>\n      current.filter(f => f.name !== file.name)\n    );\n  }\n\n  /**\n   * Clear all attached files.\n   */\n  clearAllFiles(): void {\n    this.attachedFiles.set([]);\n  }\n\n  /**\n   * Get Material Icon name for a MIME type.\n   */\n  getFileIcon(mimeType: string): string {\n    return getMimeTypeIcon(mimeType);\n  }\n\n  /**\n   * Format file size to human-readable string.\n   */\n  formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 B';\n\n    const units = ['B', 'KB', 'MB', 'GB'];\n    const base = 1024;\n    const exponent = Math.min(Math.floor(Math.log(bytes) / Math.log(base)), units.length - 1);\n    const value = bytes / Math.pow(base, exponent);\n\n    // Show 1 decimal place for KB and above, none for bytes\n    return exponent === 0\n      ? `${value} ${units[exponent]}`\n      : `${value.toFixed(1)} ${units[exponent]}`;\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    :host {\n      display: block;\n      width: 100%;\n      height: 100%;\n      overflow: hidden;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .chat-container {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      max-width: 860px;\n      margin: 0 auto;\n      padding: 0 24px;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    /* When in welcome mode (no messages), center content */\n    .chat-container.welcome-mode {\n      justify-content: center;\n    }\n    \n    /* When has messages, use flex layout for scroll */\n    .chat-container.has-messages {\n      justify-content: flex-start;\n    }\n\n    /* Welcome Section */\n    .welcome-section {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      padding: 40px 16px;\n      text-align: center;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n        \n        &.dark {\n          /* filter: invert(1); removed */\n        }\n      }\n    }\n\n    .welcome-title {\n      font-size: 40px;\n      font-weight: 400;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n    }\n\n    .welcome-subtitle {\n      font-size: 16px;\n      color: var(--on-surface-variant);\n      margin: 0 0 40px;\n    }\n\n    .suggestions-grid {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 12px;\n      width: 100%;\n      max-width: 500px;\n    }\n\n    @media (max-width: 500px) {\n      .suggestions-grid {\n        grid-template-columns: 1fr;\n      }\n    }\n\n    .suggestion-card {\n      display: flex;\n      align-items: flex-start;\n      gap: 12px;\n      padding: 16px;\n      background: var(--surface);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      cursor: pointer;\n      text-align: left;\n      transition: all var(--transition-fast);\n      font-family: inherit;\n      \n      &:hover {\n        background: var(--surface-dim);\n        border-color: var(--gemini-blue-light);\n      }\n      \n      &:active {\n        transform: scale(0.98);\n      }\n    }\n\n    .suggestion-icon {\n      color: var(--gemini-blue);\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n    }\n\n    .suggestion-text {\n      flex: 1;\n      font-size: 14px;\n      color: var(--on-surface);\n      line-height: 1.4;\n    }\n\n    /* Messages */\n    .messages-container {\n      flex: 1;\n      min-height: 0; /* Critical for flexbox scrolling */\n      overflow-y: auto;\n      padding: 24px 0;\n      padding-bottom: 120px; /* Large space before input section + queue */\n    }\n\n    .message-row {\n      display: flex;\n      align-items: flex-start;\n      gap: 16px;\n      padding: 16px 0;\n      \n      &.user-row {\n        justify-content: flex-end;\n      }\n    }\n\n    .message-avatar {\n      flex-shrink: 0;\n      width: 28px;\n      height: 28px;\n      width: 28px;\n      height: 28px;\n      margin-top: 0; /* Align with first line text baseline */\n    }\n\n    .avatar-logo {\n      width: 28px;\n      height: auto;\n      \n      &.dark {\n        /* filter: invert(1); removed */\n      }\n      \n      &.loading {\n        animation: pulse 1.2s ease-in-out infinite;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    .message-content {\n      flex: 1;\n      max-width: 720px;\n    }\n\n    .user-message {\n      background: var(--user-bubble-bg);\n      padding: 12px 16px;\n      border-radius: 20px;\n      max-width: fit-content;\n      margin-left: auto;\n    }\n\n    .message-text {\n      font-size: 15px;\n      line-height: 1.7;\n      color: var(--on-surface);\n      white-space: pre-wrap;\n      word-break: break-word;\n    }\n    \n    /* Markdown content styling */\n    .markdown-content {\n      white-space: normal;\n      \n      p {\n        margin: 0 0 0.75em;\n        &:last-child {\n          margin-bottom: 0;\n        }\n      }\n      \n      h1, h2, h3, h4, h5, h6 {\n        margin: 1em 0 0.5em;\n        font-weight: 600;\n        line-height: 1.3;\n        &:first-child {\n          margin-top: 0;\n        }\n      }\n      \n      h1 { font-size: 1.4em; }\n      h2 { font-size: 1.25em; }\n      h3 { font-size: 1.1em; }\n      h4, h5, h6 { font-size: 1em; }\n      \n      code {\n        font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', monospace;\n        font-size: 0.85em;\n        padding: 2px 6px;\n        background: var(--surface-variant);\n        border-radius: 4px;\n      }\n      \n      pre {\n        margin: 0.75em 0;\n        padding: 12px 16px;\n        background: var(--surface-variant);\n        border-radius: 8px;\n        overflow-x: auto;\n        \n        code {\n          padding: 0;\n          background: none;\n          font-size: 0.85em;\n        }\n      }\n      \n      ul, ol {\n        margin: 0.5em 0;\n        padding-left: 1.5em;\n      }\n      \n      li {\n        margin: 0.25em 0;\n      }\n      \n      blockquote {\n        margin: 0.75em 0;\n        padding: 8px 16px;\n        border-left: 3px solid var(--gemini-blue);\n        background: var(--surface-variant);\n        font-style: italic;\n      }\n      \n      a {\n        color: var(--gemini-blue);\n        text-decoration: none;\n        &:hover {\n          text-decoration: underline;\n        }\n      }\n      \n      table {\n        border-collapse: collapse;\n        margin: 0.75em 0;\n        width: 100%;\n      }\n      \n      th, td {\n        padding: 8px 12px;\n        border: 1px solid var(--outline);\n        text-align: left;\n      }\n      \n      th {\n        background: var(--surface-variant);\n        font-weight: 600;\n      }\n      \n      hr {\n        border: none;\n        border-top: 1px solid var(--outline);\n        margin: 1em 0;\n      }\n      \n      img {\n        max-width: 100%;\n        height: auto;\n        border-radius: 8px;\n      }\n      \n      /* Mermaid diagram styling */\n      .mermaid-diagram {\n        margin: 1em 0;\n        padding: 16px;\n        background: var(--surface-variant);\n        border-radius: 12px;\n        overflow-x: auto;\n        \n        svg {\n          max-width: 100%;\n          height: auto;\n        }\n      }\n      \n      .mermaid-error {\n        padding: 12px 16px;\n        background: rgba(217, 48, 37, 0.1);\n        border: 1px solid rgba(217, 48, 37, 0.3);\n        border-radius: 8px;\n        color: #d93025;\n        font-family: monospace;\n        font-size: 0.9em;\n      }\n      \n      /* Math equation styling */\n      .math-inline {\n        font-family: 'Cambria Math', 'Times New Roman', serif;\n        font-style: italic;\n        padding: 0 2px;\n      }\n      \n      .math-display {\n        display: block;\n        text-align: center;\n        font-family: 'Cambria Math', 'Times New Roman', serif;\n        font-size: 1.2em;\n        margin: 1em 0;\n        padding: 16px;\n        background: var(--surface-variant);\n        border-radius: 8px;\n      }\n      \n      .math-frac {\n        display: inline-flex;\n        flex-direction: column;\n        align-items: center;\n        vertical-align: middle;\n        margin: 0 4px;\n        \n        .math-num {\n          border-bottom: 1px solid currentColor;\n          padding-bottom: 2px;\n        }\n        \n        .math-denom {\n          padding-top: 2px;\n        }\n      }\n    }\n\n    .user-message .message-text {\n      color: var(--user-bubble-text);\n    }\n\n    /* Error message styling */\n    .error-message {\n      .message-text {\n        color: #d93025;\n      }\n    }\n    \n    .error-details-btn {\n      margin-top: 8px;\n      font-size: 12px;\n      color: #d93025;\n      border-color: #d93025;\n      padding: 4px 12px;\n      height: auto;\n      line-height: 1.4;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        margin-right: 4px;\n      }\n      \n      &:hover {\n        background: rgba(217, 48, 37, 0.08);\n      }\n    }\n\n    .message-actions {\n      display: flex;\n      gap: 2px;\n      margin-top: 8px;\n      opacity: 0;\n      transition: opacity var(--transition-fast);\n      \n      .message-row:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-muted);\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n      }\n    }\n\n    .message-model {\n      display: inline-flex;\n      align-items: center;\n      gap: 4px;\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 8px;\n      \n      mat-icon {\n        font-size: 14px;\n        width: 14px;\n        height: 14px;\n      }\n    }\n\n    /* Typing Indicator */\n    .typing-indicator {\n      display: flex;\n      gap: 4px;\n      padding: 8px 0;\n      \n      span {\n        width: 8px;\n        height: 8px;\n        background: var(--on-surface-muted);\n        border-radius: 50%;\n        animation: bounce 1.4s infinite ease-in-out;\n        \n        &:nth-child(1) { animation-delay: -0.32s; }\n        &:nth-child(2) { animation-delay: -0.16s; }\n      }\n    }\n\n    @keyframes bounce {\n      0%, 80%, 100% { \n        transform: scale(0.8);\n        opacity: 0.5;\n      }\n      40% { \n        transform: scale(1);\n        opacity: 1;\n      }\n    }\n\n    /* Attached Files */\n    .attached-files {\n      display: flex;\n      gap: 8px;\n      padding: 12px 0;\n      flex-wrap: wrap;\n    }\n\n    .file-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--surface-container);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-full);\n    }\n\n    .file-thumb {\n      width: 24px;\n      height: 24px;\n      border-radius: 4px;\n      object-fit: cover;\n    }\n\n    .file-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      color: var(--on-surface-variant);\n    }\n\n    .file-name {\n      font-size: 13px;\n      color: var(--on-surface);\n      max-width: 150px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-remove {\n      width: 24px !important;\n      height: 24px !important;\n      margin: -4px -4px -4px 0;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    /* Prompt Queue */\n    .prompt-queue {\n      width: 90%;\n      max-width: 740px;\n      margin: 0 auto 0; /* No bottom margin - chatbox overlays */\n      background: var(--surface-container);\n      border-radius: var(--radius-lg) var(--radius-lg) 0 0; /* Rounded top only */\n      border: 1px solid var(--surface-variant);\n      border-bottom: none; /* Remove bottom border - hidden by chatbox */\n      overflow: hidden;\n      box-shadow: 0 -4px 16px rgba(0, 0, 0, 0.08), 0 -2px 8px rgba(0, 0, 0, 0.04);\n      position: relative;\n      z-index: 1; /* Below chatbox */\n      \n      &.slide-up {\n        animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n    }\n    \n    @keyframes slideUp {\n      from {\n        opacity: 0;\n        transform: translateY(20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .queue-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 8px 12px 8px 16px;\n      transition: background 0.2s;\n    }\n    \n    .queue-header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      flex: 1;\n      \n      &:hover {\n        opacity: 0.8;\n      }\n    }\n    \n    .queue-header-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .send-all-btn,\n    .clear-all-btn {\n      width: 24px !important;\n      height: 24px !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      padding: 0 !important;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        color: var(--on-surface-variant);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n    \n    .send-all-btn:hover mat-icon {\n      color: var(--gemini-blue);\n    }\n    \n    .clear-all-btn:hover mat-icon {\n      color: var(--error);\n    }\n\n    .expand-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      color: var(--on-surface-variant);\n      transition: transform 0.2s;\n      \n      &.expanded {\n        transform: rotate(180deg);\n      }\n    }\n\n    .queue-count {\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n    }\n\n    .queue-items {\n      border-top: 1px solid var(--surface-variant);\n      max-height: 150px;\n      overflow-y: auto;\n    }\n\n    .queue-item {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 6px 10px;\n      border-bottom: 1px solid var(--surface-variant);\n      background: var(--surface-container);\n      transition: box-shadow 0.2s, transform 0.2s;\n      \n      &:last-child {\n        border-bottom: none;\n      }\n      \n      &.cdk-drag-preview {\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n        border-radius: var(--radius-md);\n      }\n      \n      &.cdk-drag-placeholder {\n        opacity: 0.4;\n      }\n      \n      &.cdk-drag-animating {\n        transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n      }\n    }\n    \n    .drag-handle {\n      cursor: grab;\n      color: var(--on-surface-variant);\n      font-size: 16px;\n      width: 16px;\n      height: 16px;\n      flex-shrink: 0;\n      \n      &:active {\n        cursor: grabbing;\n      }\n    }\n    \n    .cdk-drop-list-dragging .queue-item:not(.cdk-drag-placeholder) {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .queue-item-content {\n      flex: 1;\n      font-size: 12px;\n      color: var(--on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .queue-edit-input {\n      flex: 1;\n      padding: 6px 10px;\n      font-size: 14px;\n      border: 1px solid var(--gemini-blue);\n      border-radius: var(--radius-md);\n      background: var(--surface);\n      color: var(--on-surface);\n      outline: none;\n      \n      &:focus {\n        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);\n      }\n    }\n\n    .queue-item-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n      flex-shrink: 0;\n      \n      button {\n        width: 32px !important;\n        height: 32px !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        padding: 0 !important;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-variant);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n        \n        &:disabled mat-icon {\n          color: var(--outline);\n        }\n      }\n    }\n\n    /* Input Section */\n    .input-section {\n      flex-shrink: 0; /* Don't shrink - stay at bottom */\n      padding: 16px 24px 24px;\n      width: 100%;\n      max-width: 820px;\n      margin: 0 auto;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n      background: var(--surface-dim);\n    }\n    \n    /* Welcome header above chatbox */\n    .welcome-header {\n      text-align: center;\n      margin-bottom: 32px;\n      animation: fadeIn 0.3s ease-out;\n      \n      .welcome-logo {\n        margin-bottom: 24px;\n        \n        img {\n          height: 56px;\n          width: auto;\n          border-radius: 12px;\n        }\n      }\n      \n      .welcome-title {\n        font-size: 52px;\n        font-weight: 400;\n        margin: 0 0 8px;\n        color: var(--on-surface);\n        display: inline-flex;\n        align-items: center;\n        \n        &.rtl {\n          direction: rtl;\n          .typewriter-text {\n            direction: rtl;\n            unicode-bidi: bidi-override;\n          }\n        }\n        \n        &.slide-in {\n          .typewriter-text {\n            animation: slideInFade 0.5s ease-out;\n          }\n        }\n        \n        .typewriter-text {\n          display: inline;\n        }\n        \n        .cursor {\n          opacity: 0;\n          font-weight: 300;\n          color: #9aa0a6;\n          margin-left: 2px;\n          \n          &.visible {\n            opacity: 1;\n          }\n        }\n      }\n      \n      .welcome-subtitle {\n        font-size: 20px;\n        color: var(--on-surface-variant);\n        margin: 0;\n      }\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; transform: translateY(-10px); }\n      to { opacity: 1; transform: translateY(0); }\n    }\n    \n    @keyframes slideInFade {\n      from { \n        opacity: 0; \n        transform: translateY(15px);\n      }\n      to { \n        opacity: 1; \n        transform: translateY(0);\n      }\n    }\n    \n    @keyframes fadeIn {\n      from { opacity: 0; transform: translateY(-10px); }\n      to { opacity: 1; transform: translateY(0); }\n    }\n    \n    @keyframes slideUpType {\n      0% { \n        opacity: 0; \n        transform: translateY(20px);\n        clip-path: inset(0 100% 0 0);\n      }\n      50% {\n        opacity: 1;\n        transform: translateY(0);\n        clip-path: inset(0 50% 0 0);\n      }\n      100% { \n        opacity: 1; \n        transform: translateY(0);\n        clip-path: inset(0 0 0 0);\n      }\n    }\n    \n    /* Centered welcome state - vertically centered */\n    .chat-container.welcome-mode {\n      justify-content: center;\n      align-items: center;\n      \n      .messages-container {\n        display: none;\n      }\n      \n      .input-section {\n        position: absolute;\n        top: 50%;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n        transform: translateY(-50%);\n        max-width: 820px;\n        width: calc(100% - 48px);\n      }\n    }\n    \n    /* After typing starts - slide down to bottom */\n    .chat-container.has-messages {\n      justify-content: flex-start;\n      \n      .messages-container {\n        display: block;\n        flex: 1;\n      }\n      \n      .input-section {\n        position: absolute;\n        bottom: 24px;\n        top: auto;\n        left: 0;\n        right: 0;\n        margin: 0 auto;\n        transform: translateY(0);\n      }\n    }\n\n    .input-box {\n      display: flex;\n      flex-direction: column;\n      background: var(--surface);\n      border: 1px solid transparent;\n      border-radius: 28px;\n      padding: 16px 20px;\n      transition: all var(--transition-fast);\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 4px 16px rgba(0, 0, 0, 0.04);\n      width: 100%;\n      position: relative;\n      z-index: 2; /* Above queue */\n      \n      &:hover {\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 8px 24px rgba(0, 0, 0, 0.06);\n      }\n      \n      &.focused {\n        border-color: var(--gemini-blue);\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n      \n      &.pulse-send {\n        animation: sendPulse 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      \n      &.is-dragging {\n        border: 2px dashed var(--gemini-blue);\n        background: rgba(66, 133, 244, 0.05);\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.2), 0 8px 32px rgba(66, 133, 244, 0.15);\n      }\n    }\n    \n    body.dark-theme .input-box.is-dragging {\n      background: rgba(138, 180, 248, 0.08);\n    }\n    \n    /* Drop Zone Overlay - absolutely positioned within input-box */\n    .drop-zone-overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(255, 255, 255, 0.95);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      z-index: 10;\n      border-radius: 28px;\n      pointer-events: none;\n    }\n\n    body.dark-theme .drop-zone-overlay {\n      background: rgba(31, 31, 31, 0.95);\n    }\n\n    .drop-icon {\n      font-size: 40px;\n      width: 40px;\n      height: 40px;\n      color: var(--gemini-blue);\n      animation: dropBounce 0.8s ease infinite;\n    }\n    \n    @keyframes dropBounce {\n      0%, 100% { transform: translateY(0); }\n      50% { transform: translateY(-6px); }\n    }\n\n    .drop-caption {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n    }\n    \n    @keyframes sendPulse {\n      0% {\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n      50% {\n        box-shadow: 0 6px 24px rgba(66, 133, 244, 0.4), 0 12px 48px rgba(66, 133, 244, 0.25);\n      }\n      100% {\n        box-shadow: 0 4px 16px rgba(66, 133, 244, 0.15), 0 8px 32px rgba(66, 133, 244, 0.1);\n      }\n    }\n    \n    .chat-input {\n      width: 100%;\n      border: none;\n      background: transparent;\n      font-size: 18px;\n      font-family: inherit;\n      color: var(--on-surface);\n      outline: none;\n      padding: 4px 0;\n      resize: none;\n      min-height: 24px;\n      max-height: 200px;\n      line-height: 1.5;\n      padding-right: 40px; /* Space for clear button */\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:disabled {\n        opacity: 0.7;\n      }\n      \n      /* Squiggly red underline for flagged content */\n      &.content-flagged {\n        text-decoration: underline wavy var(--error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n        color: var(--error);\n        \n        /* Fallback for browsers that don't support wavy */\n        @supports not (text-decoration-style: wavy) {\n          text-decoration: underline;\n          text-decoration-color: var(--error);\n        }\n      }\n    }\n    \n    /* Tooltip styling for flagged content */\n    ::ng-deep .flagged-content-tooltip {\n      background: var(--error) !important;\n      color: white !important;\n      font-weight: 500;\n    }\n    \n    /* Attached Files Container (wrapper with header and dropzone capability) */\n    .attached-files-container {\n      margin: -8px auto 0;\n      width: 85%;\n      max-width: 700px;\n      background: var(--surface-container);\n      border-radius: 0 0 var(--radius-md) var(--radius-md);\n      border: 1px solid var(--outline-variant);\n      border-top: none;\n      box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15);\n      position: relative;\n      overflow: hidden;\n      transition: border-color 0.2s, box-shadow 0.2s;\n      \n      &.is-dragging {\n        border-color: var(--gemini-blue);\n        box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15), 0 0 0 2px var(--gemini-blue-light);\n      }\n    }\n    \n    /* Attachments header toolbar */\n    .attachments-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 12px 12px 6px 16px;\n      border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n      box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.12), inset 0 1px 4px rgba(0, 0, 0, 0.15);\n      background: var(--surface-container);\n    }\n    \n    .attachments-count {\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n    }\n    \n    .attachments-actions {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .add-more-btn,\n    .clear-all-btn {\n      width: 28px !important;\n      height: 28px !important;\n      padding: 0 !important;\n      \n      .mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        color: var(--on-surface-variant);\n      }\n      \n      &:hover .mat-icon {\n        color: var(--on-surface);\n      }\n    }\n    \n    .clear-all-btn:hover .mat-icon {\n      color: var(--error) !important;\n    }\n    \n    /* Drop overlay for attachments container */\n    .attachments-drop-overlay {\n      position: absolute;\n      inset: 0;\n      background: rgba(var(--gemini-blue-rgb, 66, 133, 244), 0.1);\n      backdrop-filter: blur(2px);\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      z-index: 10;\n      \n      mat-icon {\n        font-size: 32px;\n        width: 32px;\n        height: 32px;\n        color: var(--gemini-blue);\n      }\n      \n      span {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--gemini-blue);\n      }\n    }\n    \n    /* Attached Files List (scrollable file list) */\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n      padding: 8px 16px 12px 16px;\n      max-height: 180px; /* Height for 3 items without scroll */\n      overflow-x: hidden;\n      overflow-y: auto;\n      scrollbar-width: thin;\n      \n      &::-webkit-scrollbar {\n        width: 4px;\n      }\n      \n      &::-webkit-scrollbar-track {\n        background: transparent;\n      }\n      \n      &::-webkit-scrollbar-thumb {\n        background: transparent;\n        border-radius: 2px;\n      }\n      \n      &:hover::-webkit-scrollbar-thumb {\n        background: var(--outline-variant);\n      }\n    }\n    \n    /* File row - horizontal layout */\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 6px 4px;\n      border-radius: 6px;\n      transition: background var(--transition-fast);\n      \n      &:not(:last-child) {\n        border-bottom: 1px solid var(--outline-variant);\n        padding-bottom: 8px;\n        margin-bottom: 4px;\n      }\n      \n      &:hover {\n        background: rgba(255, 255, 255, 0.5);\n        \n        .file-remove-btn-small {\n          opacity: 1;\n        }\n      }\n    }\n    \n    /* File icon wrapper */\n    .file-icon-wrapper {\n      width: 28px;\n      height: 28px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-shrink: 0;\n    }\n    \n    .file-thumb-small {\n      width: 28px;\n      height: 28px;\n      object-fit: cover;\n      border-radius: 4px;\n    }\n    \n    .file-type-icon-small {\n      font-size: 22px;\n      width: 22px;\n      height: 22px;\n      color: var(--gemini-blue);\n    }\n    \n    /* File name text */\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      font-weight: 500;\n      color: var(--on-surface);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    \n    /* File size text */\n    .file-size-text {\n      font-size: 11px;\n      color: var(--on-surface-muted);\n      flex-shrink: 0;\n    }\n    \n    /* Remove button - small circular */\n    .file-remove-btn-small {\n      width: 24px !important;\n      height: 24px !important;\n      padding: 0 !important;\n      opacity: 0.6;\n      transition: opacity var(--transition-fast);\n      flex-shrink: 0;\n      display: flex !important;\n      align-items: center;\n      justify-content: center;\n      \n      .mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n        color: var(--on-surface-variant);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      &:hover {\n        opacity: 1;\n        \n        .mat-icon {\n          color: var(--error);\n        }\n      }\n    }\n    \n    .input-toolbar {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin-top: 8px;\n      padding-top: 8px;\n    }\n    \n    .toolbar-left,\n    .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 2px;\n    }\n    \n    .toolbar-btn {\n      color: var(--on-surface-variant);\n      \n      &:hover {\n        color: var(--on-surface);\n        background: var(--surface-container);\n      }\n    }\n    \n    .add-btn {\n      background: var(--surface-container);\n      border-radius: 50%;\n    }\n    \n    .tools-btn {\n      font-size: 14px;\n      padding: 4px 12px !important;\n      min-width: auto;\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 4px;\n      }\n      \n      span {\n        font-weight: 500;\n      }\n    }\n    \n    .streaming-btn {\n      font-size: 14px;\n      padding: 4px 12px !important;\n      min-width: auto;\n      transition: all var(--transition-fast);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin-right: 4px;\n      }\n      \n      span {\n        font-weight: 500;\n      }\n      \n      &.active {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue);\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n      \n      &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n        \n        &:hover {\n          background: transparent;\n        }\n      }\n    }\n    \n    /* Settings dropdown button */\n    .settings-btn {\n      width: 36px !important;\n      height: 36px !important;\n      padding: 0 !important;\n      \n      mat-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n    \n    /* Toggle indicators in settings menu */\n    ::ng-deep .settings-menu {\n      .mat-mdc-menu-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        \n        .toggle-indicator {\n          margin-left: auto;\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-muted);\n          \n          &.active {\n            color: #34a853;\n          }\n          \n          &.loading {\n            animation: pulse 1.5s infinite;\n          }\n        }\n      }\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n    \n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px 4px 12px !important;\n      font-size: 14px;\n      color: var(--on-surface);\n      background: transparent;\n      border-radius: 8px;\n      min-width: auto;\n      \n      .model-info {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-end;\n        line-height: 1.2;\n        order: 0;\n      }\n      \n      .model-name {\n        font-weight: 500;\n        font-size: 13px;\n        white-space: nowrap;\n      }\n      \n      .provider-name {\n        font-weight: 400;\n        font-size: 10px;\n        color: var(--on-surface-muted);\n        white-space: nowrap;\n        opacity: 0.7;\n      }\n      \n      .dropdown-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        color: var(--on-surface-muted);\n        order: 1;\n        margin-left: 2px;\n      }\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n    }\n    \n    .mic-btn {\n      &.recording {\n        color: #ea4335 !important;\n        animation: pulse 1s infinite;\n      }\n    }\n    \n    /* Action button container for send/mic transition */\n    .action-btn-container {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 40px;\n      height: 40px;\n      overflow: hidden;\n      position: relative;\n      margin-top: -4px;\n    }\n    \n    .send-btn {\n      color: var(--gemini-blue) !important;\n      \n      &:hover {\n        background: rgba(66, 133, 244, 0.1) !important;\n      }\n    }\n    \n    /* Quick Action Chips */\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n      justify-content: center;\n      margin: 24px 0;\n      padding: 0 16px;\n    }\n    \n    .quick-chip {\n      display: inline-flex !important;\n      align-items: center;\n      gap: 6px;\n      border-radius: 20px !important;\n      font-size: 14px;\n      padding: 8px 14px !important;\n      background: var(--surface) !important;\n      border: 1px solid var(--surface-variant) !important;\n      color: var(--on-surface) !important;\n      \n      .chip-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n      \n      &:hover {\n        background: var(--surface-container) !important;\n        border-color: var(--on-surface-muted) !important;\n      }\n    }\n    \n    .disclaimer {\n      margin: 16px 0 0;\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      text-align: center;\n    }\n\n    .input-wrapper {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 8px 12px;\n      background: var(--surface-container);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-full);\n      transition: all var(--transition-fast);\n      \n      &:hover {\n        border-color: var(--on-surface-muted);\n      }\n      \n      &.focused {\n        background: var(--surface);\n        border-color: var(--gemini-blue);\n        box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.15);\n      }\n    }\n\n    .input-action {\n      color: var(--on-surface-variant);\n      flex-shrink: 0;\n      \n      &:hover {\n        color: var(--on-surface);\n      }\n      \n      &.recording {\n        color: #ea4335 !important;\n        animation: pulse 1s infinite;\n      }\n    }\n\n    .chat-input {\n      flex: 1;\n      min-width: 0;\n      border: none;\n      background: transparent;\n      font-size: 18px;\n      font-family: inherit;\n      color: var(--on-surface);\n      outline: none;\n      padding: 8px;\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:disabled {\n        opacity: 0.7;\n      }\n    }\n\n    .model-select-container {\n      flex-shrink: 0;\n    }\n    \n    .model-select-trigger {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px !important;\n      min-width: 160px;\n      max-width: 200px;\n      background: var(--surface) !important;\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-sm) !important;\n      font-size: 13px;\n      height: 32px;\n      \n      .selected-model {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        flex: 1;\n        text-align: left;\n      }\n      \n      .dropdown-arrow {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        margin: 0 -4px 0 0;\n        color: var(--on-surface-muted);\n      }\n      \n      &:hover {\n        background: var(--surface-container) !important;\n        border-color: var(--gemini-blue);\n      }\n    }\n\n    .send-btn {\n      color: var(--on-surface-muted);\n      flex-shrink: 0;\n      transition: all var(--transition-fast);\n      \n      &.active {\n        color: var(--gemini-blue);\n        \n        &:hover {\n          background: var(--user-bubble-bg);\n        }\n      }\n      \n      &:disabled {\n        opacity: 0.4;\n      }\n    }\n\n\n\n    /* Animations */\n    .animate-fade-in {\n      animation: fadeIn 0.2s ease-out forwards;\n    }\n\n    @keyframes fadeIn {\n      from {\n        opacity: 0;\n        transform: translateY(8px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 20px;\n      right: 20px;\n      width: 32px !important;\n      height: 32px !important;\n      padding: 0 !important;\n      display: flex !important;\n      align-items: center;\n      justify-content: center;\n\n      mat-icon {\n        font-size: 22px;\n        width: 22px;\n        height: 22px;\n        color: var(--on-surface-muted);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      &:hover mat-icon {\n        color: var(--on-surface);\n      }\n    }\n  \n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 2369
            },
            "extends": [],
            "implements": [
                "OnDestroy",
                "AfterViewInit"
            ]
        },
        {
            "name": "ChatInputComponent",
            "id": "component-ChatInputComponent-b07f1ce2875da326c0f2b907c9a2120690ca9950f8d13b2cff50fc814a1b5ee4a802ed71c7676b1c3b44ec62e86ade6049e8c72ededb898cdd9616920b254122",
            "file": "src/app/features/chat/components/chat-input/chat-input.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-chat-input",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n      --_error: var(--error, #ba1a1a);\n    }\n\n    .input-box {\n      position: relative;\n      background: var(--_surface-container);\n      border: 1px solid var(--_outline-variant);\n      border-radius: 24px;\n      padding: 12px 16px;\n      transition: all 0.2s ease;\n      \n      &.focused {\n        border-color: var(--_primary);\n        box-shadow: 0 0 0 1px var(--_primary);\n      }\n      \n      &.is-dragging {\n        border-color: var(--_primary);\n        background: var(--_primary-container);\n      }\n    }\n\n    .drop-zone-overlay {\n      position: absolute;\n      inset: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      background: var(--_primary-container);\n      border-radius: 24px;\n      z-index: 10;\n      \n      .drop-icon {\n        font-size: 48px;\n        width: 48px;\n        height: 48px;\n        color: var(--_primary);\n      }\n      \n      .drop-caption {\n        margin-top: 8px;\n        font-size: 14px;\n        color: var(--_on-primary-container);\n      }\n    }\n\n    .chat-input {\n      width: 100%;\n      background: transparent;\n      border: none;\n      outline: none;\n      font-size: 16px;\n      color: var(--_on-surface);\n      resize: none;\n      font-family: inherit;\n      line-height: 1.5;\n      max-height: 200px;\n      overflow-y: auto;\n      \n      &::placeholder {\n        color: var(--_on-surface-variant);\n      }\n      \n      &.content-flagged {\n        text-decoration: underline wavy var(--_error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    .input-toolbar {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 8px;\n      padding-top: 8px;\n      border-top: 1px solid var(--_outline-variant);\n    }\n\n    .toolbar-left, .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n    }\n\n    .toolbar-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .tools-btn {\n      font-size: 13px;\n      \n      mat-icon {\n        font-size: 18px;\n        margin-right: 4px;\n      }\n    }\n\n    .action-btn-container {\n      overflow: hidden;\n    }\n\n    .send-btn {\n      color: var(--_primary);\n    }\n\n    .mic-btn {\n      &.recording {\n        color: var(--_error);\n        animation: pulse 1s ease-in-out infinite;\n      }\n    }\n\n    .toggle-indicator {\n      margin-left: auto;\n      font-size: 18px;\n      color: var(--_on-surface-variant);\n      \n      &.active {\n        color: var(--_primary);\n      }\n    }\n\n    /* Attached files styles */\n    .attached-files-container {\n      margin-top: 12px;\n      padding: 12px;\n      background: var(--_surface-container);\n      border-radius: 12px;\n    }\n\n    .attachments-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .attachments-count {\n      font-size: 12px;\n      color: var(--_on-surface-variant);\n    }\n\n    .attachments-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n        }\n      }\n    }\n\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 8px;\n      background: var(--_surface-container-high);\n      border-radius: 8px;\n    }\n\n    .file-icon-wrapper {\n      width: 32px;\n      height: 32px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      .file-thumb-small {\n        width: 32px;\n        height: 32px;\n        object-fit: cover;\n        border-radius: 4px;\n      }\n      \n      .file-type-icon-small {\n        font-size: 24px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-size-text {\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n    }\n\n    .file-remove-btn-small {\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n  "
            ],
            "template": "<div class=\"input-box\"\n     [class.focused]=\"inputFocused()\"\n     [class.is-dragging]=\"isDragging()\"\n     (click)=\"focusInput($event)\"\n     (dragover)=\"onDragOver($event)\"\n     (dragleave)=\"onDragLeave($event)\"\n     (drop)=\"onDrop($event)\">\n\n  <!-- Drop Zone Overlay -->\n  @if (isDragging()) {\n    <div class=\"drop-zone-overlay\">\n      <mat-icon class=\"drop-icon\">cloud_upload</mat-icon>\n      <span class=\"drop-caption\">Drop files to attach</span>\n    </div>\n  }\n\n  <textarea class=\"chat-input\"\n            [class.content-flagged]=\"contentFlagged()\"\n            [(ngModel)]=\"message\"\n            [placeholder]=\"placeholder()\"\n            [attr.aria-label]=\"placeholder()\"\n            (keydown.enter)=\"onEnterKey($event)\"\n            (focus)=\"inputFocused.set(true)\"\n            (blur)=\"inputFocused.set(false)\"\n            (input)=\"onInputChange()\"\n            [matTooltip]=\"contentFlagged() ? 'Content flagged: ' + flaggedLabels().join(', ') : ''\"\n            rows=\"1\"\n            #chatTextarea></textarea>\n\n  @if (message) {\n    <button mat-icon-button class=\"clear-input-btn\" (click)=\"clearInput()\" [attr.aria-label]=\"'chat.clearInput' | translate\" [matTooltip]=\"'chat.clearInput' | translate\">\n      <mat-icon>close</mat-icon>\n    </button>\n  }\n\n  <!-- Bottom Toolbar -->\n  <div class=\"input-toolbar\">\n    <div class=\"toolbar-left\">\n      <!-- Add/Attach Button -->\n      <button mat-icon-button\n              class=\"toolbar-btn add-btn\"\n              [attr.aria-label]=\"'chat.addFiles' | translate\"\n              [matTooltip]=\"'chat.addFiles' | translate\"\n              [matMenuTriggerFor]=\"attachMenu\">\n        <mat-icon>add</mat-icon>\n      </button>\n\n      <mat-menu #attachMenu=\"matMenu\" class=\"attach-menu\">\n        <button mat-menu-item (click)=\"anyInput.click()\">\n          <mat-icon>upload_file</mat-icon>\n          <span>{{ 'chat.uploadFiles' | translate }}</span>\n        </button>\n        <button mat-menu-item (click)=\"imageInput.click()\">\n          <mat-icon>image</mat-icon>\n          <span>{{ 'attach.photos' | translate }}</span>\n        </button>\n        <mat-divider></mat-divider>\n        <button mat-menu-item (click)=\"audioInput.click()\">\n          <mat-icon>audio_file</mat-icon>\n          <span>{{ 'attach.audio' | translate }}</span>\n        </button>\n        <button mat-menu-item (click)=\"videoInput.click()\">\n          <mat-icon>videocam</mat-icon>\n          <span>{{ 'attach.video' | translate }}</span>\n        </button>\n        <button mat-menu-item (click)=\"pdfInput.click()\">\n          <mat-icon>picture_as_pdf</mat-icon>\n          <span>{{ 'attach.pdf' | translate }}</span>\n        </button>\n        <button mat-menu-item (click)=\"textInput.click()\">\n          <mat-icon>code</mat-icon>\n          <span>{{ 'attach.code' | translate }}</span>\n        </button>\n      </mat-menu>\n\n      <!-- Hidden file inputs -->\n      <input #imageInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"image/*\">\n      <input #videoInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"video/*\">\n      <input #audioInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"audio/*\">\n      <input #pdfInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".pdf\">\n      <input #textInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".txt,.md,.json,.csv,.xml,.yaml,.yml,.py,.ts,.js,.go,.rs,.java\">\n      <input #anyInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple>\n\n      <!-- Tools Button -->\n      <button mat-button class=\"toolbar-btn tools-btn\">\n        <mat-icon>handyman</mat-icon>\n        <span>{{ 'toolbar.tools' | translate }}</span>\n      </button>\n    </div>\n\n    <div class=\"toolbar-right\">\n      <ng-content select=\"[modelSelector]\"></ng-content>\n\n      <!-- Settings Dropdown -->\n      <button mat-icon-button\n              class=\"toolbar-btn settings-btn\"\n              [matMenuTriggerFor]=\"settingsMenu\"\n              [attr.aria-label]=\"'toolbar.settings' | translate\"\n              [matTooltip]=\"'toolbar.settings' | translate\">\n        <mat-icon>tune</mat-icon>\n      </button>\n      <mat-menu #settingsMenu=\"matMenu\" class=\"settings-menu\">\n        <!-- Streaming Toggle -->\n        <button mat-menu-item (click)=\"toggleStreaming.emit(); $event.stopPropagation()\">\n          <mat-icon>{{ streamingEnabled() ? 'stream' : 'pause_circle' }}</mat-icon>\n          <span>{{ 'toolbar.stream' | translate }}</span>\n          <mat-icon class=\"toggle-indicator\" [class.active]=\"streamingEnabled()\">\n            {{ streamingEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n          </mat-icon>\n        </button>\n\n        <!-- Markdown Toggle -->\n        <button mat-menu-item (click)=\"toggleMarkdown.emit(); $event.stopPropagation()\">\n          <mat-icon>{{ markdownEnabled() ? 'code' : 'code_off' }}</mat-icon>\n          <span>{{ 'toolbar.markdown' | translate }}</span>\n          <mat-icon class=\"toggle-indicator\" [class.active]=\"markdownEnabled()\">\n            {{ markdownEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n          </mat-icon>\n        </button>\n\n        <!-- Content Safety Toggle -->\n        <button mat-menu-item (click)=\"toggleSafety.emit(); $event.stopPropagation()\">\n          <mat-icon>{{ safetyEnabled() ? 'shield' : 'shield_outlined' }}</mat-icon>\n          <span>{{ 'toolbar.safe' | translate }}</span>\n          <mat-icon class=\"toggle-indicator\" [class.active]=\"safetyEnabled()\">\n            {{ safetyEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n          </mat-icon>\n        </button>\n\n        <mat-divider></mat-divider>\n\n        <!-- Clear Preferences -->\n        <button mat-menu-item (click)=\"clearPreferences.emit()\">\n          <mat-icon>delete_outline</mat-icon>\n          <span>{{ 'settings.clearPreferences' | translate }}</span>\n        </button>\n      </mat-menu>\n\n      <!-- Send Button or Voice Input -->\n      <div class=\"action-btn-container\">\n        @if (showSendButton()) {\n          <button mat-icon-button\n                  class=\"toolbar-btn send-btn\"\n                  @slideButton\n                  [attr.aria-label]=\"'chat.sendMessage' | translate\"\n                  [matTooltip]=\"'chat.sendMessage' | translate\"\n                  (click)=\"sendMessage()\">\n            <mat-icon>send</mat-icon>\n          </button>\n        } @else if (voiceSupported()) {\n          <button mat-icon-button\n                  class=\"toolbar-btn mic-btn\"\n                  @slideButton\n                  [class.recording]=\"isRecording()\"\n                  [attr.aria-label]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                  [matTooltip]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                  (click)=\"toggleVoice.emit()\">\n            <mat-icon>{{ isRecording() ? 'mic_off' : 'mic' }}</mat-icon>\n          </button>\n        }\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Attached Files List -->\n@if (attachedFiles().length > 0) {\n  <div class=\"attached-files-container\" [class.is-dragging]=\"isDragging()\">\n    <div class=\"attachments-header\">\n      <span class=\"attachments-count\">{{ attachedFiles().length }} file{{ attachedFiles().length > 1 ? 's' : '' }} attached</span>\n      <div class=\"attachments-actions\">\n        <button mat-icon-button class=\"add-more-btn\" (click)=\"anyInput.click()\" [attr.aria-label]=\"'chat.addMoreFiles' | translate\" [matTooltip]=\"'chat.addMoreFiles' | translate\">\n          <mat-icon>add</mat-icon>\n        </button>\n        <button mat-icon-button class=\"clear-all-btn\" (click)=\"clearAllFiles()\" [attr.aria-label]=\"'actions.clearAll' | translate\" [matTooltip]=\"'actions.clearAll' | translate\">\n          <mat-icon>delete_sweep</mat-icon>\n        </button>\n      </div>\n    </div>\n\n    <div class=\"attached-files-list\">\n      @for (file of attachedFiles(); track file.name) {\n        <div class=\"file-row\">\n          <div class=\"file-icon-wrapper\">\n            @if (file.type.startsWith('image/')) {\n              <img [src]=\"file.preview\" alt=\"preview\" class=\"file-thumb-small\">\n            } @else {\n              <mat-icon class=\"file-type-icon-small\">{{ getFileIcon(file.type) }}</mat-icon>\n            }\n          </div>\n          <span class=\"file-name-text\" [matTooltip]=\"file.name\">{{ file.name }}</span>\n          <span class=\"file-size-text\">{{ formatFileSize(file.size) }}</span>\n          <button mat-icon-button class=\"file-remove-btn-small\" (click)=\"removeFile(file)\" [attr.aria-label]=\"('actions.remove' | translate) + ' ' + file.name\" [matTooltip]=\"'actions.remove' | translate\">\n            <mat-icon>close</mat-icon>\n          </button>\n        </div>\n      }\n    </div>\n  </div>\n}\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "contentFlagged",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether content is flagged as unsafe</p>\n",
                    "line": 587,
                    "rawdescription": "\nWhether content is flagged as unsafe",
                    "required": false
                },
                {
                    "name": "disabled",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the input is disabled</p>\n",
                    "line": 584,
                    "rawdescription": "\nWhether the input is disabled",
                    "required": false
                },
                {
                    "name": "flaggedLabels",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Labels of flagged content</p>\n",
                    "line": 590,
                    "rawdescription": "\nLabels of flagged content",
                    "required": false
                },
                {
                    "name": "injectedText",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Signal-based text injection for decoupled communication.\nWhen this value changes, the input text is updated and the input is focused.\nUse with a signal from parent component:</p>\n<b>Example :</b><div><pre class=\"line-numbers\"><code class=\"language-html\">// In parent:\ninjectedPrompt = signal&lt;string | null&gt;(null);</code></pre></div><p>// When quick action clicked:\nthis.injectedPrompt.set(&#39;Tell me a joke&#39;);</p>\n<p>// In template:\n&lt;app-chat-input [injectedText]=&quot;injectedPrompt()&quot; /&gt;</p>\n",
                    "line": 622,
                    "rawdescription": "\n\nSignal-based text injection for decoupled communication.\nWhen this value changes, the input text is updated and the input is focused.\nUse with a signal from parent component:\n\n```html\n// In parent:\ninjectedPrompt = signal<string | null>(null);\n```\n// When quick action clicked:\nthis.injectedPrompt.set('Tell me a joke');\n\n// In template:\n<app-chat-input [injectedText]=\"injectedPrompt()\" />\n",
                    "jsdoctags": [
                        {
                            "pos": 21299,
                            "end": 21555,
                            "kind": 328,
                            "id": 0,
                            "flags": 16842752,
                            "modifierFlagsCache": 0,
                            "transformFlags": 0,
                            "tagName": {
                                "pos": 21300,
                                "end": 21307,
                                "kind": 80,
                                "id": 0,
                                "flags": 16842752,
                                "transformFlags": 0,
                                "escapedText": "example"
                            },
                            "comment": "<p>// In parent:\ninjectedPrompt = signal&lt;string | null&gt;(null);</p>\n<p>// When quick action clicked:\nthis.injectedPrompt.set(&#39;Tell me a joke&#39;);</p>\n<p>// In template:\n&lt;app-chat-input [injectedText]=&quot;injectedPrompt()&quot; /&gt;</p>\n"
                        }
                    ],
                    "required": false
                },
                {
                    "name": "isRecording",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether voice is currently recording</p>\n",
                    "line": 602,
                    "rawdescription": "\nWhether voice is currently recording",
                    "required": false
                },
                {
                    "name": "markdownEnabled",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether markdown rendering is enabled</p>\n",
                    "line": 596,
                    "rawdescription": "\nWhether markdown rendering is enabled",
                    "required": false
                },
                {
                    "name": "placeholder",
                    "defaultValue": "'Type a message...'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Placeholder text for the input</p>\n",
                    "line": 581,
                    "rawdescription": "\nPlaceholder text for the input",
                    "required": false
                },
                {
                    "name": "safetyEnabled",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether content safety is enabled</p>\n",
                    "line": 599,
                    "rawdescription": "\nWhether content safety is enabled",
                    "required": false
                },
                {
                    "name": "streamingEnabled",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether streaming is enabled</p>\n",
                    "line": 593,
                    "rawdescription": "\nWhether streaming is enabled",
                    "required": false
                },
                {
                    "name": "voiceSupported",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether voice input is supported</p>\n",
                    "line": 605,
                    "rawdescription": "\nWhether voice input is supported",
                    "required": false
                }
            ],
            "outputsClass": [
                {
                    "name": "clearPreferences",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when clear preferences is clicked</p>\n",
                    "line": 643,
                    "rawdescription": "\nEmitted when clear preferences is clicked",
                    "required": false
                },
                {
                    "name": "filesSelected",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "File[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when files are selected</p>\n",
                    "line": 646,
                    "rawdescription": "\nEmitted when files are selected",
                    "required": false
                },
                {
                    "name": "inputChange",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when input text changes</p>\n",
                    "line": 628,
                    "rawdescription": "\nEmitted when input text changes",
                    "required": false
                },
                {
                    "name": "send",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "SendEvent",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user sends a message</p>\n",
                    "line": 625,
                    "rawdescription": "\nEmitted when user sends a message",
                    "required": false
                },
                {
                    "name": "toggleMarkdown",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when markdown toggle is clicked</p>\n",
                    "line": 637,
                    "rawdescription": "\nEmitted when markdown toggle is clicked",
                    "required": false
                },
                {
                    "name": "toggleSafety",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when safety toggle is clicked</p>\n",
                    "line": 640,
                    "rawdescription": "\nEmitted when safety toggle is clicked",
                    "required": false
                },
                {
                    "name": "toggleStreaming",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when streaming toggle is clicked</p>\n",
                    "line": 634,
                    "rawdescription": "\nEmitted when streaming toggle is clicked",
                    "required": false
                },
                {
                    "name": "toggleVoice",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when voice toggle is clicked</p>\n",
                    "line": 631,
                    "rawdescription": "\nEmitted when voice toggle is clicked",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "attachedFiles",
                    "defaultValue": "signal<AttachedFile[]>([])",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 656
                },
                {
                    "name": "inputFocused",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 654
                },
                {
                    "name": "isDragging",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 655
                },
                {
                    "name": "message",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Local state</p>\n",
                    "line": 653,
                    "rawdescription": "\nLocal state"
                },
                {
                    "name": "showSendButton",
                    "defaultValue": "computed(() => this.message.trim().length > 0)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Computed: show send button when there&#39;s text</p>\n",
                    "line": 659,
                    "rawdescription": "\nComputed: show send button when there's text"
                },
                {
                    "name": "snackBar",
                    "defaultValue": "inject(MatSnackBar)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Services</p>\n",
                    "line": 649,
                    "rawdescription": "\nServices",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "textareaRef",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ElementRef<HTMLTextAreaElement>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 661,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "'chatTextarea'"
                        }
                    ],
                    "modifierKind": [
                        171,
                        123
                    ]
                },
                {
                    "name": "translate",
                    "defaultValue": "inject(TranslateService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 650,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methodsClass": [
                {
                    "name": "clearAllFiles",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 820,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "clearInput",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 732,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "focusInput",
                    "args": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 683,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "MouseEvent",
                            "optional": true,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "focusInputAtEnd",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 698,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\n\nFocus the input and move cursor to the end of the text.\nUsed when injecting text to place cursor after the injected content.\n",
                    "description": "<p>Focus the input and move cursor to the end of the text.\nUsed when injecting text to place cursor after the injected content.</p>\n"
                },
                {
                    "name": "formatFileSize",
                    "args": [
                        {
                            "name": "bytes",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 828,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "bytes",
                            "type": "number",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getFileIcon",
                    "args": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 824,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngAfterViewInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 678,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onDragLeave",
                    "args": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 744,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onDragOver",
                    "args": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 738,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onDrop",
                    "args": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 750,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "DragEvent",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onEnterKey",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 711,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onFileSelected",
                    "args": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 761,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "Event",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onInputChange",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 707,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "processFiles",
                    "args": [
                        {
                            "name": "files",
                            "type": "File[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 769,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "files",
                            "type": "File[]",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "removeFile",
                    "args": [
                        {
                            "name": "file",
                            "type": "AttachedFile",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 816,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "file",
                            "type": "AttachedFile",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "sendMessage",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 719,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatMenuModule",
                    "type": "module"
                },
                {
                    "name": "MatTooltipModule",
                    "type": "module"
                },
                {
                    "name": "MatDividerModule",
                    "type": "module"
                },
                {
                    "name": "MatSnackBarModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import {\n  Component, input, output, signal, computed, effect,\n  ElementRef, ViewChild, AfterViewInit, inject\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { trigger, transition, style, animate } from '@angular/animations';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\n\n/** Default configuration - can be overridden via inputs */\nconst DEFAULT_CONFIG = {\n  maxAttachments: 10,\n  maxFileSizeBytes: 1 * 1024 * 1024, // 1MB\n};\n\n/**\n * Get Material Icon name for a given MIME type.\n * Inlined for component portability.\n */\nfunction getMimeTypeIcon(mimeType: string): string {\n  if (mimeType.startsWith('image/')) return 'image';\n  if (mimeType.startsWith('video/')) return 'videocam';\n  if (mimeType.startsWith('audio/')) return 'audio_file';\n  if (mimeType === 'application/pdf') return 'picture_as_pdf';\n  if (mimeType.includes('spreadsheet') || mimeType.includes('excel')) return 'table_chart';\n  if (mimeType.includes('presentation') || mimeType.includes('powerpoint')) return 'slideshow';\n  if (mimeType.includes('document') || mimeType.includes('word')) return 'description';\n  if (mimeType.startsWith('text/')) return 'article';\n  if (mimeType.includes('zip') || mimeType.includes('compressed')) return 'folder_zip';\n  if (mimeType.includes('json')) return 'data_object';\n  return 'insert_drive_file';\n}\n\nexport interface AttachedFile {\n  name: string;\n  size: number;\n  type: string;\n  preview?: string;\n  data?: string;\n}\n\nexport interface SendEvent {\n  message: string;\n  attachments: AttachedFile[];\n}\n\n@Component({\n  selector: 'app-chat-input',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatTooltipModule,\n    MatDividerModule,\n    MatSnackBarModule,\n    TranslateModule,\n  ],\n  animations: [\n    trigger('slideButton', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateX(10px)' }),\n        animate('150ms ease-out', style({ opacity: 1, transform: 'translateX(0)' }))\n      ]),\n      transition(':leave', [\n        animate('100ms ease-in', style({ opacity: 0, transform: 'translateX(-10px)' }))\n      ])\n    ])\n  ],\n  template: `\n    <div class=\"input-box\" \n         [class.focused]=\"inputFocused()\" \n         [class.is-dragging]=\"isDragging()\"\n         (click)=\"focusInput($event)\"\n         (dragover)=\"onDragOver($event)\" \n         (dragleave)=\"onDragLeave($event)\"\n         (drop)=\"onDrop($event)\">\n      \n      <!-- Drop Zone Overlay -->\n      @if (isDragging()) {\n        <div class=\"drop-zone-overlay\">\n          <mat-icon class=\"drop-icon\">cloud_upload</mat-icon>\n          <span class=\"drop-caption\">Drop files to attach</span>\n        </div>\n      }\n      \n      <textarea class=\"chat-input\" \n                [class.content-flagged]=\"contentFlagged()\"\n                [(ngModel)]=\"message\" \n                [placeholder]=\"placeholder()\"\n                [attr.aria-label]=\"placeholder()\"\n                (keydown.enter)=\"onEnterKey($event)\"\n                (focus)=\"inputFocused.set(true)\"\n                (blur)=\"inputFocused.set(false)\"\n                (input)=\"onInputChange()\"\n                [matTooltip]=\"contentFlagged() ? 'Content flagged: ' + flaggedLabels().join(', ') : ''\"\n                rows=\"1\"\n                #chatTextarea></textarea>\n\n      @if (message) {\n        <button mat-icon-button class=\"clear-input-btn\" (click)=\"clearInput()\" [attr.aria-label]=\"'chat.clearInput' | translate\" [matTooltip]=\"'chat.clearInput' | translate\">\n          <mat-icon>close</mat-icon>\n        </button>\n      }\n      \n      <!-- Bottom Toolbar -->\n      <div class=\"input-toolbar\">\n        <div class=\"toolbar-left\">\n          <!-- Add/Attach Button -->\n          <button mat-icon-button \n                  class=\"toolbar-btn add-btn\"\n                  [attr.aria-label]=\"'chat.addFiles' | translate\"\n                  [matTooltip]=\"'chat.addFiles' | translate\"\n                  [matMenuTriggerFor]=\"attachMenu\">\n            <mat-icon>add</mat-icon>\n          </button>\n          \n          <mat-menu #attachMenu=\"matMenu\" class=\"attach-menu\">\n            <button mat-menu-item (click)=\"anyInput.click()\">\n              <mat-icon>upload_file</mat-icon>\n              <span>{{ 'chat.uploadFiles' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"imageInput.click()\">\n              <mat-icon>image</mat-icon>\n              <span>{{ 'attach.photos' | translate }}</span>\n            </button>\n            <mat-divider></mat-divider>\n            <button mat-menu-item (click)=\"audioInput.click()\">\n              <mat-icon>audio_file</mat-icon>\n              <span>{{ 'attach.audio' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"videoInput.click()\">\n              <mat-icon>videocam</mat-icon>\n              <span>{{ 'attach.video' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"pdfInput.click()\">\n              <mat-icon>picture_as_pdf</mat-icon>\n              <span>{{ 'attach.pdf' | translate }}</span>\n            </button>\n            <button mat-menu-item (click)=\"textInput.click()\">\n              <mat-icon>code</mat-icon>\n              <span>{{ 'attach.code' | translate }}</span>\n            </button>\n          </mat-menu>\n          \n          <!-- Hidden file inputs -->\n          <input #imageInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"image/*\">\n          <input #videoInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"video/*\">\n          <input #audioInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\"audio/*\">\n          <input #pdfInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".pdf\">\n          <input #textInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple accept=\".txt,.md,.json,.csv,.xml,.yaml,.yml,.py,.ts,.js,.go,.rs,.java\">\n          <input #anyInput type=\"file\" hidden (change)=\"onFileSelected($event)\" multiple>\n          \n          <!-- Tools Button -->\n          <button mat-button class=\"toolbar-btn tools-btn\">\n            <mat-icon>handyman</mat-icon>\n            <span>{{ 'toolbar.tools' | translate }}</span>\n          </button>\n        </div>\n        \n        <div class=\"toolbar-right\">\n          <ng-content select=\"[modelSelector]\"></ng-content>\n          \n          <!-- Settings Dropdown -->\n          <button mat-icon-button \n                  class=\"toolbar-btn settings-btn\"\n                  [matMenuTriggerFor]=\"settingsMenu\"\n                  [attr.aria-label]=\"'toolbar.settings' | translate\"\n                  [matTooltip]=\"'toolbar.settings' | translate\">\n            <mat-icon>tune</mat-icon>\n          </button>\n          <mat-menu #settingsMenu=\"matMenu\" class=\"settings-menu\">\n            <!-- Streaming Toggle -->\n            <button mat-menu-item (click)=\"toggleStreaming.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ streamingEnabled() ? 'stream' : 'pause_circle' }}</mat-icon>\n              <span>{{ 'toolbar.stream' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"streamingEnabled()\">\n                {{ streamingEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <!-- Markdown Toggle -->\n            <button mat-menu-item (click)=\"toggleMarkdown.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ markdownEnabled() ? 'code' : 'code_off' }}</mat-icon>\n              <span>{{ 'toolbar.markdown' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"markdownEnabled()\">\n                {{ markdownEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <!-- Content Safety Toggle -->\n            <button mat-menu-item (click)=\"toggleSafety.emit(); $event.stopPropagation()\">\n              <mat-icon>{{ safetyEnabled() ? 'shield' : 'shield_outlined' }}</mat-icon>\n              <span>{{ 'toolbar.safe' | translate }}</span>\n              <mat-icon class=\"toggle-indicator\" [class.active]=\"safetyEnabled()\">\n                {{ safetyEnabled() ? 'check_circle' : 'radio_button_unchecked' }}\n              </mat-icon>\n            </button>\n            \n            <mat-divider></mat-divider>\n            \n            <!-- Clear Preferences -->\n            <button mat-menu-item (click)=\"clearPreferences.emit()\">\n              <mat-icon>delete_outline</mat-icon>\n              <span>{{ 'settings.clearPreferences' | translate }}</span>\n            </button>\n          </mat-menu>\n          \n          <!-- Send Button or Voice Input -->\n          <div class=\"action-btn-container\">\n            @if (showSendButton()) {\n              <button mat-icon-button \n                      class=\"toolbar-btn send-btn\"\n                      @slideButton\n                      [attr.aria-label]=\"'chat.sendMessage' | translate\"\n                      [matTooltip]=\"'chat.sendMessage' | translate\"\n                      (click)=\"sendMessage()\">\n                <mat-icon>send</mat-icon>\n              </button>\n            } @else if (voiceSupported()) {\n              <button mat-icon-button \n                      class=\"toolbar-btn mic-btn\"\n                      @slideButton\n                      [class.recording]=\"isRecording()\"\n                      [attr.aria-label]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      [matTooltip]=\"isRecording() ? ('chat.stopRecording' | translate) : ('chat.voiceInput' | translate)\"\n                      (click)=\"toggleVoice.emit()\">\n                <mat-icon>{{ isRecording() ? 'mic_off' : 'mic' }}</mat-icon>\n              </button>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- Attached Files List -->\n    @if (attachedFiles().length > 0) {\n      <div class=\"attached-files-container\" [class.is-dragging]=\"isDragging()\">\n        <div class=\"attachments-header\">\n          <span class=\"attachments-count\">{{ attachedFiles().length }} file{{ attachedFiles().length > 1 ? 's' : '' }} attached</span>\n          <div class=\"attachments-actions\">\n            <button mat-icon-button class=\"add-more-btn\" (click)=\"anyInput.click()\" [attr.aria-label]=\"'chat.addMoreFiles' | translate\" [matTooltip]=\"'chat.addMoreFiles' | translate\">\n              <mat-icon>add</mat-icon>\n            </button>\n            <button mat-icon-button class=\"clear-all-btn\" (click)=\"clearAllFiles()\" [attr.aria-label]=\"'actions.clearAll' | translate\" [matTooltip]=\"'actions.clearAll' | translate\">\n              <mat-icon>delete_sweep</mat-icon>\n            </button>\n          </div>\n        </div>\n        \n        <div class=\"attached-files-list\">\n          @for (file of attachedFiles(); track file.name) {\n            <div class=\"file-row\">\n              <div class=\"file-icon-wrapper\">\n                @if (file.type.startsWith('image/')) {\n                  <img [src]=\"file.preview\" alt=\"preview\" class=\"file-thumb-small\">\n                } @else {\n                  <mat-icon class=\"file-type-icon-small\">{{ getFileIcon(file.type) }}</mat-icon>\n                }\n              </div>\n              <span class=\"file-name-text\" [matTooltip]=\"file.name\">{{ file.name }}</span>\n              <span class=\"file-size-text\">{{ formatFileSize(file.size) }}</span>\n              <button mat-icon-button class=\"file-remove-btn-small\" (click)=\"removeFile(file)\" [attr.aria-label]=\"('actions.remove' | translate) + ' ' + file.name\" [matTooltip]=\"'actions.remove' | translate\">\n                <mat-icon>close</mat-icon>\n              </button>\n            </div>\n          }\n        </div>\n      </div>\n    }\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n      --_error: var(--error, #ba1a1a);\n    }\n\n    .input-box {\n      position: relative;\n      background: var(--_surface-container);\n      border: 1px solid var(--_outline-variant);\n      border-radius: 24px;\n      padding: 12px 16px;\n      transition: all 0.2s ease;\n      \n      &.focused {\n        border-color: var(--_primary);\n        box-shadow: 0 0 0 1px var(--_primary);\n      }\n      \n      &.is-dragging {\n        border-color: var(--_primary);\n        background: var(--_primary-container);\n      }\n    }\n\n    .drop-zone-overlay {\n      position: absolute;\n      inset: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      background: var(--_primary-container);\n      border-radius: 24px;\n      z-index: 10;\n      \n      .drop-icon {\n        font-size: 48px;\n        width: 48px;\n        height: 48px;\n        color: var(--_primary);\n      }\n      \n      .drop-caption {\n        margin-top: 8px;\n        font-size: 14px;\n        color: var(--_on-primary-container);\n      }\n    }\n\n    .chat-input {\n      width: 100%;\n      background: transparent;\n      border: none;\n      outline: none;\n      font-size: 16px;\n      color: var(--_on-surface);\n      resize: none;\n      font-family: inherit;\n      line-height: 1.5;\n      max-height: 200px;\n      overflow-y: auto;\n      \n      &::placeholder {\n        color: var(--_on-surface-variant);\n      }\n      \n      &.content-flagged {\n        text-decoration: underline wavy var(--_error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    .input-toolbar {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 8px;\n      padding-top: 8px;\n      border-top: 1px solid var(--_outline-variant);\n    }\n\n    .toolbar-left, .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n    }\n\n    .toolbar-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .tools-btn {\n      font-size: 13px;\n      \n      mat-icon {\n        font-size: 18px;\n        margin-right: 4px;\n      }\n    }\n\n    .action-btn-container {\n      overflow: hidden;\n    }\n\n    .send-btn {\n      color: var(--_primary);\n    }\n\n    .mic-btn {\n      &.recording {\n        color: var(--_error);\n        animation: pulse 1s ease-in-out infinite;\n      }\n    }\n\n    .toggle-indicator {\n      margin-left: auto;\n      font-size: 18px;\n      color: var(--_on-surface-variant);\n      \n      &.active {\n        color: var(--_primary);\n      }\n    }\n\n    /* Attached files styles */\n    .attached-files-container {\n      margin-top: 12px;\n      padding: 12px;\n      background: var(--_surface-container);\n      border-radius: 12px;\n    }\n\n    .attachments-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .attachments-count {\n      font-size: 12px;\n      color: var(--_on-surface-variant);\n    }\n\n    .attachments-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n        }\n      }\n    }\n\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 8px;\n      background: var(--_surface-container-high);\n      border-radius: 8px;\n    }\n\n    .file-icon-wrapper {\n      width: 32px;\n      height: 32px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      .file-thumb-small {\n        width: 32px;\n        height: 32px;\n        object-fit: cover;\n        border-radius: 4px;\n      }\n      \n      .file-type-icon-small {\n        font-size: 24px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-size-text {\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n    }\n\n    .file-remove-btn-small {\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n  `]\n})\nexport class ChatInputComponent implements AfterViewInit {\n  /** Placeholder text for the input */\n  placeholder = input<string>('Type a message...');\n\n  /** Whether the input is disabled */\n  disabled = input<boolean>(false);\n\n  /** Whether content is flagged as unsafe */\n  contentFlagged = input<boolean>(false);\n\n  /** Labels of flagged content */\n  flaggedLabels = input<string[]>([]);\n\n  /** Whether streaming is enabled */\n  streamingEnabled = input<boolean>(true);\n\n  /** Whether markdown rendering is enabled */\n  markdownEnabled = input<boolean>(true);\n\n  /** Whether content safety is enabled */\n  safetyEnabled = input<boolean>(true);\n\n  /** Whether voice is currently recording */\n  isRecording = input<boolean>(false);\n\n  /** Whether voice input is supported */\n  voiceSupported = input<boolean>(false);\n\n  /**\n   * Signal-based text injection for decoupled communication.\n   * When this value changes, the input text is updated and the input is focused.\n   * Use with a signal from parent component:\n   * \n   * @example\n   * // In parent:\n   * injectedPrompt = signal<string | null>(null);\n   * \n   * // When quick action clicked:\n   * this.injectedPrompt.set('Tell me a joke');\n   * \n   * // In template:\n   * <app-chat-input [injectedText]=\"injectedPrompt()\" />\n   */\n  injectedText = input<string | null>(null);\n\n  /** Emitted when user sends a message */\n  send = output<SendEvent>();\n\n  /** Emitted when input text changes */\n  inputChange = output<string>();\n\n  /** Emitted when voice toggle is clicked */\n  toggleVoice = output<void>();\n\n  /** Emitted when streaming toggle is clicked */\n  toggleStreaming = output<void>();\n\n  /** Emitted when markdown toggle is clicked */\n  toggleMarkdown = output<void>();\n\n  /** Emitted when safety toggle is clicked */\n  toggleSafety = output<void>();\n\n  /** Emitted when clear preferences is clicked */\n  clearPreferences = output<void>();\n\n  /** Emitted when files are selected */\n  filesSelected = output<File[]>();\n\n  /** Services */\n  private snackBar = inject(MatSnackBar);\n  private translate = inject(TranslateService);\n\n  /** Local state */\n  message = '';\n  inputFocused = signal(false);\n  isDragging = signal(false);\n  attachedFiles = signal<AttachedFile[]>([]);\n\n  /** Computed: show send button when there's text */\n  showSendButton = computed(() => this.message.trim().length > 0);\n\n  @ViewChild('chatTextarea') private textareaRef!: ElementRef<HTMLTextAreaElement>;\n\n  constructor() {\n    // Watch for injected text changes and update input with focus\n    effect(() => {\n      const text = this.injectedText();\n      if (text !== null && text !== undefined) {\n        this.message = text;\n        this.onInputChange();\n        // Focus and move cursor to end after text is set\n        setTimeout(() => {\n          this.focusInputAtEnd();\n        }, 0);\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    // Focus the input on init\n    setTimeout(() => this.focusInput(), 100);\n  }\n\n  focusInput(event?: MouseEvent): void {\n    if (event) {\n      // Don't focus if clicking on a button\n      const target = event.target as HTMLElement;\n      if (target.closest('button') || target.closest('mat-menu')) {\n        return;\n      }\n    }\n    this.textareaRef?.nativeElement?.focus();\n  }\n\n  /**\n   * Focus the input and move cursor to the end of the text.\n   * Used when injecting text to place cursor after the injected content.\n   */\n  focusInputAtEnd(): void {\n    const textarea = this.textareaRef?.nativeElement;\n    if (textarea) {\n      textarea.focus();\n      const length = textarea.value.length;\n      textarea.setSelectionRange(length, length);\n    }\n  }\n\n  onInputChange(): void {\n    this.inputChange.emit(this.message);\n  }\n\n  onEnterKey(event: Event): void {\n    const keyEvent = event as KeyboardEvent;\n    if (!keyEvent.shiftKey) {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n\n  sendMessage(): void {\n    const trimmedMessage = this.message.trim();\n    if (!trimmedMessage && this.attachedFiles().length === 0) return;\n\n    this.send.emit({\n      message: trimmedMessage,\n      attachments: [...this.attachedFiles()]\n    });\n\n    this.message = '';\n    this.attachedFiles.set([]);\n  }\n\n  clearInput(): void {\n    this.message = '';\n    this.inputChange.emit('');\n  }\n\n  // Drag and drop handlers\n  onDragOver(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(true);\n  }\n\n  onDragLeave(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n  }\n\n  onDrop(event: DragEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.isDragging.set(false);\n\n    const files = event.dataTransfer?.files;\n    if (files && files.length > 0) {\n      this.processFiles(Array.from(files));\n    }\n  }\n\n  onFileSelected(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    if (input.files && input.files.length > 0) {\n      this.processFiles(Array.from(input.files));\n      input.value = ''; // Reset for same file selection\n    }\n  }\n\n  private processFiles(files: File[]): void {\n    const currentFiles = this.attachedFiles();\n\n    // Check max attachments\n    if (currentFiles.length + files.length > DEFAULT_CONFIG.maxAttachments) {\n      this.snackBar.open(\n        this.translate.instant('errors.tooManyFiles', { max: DEFAULT_CONFIG.maxAttachments }),\n        'OK',\n        { duration: 3000 }\n      );\n      return;\n    }\n\n    for (const file of files) {\n      // Check file size\n      if (file.size > DEFAULT_CONFIG.maxFileSizeBytes) {\n        this.snackBar.open(\n          this.translate.instant('errors.fileTooLarge', { name: file.name, size: '1MB' }),\n          'OK',\n          { duration: 3000 }\n        );\n        continue;\n      }\n\n      // Create preview for images\n      if (file.type.startsWith('image/')) {\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.attachedFiles.update(files => [...files, {\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            preview: reader.result as string,\n            data: reader.result as string\n          }]);\n        };\n        reader.readAsDataURL(file);\n      } else {\n        this.attachedFiles.update(files => [...files, {\n          name: file.name,\n          size: file.size,\n          type: file.type\n        }]);\n      }\n    }\n  }\n\n  removeFile(file: AttachedFile): void {\n    this.attachedFiles.update(files => files.filter(f => f.name !== file.name));\n  }\n\n  clearAllFiles(): void {\n    this.attachedFiles.set([]);\n  }\n\n  getFileIcon(mimeType: string): string {\n    return getMimeTypeIcon(mimeType);\n  }\n\n  formatFileSize(bytes: number): string {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n      --_error: var(--error, #ba1a1a);\n    }\n\n    .input-box {\n      position: relative;\n      background: var(--_surface-container);\n      border: 1px solid var(--_outline-variant);\n      border-radius: 24px;\n      padding: 12px 16px;\n      transition: all 0.2s ease;\n      \n      &.focused {\n        border-color: var(--_primary);\n        box-shadow: 0 0 0 1px var(--_primary);\n      }\n      \n      &.is-dragging {\n        border-color: var(--_primary);\n        background: var(--_primary-container);\n      }\n    }\n\n    .drop-zone-overlay {\n      position: absolute;\n      inset: 0;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      background: var(--_primary-container);\n      border-radius: 24px;\n      z-index: 10;\n      \n      .drop-icon {\n        font-size: 48px;\n        width: 48px;\n        height: 48px;\n        color: var(--_primary);\n      }\n      \n      .drop-caption {\n        margin-top: 8px;\n        font-size: 14px;\n        color: var(--_on-primary-container);\n      }\n    }\n\n    .chat-input {\n      width: 100%;\n      background: transparent;\n      border: none;\n      outline: none;\n      font-size: 16px;\n      color: var(--_on-surface);\n      resize: none;\n      font-family: inherit;\n      line-height: 1.5;\n      max-height: 200px;\n      overflow-y: auto;\n      \n      &::placeholder {\n        color: var(--_on-surface-variant);\n      }\n      \n      &.content-flagged {\n        text-decoration: underline wavy var(--_error);\n        text-decoration-skip-ink: none;\n        text-underline-offset: 3px;\n      }\n    }\n\n    .clear-input-btn {\n      position: absolute;\n      top: 8px;\n      right: 8px;\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n    }\n\n    .input-toolbar {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-top: 8px;\n      padding-top: 8px;\n      border-top: 1px solid var(--_outline-variant);\n    }\n\n    .toolbar-left, .toolbar-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n    }\n\n    .toolbar-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .tools-btn {\n      font-size: 13px;\n      \n      mat-icon {\n        font-size: 18px;\n        margin-right: 4px;\n      }\n    }\n\n    .action-btn-container {\n      overflow: hidden;\n    }\n\n    .send-btn {\n      color: var(--_primary);\n    }\n\n    .mic-btn {\n      &.recording {\n        color: var(--_error);\n        animation: pulse 1s ease-in-out infinite;\n      }\n    }\n\n    .toggle-indicator {\n      margin-left: auto;\n      font-size: 18px;\n      color: var(--_on-surface-variant);\n      \n      &.active {\n        color: var(--_primary);\n      }\n    }\n\n    /* Attached files styles */\n    .attached-files-container {\n      margin-top: 12px;\n      padding: 12px;\n      background: var(--_surface-container);\n      border-radius: 12px;\n    }\n\n    .attachments-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .attachments-count {\n      font-size: 12px;\n      color: var(--_on-surface-variant);\n    }\n\n    .attachments-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n        }\n      }\n    }\n\n    .attached-files-list {\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .file-row {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 8px;\n      background: var(--_surface-container-high);\n      border-radius: 8px;\n    }\n\n    .file-icon-wrapper {\n      width: 32px;\n      height: 32px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      .file-thumb-small {\n        width: 32px;\n        height: 32px;\n        object-fit: cover;\n        border-radius: 4px;\n      }\n      \n      .file-type-icon-small {\n        font-size: 24px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .file-name-text {\n      flex: 1;\n      font-size: 13px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .file-size-text {\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n    }\n\n    .file-remove-btn-small {\n      width: 24px;\n      height: 24px;\n      \n      mat-icon {\n        font-size: 16px;\n      }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n  \n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [],
                "line": 661
            },
            "extends": [],
            "implements": [
                "AfterViewInit"
            ]
        },
        {
            "name": "CompareComponent",
            "id": "component-CompareComponent-b8b7d4c282ca9972671236c69c517cc0ae4a8f39f71e3d926eec28dcb1cf5d2013c154751dac167213282603f9d9cb5f91715d188e2ced745e6ffd7214fbc2c6",
            "file": "src/app/features/compare/compare.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-compare",
            "styleUrls": [],
            "styles": [
                "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .compare-container {\n      max-width: 1200px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-header {\n      margin-bottom: 32px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n    }\n\n    .page-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0;\n    }\n\n    .section {\n      margin-bottom: 32px;\n    }\n\n    .section-title {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n      margin: 0 0 16px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    /* Model Grid */\n    .model-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n      gap: 16px;\n    }\n\n    .provider-card {\n      background: var(--surface-dim);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      overflow: hidden;\n    }\n\n    .provider-header {\n      padding: 12px 16px;\n      background: var(--surface-container);\n      border-bottom: 1px solid var(--surface-variant);\n    }\n\n    .provider-name {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--gemini-blue);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-list {\n      padding: 8px;\n    }\n\n    .model-option {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px;\n      border-radius: var(--radius-sm);\n      cursor: pointer;\n      transition: background var(--transition-fast);\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n      \n      &.selected {\n        background: var(--user-bubble-bg);\n      }\n    }\n\n    .model-name {\n      font-size: 14px;\n      color: var(--on-surface);\n    }\n\n    /* Prompt Input */\n    .prompt-wrapper {\n      margin-bottom: 16px;\n    }\n\n    .prompt-input {\n      width: 100%;\n      padding: 16px;\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      background: var(--surface);\n      color: var(--on-surface);\n      font-size: 15px;\n      font-family: inherit;\n      resize: vertical;\n      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:focus {\n        outline: none;\n        border-color: var(--gemini-blue);\n        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);\n      }\n    }\n\n    .compare-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 12px 24px;\n      font-size: 15px;\n      border-radius: var(--radius-full) !important;\n      \n      mat-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    /* Results */\n    .results-section {\n      margin-top: 40px;\n    }\n\n    .results-grid {\n      display: grid;\n      gap: 16px;\n      \n      &.cols-2 { grid-template-columns: repeat(2, 1fr); }\n      &.cols-3 { grid-template-columns: repeat(3, 1fr); }\n      &.cols-4 { grid-template-columns: repeat(4, 1fr); }\n    }\n\n    @media (max-width: 1024px) {\n      .results-grid.cols-3,\n      .results-grid.cols-4 {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    }\n\n    @media (max-width: 640px) {\n      .results-grid {\n        grid-template-columns: 1fr !important;\n      }\n    }\n\n    .result-card {\n      background: var(--surface);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      display: flex;\n      flex-direction: column;\n      transition: border-color var(--transition-fast);\n      \n      &:hover {\n        border-color: var(--gemini-blue-light);\n      }\n      \n      &.has-error {\n        border-color: #ea4335;\n      }\n    }\n\n    .result-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 16px;\n      border-bottom: 1px solid var(--surface-variant);\n    }\n\n    .result-model {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--on-surface);\n    }\n\n    .result-latency {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .result-content {\n      flex: 1;\n      padding: 16px;\n    }\n\n    .result-text {\n      font-size: 14px;\n      line-height: 1.6;\n      color: var(--on-surface);\n      margin: 0;\n      white-space: pre-wrap;\n    }\n\n    .error-state {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      color: #ea4335;\n      font-size: 13px;\n      \n      mat-icon {\n        flex-shrink: 0;\n      }\n    }\n\n    .result-actions {\n      display: flex;\n      gap: 4px;\n      padding: 8px 12px;\n      border-top: 1px solid var(--surface-variant);\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-variant);\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n      }\n    }\n  "
            ],
            "template": "<div class=\"compare-container\">\n  <div class=\"page-header\">\n    <h1 class=\"page-title\">Compare models</h1>\n    <p class=\"page-desc\">Send the same prompt to multiple models and compare responses side by side.</p>\n  </div>\n\n  <!-- Model Selection -->\n  <section class=\"section\">\n    <h2 class=\"section-title\">Select models (2-4)</h2>\n    <div class=\"model-grid\">\n      @for (provider of modelsService.providers(); track provider.id) {\n        <div class=\"provider-card\">\n          <div class=\"provider-header\">\n            <span class=\"provider-name\">{{ provider.name }}</span>\n          </div>\n          <div class=\"model-list\">\n            @for (model of provider.models; track model.id) {\n              <label class=\"model-option\" [class.selected]=\"isModelSelected(model.id)\">\n                <mat-checkbox\n                  [checked]=\"isModelSelected(model.id)\"\n                  (change)=\"toggleModel(model.id)\"\n                  [disabled]=\"!isModelSelected(model.id) && selectedModels().length >= 4\">\n                </mat-checkbox>\n                <span class=\"model-name\">{{ model.name }}</span>\n              </label>\n            }\n          </div>\n        </div>\n      }\n    </div>\n  </section>\n\n  <!-- Prompt Input -->\n  <section class=\"section\">\n    <h2 class=\"section-title\">Enter your prompt</h2>\n    <div class=\"prompt-wrapper\">\n      <textarea\n        class=\"prompt-input\"\n        [(ngModel)]=\"prompt\"\n        rows=\"4\"\n        placeholder=\"E.g., Explain quantum computing in simple terms\"></textarea>\n    </div>\n\n    <button mat-flat-button\n            color=\"primary\"\n            class=\"compare-btn\"\n            (click)=\"compare()\"\n            [disabled]=\"!prompt.trim() || selectedModels().length < 2 || isLoading()\">\n      @if (isLoading()) {\n        <mat-spinner diameter=\"20\"></mat-spinner>\n      } @else {\n        <mat-icon>compare_arrows</mat-icon>\n      }\n      Compare {{ selectedModels().length }} models\n    </button>\n  </section>\n\n  <!-- Results -->\n  @if (results()) {\n    <section class=\"section results-section\">\n      <h2 class=\"section-title\">Results</h2>\n      <div class=\"results-grid\"\n           [class.cols-2]=\"selectedModels().length === 2\"\n           [class.cols-3]=\"selectedModels().length === 3\"\n           [class.cols-4]=\"selectedModels().length >= 4\">\n        @for (response of results()!.responses; track response.model) {\n          <div class=\"result-card\" [class.has-error]=\"response.error\">\n            <div class=\"result-header\">\n              <span class=\"result-model\">{{ getModelName(response.model) }}</span>\n              @if (response.latency_ms) {\n                <span class=\"result-latency\">{{ response.latency_ms }}ms</span>\n              }\n            </div>\n            <div class=\"result-content\">\n              @if (response.error) {\n                <div class=\"error-state\">\n                  <mat-icon>error_outline</mat-icon>\n                  <span>{{ response.error }}</span>\n                </div>\n              } @else {\n                <p class=\"result-text\">{{ response.response }}</p>\n              }\n            </div>\n            <div class=\"result-actions\">\n              <button mat-icon-button matTooltip=\"Copy\">\n                <mat-icon>content_copy</mat-icon>\n              </button>\n              <button mat-icon-button matTooltip=\"Good response\">\n                <mat-icon>thumb_up</mat-icon>\n              </button>\n              <button mat-icon-button matTooltip=\"Bad response\">\n                <mat-icon>thumb_down</mat-icon>\n              </button>\n            </div>\n          </div>\n        }\n      </div>\n    </section>\n  }\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "chatService",
                    "defaultValue": "inject(ChatService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 385
                },
                {
                    "name": "isLoading",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 390
                },
                {
                    "name": "modelsService",
                    "defaultValue": "inject(ModelsService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 386
                },
                {
                    "name": "prompt",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 388
                },
                {
                    "name": "results",
                    "defaultValue": "signal<CompareResponse | null>(null)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 391
                },
                {
                    "name": "selectedModels",
                    "defaultValue": "signal<string[]>(['googleai/gemini-3-flash-preview'])",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 389
                }
            ],
            "methodsClass": [
                {
                    "name": "compare",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 413,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getModelName",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 408,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "isModelSelected",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "boolean",
                    "typeParameters": [],
                    "line": 393,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "toggleModel",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 397,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "MatCardModule",
                    "type": "module"
                },
                {
                    "name": "MatInputModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatSelectModule",
                    "type": "module"
                },
                {
                    "name": "MatProgressSpinnerModule",
                    "type": "module"
                },
                {
                    "name": "MatCheckboxModule",
                    "type": "module"
                },
                {
                    "name": "MatChipsModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, inject, signal } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { ChatService, CompareResponse } from '../../core/services/chat.service';\nimport { ModelsService, ModelInfo } from '../../core/services/models.service';\n\n@Component({\n  selector: 'app-compare',\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatCardModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSelectModule,\n    MatProgressSpinnerModule,\n    MatCheckboxModule,\n    MatChipsModule,\n  ],\n  template: `\n    <div class=\"compare-container\">\n      <div class=\"page-header\">\n        <h1 class=\"page-title\">Compare models</h1>\n        <p class=\"page-desc\">Send the same prompt to multiple models and compare responses side by side.</p>\n      </div>\n\n      <!-- Model Selection -->\n      <section class=\"section\">\n        <h2 class=\"section-title\">Select models (2-4)</h2>\n        <div class=\"model-grid\">\n          @for (provider of modelsService.providers(); track provider.id) {\n            <div class=\"provider-card\">\n              <div class=\"provider-header\">\n                <span class=\"provider-name\">{{ provider.name }}</span>\n              </div>\n              <div class=\"model-list\">\n                @for (model of provider.models; track model.id) {\n                  <label class=\"model-option\" [class.selected]=\"isModelSelected(model.id)\">\n                    <mat-checkbox \n                      [checked]=\"isModelSelected(model.id)\"\n                      (change)=\"toggleModel(model.id)\"\n                      [disabled]=\"!isModelSelected(model.id) && selectedModels().length >= 4\">\n                    </mat-checkbox>\n                    <span class=\"model-name\">{{ model.name }}</span>\n                  </label>\n                }\n              </div>\n            </div>\n          }\n        </div>\n      </section>\n\n      <!-- Prompt Input -->\n      <section class=\"section\">\n        <h2 class=\"section-title\">Enter your prompt</h2>\n        <div class=\"prompt-wrapper\">\n          <textarea \n            class=\"prompt-input\"\n            [(ngModel)]=\"prompt\" \n            rows=\"4\"\n            placeholder=\"E.g., Explain quantum computing in simple terms\"></textarea>\n        </div>\n        \n        <button mat-flat-button \n                color=\"primary\"\n                class=\"compare-btn\"\n                (click)=\"compare()\"\n                [disabled]=\"!prompt.trim() || selectedModels().length < 2 || isLoading()\">\n          @if (isLoading()) {\n            <mat-spinner diameter=\"20\"></mat-spinner>\n          } @else {\n            <mat-icon>compare_arrows</mat-icon>\n          }\n          Compare {{ selectedModels().length }} models\n        </button>\n      </section>\n\n      <!-- Results -->\n      @if (results()) {\n        <section class=\"section results-section\">\n          <h2 class=\"section-title\">Results</h2>\n          <div class=\"results-grid\" \n               [class.cols-2]=\"selectedModels().length === 2\" \n               [class.cols-3]=\"selectedModels().length === 3\"\n               [class.cols-4]=\"selectedModels().length >= 4\">\n            @for (response of results()!.responses; track response.model) {\n              <div class=\"result-card\" [class.has-error]=\"response.error\">\n                <div class=\"result-header\">\n                  <span class=\"result-model\">{{ getModelName(response.model) }}</span>\n                  @if (response.latency_ms) {\n                    <span class=\"result-latency\">{{ response.latency_ms }}ms</span>\n                  }\n                </div>\n                <div class=\"result-content\">\n                  @if (response.error) {\n                    <div class=\"error-state\">\n                      <mat-icon>error_outline</mat-icon>\n                      <span>{{ response.error }}</span>\n                    </div>\n                  } @else {\n                    <p class=\"result-text\">{{ response.response }}</p>\n                  }\n                </div>\n                <div class=\"result-actions\">\n                  <button mat-icon-button matTooltip=\"Copy\">\n                    <mat-icon>content_copy</mat-icon>\n                  </button>\n                  <button mat-icon-button matTooltip=\"Good response\">\n                    <mat-icon>thumb_up</mat-icon>\n                  </button>\n                  <button mat-icon-button matTooltip=\"Bad response\">\n                    <mat-icon>thumb_down</mat-icon>\n                  </button>\n                </div>\n              </div>\n            }\n          </div>\n        </section>\n      }\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .compare-container {\n      max-width: 1200px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-header {\n      margin-bottom: 32px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n    }\n\n    .page-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0;\n    }\n\n    .section {\n      margin-bottom: 32px;\n    }\n\n    .section-title {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n      margin: 0 0 16px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    /* Model Grid */\n    .model-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n      gap: 16px;\n    }\n\n    .provider-card {\n      background: var(--surface-dim);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      overflow: hidden;\n    }\n\n    .provider-header {\n      padding: 12px 16px;\n      background: var(--surface-container);\n      border-bottom: 1px solid var(--surface-variant);\n    }\n\n    .provider-name {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--gemini-blue);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-list {\n      padding: 8px;\n    }\n\n    .model-option {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px;\n      border-radius: var(--radius-sm);\n      cursor: pointer;\n      transition: background var(--transition-fast);\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n      \n      &.selected {\n        background: var(--user-bubble-bg);\n      }\n    }\n\n    .model-name {\n      font-size: 14px;\n      color: var(--on-surface);\n    }\n\n    /* Prompt Input */\n    .prompt-wrapper {\n      margin-bottom: 16px;\n    }\n\n    .prompt-input {\n      width: 100%;\n      padding: 16px;\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      background: var(--surface);\n      color: var(--on-surface);\n      font-size: 15px;\n      font-family: inherit;\n      resize: vertical;\n      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:focus {\n        outline: none;\n        border-color: var(--gemini-blue);\n        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);\n      }\n    }\n\n    .compare-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 12px 24px;\n      font-size: 15px;\n      border-radius: var(--radius-full) !important;\n      \n      mat-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    /* Results */\n    .results-section {\n      margin-top: 40px;\n    }\n\n    .results-grid {\n      display: grid;\n      gap: 16px;\n      \n      &.cols-2 { grid-template-columns: repeat(2, 1fr); }\n      &.cols-3 { grid-template-columns: repeat(3, 1fr); }\n      &.cols-4 { grid-template-columns: repeat(4, 1fr); }\n    }\n\n    @media (max-width: 1024px) {\n      .results-grid.cols-3,\n      .results-grid.cols-4 {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    }\n\n    @media (max-width: 640px) {\n      .results-grid {\n        grid-template-columns: 1fr !important;\n      }\n    }\n\n    .result-card {\n      background: var(--surface);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      display: flex;\n      flex-direction: column;\n      transition: border-color var(--transition-fast);\n      \n      &:hover {\n        border-color: var(--gemini-blue-light);\n      }\n      \n      &.has-error {\n        border-color: #ea4335;\n      }\n    }\n\n    .result-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 16px;\n      border-bottom: 1px solid var(--surface-variant);\n    }\n\n    .result-model {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--on-surface);\n    }\n\n    .result-latency {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .result-content {\n      flex: 1;\n      padding: 16px;\n    }\n\n    .result-text {\n      font-size: 14px;\n      line-height: 1.6;\n      color: var(--on-surface);\n      margin: 0;\n      white-space: pre-wrap;\n    }\n\n    .error-state {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      color: #ea4335;\n      font-size: 13px;\n      \n      mat-icon {\n        flex-shrink: 0;\n      }\n    }\n\n    .result-actions {\n      display: flex;\n      gap: 4px;\n      padding: 8px 12px;\n      border-top: 1px solid var(--surface-variant);\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-variant);\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n      }\n    }\n  `],\n})\nexport class CompareComponent {\n  chatService = inject(ChatService);\n  modelsService = inject(ModelsService);\n\n  prompt = '';\n  selectedModels = signal<string[]>(['googleai/gemini-3-flash-preview']);\n  isLoading = signal(false);\n  results = signal<CompareResponse | null>(null);\n\n  isModelSelected(modelId: string): boolean {\n    return this.selectedModels().includes(modelId);\n  }\n\n  toggleModel(modelId: string): void {\n    this.selectedModels.update(current => {\n      if (current.includes(modelId)) {\n        return current.filter(id => id !== modelId);\n      } else if (current.length < 4) {\n        return [...current, modelId];\n      }\n      return current;\n    });\n  }\n\n  getModelName(modelId: string): string {\n    const allModels = this.modelsService.getAllModels();\n    return allModels.find(m => m.id === modelId)?.name || modelId;\n  }\n\n  compare(): void {\n    if (!this.prompt.trim() || this.selectedModels().length < 2) return;\n\n    this.isLoading.set(true);\n    this.results.set(null);\n\n    this.chatService.compareModels(this.prompt, this.selectedModels())\n      .subscribe({\n        next: (response) => {\n          this.results.set(response);\n          this.isLoading.set(false);\n        },\n        error: (error) => {\n          console.error('Compare error:', error);\n          this.isLoading.set(false);\n        },\n      });\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .compare-container {\n      max-width: 1200px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-header {\n      margin-bottom: 32px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n    }\n\n    .page-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0;\n    }\n\n    .section {\n      margin-bottom: 32px;\n    }\n\n    .section-title {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--on-surface-variant);\n      margin: 0 0 16px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    /* Model Grid */\n    .model-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n      gap: 16px;\n    }\n\n    .provider-card {\n      background: var(--surface-dim);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      overflow: hidden;\n    }\n\n    .provider-header {\n      padding: 12px 16px;\n      background: var(--surface-container);\n      border-bottom: 1px solid var(--surface-variant);\n    }\n\n    .provider-name {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--gemini-blue);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-list {\n      padding: 8px;\n    }\n\n    .model-option {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px;\n      border-radius: var(--radius-sm);\n      cursor: pointer;\n      transition: background var(--transition-fast);\n      \n      &:hover {\n        background: var(--surface-container);\n      }\n      \n      &.selected {\n        background: var(--user-bubble-bg);\n      }\n    }\n\n    .model-name {\n      font-size: 14px;\n      color: var(--on-surface);\n    }\n\n    /* Prompt Input */\n    .prompt-wrapper {\n      margin-bottom: 16px;\n    }\n\n    .prompt-input {\n      width: 100%;\n      padding: 16px;\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      background: var(--surface);\n      color: var(--on-surface);\n      font-size: 15px;\n      font-family: inherit;\n      resize: vertical;\n      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);\n      \n      &::placeholder {\n        color: var(--on-surface-muted);\n      }\n      \n      &:focus {\n        outline: none;\n        border-color: var(--gemini-blue);\n        box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);\n      }\n    }\n\n    .compare-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 12px 24px;\n      font-size: 15px;\n      border-radius: var(--radius-full) !important;\n      \n      mat-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    /* Results */\n    .results-section {\n      margin-top: 40px;\n    }\n\n    .results-grid {\n      display: grid;\n      gap: 16px;\n      \n      &.cols-2 { grid-template-columns: repeat(2, 1fr); }\n      &.cols-3 { grid-template-columns: repeat(3, 1fr); }\n      &.cols-4 { grid-template-columns: repeat(4, 1fr); }\n    }\n\n    @media (max-width: 1024px) {\n      .results-grid.cols-3,\n      .results-grid.cols-4 {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    }\n\n    @media (max-width: 640px) {\n      .results-grid {\n        grid-template-columns: 1fr !important;\n      }\n    }\n\n    .result-card {\n      background: var(--surface);\n      border: 1px solid var(--surface-variant);\n      border-radius: var(--radius-md);\n      display: flex;\n      flex-direction: column;\n      transition: border-color var(--transition-fast);\n      \n      &:hover {\n        border-color: var(--gemini-blue-light);\n      }\n      \n      &.has-error {\n        border-color: #ea4335;\n      }\n    }\n\n    .result-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 16px;\n      border-bottom: 1px solid var(--surface-variant);\n    }\n\n    .result-model {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--on-surface);\n    }\n\n    .result-latency {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .result-content {\n      flex: 1;\n      padding: 16px;\n    }\n\n    .result-text {\n      font-size: 14px;\n      line-height: 1.6;\n      color: var(--on-surface);\n      margin: 0;\n      white-space: pre-wrap;\n    }\n\n    .error-state {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      color: #ea4335;\n      font-size: 13px;\n      \n      mat-icon {\n        flex-shrink: 0;\n      }\n    }\n\n    .result-actions {\n      display: flex;\n      gap: 4px;\n      padding: 8px 12px;\n      border-top: 1px solid var(--surface-variant);\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          color: var(--on-surface-variant);\n        }\n        \n        &:hover mat-icon {\n          color: var(--on-surface);\n        }\n      }\n    }\n  \n",
            "extends": []
        },
        {
            "name": "ErrorDetailsDialogComponent",
            "id": "component-ErrorDetailsDialogComponent-7ad37861d2ae445fd3ee56a91ba51475c45846254d518bb5baec06c15bccdaaf106e3b20673614380bb7706d157c332c13370070f8bdd867fd62265fb58fa620",
            "file": "src/app/shared/error-details-dialog/error-details-dialog.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-error-details-dialog",
            "styleUrls": [],
            "styles": [
                "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .error-dialog {\n      min-width: 500px;\n      max-width: 800px;\n    }\n    \n    .dialog-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 16px 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      .header-content {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n      \n      .error-icon {\n        color: #d93025;\n        font-size: 28px;\n        width: 28px;\n        height: 28px;\n      }\n      \n      h2 {\n        margin: 0;\n        font-size: 20px;\n        font-weight: 500;\n        color: var(--on-surface);\n      }\n      \n      .close-btn {\n        color: var(--on-surface-muted);\n      }\n    }\n    \n    .dialog-content {\n      padding: 24px;\n      max-height: 60vh;\n      overflow-y: auto;\n    }\n    \n    .code-container {\n      border: 1px solid var(--surface-variant);\n      border-radius: 8px;\n      overflow: hidden;\n    }\n    \n    .code-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 8px 16px;\n      background: var(--surface-container);\n      border-bottom: 1px solid var(--surface-variant);\n      \n      .language-label {\n        font-size: 12px;\n        font-weight: 500;\n        color: var(--on-surface-muted);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n      \n      .copy-btn {\n        font-size: 12px;\n        padding: 4px 8px;\n        min-width: auto;\n        line-height: 1.2;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n          margin-right: 4px;\n        }\n      }\n    }\n    \n    .code-block {\n      margin: 0;\n      padding: 16px;\n      background: #1e1e1e;\n      color: #d4d4d4;\n      font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.6;\n      overflow-x: auto;\n      white-space: pre-wrap;\n      word-break: break-word;\n      \n      /* JSON Syntax Highlighting */\n      :host ::ng-deep {\n        .json-key {\n          color: #9cdcfe;\n        }\n        \n        .json-string {\n          color: #ce9178;\n        }\n        \n        .json-number {\n          color: #b5cea8;\n        }\n        \n        .json-boolean {\n          color: #569cd6;\n        }\n        \n        .json-null {\n          color: #569cd6;\n        }\n        \n        .json-bracket {\n          color: #ffd700;\n        }\n      }\n    }\n    \n    .dialog-actions {\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n      padding: 16px 24px;\n      border-top: 1px solid var(--surface-variant);\n      \n      button {\n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          margin-right: 4px;\n        }\n      }\n    }\n  "
            ],
            "template": "<div class=\"error-dialog\">\n  <div class=\"dialog-header\">\n    <div class=\"header-content\">\n      <mat-icon class=\"error-icon\">error_outline</mat-icon>\n      <h2>Error Details</h2>\n    </div>\n    <button mat-icon-button (click)=\"dialogRef.close()\" class=\"close-btn\">\n      <mat-icon>close</mat-icon>\n    </button>\n  </div>\n\n  <div class=\"dialog-content\">\n    <div class=\"code-container\">\n      <div class=\"code-header\">\n        <span class=\"language-label\">JSON</span>\n        <button mat-button class=\"copy-btn\" (click)=\"copyToClipboard()\">\n          <mat-icon>{{ copied() ? 'check' : 'content_copy' }}</mat-icon>\n          {{ copied() ? 'Copied!' : 'Copy' }}\n        </button>\n      </div>\n      <pre class=\"code-block\"><code [innerHTML]=\"highlightedJson\"></code></pre>\n    </div>\n  </div>\n\n  <div class=\"dialog-actions\">\n    <button mat-button (click)=\"dialogRef.close()\">Close</button>\n    <button mat-raised-button color=\"primary\" (click)=\"copyToClipboard()\">\n      <mat-icon>content_copy</mat-icon>\n      Copy to Clipboard\n    </button>\n  </div>\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "copied",
                    "defaultValue": "signal(false)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 197
                },
                {
                    "name": "data",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "literal type",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 201,
                    "decorators": [
                        {
                            "name": "Inject",
                            "stringifiedArguments": "MAT_DIALOG_DATA"
                        }
                    ],
                    "modifierKind": [
                        171,
                        125
                    ]
                },
                {
                    "name": "dialogRef",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "MatDialogRef<ErrorDetailsDialogComponent>",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 200,
                    "modifierKind": [
                        125
                    ]
                },
                {
                    "name": "highlightedJson",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 196
                }
            ],
            "methodsClass": [
                {
                    "name": "copyToClipboard",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 235,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "highlightJson",
                    "args": [
                        {
                            "name": "json",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 207,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "json",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "MatDialogModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatSnackBarModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, Inject, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MAT_DIALOG_DATA, MatDialogRef, MatDialogModule } from '@angular/material/dialog';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\n\n@Component({\n    selector: 'app-error-details-dialog',\n    imports: [\n        CommonModule,\n        MatDialogModule,\n        MatButtonModule,\n        MatIconModule,\n        MatSnackBarModule,\n    ],\n    template: `\n    <div class=\"error-dialog\">\n      <div class=\"dialog-header\">\n        <div class=\"header-content\">\n          <mat-icon class=\"error-icon\">error_outline</mat-icon>\n          <h2>Error Details</h2>\n        </div>\n        <button mat-icon-button (click)=\"dialogRef.close()\" class=\"close-btn\">\n          <mat-icon>close</mat-icon>\n        </button>\n      </div>\n      \n      <div class=\"dialog-content\">\n        <div class=\"code-container\">\n          <div class=\"code-header\">\n            <span class=\"language-label\">JSON</span>\n            <button mat-button class=\"copy-btn\" (click)=\"copyToClipboard()\">\n              <mat-icon>{{ copied() ? 'check' : 'content_copy' }}</mat-icon>\n              {{ copied() ? 'Copied!' : 'Copy' }}\n            </button>\n          </div>\n          <pre class=\"code-block\"><code [innerHTML]=\"highlightedJson\"></code></pre>\n        </div>\n      </div>\n      \n      <div class=\"dialog-actions\">\n        <button mat-button (click)=\"dialogRef.close()\">Close</button>\n        <button mat-raised-button color=\"primary\" (click)=\"copyToClipboard()\">\n          <mat-icon>content_copy</mat-icon>\n          Copy to Clipboard\n        </button>\n      </div>\n    </div>\n  `,\n    styles: [`\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .error-dialog {\n      min-width: 500px;\n      max-width: 800px;\n    }\n    \n    .dialog-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 16px 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      .header-content {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n      \n      .error-icon {\n        color: #d93025;\n        font-size: 28px;\n        width: 28px;\n        height: 28px;\n      }\n      \n      h2 {\n        margin: 0;\n        font-size: 20px;\n        font-weight: 500;\n        color: var(--on-surface);\n      }\n      \n      .close-btn {\n        color: var(--on-surface-muted);\n      }\n    }\n    \n    .dialog-content {\n      padding: 24px;\n      max-height: 60vh;\n      overflow-y: auto;\n    }\n    \n    .code-container {\n      border: 1px solid var(--surface-variant);\n      border-radius: 8px;\n      overflow: hidden;\n    }\n    \n    .code-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 8px 16px;\n      background: var(--surface-container);\n      border-bottom: 1px solid var(--surface-variant);\n      \n      .language-label {\n        font-size: 12px;\n        font-weight: 500;\n        color: var(--on-surface-muted);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n      \n      .copy-btn {\n        font-size: 12px;\n        padding: 4px 8px;\n        min-width: auto;\n        line-height: 1.2;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n          margin-right: 4px;\n        }\n      }\n    }\n    \n    .code-block {\n      margin: 0;\n      padding: 16px;\n      background: #1e1e1e;\n      color: #d4d4d4;\n      font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.6;\n      overflow-x: auto;\n      white-space: pre-wrap;\n      word-break: break-word;\n      \n      /* JSON Syntax Highlighting */\n      :host ::ng-deep {\n        .json-key {\n          color: #9cdcfe;\n        }\n        \n        .json-string {\n          color: #ce9178;\n        }\n        \n        .json-number {\n          color: #b5cea8;\n        }\n        \n        .json-boolean {\n          color: #569cd6;\n        }\n        \n        .json-null {\n          color: #569cd6;\n        }\n        \n        .json-bracket {\n          color: #ffd700;\n        }\n      }\n    }\n    \n    .dialog-actions {\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n      padding: 16px 24px;\n      border-top: 1px solid var(--surface-variant);\n      \n      button {\n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          margin-right: 4px;\n        }\n      }\n    }\n  `]\n})\nexport class ErrorDetailsDialogComponent {\n    highlightedJson: string;\n    copied = signal(false);\n\n    constructor(\n        public dialogRef: MatDialogRef<ErrorDetailsDialogComponent>,\n        @Inject(MAT_DIALOG_DATA) public data: { errorDetails: string },\n        private snackBar: MatSnackBar\n    ) {\n        this.highlightedJson = this.highlightJson(data.errorDetails);\n    }\n\n    private highlightJson(json: string): string {\n        try {\n            // Try to parse and re-format\n            const parsed = JSON.parse(json);\n            json = JSON.stringify(parsed, null, 2);\n        } catch {\n            // Keep original if not valid JSON\n        }\n\n        // Syntax highlighting with regex\n        return json\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            // Match JSON keys (strings followed by colon)\n            .replace(/\"([^\"]+)\"(?=\\s*:)/g, '<span class=\"json-key\">\"$1\"</span>')\n            // Match JSON string values\n            .replace(/:\\s*\"([^\"]*)\"/g, ': <span class=\"json-string\">\"$1\"</span>')\n            // Match numbers\n            .replace(/:\\s*(-?\\d+\\.?\\d*)/g, ': <span class=\"json-number\">$1</span>')\n            // Match booleans\n            .replace(/:\\s*(true|false)/g, ': <span class=\"json-boolean\">$1</span>')\n            // Match null\n            .replace(/:\\s*(null)/g, ': <span class=\"json-null\">$1</span>')\n            // Match brackets\n            .replace(/([{}\\[\\]])/g, '<span class=\"json-bracket\">$1</span>');\n    }\n\n    copyToClipboard(): void {\n        navigator.clipboard.writeText(this.data.errorDetails).then(() => {\n            this.copied.set(true);\n            this.snackBar.open('Copied to clipboard', '', { duration: 2000 });\n            setTimeout(() => this.copied.set(false), 2000);\n        });\n    }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .error-dialog {\n      min-width: 500px;\n      max-width: 800px;\n    }\n    \n    .dialog-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 16px 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      .header-content {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n      \n      .error-icon {\n        color: #d93025;\n        font-size: 28px;\n        width: 28px;\n        height: 28px;\n      }\n      \n      h2 {\n        margin: 0;\n        font-size: 20px;\n        font-weight: 500;\n        color: var(--on-surface);\n      }\n      \n      .close-btn {\n        color: var(--on-surface-muted);\n      }\n    }\n    \n    .dialog-content {\n      padding: 24px;\n      max-height: 60vh;\n      overflow-y: auto;\n    }\n    \n    .code-container {\n      border: 1px solid var(--surface-variant);\n      border-radius: 8px;\n      overflow: hidden;\n    }\n    \n    .code-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 8px 16px;\n      background: var(--surface-container);\n      border-bottom: 1px solid var(--surface-variant);\n      \n      .language-label {\n        font-size: 12px;\n        font-weight: 500;\n        color: var(--on-surface-muted);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n      \n      .copy-btn {\n        font-size: 12px;\n        padding: 4px 8px;\n        min-width: auto;\n        line-height: 1.2;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n          margin-right: 4px;\n        }\n      }\n    }\n    \n    .code-block {\n      margin: 0;\n      padding: 16px;\n      background: #1e1e1e;\n      color: #d4d4d4;\n      font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.6;\n      overflow-x: auto;\n      white-space: pre-wrap;\n      word-break: break-word;\n      \n      /* JSON Syntax Highlighting */\n      :host ::ng-deep {\n        .json-key {\n          color: #9cdcfe;\n        }\n        \n        .json-string {\n          color: #ce9178;\n        }\n        \n        .json-number {\n          color: #b5cea8;\n        }\n        \n        .json-boolean {\n          color: #569cd6;\n        }\n        \n        .json-null {\n          color: #569cd6;\n        }\n        \n        .json-bracket {\n          color: #ffd700;\n        }\n      }\n    }\n    \n    .dialog-actions {\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n      padding: 16px 24px;\n      border-top: 1px solid var(--surface-variant);\n      \n      button {\n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n          margin-right: 4px;\n        }\n      }\n    }\n  \n",
            "constructorObj": {
                "name": "constructor",
                "description": "",
                "deprecated": false,
                "deprecationMessage": "",
                "args": [
                    {
                        "name": "dialogRef",
                        "type": "MatDialogRef<ErrorDetailsDialogComponent>",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "data",
                        "type": "literal type",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "snackBar",
                        "type": "MatSnackBar",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "line": 197,
                "jsdoctags": [
                    {
                        "name": "dialogRef",
                        "type": "MatDialogRef<ErrorDetailsDialogComponent>",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "data",
                        "type": "literal type",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "snackBar",
                        "type": "MatSnackBar",
                        "optional": false,
                        "dotDotDotToken": false,
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            "extends": []
        },
        {
            "name": "HeaderComponent",
            "id": "component-HeaderComponent-48b9abe37706bc42f20cfa97ed9f943678344ea7d254c0c82183c657750c2191b43486fe730c778627b2ea6aa0e2f33a7abcf3ce08b68ad18b062ad99ea97acb",
            "file": "src/stories/header.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-header",
            "styleUrls": [
                "./header.css"
            ],
            "styles": [],
            "template": "<header>  <div class=\"storybook-header\">\n    <div>\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n            fill=\"#FFF\"\n          />\n          <path\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n            fill=\"#555AB9\"\n          />\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\n        </g>\n      </svg>\n      <h1>Acme</h1>\n    </div>\n    <div>\n      <div *ngIf=\"user\">\n        <span class=\"welcome\">\n          Welcome, <b>{{ user.name }}</b\n          >!\n        </span>\n        <storybook-button\n          *ngIf=\"user\"\n          size=\"small\"\n          (onClick)=\"onLogout.emit($event)\"\n          label=\"Log out\"\n        ></storybook-button>\n      </div>\n      <div *ngIf=\"!user\">\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          class=\"margin-left\"\n          (onClick)=\"onLogin.emit($event)\"\n          label=\"Log in\"\n        ></storybook-button>\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          [primary]=\"true\"\n          class=\"margin-left\"\n          (onClick)=\"onCreateAccount.emit($event)\"\n          label=\"Sign up\"\n        ></storybook-button>\n      </div>\n    </div>\n  </div>\n</header>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 66,
                    "type": "User | null",
                    "decorators": []
                }
            ],
            "outputsClass": [
                {
                    "name": "onCreateAccount",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 75,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogin",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 69,
                    "type": "EventEmitter"
                },
                {
                    "name": "onLogout",
                    "defaultValue": "new EventEmitter<Event>()",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "line": 72,
                    "type": "EventEmitter"
                }
            ],
            "propertiesClass": [],
            "methodsClass": [],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "ButtonComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { ButtonComponent } from './button.component';\nimport type { User } from './user';\n\n@Component({\n  selector: 'storybook-header',\n  standalone: true,\n  imports: [CommonModule, ButtonComponent],\n  template: `<header>\n  <div class=\"storybook-header\">\n    <div>\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n            fill=\"#FFF\"\n          />\n          <path\n            d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n            fill=\"#555AB9\"\n          />\n          <path d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\" fill=\"#91BAF8\" />\n        </g>\n      </svg>\n      <h1>Acme</h1>\n    </div>\n    <div>\n      <div *ngIf=\"user\">\n        <span class=\"welcome\">\n          Welcome, <b>{{ user.name }}</b\n          >!\n        </span>\n        <storybook-button\n          *ngIf=\"user\"\n          size=\"small\"\n          (onClick)=\"onLogout.emit($event)\"\n          label=\"Log out\"\n        ></storybook-button>\n      </div>\n      <div *ngIf=\"!user\">\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          class=\"margin-left\"\n          (onClick)=\"onLogin.emit($event)\"\n          label=\"Log in\"\n        ></storybook-button>\n        <storybook-button\n          *ngIf=\"!user\"\n          size=\"small\"\n          [primary]=\"true\"\n          class=\"margin-left\"\n          (onClick)=\"onCreateAccount.emit($event)\"\n          label=\"Sign up\"\n        ></storybook-button>\n      </div>\n    </div>\n  </div>\n</header>`,\n  styleUrls: ['./header.css'],\n})\nexport class HeaderComponent {\n  @Input()\n  user: User | null = null;\n\n  @Output()\n  onLogin = new EventEmitter<Event>();\n\n  @Output()\n  onLogout = new EventEmitter<Event>();\n\n  @Output()\n  onCreateAccount = new EventEmitter<Event>();\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 15px 20px;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.storybook-header svg {\n  display: inline-block;\n  vertical-align: top;\n}\n\n.storybook-header h1 {\n  display: inline-block;\n  vertical-align: top;\n  margin: 6px 0 6px 10px;\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 1;\n}\n\n.storybook-header button + button {\n  margin-left: 10px;\n}\n\n.storybook-header .welcome {\n  margin-right: 10px;\n  color: #333;\n  font-size: 14px;\n}\n",
                    "styleUrl": "./header.css"
                }
            ],
            "stylesData": "",
            "extends": []
        },
        {
            "name": "LanguageSelectorComponent",
            "id": "component-LanguageSelectorComponent-aba1981548aea57fa639019fb4f3877b17de869607ee0059d34ce9a7c75b467ab70d7bb0d63414bbd02f6ec88ea81e7fe4e9a723aee2a237b3cec79742eb3f9e",
            "file": "src/app/shared/components/language-selector/language-selector.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-language-selector",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .language-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .language-flag {\n      font-size: 18px;\n    }\n\n    .language-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .language-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .language-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .language-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .language-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .language-flag {\n        font-size: 20px;\n      }\n      \n      .language-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .language-english {\n        font-size: 12px;\n        color: var(--_on-surface-variant);\n      }\n      \n      .check-icon {\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n\n    .system-item {\n      .language-name {\n        font-style: italic;\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  "
            ],
            "template": "<button mat-button\n        class=\"language-select-btn\"\n        [matMenuTriggerFor]=\"languageMenu\"\n        (menuOpened)=\"onMenuOpened()\">\n  <span class=\"language-flag\">{{ getCurrentLanguage()?.flag || '🌐' }}</span>\n  <span class=\"language-label\">{{ getDisplayLabel() }}</span>\n  <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n</button>\n\n<mat-menu #languageMenu=\"matMenu\" class=\"language-panel\" xPosition=\"before\">\n  <!-- Search Input -->\n  <div class=\"language-search\" (click)=\"$event.stopPropagation()\">\n    <mat-icon>search</mat-icon>\n    <input type=\"text\"\n           [placeholder]=\"'language.searchLanguages' | translate\"\n           [(ngModel)]=\"searchQuery\"\n           (keydown)=\"$event.stopPropagation()\">\n    @if (searchQuery) {\n      <button mat-icon-button class=\"clear-search\" (click)=\"clearSearch()\">\n        <mat-icon>close</mat-icon>\n      </button>\n    }\n  </div>\n\n  <!-- System Option -->\n  @if (showSystemOption() && !searchQuery) {\n    <button mat-menu-item\n            class=\"language-item system-item\"\n            [class.selected]=\"selectedLanguage() === 'system'\"\n            (click)=\"selectLanguage('system')\">\n      <span class=\"language-flag\">🌐</span>\n      <span class=\"language-name\">{{ 'theme.system' | translate }}</span>\n      @if (selectedLanguage() === 'system') {\n        <mat-icon class=\"check-icon\">check</mat-icon>\n      }\n    </button>\n    <mat-divider></mat-divider>\n  }\n\n  <!-- Language List -->\n  <div class=\"language-list\">\n    @for (lang of filteredLanguages(); track lang.code) {\n      <button mat-menu-item\n              class=\"language-item\"\n              [class.selected]=\"selectedLanguage() === lang.code\"\n              [class.rtl]=\"lang.direction === 'rtl'\"\n              (click)=\"selectLanguage(lang.code)\">\n        <span class=\"language-flag\">{{ lang.flag }}</span>\n        <span class=\"language-name\">{{ lang.nativeName }}</span>\n        <span class=\"language-english\">{{ lang.name }}</span>\n        @if (selectedLanguage() === lang.code) {\n          <mat-icon class=\"check-icon\">check</mat-icon>\n        }\n      </button>\n    } @empty {\n      <div class=\"no-results\">{{ 'language.noLanguagesFound' | translate }}</div>\n    }\n  </div>\n</mat-menu>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "languages",
                    "defaultValue": "DEFAULT_LANGUAGES",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Language[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>List of available languages</p>\n",
                    "line": 279,
                    "rawdescription": "\nList of available languages",
                    "required": false
                },
                {
                    "name": "selectedLanguage",
                    "defaultValue": "'en'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Currently selected language code (or &#39;system&#39;)</p>\n",
                    "line": 282,
                    "rawdescription": "\nCurrently selected language code (or 'system')",
                    "required": false
                },
                {
                    "name": "showSystemOption",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether to show the &#39;System&#39; option</p>\n",
                    "line": 285,
                    "rawdescription": "\nWhether to show the 'System' option",
                    "required": false
                }
            ],
            "outputsClass": [
                {
                    "name": "languageSelected",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when a language is selected</p>\n",
                    "line": 288,
                    "rawdescription": "\nEmitted when a language is selected",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "filteredLanguages",
                    "defaultValue": "computed(() => {\n        const query = this.searchQuery.toLowerCase();\n        if (!query) return this.languages();\n\n        return this.languages().filter(lang =>\n            lang.name.toLowerCase().includes(query) ||\n            lang.nativeName.toLowerCase().includes(query) ||\n            lang.code.toLowerCase().includes(query)\n        );\n    })",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Filtered languages based on search</p>\n",
                    "line": 294,
                    "rawdescription": "\nFiltered languages based on search"
                },
                {
                    "name": "searchQuery",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Search query for filtering languages</p>\n",
                    "line": 291,
                    "rawdescription": "\nSearch query for filtering languages"
                }
            ],
            "methodsClass": [
                {
                    "name": "clearSearch",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 309,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getCurrentLanguage",
                    "args": [],
                    "optional": false,
                    "returnType": "Language | undefined",
                    "typeParameters": [],
                    "line": 317,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getDisplayLabel",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 323,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onMenuOpened",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 305,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "selectLanguage",
                    "args": [
                        {
                            "name": "code",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 313,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "code",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatMenuModule",
                    "type": "module"
                },
                {
                    "name": "MatDividerModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { TranslateModule } from '@ngx-translate/core';\n\n/**\n * Language configuration interface.\n * Exported for use by host applications.\n */\nexport interface Language {\n    code: string;\n    name: string;\n    nativeName: string;\n    direction: 'ltr' | 'rtl';\n    flag: string;\n}\n\n/**\n * Default supported languages.\n * Can be overridden by passing custom languages via input.\n */\nexport const DEFAULT_LANGUAGES: Language[] = [\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n];\n\n@Component({\n    selector: 'app-language-selector',\n    standalone: true,\n    imports: [\n        CommonModule,\n        FormsModule,\n        MatButtonModule,\n        MatIconModule,\n        MatMenuModule,\n        MatDividerModule,\n        TranslateModule,\n    ],\n    template: `\n    <button mat-button \n            class=\"language-select-btn\"\n            [matMenuTriggerFor]=\"languageMenu\"\n            (menuOpened)=\"onMenuOpened()\">\n      <span class=\"language-flag\">{{ getCurrentLanguage()?.flag || '🌐' }}</span>\n      <span class=\"language-label\">{{ getDisplayLabel() }}</span>\n      <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n    </button>\n    \n    <mat-menu #languageMenu=\"matMenu\" class=\"language-panel\" xPosition=\"before\">\n      <!-- Search Input -->\n      <div class=\"language-search\" (click)=\"$event.stopPropagation()\">\n        <mat-icon>search</mat-icon>\n        <input type=\"text\" \n               [placeholder]=\"'language.searchLanguages' | translate\"\n               [(ngModel)]=\"searchQuery\"\n               (keydown)=\"$event.stopPropagation()\">\n        @if (searchQuery) {\n          <button mat-icon-button class=\"clear-search\" (click)=\"clearSearch()\">\n            <mat-icon>close</mat-icon>\n          </button>\n        }\n      </div>\n      \n      <!-- System Option -->\n      @if (showSystemOption() && !searchQuery) {\n        <button mat-menu-item \n                class=\"language-item system-item\"\n                [class.selected]=\"selectedLanguage() === 'system'\"\n                (click)=\"selectLanguage('system')\">\n          <span class=\"language-flag\">🌐</span>\n          <span class=\"language-name\">{{ 'theme.system' | translate }}</span>\n          @if (selectedLanguage() === 'system') {\n            <mat-icon class=\"check-icon\">check</mat-icon>\n          }\n        </button>\n        <mat-divider></mat-divider>\n      }\n      \n      <!-- Language List -->\n      <div class=\"language-list\">\n        @for (lang of filteredLanguages(); track lang.code) {\n          <button mat-menu-item \n                  class=\"language-item\"\n                  [class.selected]=\"selectedLanguage() === lang.code\"\n                  [class.rtl]=\"lang.direction === 'rtl'\"\n                  (click)=\"selectLanguage(lang.code)\">\n            <span class=\"language-flag\">{{ lang.flag }}</span>\n            <span class=\"language-name\">{{ lang.nativeName }}</span>\n            <span class=\"language-english\">{{ lang.name }}</span>\n            @if (selectedLanguage() === lang.code) {\n              <mat-icon class=\"check-icon\">check</mat-icon>\n            }\n          </button>\n        } @empty {\n          <div class=\"no-results\">{{ 'language.noLanguagesFound' | translate }}</div>\n        }\n      </div>\n    </mat-menu>\n  `,\n    styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .language-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .language-flag {\n      font-size: 18px;\n    }\n\n    .language-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .language-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .language-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .language-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .language-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .language-flag {\n        font-size: 20px;\n      }\n      \n      .language-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .language-english {\n        font-size: 12px;\n        color: var(--_on-surface-variant);\n      }\n      \n      .check-icon {\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n\n    .system-item {\n      .language-name {\n        font-style: italic;\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  `]\n})\nexport class LanguageSelectorComponent {\n    /** List of available languages */\n    languages = input<Language[]>(DEFAULT_LANGUAGES);\n\n    /** Currently selected language code (or 'system') */\n    selectedLanguage = input<string>('en');\n\n    /** Whether to show the 'System' option */\n    showSystemOption = input<boolean>(true);\n\n    /** Emitted when a language is selected */\n    languageSelected = output<string>();\n\n    /** Search query for filtering languages */\n    searchQuery = '';\n\n    /** Filtered languages based on search */\n    filteredLanguages = computed(() => {\n        const query = this.searchQuery.toLowerCase();\n        if (!query) return this.languages();\n\n        return this.languages().filter(lang =>\n            lang.name.toLowerCase().includes(query) ||\n            lang.nativeName.toLowerCase().includes(query) ||\n            lang.code.toLowerCase().includes(query)\n        );\n    });\n\n    onMenuOpened(): void {\n        this.searchQuery = '';\n    }\n\n    clearSearch(): void {\n        this.searchQuery = '';\n    }\n\n    selectLanguage(code: string): void {\n        this.languageSelected.emit(code);\n    }\n\n    getCurrentLanguage(): Language | undefined {\n        const code = this.selectedLanguage();\n        if (code === 'system') return undefined;\n        return this.languages().find(l => l.code === code);\n    }\n\n    getDisplayLabel(): string {\n        const code = this.selectedLanguage();\n        if (code === 'system') return 'System';\n        const lang = this.languages().find(l => l.code === code);\n        return lang?.nativeName || code;\n    }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .language-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .language-flag {\n      font-size: 18px;\n    }\n\n    .language-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .language-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .language-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .language-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .language-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .language-flag {\n        font-size: 20px;\n      }\n      \n      .language-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .language-english {\n        font-size: 12px;\n        color: var(--_on-surface-variant);\n      }\n      \n      .check-icon {\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n\n    .system-item {\n      .language-name {\n        font-style: italic;\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  \n",
            "extends": []
        },
        {
            "name": "MessageListComponent",
            "id": "component-MessageListComponent-d4a8f3d73cb35b6ac095b17287f05cc3aebeae7da2daee874778e86814fd3613e6e9c978802a2330c6f78e581cbd6c649c45f1c6a04a97f9502be5b05565cd0e",
            "file": "src/app/features/chat/components/message-list/message-list.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-message-list",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      flex: 1;\n      overflow-y: auto;\n      overflow-x: hidden;\n      padding: 16px 0;\n      scroll-behavior: smooth;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_error: var(--error, #ba1a1a);\n      --_error-container: var(--error-container, #ffdad6);\n      --_on-error-container: var(--on-error-container, #410002);\n    }\n\n    .messages-container {\n      display: flex;\n      flex-direction: column;\n      gap: 24px;\n    }\n\n    .message-row {\n      display: flex;\n      gap: 16px;\n      align-items: flex-start;\n      \n      &.user-row {\n        justify-content: flex-end;\n      }\n      \n      &.assistant-row {\n        justify-content: flex-start;\n      }\n    }\n\n    .message-avatar {\n      flex-shrink: 0;\n      width: 36px;\n      height: 36px;\n      \n      .avatar-logo {\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        object-fit: cover;\n        \n        &.loading {\n          animation: pulse 1.5s ease-in-out infinite;\n        }\n      }\n    }\n\n    .message-content {\n      max-width: 75%;\n      padding: 12px 16px;\n      border-radius: 20px;\n      background: var(--_surface-container);\n      color: var(--_on-surface);\n      line-height: 1.5;\n      \n      &.user-message {\n        background: var(--_primary);\n        color: var(--_on-primary);\n        border-radius: 20px 20px 4px 20px;\n      }\n      \n      &.error-message {\n        background: var(--_error-container);\n        color: var(--_on-error-container);\n        border: 1px solid var(--_error);\n      }\n    }\n\n    .message-text {\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      \n      &.markdown-content {\n        :deep(pre) {\n          background: var(--_surface-container-high);\n          padding: 12px;\n          border-radius: 8px;\n          overflow-x: auto;\n        }\n        \n        :deep(code) {\n          font-family: 'Roboto Mono', monospace;\n          font-size: 0.9em;\n        }\n        \n        :deep(p:last-child) {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .message-actions {\n      display: flex;\n      gap: 4px;\n      margin-top: 8px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .message-content:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n    }\n\n    .message-model {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      margin-top: 8px;\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n      opacity: 0.7;\n      \n      mat-icon {\n        font-size: 14px;\n        width: 14px;\n        height: 14px;\n      }\n    }\n\n    .error-details-btn {\n      margin-top: 8px;\n      font-size: 12px;\n      \n      mat-icon {\n        font-size: 16px;\n        margin-right: 4px;\n      }\n    }\n\n    .typing-indicator {\n      display: flex;\n      gap: 4px;\n      padding: 8px 4px;\n      \n      span {\n        width: 8px;\n        height: 8px;\n        background: var(--_on-surface-variant);\n        border-radius: 50%;\n        animation: bounce 1.4s ease-in-out infinite;\n        \n        &:nth-child(2) { animation-delay: 0.2s; }\n        &:nth-child(3) { animation-delay: 0.4s; }\n      }\n    }\n\n    @keyframes bounce {\n      0%, 60%, 100% { transform: translateY(0); }\n      30% { transform: translateY(-8px); }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    .animate-fade-in {\n      animation: fadeIn 0.3s ease forwards;\n      opacity: 0;\n    }\n\n    @keyframes fadeIn {\n      to { opacity: 1; }\n    }\n  "
            ],
            "template": "<div class=\"messages-container\" #messagesContainer>\n  @for (message of messages(); track message.timestamp; let i = $index) {\n    <div class=\"message-row animate-fade-in\"\n         [class.user-row]=\"message.role === 'user'\"\n         [class.assistant-row]=\"message.role === 'assistant'\"\n         [style.animation-delay]=\"i * 30 + 'ms'\">\n\n      <!-- Assistant Avatar -->\n      @if (message.role === 'assistant') {\n        <div class=\"message-avatar\">\n          <img [src]=\"avatarUrl()\" [alt]=\"avatarAlt()\" class=\"avatar-logo\">\n        </div>\n      }\n\n      <div class=\"message-content\" [class.user-message]=\"message.role === 'user'\" [class.error-message]=\"message.isError\">\n        @if (message.role === 'assistant' && markdownMode()) {\n          <div class=\"message-text markdown-content\" [innerHTML]=\"message.content | safeMarkdown\"></div>\n        } @else {\n          <div class=\"message-text\">{{ message.content }}</div>\n        }\n\n        @if (message.isError && message.errorDetails) {\n          <button mat-stroked-button class=\"error-details-btn\" (click)=\"showError.emit(message.errorDetails!)\">\n            <mat-icon>info_outline</mat-icon>\n            View Details\n          </button>\n        }\n\n        @if (message.role === 'assistant') {\n          <div class=\"message-actions\">\n            <button mat-icon-button [matTooltip]=\"'actions.copy' | translate\" (click)=\"copy.emit(message.content)\">\n              <mat-icon>content_copy</mat-icon>\n            </button>\n            <button mat-icon-button [matTooltip]=\"'actions.readAloud' | translate\" (click)=\"speak.emit(message.content)\">\n              <mat-icon>{{ isSpeaking() ? 'stop' : 'volume_up' }}</mat-icon>\n            </button>\n            <button mat-icon-button [matTooltip]=\"'actions.goodResponse' | translate\" (click)=\"thumbUp.emit(message)\">\n              <mat-icon>thumb_up</mat-icon>\n            </button>\n            <button mat-icon-button [matTooltip]=\"'actions.badResponse' | translate\" (click)=\"thumbDown.emit(message)\">\n              <mat-icon>thumb_down</mat-icon>\n            </button>\n            <button mat-icon-button [matMenuTriggerFor]=\"moreMenu\" [matTooltip]=\"'actions.more' | translate\">\n              <mat-icon>more_vert</mat-icon>\n            </button>\n            <mat-menu #moreMenu=\"matMenu\">\n              <button mat-menu-item (click)=\"copy.emit(message.content)\">\n                <mat-icon>content_copy</mat-icon>\n                <span>Copy</span>\n              </button>\n              <button mat-menu-item>\n                <mat-icon>refresh</mat-icon>\n                <span>Regenerate</span>\n              </button>\n              <button mat-menu-item>\n                <mat-icon>share</mat-icon>\n                <span>Share</span>\n              </button>\n              <mat-divider></mat-divider>\n              <button mat-menu-item>\n                <mat-icon>flag</mat-icon>\n                <span>Report issue</span>\n              </button>\n            </mat-menu>\n          </div>\n        }\n\n        @if (message.model) {\n          <div class=\"message-model\">\n            <mat-icon>smart_toy</mat-icon>\n            {{ message.model }}\n          </div>\n        }\n      </div>\n    </div>\n  }\n\n  <!-- Loading State -->\n  @if (isLoading()) {\n    <div class=\"message-row assistant-row animate-fade-in\">\n      <div class=\"message-avatar\">\n        <img [src]=\"avatarUrl()\" [alt]=\"avatarAlt()\" class=\"avatar-logo loading\">\n      </div>\n      <div class=\"message-content\">\n        <div class=\"typing-indicator\">\n          <span></span>\n          <span></span>\n          <span></span>\n        </div>\n      </div>\n    </div>\n  }\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "avatarAlt",
                    "defaultValue": "'Assistant'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Alt text for avatar image</p>\n",
                    "line": 371,
                    "rawdescription": "\nAlt text for avatar image",
                    "required": false
                },
                {
                    "name": "avatarUrl",
                    "defaultValue": "'genkit-logo.png'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Avatar URL for assistant messages (configurable for portability)</p>\n",
                    "line": 368,
                    "rawdescription": "\nAvatar URL for assistant messages (configurable for portability)",
                    "required": false
                },
                {
                    "name": "error",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Error message to display (optional)</p>\n",
                    "line": 377,
                    "rawdescription": "\nError message to display (optional)",
                    "required": false
                },
                {
                    "name": "isLoading",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the chat is currently loading a response</p>\n",
                    "line": 362,
                    "rawdescription": "\nWhether the chat is currently loading a response",
                    "required": false
                },
                {
                    "name": "isSpeaking",
                    "defaultValue": "false",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether TTS is currently speaking (replaces SpeechService dependency)</p>\n",
                    "line": 374,
                    "rawdescription": "\nWhether TTS is currently speaking (replaces SpeechService dependency)",
                    "required": false
                },
                {
                    "name": "markdownMode",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "boolean",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether to render markdown in assistant responses</p>\n",
                    "line": 365,
                    "rawdescription": "\nWhether to render markdown in assistant responses",
                    "required": false
                },
                {
                    "name": "messages",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Message[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>List of messages to display</p>\n",
                    "line": 359,
                    "rawdescription": "\nList of messages to display",
                    "required": true
                }
            ],
            "outputsClass": [
                {
                    "name": "copy",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks copy on a message</p>\n",
                    "line": 380,
                    "rawdescription": "\nEmitted when user clicks copy on a message",
                    "required": false
                },
                {
                    "name": "showError",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks to view error details</p>\n",
                    "line": 386,
                    "rawdescription": "\nEmitted when user clicks to view error details",
                    "required": false
                },
                {
                    "name": "speak",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks speak on a message</p>\n",
                    "line": 383,
                    "rawdescription": "\nEmitted when user clicks speak on a message",
                    "required": false
                },
                {
                    "name": "thumbDown",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Message",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user gives thumbs down</p>\n",
                    "line": 392,
                    "rawdescription": "\nEmitted when user gives thumbs down",
                    "required": false
                },
                {
                    "name": "thumbUp",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Message",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user gives thumbs up</p>\n",
                    "line": 389,
                    "rawdescription": "\nEmitted when user gives thumbs up",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "messagesContainer",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ElementRef",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 394,
                    "decorators": [
                        {
                            "name": "ViewChild",
                            "stringifiedArguments": "'messagesContainer'"
                        }
                    ],
                    "modifierKind": [
                        171,
                        123
                    ]
                },
                {
                    "name": "shouldScrollToBottom",
                    "defaultValue": "true",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 395,
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "methodsClass": [
                {
                    "name": "ngAfterViewChecked",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 397,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "scrollToBottom",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 403,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatTooltipModule",
                    "type": "module"
                },
                {
                    "name": "MatMenuModule",
                    "type": "module"
                },
                {
                    "name": "MatDividerModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                },
                {
                    "name": "SafeMarkdownPipe",
                    "type": "pipe"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, input, output, ElementRef, AfterViewChecked, ViewChild, Optional, Inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SafeMarkdownPipe } from '../../../../shared/pipes/safe-markdown.pipe';\n\n/** \n * Message interface - defined locally for portability.\n * Compatible with ChatService.Message.\n */\nexport interface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp?: Date;\n  model?: string;\n  isError?: boolean;\n  errorDetails?: string;\n}\n\n@Component({\n  selector: 'app-message-list',\n  standalone: true,\n  imports: [\n    CommonModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    MatMenuModule,\n    MatDividerModule,\n    TranslateModule,\n    SafeMarkdownPipe,\n  ],\n  template: `\n    <div class=\"messages-container\" #messagesContainer>\n      @for (message of messages(); track message.timestamp; let i = $index) {\n        <div class=\"message-row animate-fade-in\" \n             [class.user-row]=\"message.role === 'user'\" \n             [class.assistant-row]=\"message.role === 'assistant'\"\n             [style.animation-delay]=\"i * 30 + 'ms'\">\n          \n          <!-- Assistant Avatar -->\n          @if (message.role === 'assistant') {\n            <div class=\"message-avatar\">\n              <img [src]=\"avatarUrl()\" [alt]=\"avatarAlt()\" class=\"avatar-logo\">\n            </div>\n          }\n          \n          <div class=\"message-content\" [class.user-message]=\"message.role === 'user'\" [class.error-message]=\"message.isError\">\n            @if (message.role === 'assistant' && markdownMode()) {\n              <div class=\"message-text markdown-content\" [innerHTML]=\"message.content | safeMarkdown\"></div>\n            } @else {\n              <div class=\"message-text\">{{ message.content }}</div>\n            }\n            \n            @if (message.isError && message.errorDetails) {\n              <button mat-stroked-button class=\"error-details-btn\" (click)=\"showError.emit(message.errorDetails!)\">\n                <mat-icon>info_outline</mat-icon>\n                View Details\n              </button>\n            }\n            \n            @if (message.role === 'assistant') {\n              <div class=\"message-actions\">\n                <button mat-icon-button [matTooltip]=\"'actions.copy' | translate\" (click)=\"copy.emit(message.content)\">\n                  <mat-icon>content_copy</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.readAloud' | translate\" (click)=\"speak.emit(message.content)\">\n                  <mat-icon>{{ isSpeaking() ? 'stop' : 'volume_up' }}</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.goodResponse' | translate\" (click)=\"thumbUp.emit(message)\">\n                  <mat-icon>thumb_up</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.badResponse' | translate\" (click)=\"thumbDown.emit(message)\">\n                  <mat-icon>thumb_down</mat-icon>\n                </button>\n                <button mat-icon-button [matMenuTriggerFor]=\"moreMenu\" [matTooltip]=\"'actions.more' | translate\">\n                  <mat-icon>more_vert</mat-icon>\n                </button>\n                <mat-menu #moreMenu=\"matMenu\">\n                  <button mat-menu-item (click)=\"copy.emit(message.content)\">\n                    <mat-icon>content_copy</mat-icon>\n                    <span>Copy</span>\n                  </button>\n                  <button mat-menu-item>\n                    <mat-icon>refresh</mat-icon>\n                    <span>Regenerate</span>\n                  </button>\n                  <button mat-menu-item>\n                    <mat-icon>share</mat-icon>\n                    <span>Share</span>\n                  </button>\n                  <mat-divider></mat-divider>\n                  <button mat-menu-item>\n                    <mat-icon>flag</mat-icon>\n                    <span>Report issue</span>\n                  </button>\n                </mat-menu>\n              </div>\n            }\n            \n            @if (message.model) {\n              <div class=\"message-model\">\n                <mat-icon>smart_toy</mat-icon>\n                {{ message.model }}\n              </div>\n            }\n          </div>\n        </div>\n      }\n\n      <!-- Loading State -->\n      @if (isLoading()) {\n        <div class=\"message-row assistant-row animate-fade-in\">\n          <div class=\"message-avatar\">\n            <img [src]=\"avatarUrl()\" [alt]=\"avatarAlt()\" class=\"avatar-logo loading\">\n          </div>\n          <div class=\"message-content\">\n            <div class=\"typing-indicator\">\n              <span></span>\n              <span></span>\n              <span></span>\n            </div>\n          </div>\n        </div>\n      }\n    </div>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      flex: 1;\n      overflow-y: auto;\n      overflow-x: hidden;\n      padding: 16px 0;\n      scroll-behavior: smooth;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_error: var(--error, #ba1a1a);\n      --_error-container: var(--error-container, #ffdad6);\n      --_on-error-container: var(--on-error-container, #410002);\n    }\n\n    .messages-container {\n      display: flex;\n      flex-direction: column;\n      gap: 24px;\n    }\n\n    .message-row {\n      display: flex;\n      gap: 16px;\n      align-items: flex-start;\n      \n      &.user-row {\n        justify-content: flex-end;\n      }\n      \n      &.assistant-row {\n        justify-content: flex-start;\n      }\n    }\n\n    .message-avatar {\n      flex-shrink: 0;\n      width: 36px;\n      height: 36px;\n      \n      .avatar-logo {\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        object-fit: cover;\n        \n        &.loading {\n          animation: pulse 1.5s ease-in-out infinite;\n        }\n      }\n    }\n\n    .message-content {\n      max-width: 75%;\n      padding: 12px 16px;\n      border-radius: 20px;\n      background: var(--_surface-container);\n      color: var(--_on-surface);\n      line-height: 1.5;\n      \n      &.user-message {\n        background: var(--_primary);\n        color: var(--_on-primary);\n        border-radius: 20px 20px 4px 20px;\n      }\n      \n      &.error-message {\n        background: var(--_error-container);\n        color: var(--_on-error-container);\n        border: 1px solid var(--_error);\n      }\n    }\n\n    .message-text {\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      \n      &.markdown-content {\n        :deep(pre) {\n          background: var(--_surface-container-high);\n          padding: 12px;\n          border-radius: 8px;\n          overflow-x: auto;\n        }\n        \n        :deep(code) {\n          font-family: 'Roboto Mono', monospace;\n          font-size: 0.9em;\n        }\n        \n        :deep(p:last-child) {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .message-actions {\n      display: flex;\n      gap: 4px;\n      margin-top: 8px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .message-content:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n    }\n\n    .message-model {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      margin-top: 8px;\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n      opacity: 0.7;\n      \n      mat-icon {\n        font-size: 14px;\n        width: 14px;\n        height: 14px;\n      }\n    }\n\n    .error-details-btn {\n      margin-top: 8px;\n      font-size: 12px;\n      \n      mat-icon {\n        font-size: 16px;\n        margin-right: 4px;\n      }\n    }\n\n    .typing-indicator {\n      display: flex;\n      gap: 4px;\n      padding: 8px 4px;\n      \n      span {\n        width: 8px;\n        height: 8px;\n        background: var(--_on-surface-variant);\n        border-radius: 50%;\n        animation: bounce 1.4s ease-in-out infinite;\n        \n        &:nth-child(2) { animation-delay: 0.2s; }\n        &:nth-child(3) { animation-delay: 0.4s; }\n      }\n    }\n\n    @keyframes bounce {\n      0%, 60%, 100% { transform: translateY(0); }\n      30% { transform: translateY(-8px); }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    .animate-fade-in {\n      animation: fadeIn 0.3s ease forwards;\n      opacity: 0;\n    }\n\n    @keyframes fadeIn {\n      to { opacity: 1; }\n    }\n  `]\n})\nexport class MessageListComponent implements AfterViewChecked {\n  /** List of messages to display */\n  messages = input.required<Message[]>();\n\n  /** Whether the chat is currently loading a response */\n  isLoading = input<boolean>(false);\n\n  /** Whether to render markdown in assistant responses */\n  markdownMode = input<boolean>(true);\n\n  /** Avatar URL for assistant messages (configurable for portability) */\n  avatarUrl = input<string>('genkit-logo.png');\n\n  /** Alt text for avatar image */\n  avatarAlt = input<string>('Assistant');\n\n  /** Whether TTS is currently speaking (replaces SpeechService dependency) */\n  isSpeaking = input<boolean>(false);\n\n  /** Error message to display (optional) */\n  error = input<string | null>(null);\n\n  /** Emitted when user clicks copy on a message */\n  copy = output<string>();\n\n  /** Emitted when user clicks speak on a message */\n  speak = output<string>();\n\n  /** Emitted when user clicks to view error details */\n  showError = output<string>();\n\n  /** Emitted when user gives thumbs up */\n  thumbUp = output<Message>();\n\n  /** Emitted when user gives thumbs down */\n  thumbDown = output<Message>();\n\n  @ViewChild('messagesContainer') private messagesContainer!: ElementRef;\n  private shouldScrollToBottom = true;\n\n  ngAfterViewChecked(): void {\n    if (this.shouldScrollToBottom) {\n      this.scrollToBottom();\n    }\n  }\n\n  private scrollToBottom(): void {\n    if (this.messagesContainer?.nativeElement) {\n      const container = this.messagesContainer.nativeElement;\n      container.scrollTop = container.scrollHeight;\n    }\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n      flex: 1;\n      overflow-y: auto;\n      overflow-x: hidden;\n      padding: 16px 0;\n      scroll-behavior: smooth;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-primary: var(--on-primary, #ffffff);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_error: var(--error, #ba1a1a);\n      --_error-container: var(--error-container, #ffdad6);\n      --_on-error-container: var(--on-error-container, #410002);\n    }\n\n    .messages-container {\n      display: flex;\n      flex-direction: column;\n      gap: 24px;\n    }\n\n    .message-row {\n      display: flex;\n      gap: 16px;\n      align-items: flex-start;\n      \n      &.user-row {\n        justify-content: flex-end;\n      }\n      \n      &.assistant-row {\n        justify-content: flex-start;\n      }\n    }\n\n    .message-avatar {\n      flex-shrink: 0;\n      width: 36px;\n      height: 36px;\n      \n      .avatar-logo {\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        object-fit: cover;\n        \n        &.loading {\n          animation: pulse 1.5s ease-in-out infinite;\n        }\n      }\n    }\n\n    .message-content {\n      max-width: 75%;\n      padding: 12px 16px;\n      border-radius: 20px;\n      background: var(--_surface-container);\n      color: var(--_on-surface);\n      line-height: 1.5;\n      \n      &.user-message {\n        background: var(--_primary);\n        color: var(--_on-primary);\n        border-radius: 20px 20px 4px 20px;\n      }\n      \n      &.error-message {\n        background: var(--_error-container);\n        color: var(--_on-error-container);\n        border: 1px solid var(--_error);\n      }\n    }\n\n    .message-text {\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n      \n      &.markdown-content {\n        :deep(pre) {\n          background: var(--_surface-container-high);\n          padding: 12px;\n          border-radius: 8px;\n          overflow-x: auto;\n        }\n        \n        :deep(code) {\n          font-family: 'Roboto Mono', monospace;\n          font-size: 0.9em;\n        }\n        \n        :deep(p:last-child) {\n          margin-bottom: 0;\n        }\n      }\n    }\n\n    .message-actions {\n      display: flex;\n      gap: 4px;\n      margin-top: 8px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .message-content:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n    }\n\n    .message-model {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      margin-top: 8px;\n      font-size: 11px;\n      color: var(--_on-surface-variant);\n      opacity: 0.7;\n      \n      mat-icon {\n        font-size: 14px;\n        width: 14px;\n        height: 14px;\n      }\n    }\n\n    .error-details-btn {\n      margin-top: 8px;\n      font-size: 12px;\n      \n      mat-icon {\n        font-size: 16px;\n        margin-right: 4px;\n      }\n    }\n\n    .typing-indicator {\n      display: flex;\n      gap: 4px;\n      padding: 8px 4px;\n      \n      span {\n        width: 8px;\n        height: 8px;\n        background: var(--_on-surface-variant);\n        border-radius: 50%;\n        animation: bounce 1.4s ease-in-out infinite;\n        \n        &:nth-child(2) { animation-delay: 0.2s; }\n        &:nth-child(3) { animation-delay: 0.4s; }\n      }\n    }\n\n    @keyframes bounce {\n      0%, 60%, 100% { transform: translateY(0); }\n      30% { transform: translateY(-8px); }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    .animate-fade-in {\n      animation: fadeIn 0.3s ease forwards;\n      opacity: 0;\n    }\n\n    @keyframes fadeIn {\n      to { opacity: 1; }\n    }\n  \n",
            "extends": [],
            "implements": [
                "AfterViewChecked"
            ]
        },
        {
            "name": "ModelSelectorComponent",
            "id": "component-ModelSelectorComponent-0e6ca8fabbfec5a97bea7e343b41f2c7fb73a2be402987264f7408234465b71442e6416058b387460af21a221e44feeaa4f10531b2c69147b85bc4c6f1641d70",
            "file": "src/app/features/chat/components/model-selector/model-selector.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-model-selector",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px;\n      border-radius: 8px;\n      min-width: 0;\n      max-width: 200px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .model-info {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      overflow: hidden;\n      \n      .model-name {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--_on-surface);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        max-width: 150px;\n      }\n      \n      .provider-name {\n        font-size: 11px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .model-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .model-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .model-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .model-group {\n      padding: 8px 0;\n    }\n\n    .group-header {\n      padding: 4px 16px 8px;\n      font-size: 11px;\n      font-weight: 600;\n      color: var(--_on-surface-variant);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 8px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .model-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .model-badge {\n        font-size: 10px;\n        padding: 2px 6px;\n        border-radius: 4px;\n        background: var(--_surface-container-high);\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  "
            ],
            "template": "<button mat-button\n        class=\"model-select-btn\"\n        [matMenuTriggerFor]=\"modelMenu\"\n        (menuOpened)=\"onMenuOpened()\">\n  <div class=\"model-info\">\n    <span class=\"model-name\">{{ getModelName(selectedModel()) }}</span>\n    <span class=\"provider-name\">{{ getProviderName(selectedModel()) }}</span>\n  </div>\n  <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n</button>\n\n<mat-menu #modelMenu=\"matMenu\" class=\"model-panel\" xPosition=\"before\">\n  <!-- Search Input -->\n  <div class=\"model-search\" (click)=\"$event.stopPropagation()\">\n    <mat-icon>search</mat-icon>\n    <input type=\"text\"\n           placeholder=\"Search models...\"\n           [(ngModel)]=\"searchQuery\"\n           (keydown)=\"$event.stopPropagation()\">\n    @if (searchQuery) {\n      <button mat-icon-button class=\"clear-search\" (click)=\"clearSearch()\">\n        <mat-icon>close</mat-icon>\n      </button>\n    }\n  </div>\n\n  <!-- Recent Models -->\n  @if (!searchQuery && recentModels().length > 0) {\n    <div class=\"model-group\">\n      <div class=\"group-header\">Recent</div>\n      @for (model of recentModels(); track model.id) {\n        <button mat-menu-item\n                class=\"model-item\"\n                [class.selected]=\"selectedModel() === model.id\"\n                (click)=\"selectModel(model.id)\">\n          <span class=\"model-name\">{{ model.name }}</span>\n          <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n        </button>\n      }\n    </div>\n    <mat-divider></mat-divider>\n  }\n\n  <!-- Models Grouped by Provider -->\n  <div class=\"model-list\">\n    @if (searchQuery) {\n      <div class=\"model-group\">\n        <div class=\"group-header\">Results</div>\n        @for (model of filteredModels(); track model.id) {\n          <button mat-menu-item\n                  class=\"model-item\"\n                  [class.selected]=\"selectedModel() === model.id\"\n                  (click)=\"selectModel(model.id)\">\n            <span class=\"model-name\">{{ model.name }}</span>\n            <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n          </button>\n        } @empty {\n          <div class=\"no-results\">No models found</div>\n        }\n      </div>\n    } @else {\n      @for (provider of providers(); track provider.id) {\n        <div class=\"model-group\">\n          <div class=\"group-header\">{{ provider.name }}</div>\n          @for (model of provider.models; track model.id) {\n            <button mat-menu-item\n                    class=\"model-item\"\n                    [class.selected]=\"selectedModel() === model.id\"\n                    (click)=\"selectModel(model.id)\">\n              <span class=\"model-name\">{{ model.name }}</span>\n            </button>\n          }\n        </div>\n      }\n    }\n  </div>\n</mat-menu>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "providers",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Provider[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>List of providers with their models</p>\n",
                    "line": 297,
                    "rawdescription": "\nList of providers with their models",
                    "required": true
                },
                {
                    "name": "recentModels",
                    "defaultValue": "[]",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Model[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Recently used models</p>\n",
                    "line": 300,
                    "rawdescription": "\nRecently used models",
                    "required": false
                },
                {
                    "name": "selectedModel",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Currently selected model ID</p>\n",
                    "line": 294,
                    "rawdescription": "\nCurrently selected model ID",
                    "required": true
                }
            ],
            "outputsClass": [
                {
                    "name": "modelSelected",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when a model is selected</p>\n",
                    "line": 303,
                    "rawdescription": "\nEmitted when a model is selected",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "filteredModels",
                    "defaultValue": "computed(() => {\n    if (!this.searchQuery) return [];\n\n    const query = this.searchQuery.toLowerCase();\n    const allModels: Model[] = [];\n\n    this.providers().forEach(provider => {\n      provider.models.forEach(model => {\n        if (model.name.toLowerCase().includes(query) ||\n          model.id.toLowerCase().includes(query)) {\n          allModels.push(model);\n        }\n      });\n    });\n\n    return allModels;\n  })",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Filtered models based on search query</p>\n",
                    "line": 309,
                    "rawdescription": "\nFiltered models based on search query"
                },
                {
                    "name": "searchQuery",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Search query for filtering models</p>\n",
                    "line": 306,
                    "rawdescription": "\nSearch query for filtering models"
                }
            ],
            "methodsClass": [
                {
                    "name": "clearSearch",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 331,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "getModelName",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 339,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getProviderName",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 349,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "onMenuOpened",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 327,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "selectModel",
                    "args": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 335,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "modelId",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatMenuModule",
                    "type": "module"
                },
                {
                    "name": "MatDividerModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, input, output, signal, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatDividerModule } from '@angular/material/divider';\n\nexport interface Model {\n  id: string;\n  name: string;\n  capabilities?: string[];\n  context_window?: number;\n}\n\nexport interface Provider {\n  id: string;\n  name: string;\n  available: boolean;\n  models: Model[];\n}\n\n@Component({\n  selector: 'app-model-selector',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatButtonModule,\n    MatIconModule,\n    MatMenuModule,\n    MatDividerModule,\n  ],\n  template: `\n    <button mat-button \n            class=\"model-select-btn\"\n            [matMenuTriggerFor]=\"modelMenu\"\n            (menuOpened)=\"onMenuOpened()\">\n      <div class=\"model-info\">\n        <span class=\"model-name\">{{ getModelName(selectedModel()) }}</span>\n        <span class=\"provider-name\">{{ getProviderName(selectedModel()) }}</span>\n      </div>\n      <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n    </button>\n    \n    <mat-menu #modelMenu=\"matMenu\" class=\"model-panel\" xPosition=\"before\">\n      <!-- Search Input -->\n      <div class=\"model-search\" (click)=\"$event.stopPropagation()\">\n        <mat-icon>search</mat-icon>\n        <input type=\"text\" \n               placeholder=\"Search models...\" \n               [(ngModel)]=\"searchQuery\"\n               (keydown)=\"$event.stopPropagation()\">\n        @if (searchQuery) {\n          <button mat-icon-button class=\"clear-search\" (click)=\"clearSearch()\">\n            <mat-icon>close</mat-icon>\n          </button>\n        }\n      </div>\n      \n      <!-- Recent Models -->\n      @if (!searchQuery && recentModels().length > 0) {\n        <div class=\"model-group\">\n          <div class=\"group-header\">Recent</div>\n          @for (model of recentModels(); track model.id) {\n            <button mat-menu-item \n                    class=\"model-item\"\n                    [class.selected]=\"selectedModel() === model.id\"\n                    (click)=\"selectModel(model.id)\">\n              <span class=\"model-name\">{{ model.name }}</span>\n              <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n            </button>\n          }\n        </div>\n        <mat-divider></mat-divider>\n      }\n      \n      <!-- Models Grouped by Provider -->\n      <div class=\"model-list\">\n        @if (searchQuery) {\n          <div class=\"model-group\">\n            <div class=\"group-header\">Results</div>\n            @for (model of filteredModels(); track model.id) {\n              <button mat-menu-item \n                      class=\"model-item\"\n                      [class.selected]=\"selectedModel() === model.id\"\n                      (click)=\"selectModel(model.id)\">\n                <span class=\"model-name\">{{ model.name }}</span>\n                <span class=\"model-badge\">{{ getProviderName(model.id) }}</span>\n              </button>\n            } @empty {\n              <div class=\"no-results\">No models found</div>\n            }\n          </div>\n        } @else {\n          @for (provider of providers(); track provider.id) {\n            <div class=\"model-group\">\n              <div class=\"group-header\">{{ provider.name }}</div>\n              @for (model of provider.models; track model.id) {\n                <button mat-menu-item \n                        class=\"model-item\"\n                        [class.selected]=\"selectedModel() === model.id\"\n                        (click)=\"selectModel(model.id)\">\n                  <span class=\"model-name\">{{ model.name }}</span>\n                </button>\n              }\n            </div>\n          }\n        }\n      </div>\n    </mat-menu>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px;\n      border-radius: 8px;\n      min-width: 0;\n      max-width: 200px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .model-info {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      overflow: hidden;\n      \n      .model-name {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--_on-surface);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        max-width: 150px;\n      }\n      \n      .provider-name {\n        font-size: 11px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .model-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .model-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .model-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .model-group {\n      padding: 8px 0;\n    }\n\n    .group-header {\n      padding: 4px 16px 8px;\n      font-size: 11px;\n      font-weight: 600;\n      color: var(--_on-surface-variant);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 8px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .model-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .model-badge {\n        font-size: 10px;\n        padding: 2px 6px;\n        border-radius: 4px;\n        background: var(--_surface-container-high);\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  `]\n})\nexport class ModelSelectorComponent {\n  /** Currently selected model ID */\n  selectedModel = input.required<string>();\n\n  /** List of providers with their models */\n  providers = input.required<Provider[]>();\n\n  /** Recently used models */\n  recentModels = input<Model[]>([]);\n\n  /** Emitted when a model is selected */\n  modelSelected = output<string>();\n\n  /** Search query for filtering models */\n  searchQuery = '';\n\n  /** Filtered models based on search query */\n  filteredModels = computed(() => {\n    if (!this.searchQuery) return [];\n\n    const query = this.searchQuery.toLowerCase();\n    const allModels: Model[] = [];\n\n    this.providers().forEach(provider => {\n      provider.models.forEach(model => {\n        if (model.name.toLowerCase().includes(query) ||\n          model.id.toLowerCase().includes(query)) {\n          allModels.push(model);\n        }\n      });\n    });\n\n    return allModels;\n  });\n\n  onMenuOpened(): void {\n    this.searchQuery = '';\n  }\n\n  clearSearch(): void {\n    this.searchQuery = '';\n  }\n\n  selectModel(modelId: string): void {\n    this.modelSelected.emit(modelId);\n  }\n\n  getModelName(modelId: string): string {\n    for (const provider of this.providers()) {\n      const model = provider.models.find(m => m.id === modelId);\n      if (model) return model.name;\n    }\n    // Fallback: extract name from ID\n    const parts = modelId.split('/');\n    return parts[parts.length - 1];\n  }\n\n  getProviderName(modelId: string): string {\n    for (const provider of this.providers()) {\n      if (provider.models.some(m => m.id === modelId)) {\n        return provider.name;\n      }\n    }\n    // Fallback: extract provider from ID prefix\n    const parts = modelId.split('/');\n    if (parts.length > 1) {\n      return parts[0].charAt(0).toUpperCase() + parts[0].slice(1);\n    }\n    return 'Unknown';\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .model-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px;\n      border-radius: 8px;\n      min-width: 0;\n      max-width: 200px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n    }\n\n    .model-info {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      overflow: hidden;\n      \n      .model-name {\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--_on-surface);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        max-width: 150px;\n      }\n      \n      .provider-name {\n        font-size: 11px;\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    ::ng-deep .model-panel {\n      max-height: 400px;\n      min-width: 280px;\n    }\n\n    .model-search {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-bottom: 1px solid var(--_outline-variant);\n      \n      mat-icon {\n        color: var(--_on-surface-variant);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n      \n      input {\n        flex: 1;\n        background: transparent;\n        border: none;\n        outline: none;\n        font-size: 14px;\n        color: var(--_on-surface);\n        \n        &::placeholder {\n          color: var(--_on-surface-variant);\n        }\n      }\n      \n      .clear-search {\n        width: 24px;\n        height: 24px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    .model-list {\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .model-group {\n      padding: 8px 0;\n    }\n\n    .group-header {\n      padding: 4px 16px 8px;\n      font-size: 11px;\n      font-weight: 600;\n      color: var(--_on-surface-variant);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .model-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      gap: 8px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .model-name {\n        flex: 1;\n        font-size: 14px;\n      }\n      \n      .model-badge {\n        font-size: 10px;\n        padding: 2px 6px;\n        border-radius: 4px;\n        background: var(--_surface-container-high);\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .no-results {\n      padding: 16px;\n      text-align: center;\n      color: var(--_on-surface-variant);\n      font-size: 14px;\n    }\n  \n",
            "extends": []
        },
        {
            "name": "PageComponent",
            "id": "component-PageComponent-21dd6eb370b4983b5c21c84d40e6f54d266a9d9af9889e6e76b35c43058bd53b3e451bad089d5adf4bea46647ba10265a2fa8cb15630398e75636307d4817fc6",
            "file": "src/stories/page.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "storybook-page",
            "styleUrls": [
                "./page.css"
            ],
            "styles": [],
            "template": "<article>  <storybook-header\n    [user]=\"user\"\n    (onLogout)=\"doLogout()\"\n    (onLogin)=\"doLogin()\"\n    (onCreateAccount)=\"doCreateAccount()\"\n  ></storybook-header>\n  <section class=\"storybook-page\">\n    <h2>Pages in Storybook</h2>\n    <p>\n      We recommend building UIs with a\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <strong>component-driven</strong>\n      </a>\n      process starting with atomic components and ending with pages.\n    </p>\n    <p>\n      Render pages with mock data. This makes it easy to build and review page states without\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\n      in Storybook:\n    </p>\n    <ul>\n      <li>\n        Use a higher-level connected component. Storybook helps you compose such data from the\n        \"args\" of child component stories\n      </li>\n      <li>\n        Assemble data in the page component from your services. You can mock these services out\n        using Storybook.\n      </li>\n    </ul>\n    <p>\n      Get a guided tutorial on component-driven development at\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Storybook tutorials\n      </a>\n      . Read more in the\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\n      .\n    </p>\n    <div class=\"tip-wrapper\">\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n            id=\"a\"\n            fill=\"#999\"\n          />\n        </g>\n      </svg>\n      Viewports addon in the toolbar\n    </div>\n  </section>\n</article>",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "user",
                    "defaultValue": "null",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "User | null",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 69
                }
            ],
            "methodsClass": [
                {
                    "name": "doCreateAccount",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 79,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogin",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 75,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "doLogout",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 71,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "HeaderComponent",
                    "type": "component"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HeaderComponent } from './header.component';\nimport type { User } from './user';\n\n@Component({\n  selector: 'storybook-page',\n  standalone: true,\n  imports: [CommonModule, HeaderComponent],\n  template: `<article>\n  <storybook-header\n    [user]=\"user\"\n    (onLogout)=\"doLogout()\"\n    (onLogin)=\"doLogin()\"\n    (onCreateAccount)=\"doCreateAccount()\"\n  ></storybook-header>\n  <section class=\"storybook-page\">\n    <h2>Pages in Storybook</h2>\n    <p>\n      We recommend building UIs with a\n      <a href=\"https://componentdriven.org\" target=\"_blank\" rel=\"noopener noreferrer\">\n        <strong>component-driven</strong>\n      </a>\n      process starting with atomic components and ending with pages.\n    </p>\n    <p>\n      Render pages with mock data. This makes it easy to build and review page states without\n      needing to navigate to them in your app. Here are some handy patterns for managing page data\n      in Storybook:\n    </p>\n    <ul>\n      <li>\n        Use a higher-level connected component. Storybook helps you compose such data from the\n        \"args\" of child component stories\n      </li>\n      <li>\n        Assemble data in the page component from your services. You can mock these services out\n        using Storybook.\n      </li>\n    </ul>\n    <p>\n      Get a guided tutorial on component-driven development at\n      <a href=\"https://storybook.js.org/tutorials/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Storybook tutorials\n      </a>\n      . Read more in the\n      <a href=\"https://storybook.js.org/docs\" target=\"_blank\" rel=\"noopener noreferrer\"> docs </a>\n      .\n    </p>\n    <div class=\"tip-wrapper\">\n      <span class=\"tip\">Tip</span> Adjust the width of the canvas with the\n      <svg width=\"10\" height=\"10\" viewBox=\"0 0 12 12\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fill=\"none\" fillRule=\"evenodd\">\n          <path\n            d=\"M1.5 5.2h4.8c.3 0 .5.2.5.4v5.1c-.1.2-.3.3-.4.3H1.4a.5.5 0 01-.5-.4V5.7c0-.3.2-.5.5-.5zm0-2.1h6.9c.3 0 .5.2.5.4v7a.5.5 0 01-1 0V4H1.5a.5.5 0 010-1zm0-2.1h9c.3 0 .5.2.5.4v9.1a.5.5 0 01-1 0V2H1.5a.5.5 0 010-1zm4.3 5.2H2V10h3.8V6.2z\"\n            id=\"a\"\n            fill=\"#999\"\n          />\n        </g>\n      </svg>\n      Viewports addon in the toolbar\n    </div>\n  </section>\n</article>`,\n  styleUrls: ['./page.css'],\n})\nexport class PageComponent {\n  user: User | null = null;\n\n  doLogout() {\n    this.user = null;\n  }\n\n  doLogin() {\n    this.user = { name: 'Jane Doe' };\n  }\n\n  doCreateAccount() {\n    this.user = { name: 'Jane Doe' };\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": [
                {
                    "data": ".storybook-page {\n  margin: 0 auto;\n  padding: 48px 20px;\n  max-width: 600px;\n  color: #333;\n  font-size: 14px;\n  line-height: 24px;\n  font-family: 'Nunito Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.storybook-page h2 {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 0 4px;\n  font-weight: 700;\n  font-size: 32px;\n  line-height: 1;\n}\n\n.storybook-page p {\n  margin: 1em 0;\n}\n\n.storybook-page a {\n  color: inherit;\n}\n\n.storybook-page ul {\n  margin: 1em 0;\n  padding-left: 30px;\n}\n\n.storybook-page li {\n  margin-bottom: 8px;\n}\n\n.storybook-page .tip {\n  display: inline-block;\n  vertical-align: top;\n  margin-right: 10px;\n  border-radius: 1em;\n  background: #e7fdd8;\n  padding: 4px 12px;\n  color: #357a14;\n  font-weight: 700;\n  font-size: 11px;\n  line-height: 12px;\n}\n\n.storybook-page .tip-wrapper {\n  margin-top: 40px;\n  margin-bottom: 40px;\n  font-size: 13px;\n  line-height: 20px;\n}\n\n.storybook-page .tip-wrapper svg {\n  display: inline-block;\n  vertical-align: top;\n  margin-top: 3px;\n  margin-right: 4px;\n  width: 12px;\n  height: 12px;\n}\n\n.storybook-page .tip-wrapper svg path {\n  fill: #1ea7fd;\n}\n",
                    "styleUrl": "./page.css"
                }
            ],
            "stylesData": "",
            "extends": []
        },
        {
            "name": "PromptQueueComponent",
            "id": "component-PromptQueueComponent-a13fd8511ea5880c48b001d1486c7dd33efbe45813022b3a68a5b899ac84c14ea1a597797afebbf33715196d6d0772a6c68b82a281646d3d2ee211ca08d03fb5",
            "file": "src/app/features/chat/components/prompt-queue/prompt-queue.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-prompt-queue",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n\n      --_primary: var(--primary, #4285f4);\n      --_error: var(--error, #ba1a1a);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_surface-container-highest: var(--surface-container-highest, #dce0e6);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline: var(--outline, #74777f);\n    }\n\n    .prompt-queue {\n      background: var(--_surface-container-high);\n      border-radius: 12px;\n      padding: 12px 16px;\n      margin-bottom: 16px;\n    }\n\n    .queue-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .queue-header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .expand-icon {\n      transition: transform 0.2s ease;\n      \n      &.expanded {\n        transform: rotate(180deg);\n      }\n    }\n\n    .queue-count {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--_on-surface);\n    }\n\n    .queue-header-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n      \n      .send-all-btn {\n        color: var(--_primary);\n      }\n      \n      .clear-all-btn {\n        color: var(--_error);\n      }\n    }\n\n    .queue-items {\n      margin-top: 12px;\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .queue-item {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--_surface-container);\n      border-radius: 8px;\n      cursor: grab;\n      \n      &:active {\n        cursor: grabbing;\n      }\n    }\n\n    .drag-handle {\n      color: var(--_on-surface-variant);\n      opacity: 0.6;\n      cursor: grab;\n      \n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .queue-item-content {\n      flex: 1;\n      font-size: 14px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .queue-edit-input {\n      flex: 1;\n      background: var(--_surface-container-highest);\n      border: 1px solid var(--_outline);\n      border-radius: 4px;\n      padding: 4px 8px;\n      font-size: 14px;\n      color: var(--_on-surface);\n      \n      &:focus {\n        outline: none;\n        border-color: var(--_primary);\n      }\n    }\n\n    .queue-item-actions {\n      display: flex;\n      gap: 4px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .queue-item:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    /* CDK Drag and Drop styles */\n    .cdk-drag-preview {\n      box-sizing: border-box;\n      border-radius: 8px;\n      box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\n                  0 8px 10px 1px rgba(0, 0, 0, 0.14),\n                  0 3px 14px 2px rgba(0, 0, 0, 0.12);\n    }\n\n    .cdk-drag-placeholder {\n      opacity: 0.3;\n    }\n\n    .cdk-drag-animating {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .queue-items.cdk-drop-list-dragging .queue-item:not(.cdk-drag-placeholder) {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n  "
            ],
            "template": "<div class=\"prompt-queue slide-up\">\n  <div class=\"queue-header\">\n    <div class=\"queue-header-left\" (click)=\"expanded.set(!expanded())\">\n      <mat-icon class=\"expand-icon\" [class.expanded]=\"expanded()\">expand_more</mat-icon>\n      <span class=\"queue-count\">{{ queue().length }} {{ 'queue.queued' | translate }}</span>\n    </div>\n    <div class=\"queue-header-actions\">\n      <button mat-icon-button class=\"send-all-btn\" [matTooltip]=\"'queue.sendAll' | translate\" (click)=\"sendAll.emit(); $event.stopPropagation()\">\n        <mat-icon>double_arrow</mat-icon>\n      </button>\n      <button mat-icon-button class=\"clear-all-btn\" [matTooltip]=\"'queue.clearAll' | translate\" (click)=\"clearAll.emit(); $event.stopPropagation()\">\n        <mat-icon>clear_all</mat-icon>\n      </button>\n    </div>\n  </div>\n\n  @if (expanded()) {\n    <div class=\"queue-items\" cdkDropList (cdkDropListDropped)=\"onDrop($event)\">\n      @for (item of queue(); track item.id; let i = $index) {\n        <div class=\"queue-item\" cdkDrag @slideIn>\n          <mat-icon class=\"drag-handle\" cdkDragHandle>drag_indicator</mat-icon>\n\n          @if (editingId() === item.id) {\n            <input\n              class=\"queue-edit-input\"\n              [(ngModel)]=\"editingContent\"\n              (blur)=\"saveEdit(item.id)\"\n              (keydown.enter)=\"saveEdit(item.id)\"\n              (keydown.escape)=\"cancelEdit()\"\n              #queueEditInput>\n          } @else {\n            <span class=\"queue-item-content\">{{ item.content }}</span>\n          }\n\n          <div class=\"queue-item-actions\">\n            <button mat-icon-button [matTooltip]=\"'queue.sendNow' | translate\" (click)=\"send.emit(item.id)\">\n              <mat-icon>send</mat-icon>\n            </button>\n            <button mat-icon-button [matTooltip]=\"'actions.edit' | translate\" (click)=\"startEdit(item)\">\n              <mat-icon>edit</mat-icon>\n            </button>\n            <button mat-icon-button [matTooltip]=\"'actions.delete' | translate\" (click)=\"remove.emit(item.id)\">\n              <mat-icon>delete</mat-icon>\n            </button>\n          </div>\n        </div>\n      }\n    </div>\n  }\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "queue",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "QueueItem[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>List of queued items</p>\n",
                    "line": 302,
                    "rawdescription": "\nList of queued items",
                    "required": true
                }
            ],
            "outputsClass": [
                {
                    "name": "clearAll",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks clear all</p>\n",
                    "line": 314,
                    "rawdescription": "\nEmitted when user clicks clear all",
                    "required": false
                },
                {
                    "name": "remove",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks remove on an item</p>\n",
                    "line": 311,
                    "rawdescription": "\nEmitted when user clicks remove on an item",
                    "required": false
                },
                {
                    "name": "reorder",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "CdkDragDrop<QueueItem[]>",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when items are reordered via drag-drop</p>\n",
                    "line": 320,
                    "rawdescription": "\nEmitted when items are reordered via drag-drop",
                    "required": false
                },
                {
                    "name": "send",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks send on an item</p>\n",
                    "line": 305,
                    "rawdescription": "\nEmitted when user clicks send on an item",
                    "required": false
                },
                {
                    "name": "sendAll",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "void",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when user clicks send all</p>\n",
                    "line": 308,
                    "rawdescription": "\nEmitted when user clicks send all",
                    "required": false
                },
                {
                    "name": "update",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "{ id: string; content: string }",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when a queue item is updated</p>\n",
                    "line": 317,
                    "rawdescription": "\nEmitted when a queue item is updated",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "editingContent",
                    "defaultValue": "''",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Content being edited</p>\n",
                    "line": 329,
                    "rawdescription": "\nContent being edited"
                },
                {
                    "name": "editingId",
                    "defaultValue": "signal<string | null>(null)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>ID of the item being edited</p>\n",
                    "line": 326,
                    "rawdescription": "\nID of the item being edited"
                },
                {
                    "name": "expanded",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether the queue is expanded</p>\n",
                    "line": 323,
                    "rawdescription": "\nWhether the queue is expanded"
                }
            ],
            "methodsClass": [
                {
                    "name": "cancelEdit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 347,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "onDrop",
                    "args": [
                        {
                            "name": "event",
                            "type": "CdkDragDrop<QueueItem[]>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 331,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "event",
                            "type": "CdkDragDrop<QueueItem[]>",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "saveEdit",
                    "args": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 340,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "id",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "startEdit",
                    "args": [
                        {
                            "name": "item",
                            "type": "QueueItem",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 335,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "jsdoctags": [
                        {
                            "name": "item",
                            "type": "QueueItem",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "DragDropModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatTooltipModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, input, output, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { CdkDragDrop, DragDropModule } from '@angular/cdk/drag-drop';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { trigger, transition, style, animate } from '@angular/animations';\n\nexport interface QueueItem {\n  id: string;\n  content: string;\n}\n\n@Component({\n  selector: 'app-prompt-queue',\n  standalone: true,\n  imports: [\n    CommonModule,\n    FormsModule,\n    DragDropModule,\n    MatIconModule,\n    MatButtonModule,\n    MatTooltipModule,\n    TranslateModule,\n  ],\n  animations: [\n    trigger('slideIn', [\n      transition(':enter', [\n        style({ opacity: 0, transform: 'translateY(10px)' }),\n        animate('200ms ease-out', style({ opacity: 1, transform: 'translateY(0)' }))\n      ]),\n      transition(':leave', [\n        animate('150ms ease-in', style({ opacity: 0, transform: 'translateY(-10px)' }))\n      ])\n    ])\n  ],\n  template: `\n    <div class=\"prompt-queue slide-up\">\n      <div class=\"queue-header\">\n        <div class=\"queue-header-left\" (click)=\"expanded.set(!expanded())\">\n          <mat-icon class=\"expand-icon\" [class.expanded]=\"expanded()\">expand_more</mat-icon>\n          <span class=\"queue-count\">{{ queue().length }} {{ 'queue.queued' | translate }}</span>\n        </div>\n        <div class=\"queue-header-actions\">\n          <button mat-icon-button class=\"send-all-btn\" [matTooltip]=\"'queue.sendAll' | translate\" (click)=\"sendAll.emit(); $event.stopPropagation()\">\n            <mat-icon>double_arrow</mat-icon>\n          </button>\n          <button mat-icon-button class=\"clear-all-btn\" [matTooltip]=\"'queue.clearAll' | translate\" (click)=\"clearAll.emit(); $event.stopPropagation()\">\n            <mat-icon>clear_all</mat-icon>\n          </button>\n        </div>\n      </div>\n      \n      @if (expanded()) {\n        <div class=\"queue-items\" cdkDropList (cdkDropListDropped)=\"onDrop($event)\">\n          @for (item of queue(); track item.id; let i = $index) {\n            <div class=\"queue-item\" cdkDrag @slideIn>\n              <mat-icon class=\"drag-handle\" cdkDragHandle>drag_indicator</mat-icon>\n              \n              @if (editingId() === item.id) {\n                <input \n                  class=\"queue-edit-input\" \n                  [(ngModel)]=\"editingContent\"\n                  (blur)=\"saveEdit(item.id)\"\n                  (keydown.enter)=\"saveEdit(item.id)\"\n                  (keydown.escape)=\"cancelEdit()\"\n                  #queueEditInput>\n              } @else {\n                <span class=\"queue-item-content\">{{ item.content }}</span>\n              }\n              \n              <div class=\"queue-item-actions\">\n                <button mat-icon-button [matTooltip]=\"'queue.sendNow' | translate\" (click)=\"send.emit(item.id)\">\n                  <mat-icon>send</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.edit' | translate\" (click)=\"startEdit(item)\">\n                  <mat-icon>edit</mat-icon>\n                </button>\n                <button mat-icon-button [matTooltip]=\"'actions.delete' | translate\" (click)=\"remove.emit(item.id)\">\n                  <mat-icon>delete</mat-icon>\n                </button>\n              </div>\n            </div>\n          }\n        </div>\n      }\n    </div>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n\n      --_primary: var(--primary, #4285f4);\n      --_error: var(--error, #ba1a1a);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_surface-container-highest: var(--surface-container-highest, #dce0e6);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline: var(--outline, #74777f);\n    }\n\n    .prompt-queue {\n      background: var(--_surface-container-high);\n      border-radius: 12px;\n      padding: 12px 16px;\n      margin-bottom: 16px;\n    }\n\n    .queue-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .queue-header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .expand-icon {\n      transition: transform 0.2s ease;\n      \n      &.expanded {\n        transform: rotate(180deg);\n      }\n    }\n\n    .queue-count {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--_on-surface);\n    }\n\n    .queue-header-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n      \n      .send-all-btn {\n        color: var(--_primary);\n      }\n      \n      .clear-all-btn {\n        color: var(--_error);\n      }\n    }\n\n    .queue-items {\n      margin-top: 12px;\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .queue-item {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--_surface-container);\n      border-radius: 8px;\n      cursor: grab;\n      \n      &:active {\n        cursor: grabbing;\n      }\n    }\n\n    .drag-handle {\n      color: var(--_on-surface-variant);\n      opacity: 0.6;\n      cursor: grab;\n      \n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .queue-item-content {\n      flex: 1;\n      font-size: 14px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .queue-edit-input {\n      flex: 1;\n      background: var(--_surface-container-highest);\n      border: 1px solid var(--_outline);\n      border-radius: 4px;\n      padding: 4px 8px;\n      font-size: 14px;\n      color: var(--_on-surface);\n      \n      &:focus {\n        outline: none;\n        border-color: var(--_primary);\n      }\n    }\n\n    .queue-item-actions {\n      display: flex;\n      gap: 4px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .queue-item:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    /* CDK Drag and Drop styles */\n    .cdk-drag-preview {\n      box-sizing: border-box;\n      border-radius: 8px;\n      box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\n                  0 8px 10px 1px rgba(0, 0, 0, 0.14),\n                  0 3px 14px 2px rgba(0, 0, 0, 0.12);\n    }\n\n    .cdk-drag-placeholder {\n      opacity: 0.3;\n    }\n\n    .cdk-drag-animating {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .queue-items.cdk-drop-list-dragging .queue-item:not(.cdk-drag-placeholder) {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n  `]\n})\nexport class PromptQueueComponent {\n  /** List of queued items */\n  queue = input.required<QueueItem[]>();\n\n  /** Emitted when user clicks send on an item */\n  send = output<string>();\n\n  /** Emitted when user clicks send all */\n  sendAll = output<void>();\n\n  /** Emitted when user clicks remove on an item */\n  remove = output<string>();\n\n  /** Emitted when user clicks clear all */\n  clearAll = output<void>();\n\n  /** Emitted when a queue item is updated */\n  update = output<{ id: string; content: string }>();\n\n  /** Emitted when items are reordered via drag-drop */\n  reorder = output<CdkDragDrop<QueueItem[]>>();\n\n  /** Whether the queue is expanded */\n  expanded = signal(true);\n\n  /** ID of the item being edited */\n  editingId = signal<string | null>(null);\n\n  /** Content being edited */\n  editingContent = '';\n\n  onDrop(event: CdkDragDrop<QueueItem[]>): void {\n    this.reorder.emit(event);\n  }\n\n  startEdit(item: QueueItem): void {\n    this.editingId.set(item.id);\n    this.editingContent = item.content;\n  }\n\n  saveEdit(id: string): void {\n    if (this.editingContent.trim()) {\n      this.update.emit({ id, content: this.editingContent.trim() });\n    }\n    this.editingId.set(null);\n  }\n\n  cancelEdit(): void {\n    this.editingId.set(null);\n    this.editingContent = '';\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: block;\n\n      --_primary: var(--primary, #4285f4);\n      --_error: var(--error, #ba1a1a);\n      --_surface-container: var(--surface-container, #f0f4f9);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_surface-container-highest: var(--surface-container-highest, #dce0e6);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_outline: var(--outline, #74777f);\n    }\n\n    .prompt-queue {\n      background: var(--_surface-container-high);\n      border-radius: 12px;\n      padding: 12px 16px;\n      margin-bottom: 16px;\n    }\n\n    .queue-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n\n    .queue-header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .expand-icon {\n      transition: transform 0.2s ease;\n      \n      &.expanded {\n        transform: rotate(180deg);\n      }\n    }\n\n    .queue-count {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--_on-surface);\n    }\n\n    .queue-header-actions {\n      display: flex;\n      gap: 4px;\n      \n      button {\n        width: 32px;\n        height: 32px;\n        \n        mat-icon {\n          font-size: 18px;\n          width: 18px;\n          height: 18px;\n        }\n      }\n      \n      .send-all-btn {\n        color: var(--_primary);\n      }\n      \n      .clear-all-btn {\n        color: var(--_error);\n      }\n    }\n\n    .queue-items {\n      margin-top: 12px;\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n\n    .queue-item {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      background: var(--_surface-container);\n      border-radius: 8px;\n      cursor: grab;\n      \n      &:active {\n        cursor: grabbing;\n      }\n    }\n\n    .drag-handle {\n      color: var(--_on-surface-variant);\n      opacity: 0.6;\n      cursor: grab;\n      \n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .queue-item-content {\n      flex: 1;\n      font-size: 14px;\n      color: var(--_on-surface);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .queue-edit-input {\n      flex: 1;\n      background: var(--_surface-container-highest);\n      border: 1px solid var(--_outline);\n      border-radius: 4px;\n      padding: 4px 8px;\n      font-size: 14px;\n      color: var(--_on-surface);\n      \n      &:focus {\n        outline: none;\n        border-color: var(--_primary);\n      }\n    }\n\n    .queue-item-actions {\n      display: flex;\n      gap: 4px;\n      opacity: 0;\n      transition: opacity 0.2s ease;\n      \n      .queue-item:hover & {\n        opacity: 1;\n      }\n      \n      button {\n        width: 28px;\n        height: 28px;\n        \n        mat-icon {\n          font-size: 16px;\n          width: 16px;\n          height: 16px;\n        }\n      }\n    }\n\n    /* CDK Drag and Drop styles */\n    .cdk-drag-preview {\n      box-sizing: border-box;\n      border-radius: 8px;\n      box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\n                  0 8px 10px 1px rgba(0, 0, 0, 0.14),\n                  0 3px 14px 2px rgba(0, 0, 0, 0.12);\n    }\n\n    .cdk-drag-placeholder {\n      opacity: 0.3;\n    }\n\n    .cdk-drag-animating {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .queue-items.cdk-drop-list-dragging .queue-item:not(.cdk-drag-placeholder) {\n      transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\n    }\n  \n",
            "extends": []
        },
        {
            "name": "SettingsComponent",
            "id": "component-SettingsComponent-c83aafef1d11011ee387a2d7fa343214adf03d25af65532955cd993480cc329e5e966e0e38502f0751d9c7afa1a085fcb6e90ee93dd47745f1027432c3896908",
            "file": "src/app/features/settings/settings.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-settings",
            "styleUrls": [],
            "styles": [
                "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .settings-container {\n      max-width: 720px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 32px;\n      color: var(--on-surface);\n    }\n\n    .settings-section {\n      margin-bottom: 24px;\n      padding-bottom: 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      &:last-child {\n        border-bottom: none;\n        margin-bottom: 0;\n        padding-bottom: 0;\n      }\n    }\n\n    .section-title {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      font-size: 16px;\n      font-weight: 500;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n      \n      mat-icon {\n        color: var(--gemini-blue);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    .section-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0 0 20px;\n    }\n\n    .loading-state {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n      color: var(--on-surface-variant);\n    }\n\n    /* API Keys List */\n    .api-keys-list {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n    }\n\n    .api-key-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 16px;\n      background: var(--surface-dim);\n      border-radius: var(--radius-md);\n      border: 1px solid var(--surface-variant);\n    }\n\n    .key-info {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n\n    .key-header {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n\n    .provider-icon {\n      width: 24px;\n      height: 24px;\n      \n      &.google { color: #4285f4; }\n      &.anthropic { color: #d97706; }\n      &.openai { color: #10a37f; }\n      &.ollama { color: var(--on-surface-variant); }\n    }\n\n    .key-name {\n      font-size: 15px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .env-var {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      background: var(--surface-container);\n      padding: 2px 6px;\n      border-radius: 4px;\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .key-status {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .status-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      \n      &.success {\n        color: #34a853;\n      }\n      \n      &.warning {\n        color: #ea8600;\n      }\n    }\n\n    .status-text {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n      font-family: 'JetBrains Mono', monospace;\n      \n      &.not-set {\n        font-family: inherit;\n        font-style: italic;\n      }\n    }\n\n    .help-text {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      margin-top: 16px;\n      padding: 12px;\n      background: var(--user-bubble-bg);\n      border-radius: var(--radius-sm);\n      font-size: 13px;\n      color: var(--gemini-blue-dark);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n      }\n      \n      code {\n        background: rgba(66, 133, 244, 0.1);\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 12px;\n      }\n    }\n\n    /* Setting Row */\n    .setting-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 0;\n    }\n\n    .setting-info {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n    }\n\n    .setting-label {\n      font-size: 15px;\n      color: var(--on-surface);\n    }\n\n    .setting-desc {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n    }\n\n    /* Slider Row */\n    .slider-row {\n      margin-bottom: 24px;\n    }\n\n    .slider-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .slider-value {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .full-slider {\n      width: 100%;\n      max-width: 400px;\n    }\n\n    .slider-hint {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 4px;\n    }\n\n    .theme-select {\n      width: 180px;\n      \n      .mat-mdc-form-field-subscript-wrapper {\n        display: none;\n      }\n    }\n\n    /* Features Grid */\n    .features-grid {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n    }\n\n    .feature-chip {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 8px 14px;\n      background: var(--surface-container);\n      border-radius: var(--radius-full);\n      font-size: 13px;\n      color: var(--on-surface-muted);\n      border: 1px solid var(--surface-variant);\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n      \n      &.enabled {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue-dark);\n        border-color: transparent;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    /* About Section */\n    .about-content {\n      p {\n        margin: 0 0 8px;\n        color: var(--on-surface);\n      }\n      \n      .about-desc {\n        color: var(--on-surface-variant);\n        font-size: 14px;\n      }\n    }\n\n    .tech-stack {\n      display: flex;\n      gap: 16px;\n      margin-top: 16px;\n    }\n\n    .tech-link {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      color: var(--gemini-blue);\n      text-decoration: none;\n      font-size: 14px;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  "
            ],
            "template": "<div class=\"settings-container\">\n  <h1 class=\"page-title\">Settings</h1>\n\n  <!-- API Keys Section -->\n  <section class=\"settings-section\">\n    <h2 class=\"section-title\">\n      <mat-icon>key</mat-icon>\n      API Configuration\n    </h2>\n    <p class=\"section-desc\">API keys are read from environment variables on the backend server.</p>\n\n    @if (loading()) {\n      <div class=\"loading-state\">\n        <mat-spinner diameter=\"24\"></mat-spinner>\n        <span>Loading configuration...</span>\n      </div>\n    } @else if (config()) {\n      <div class=\"api-keys-list\">\n        <!-- Google AI -->\n        <div class=\"api-key-item\">\n          <div class=\"key-info\">\n            <div class=\"key-header\">\n              <svg class=\"provider-icon google\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n              </svg>\n              <span class=\"key-name\">Google AI</span>\n            </div>\n            <code class=\"env-var\">GEMINI_API_KEY</code>\n          </div>\n          <div class=\"key-status\" [class.configured]=\"config()!.api_keys.GEMINI_API_KEY.configured\">\n            @if (config()!.api_keys.GEMINI_API_KEY.configured) {\n              <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n              <span class=\"status-text\">{{ config()!.api_keys.GEMINI_API_KEY.preview }}</span>\n            } @else {\n              <mat-icon class=\"status-icon warning\">warning</mat-icon>\n              <span class=\"status-text not-set\">Not configured</span>\n            }\n          </div>\n        </div>\n\n        <!-- Anthropic -->\n        <div class=\"api-key-item\">\n          <div class=\"key-info\">\n            <div class=\"key-header\">\n              <svg class=\"provider-icon anthropic\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                <path fill=\"currentColor\" d=\"M17.604 3.332L12.004 20c0-.001-5.605-16.668-5.605-16.668h3.298l2.304 6.855 2.305-6.855h3.298z\"/>\n              </svg>\n              <span class=\"key-name\">Anthropic</span>\n            </div>\n            <code class=\"env-var\">ANTHROPIC_API_KEY</code>\n          </div>\n          <div class=\"key-status\" [class.configured]=\"config()!.api_keys.ANTHROPIC_API_KEY.configured\">\n            @if (config()!.api_keys.ANTHROPIC_API_KEY.configured) {\n              <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n              <span class=\"status-text\">{{ config()!.api_keys.ANTHROPIC_API_KEY.preview }}</span>\n            } @else {\n              <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n              <span class=\"status-text not-set\">Not configured</span>\n            }\n          </div>\n        </div>\n\n        <!-- OpenAI -->\n        <div class=\"api-key-item\">\n          <div class=\"key-info\">\n            <div class=\"key-header\">\n              <svg class=\"provider-icon openai\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                <path fill=\"currentColor\" d=\"M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.516 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.896zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z\"/>\n              </svg>\n              <span class=\"key-name\">OpenAI</span>\n            </div>\n            <code class=\"env-var\">OPENAI_API_KEY</code>\n          </div>\n          <div class=\"key-status\" [class.configured]=\"config()!.api_keys.OPENAI_API_KEY.configured\">\n            @if (config()!.api_keys.OPENAI_API_KEY.configured) {\n              <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n              <span class=\"status-text\">{{ config()!.api_keys.OPENAI_API_KEY.preview }}</span>\n            } @else {\n              <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n              <span class=\"status-text not-set\">Not configured</span>\n            }\n          </div>\n        </div>\n\n        <!-- Ollama -->\n        <div class=\"api-key-item\">\n          <div class=\"key-info\">\n            <div class=\"key-header\">\n              <svg class=\"provider-icon ollama\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"/>\n                <circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"currentColor\"/>\n              </svg>\n              <span class=\"key-name\">Ollama</span>\n            </div>\n            <code class=\"env-var\">OLLAMA_HOST</code>\n          </div>\n          <div class=\"key-status configured\">\n            <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n            <span class=\"status-text\">{{ config()!.api_keys.OLLAMA_HOST.preview }}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"help-text\">\n        <mat-icon>info</mat-icon>\n        <span>Set environment variables before starting the server. Example: <code>export GEMINI_API_KEY=your-key</code></span>\n      </div>\n    }\n  </section>\n\n  <!-- Appearance Section -->\n  <section class=\"settings-section\">\n    <h2 class=\"section-title\">\n      <mat-icon>palette</mat-icon>\n      Appearance\n    </h2>\n\n    <div class=\"setting-row\">\n      <div class=\"setting-info\">\n        <span class=\"setting-label\">Theme</span>\n        <span class=\"setting-desc\">Choose your preferred color scheme</span>\n      </div>\n      <mat-form-field appearance=\"outline\" class=\"theme-select\">\n        <mat-select [value]=\"themeService.themeMode()\" (selectionChange)=\"themeService.setTheme($event.value)\">\n          <mat-option value=\"system\">\n            <mat-icon>brightness_auto</mat-icon>\n            System\n          </mat-option>\n          <mat-option value=\"light\">\n            <mat-icon>light_mode</mat-icon>\n            Light\n          </mat-option>\n          <mat-option value=\"dark\">\n            <mat-icon>dark_mode</mat-icon>\n            Dark\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n    </div>\n  </section>\n\n  <!-- Generation Defaults Section -->\n  <section class=\"settings-section\">\n    <h2 class=\"section-title\">\n      <mat-icon>tune</mat-icon>\n      Generation Defaults\n    </h2>\n\n    <div class=\"slider-row\">\n      <div class=\"slider-info\">\n        <span class=\"setting-label\">Temperature</span>\n        <span class=\"slider-value\">{{ temperature }}</span>\n      </div>\n      <mat-slider min=\"0\" max=\"2\" step=\"0.1\" discrete class=\"full-slider\">\n        <input matSliderThumb [(ngModel)]=\"temperature\">\n      </mat-slider>\n      <span class=\"slider-hint\">Lower = more focused, Higher = more creative</span>\n    </div>\n\n    <div class=\"slider-row\">\n      <div class=\"slider-info\">\n        <span class=\"setting-label\">Max output tokens</span>\n        <span class=\"slider-value\">{{ maxTokens }}</span>\n      </div>\n      <mat-slider min=\"256\" max=\"8192\" step=\"256\" discrete class=\"full-slider\">\n        <input matSliderThumb [(ngModel)]=\"maxTokens\">\n      </mat-slider>\n      <span class=\"slider-hint\">Maximum length of generated response</span>\n    </div>\n  </section>\n\n  <!-- Features Section -->\n  @if (config()?.features) {\n    <section class=\"settings-section\">\n      <h2 class=\"section-title\">\n        <mat-icon>extension</mat-icon>\n        Features\n      </h2>\n\n      <div class=\"features-grid\">\n        <div class=\"feature-chip\" [class.enabled]=\"config()!.features.rag_enabled\">\n          <mat-icon>{{ config()!.features.rag_enabled ? 'check' : 'close' }}</mat-icon>\n          <span>RAG / Document Search</span>\n        </div>\n        <div class=\"feature-chip\" [class.enabled]=\"config()!.features.streaming_enabled\">\n          <mat-icon>{{ config()!.features.streaming_enabled ? 'check' : 'close' }}</mat-icon>\n          <span>Streaming Responses</span>\n        </div>\n        <div class=\"feature-chip\" [class.enabled]=\"config()!.features.tools_enabled\">\n          <mat-icon>{{ config()!.features.tools_enabled ? 'check' : 'close' }}</mat-icon>\n          <span>Tool Calling</span>\n        </div>\n      </div>\n    </section>\n  }\n\n  <!-- About Section -->\n  <section class=\"settings-section\">\n    <h2 class=\"section-title\">\n      <mat-icon>info</mat-icon>\n      About\n    </h2>\n\n    <div class=\"about-content\">\n      <p><strong>Genkit Chat</strong> v0.1.0</p>\n      <p class=\"about-desc\">A multi-model AI chat application demonstrating Genkit Python capabilities.</p>\n\n      <div class=\"tech-stack\">\n        <a href=\"https://firebase.google.com/docs/genkit\" target=\"_blank\" class=\"tech-link\">\n          <mat-icon>auto_awesome</mat-icon>\n          Genkit Documentation\n        </a>\n        <a href=\"https://github.com/firebase/genkit\" target=\"_blank\" class=\"tech-link\">\n          <mat-icon>code</mat-icon>\n          GitHub Repository\n        </a>\n      </div>\n    </div>\n  </section>\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [],
            "outputsClass": [],
            "propertiesClass": [
                {
                    "name": "config",
                    "defaultValue": "signal<ConfigResponse | null>(null)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 592
                },
                {
                    "name": "http",
                    "defaultValue": "inject(HttpClient)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 589,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "loading",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 593
                },
                {
                    "name": "maxTokens",
                    "defaultValue": "2048",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 595
                },
                {
                    "name": "temperature",
                    "defaultValue": "0.7",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 594
                },
                {
                    "name": "themeService",
                    "defaultValue": "inject(ThemeService)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "",
                    "line": 590
                }
            ],
            "methodsClass": [
                {
                    "name": "loadConfig",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 601,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 597,
                    "deprecated": false,
                    "deprecationMessage": ""
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": false,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "FormsModule",
                    "type": "module"
                },
                {
                    "name": "MatCardModule",
                    "type": "module"
                },
                {
                    "name": "MatInputModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatSlideToggleModule",
                    "type": "module"
                },
                {
                    "name": "MatSliderModule",
                    "type": "module"
                },
                {
                    "name": "MatProgressSpinnerModule",
                    "type": "module"
                },
                {
                    "name": "MatChipsModule",
                    "type": "module"
                },
                {
                    "name": "MatSelectModule",
                    "type": "module"
                },
                {
                    "name": "MatFormFieldModule",
                    "type": "module"
                },
                {
                    "name": "MatOptionModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, inject, signal, OnInit } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatOptionModule } from '@angular/material/core';\nimport { ThemeService } from '../../core/services/theme.service';\n\ninterface ApiKeyInfo {\n  configured: boolean;\n  preview: string | null;\n}\n\ninterface ConfigResponse {\n  api_keys: {\n    GEMINI_API_KEY: ApiKeyInfo;\n    ANTHROPIC_API_KEY: ApiKeyInfo;\n    OPENAI_API_KEY: ApiKeyInfo;\n    OLLAMA_HOST: ApiKeyInfo;\n  };\n  features: {\n    rag_enabled: boolean;\n    streaming_enabled: boolean;\n    tools_enabled: boolean;\n  };\n}\n\n@Component({\n  selector: 'app-settings',\n  imports: [\n    CommonModule,\n    FormsModule,\n    MatCardModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatSlideToggleModule,\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    MatChipsModule,\n    MatSelectModule,\n    MatFormFieldModule,\n    MatOptionModule,\n  ],\n  template: `\n    <div class=\"settings-container\">\n      <h1 class=\"page-title\">Settings</h1>\n\n      <!-- API Keys Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>key</mat-icon>\n          API Configuration\n        </h2>\n        <p class=\"section-desc\">API keys are read from environment variables on the backend server.</p>\n\n        @if (loading()) {\n          <div class=\"loading-state\">\n            <mat-spinner diameter=\"24\"></mat-spinner>\n            <span>Loading configuration...</span>\n          </div>\n        } @else if (config()) {\n          <div class=\"api-keys-list\">\n            <!-- Google AI -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon google\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                    <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                    <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                    <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                  </svg>\n                  <span class=\"key-name\">Google AI</span>\n                </div>\n                <code class=\"env-var\">GEMINI_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.GEMINI_API_KEY.configured\">\n                @if (config()!.api_keys.GEMINI_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.GEMINI_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon warning\">warning</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- Anthropic -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon anthropic\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M17.604 3.332L12.004 20c0-.001-5.605-16.668-5.605-16.668h3.298l2.304 6.855 2.305-6.855h3.298z\"/>\n                  </svg>\n                  <span class=\"key-name\">Anthropic</span>\n                </div>\n                <code class=\"env-var\">ANTHROPIC_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.ANTHROPIC_API_KEY.configured\">\n                @if (config()!.api_keys.ANTHROPIC_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.ANTHROPIC_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- OpenAI -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon openai\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <path fill=\"currentColor\" d=\"M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.516 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.896zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z\"/>\n                  </svg>\n                  <span class=\"key-name\">OpenAI</span>\n                </div>\n                <code class=\"env-var\">OPENAI_API_KEY</code>\n              </div>\n              <div class=\"key-status\" [class.configured]=\"config()!.api_keys.OPENAI_API_KEY.configured\">\n                @if (config()!.api_keys.OPENAI_API_KEY.configured) {\n                  <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                  <span class=\"status-text\">{{ config()!.api_keys.OPENAI_API_KEY.preview }}</span>\n                } @else {\n                  <mat-icon class=\"status-icon\">radio_button_unchecked</mat-icon>\n                  <span class=\"status-text not-set\">Not configured</span>\n                }\n              </div>\n            </div>\n\n            <!-- Ollama -->\n            <div class=\"api-key-item\">\n              <div class=\"key-info\">\n                <div class=\"key-header\">\n                  <svg class=\"provider-icon ollama\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"/>\n                    <circle cx=\"12\" cy=\"12\" r=\"4\" fill=\"currentColor\"/>\n                  </svg>\n                  <span class=\"key-name\">Ollama</span>\n                </div>\n                <code class=\"env-var\">OLLAMA_HOST</code>\n              </div>\n              <div class=\"key-status configured\">\n                <mat-icon class=\"status-icon success\">check_circle</mat-icon>\n                <span class=\"status-text\">{{ config()!.api_keys.OLLAMA_HOST.preview }}</span>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"help-text\">\n            <mat-icon>info</mat-icon>\n            <span>Set environment variables before starting the server. Example: <code>export GEMINI_API_KEY=your-key</code></span>\n          </div>\n        }\n      </section>\n\n      <!-- Appearance Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>palette</mat-icon>\n          Appearance\n        </h2>\n        \n        <div class=\"setting-row\">\n          <div class=\"setting-info\">\n            <span class=\"setting-label\">Theme</span>\n            <span class=\"setting-desc\">Choose your preferred color scheme</span>\n          </div>\n          <mat-form-field appearance=\"outline\" class=\"theme-select\">\n            <mat-select [value]=\"themeService.themeMode()\" (selectionChange)=\"themeService.setTheme($event.value)\">\n              <mat-option value=\"system\">\n                <mat-icon>brightness_auto</mat-icon>\n                System\n              </mat-option>\n              <mat-option value=\"light\">\n                <mat-icon>light_mode</mat-icon>\n                Light\n              </mat-option>\n              <mat-option value=\"dark\">\n                <mat-icon>dark_mode</mat-icon>\n                Dark\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n        </div>\n      </section>\n\n      <!-- Generation Defaults Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>tune</mat-icon>\n          Generation Defaults\n        </h2>\n        \n        <div class=\"slider-row\">\n          <div class=\"slider-info\">\n            <span class=\"setting-label\">Temperature</span>\n            <span class=\"slider-value\">{{ temperature }}</span>\n          </div>\n          <mat-slider min=\"0\" max=\"2\" step=\"0.1\" discrete class=\"full-slider\">\n            <input matSliderThumb [(ngModel)]=\"temperature\">\n          </mat-slider>\n          <span class=\"slider-hint\">Lower = more focused, Higher = more creative</span>\n        </div>\n\n        <div class=\"slider-row\">\n          <div class=\"slider-info\">\n            <span class=\"setting-label\">Max output tokens</span>\n            <span class=\"slider-value\">{{ maxTokens }}</span>\n          </div>\n          <mat-slider min=\"256\" max=\"8192\" step=\"256\" discrete class=\"full-slider\">\n            <input matSliderThumb [(ngModel)]=\"maxTokens\">\n          </mat-slider>\n          <span class=\"slider-hint\">Maximum length of generated response</span>\n        </div>\n      </section>\n\n      <!-- Features Section -->\n      @if (config()?.features) {\n        <section class=\"settings-section\">\n          <h2 class=\"section-title\">\n            <mat-icon>extension</mat-icon>\n            Features\n          </h2>\n          \n          <div class=\"features-grid\">\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.rag_enabled\">\n              <mat-icon>{{ config()!.features.rag_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>RAG / Document Search</span>\n            </div>\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.streaming_enabled\">\n              <mat-icon>{{ config()!.features.streaming_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>Streaming Responses</span>\n            </div>\n            <div class=\"feature-chip\" [class.enabled]=\"config()!.features.tools_enabled\">\n              <mat-icon>{{ config()!.features.tools_enabled ? 'check' : 'close' }}</mat-icon>\n              <span>Tool Calling</span>\n            </div>\n          </div>\n        </section>\n      }\n\n      <!-- About Section -->\n      <section class=\"settings-section\">\n        <h2 class=\"section-title\">\n          <mat-icon>info</mat-icon>\n          About\n        </h2>\n        \n        <div class=\"about-content\">\n          <p><strong>Genkit Chat</strong> v0.1.0</p>\n          <p class=\"about-desc\">A multi-model AI chat application demonstrating Genkit Python capabilities.</p>\n          \n          <div class=\"tech-stack\">\n            <a href=\"https://firebase.google.com/docs/genkit\" target=\"_blank\" class=\"tech-link\">\n              <mat-icon>auto_awesome</mat-icon>\n              Genkit Documentation\n            </a>\n            <a href=\"https://github.com/firebase/genkit\" target=\"_blank\" class=\"tech-link\">\n              <mat-icon>code</mat-icon>\n              GitHub Repository\n            </a>\n          </div>\n        </div>\n      </section>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .settings-container {\n      max-width: 720px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 32px;\n      color: var(--on-surface);\n    }\n\n    .settings-section {\n      margin-bottom: 24px;\n      padding-bottom: 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      &:last-child {\n        border-bottom: none;\n        margin-bottom: 0;\n        padding-bottom: 0;\n      }\n    }\n\n    .section-title {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      font-size: 16px;\n      font-weight: 500;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n      \n      mat-icon {\n        color: var(--gemini-blue);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    .section-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0 0 20px;\n    }\n\n    .loading-state {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n      color: var(--on-surface-variant);\n    }\n\n    /* API Keys List */\n    .api-keys-list {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n    }\n\n    .api-key-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 16px;\n      background: var(--surface-dim);\n      border-radius: var(--radius-md);\n      border: 1px solid var(--surface-variant);\n    }\n\n    .key-info {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n\n    .key-header {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n\n    .provider-icon {\n      width: 24px;\n      height: 24px;\n      \n      &.google { color: #4285f4; }\n      &.anthropic { color: #d97706; }\n      &.openai { color: #10a37f; }\n      &.ollama { color: var(--on-surface-variant); }\n    }\n\n    .key-name {\n      font-size: 15px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .env-var {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      background: var(--surface-container);\n      padding: 2px 6px;\n      border-radius: 4px;\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .key-status {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .status-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      \n      &.success {\n        color: #34a853;\n      }\n      \n      &.warning {\n        color: #ea8600;\n      }\n    }\n\n    .status-text {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n      font-family: 'JetBrains Mono', monospace;\n      \n      &.not-set {\n        font-family: inherit;\n        font-style: italic;\n      }\n    }\n\n    .help-text {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      margin-top: 16px;\n      padding: 12px;\n      background: var(--user-bubble-bg);\n      border-radius: var(--radius-sm);\n      font-size: 13px;\n      color: var(--gemini-blue-dark);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n      }\n      \n      code {\n        background: rgba(66, 133, 244, 0.1);\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 12px;\n      }\n    }\n\n    /* Setting Row */\n    .setting-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 0;\n    }\n\n    .setting-info {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n    }\n\n    .setting-label {\n      font-size: 15px;\n      color: var(--on-surface);\n    }\n\n    .setting-desc {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n    }\n\n    /* Slider Row */\n    .slider-row {\n      margin-bottom: 24px;\n    }\n\n    .slider-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .slider-value {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .full-slider {\n      width: 100%;\n      max-width: 400px;\n    }\n\n    .slider-hint {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 4px;\n    }\n\n    .theme-select {\n      width: 180px;\n      \n      .mat-mdc-form-field-subscript-wrapper {\n        display: none;\n      }\n    }\n\n    /* Features Grid */\n    .features-grid {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n    }\n\n    .feature-chip {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 8px 14px;\n      background: var(--surface-container);\n      border-radius: var(--radius-full);\n      font-size: 13px;\n      color: var(--on-surface-muted);\n      border: 1px solid var(--surface-variant);\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n      \n      &.enabled {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue-dark);\n        border-color: transparent;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    /* About Section */\n    .about-content {\n      p {\n        margin: 0 0 8px;\n        color: var(--on-surface);\n      }\n      \n      .about-desc {\n        color: var(--on-surface-variant);\n        font-size: 14px;\n      }\n    }\n\n    .tech-stack {\n      display: flex;\n      gap: 16px;\n      margin-top: 16px;\n    }\n\n    .tech-link {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      color: var(--gemini-blue);\n      text-decoration: none;\n      font-size: 14px;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  `],\n})\nexport class SettingsComponent implements OnInit {\n  private http = inject(HttpClient);\n  themeService = inject(ThemeService);\n\n  config = signal<ConfigResponse | null>(null);\n  loading = signal(true);\n  temperature = 0.7;\n  maxTokens = 2048;\n\n  ngOnInit(): void {\n    this.loadConfig();\n  }\n\n  private loadConfig(): void {\n    this.http.get<ConfigResponse>('http://localhost:8080/api/config')\n      .subscribe({\n        next: (data) => {\n          this.config.set(data);\n          this.loading.set(false);\n        },\n        error: (err) => {\n          console.error('Failed to load config:', err);\n          this.loading.set(false);\n        },\n      });\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    :host {\n      display: block;\n      font-family: 'Google Sans', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n    }\n    \n    .settings-container {\n      max-width: 720px;\n      margin: 0 auto;\n      padding: 24px;\n    }\n\n    .page-title {\n      font-size: 28px;\n      font-weight: 400;\n      margin: 0 0 32px;\n      color: var(--on-surface);\n    }\n\n    .settings-section {\n      margin-bottom: 24px;\n      padding-bottom: 24px;\n      border-bottom: 1px solid var(--surface-variant);\n      \n      &:last-child {\n        border-bottom: none;\n        margin-bottom: 0;\n        padding-bottom: 0;\n      }\n    }\n\n    .section-title {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      font-size: 16px;\n      font-weight: 500;\n      margin: 0 0 8px;\n      color: var(--on-surface);\n      \n      mat-icon {\n        color: var(--gemini-blue);\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    .section-desc {\n      font-size: 14px;\n      color: var(--on-surface-variant);\n      margin: 0 0 20px;\n    }\n\n    .loading-state {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      padding: 16px;\n      color: var(--on-surface-variant);\n    }\n\n    /* API Keys List */\n    .api-keys-list {\n      display: flex;\n      flex-direction: column;\n      gap: 12px;\n    }\n\n    .api-key-item {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 16px;\n      background: var(--surface-dim);\n      border-radius: var(--radius-md);\n      border: 1px solid var(--surface-variant);\n    }\n\n    .key-info {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n\n    .key-header {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n    }\n\n    .provider-icon {\n      width: 24px;\n      height: 24px;\n      \n      &.google { color: #4285f4; }\n      &.anthropic { color: #d97706; }\n      &.openai { color: #10a37f; }\n      &.ollama { color: var(--on-surface-variant); }\n    }\n\n    .key-name {\n      font-size: 15px;\n      font-weight: 500;\n      color: var(--on-surface);\n    }\n\n    .env-var {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      background: var(--surface-container);\n      padding: 2px 6px;\n      border-radius: 4px;\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .key-status {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .status-icon {\n      font-size: 20px;\n      width: 20px;\n      height: 20px;\n      \n      &.success {\n        color: #34a853;\n      }\n      \n      &.warning {\n        color: #ea8600;\n      }\n    }\n\n    .status-text {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n      font-family: 'JetBrains Mono', monospace;\n      \n      &.not-set {\n        font-family: inherit;\n        font-style: italic;\n      }\n    }\n\n    .help-text {\n      display: flex;\n      align-items: flex-start;\n      gap: 8px;\n      margin-top: 16px;\n      padding: 12px;\n      background: var(--user-bubble-bg);\n      border-radius: var(--radius-sm);\n      font-size: 13px;\n      color: var(--gemini-blue-dark);\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n      }\n      \n      code {\n        background: rgba(66, 133, 244, 0.1);\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-size: 12px;\n      }\n    }\n\n    /* Setting Row */\n    .setting-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 12px 0;\n    }\n\n    .setting-info {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n    }\n\n    .setting-label {\n      font-size: 15px;\n      color: var(--on-surface);\n    }\n\n    .setting-desc {\n      font-size: 13px;\n      color: var(--on-surface-variant);\n    }\n\n    /* Slider Row */\n    .slider-row {\n      margin-bottom: 24px;\n    }\n\n    .slider-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n    }\n\n    .slider-value {\n      font-size: 14px;\n      font-weight: 500;\n      color: var(--gemini-blue);\n      font-family: 'JetBrains Mono', monospace;\n    }\n\n    .full-slider {\n      width: 100%;\n      max-width: 400px;\n    }\n\n    .slider-hint {\n      font-size: 12px;\n      color: var(--on-surface-muted);\n      margin-top: 4px;\n    }\n\n    .theme-select {\n      width: 180px;\n      \n      .mat-mdc-form-field-subscript-wrapper {\n        display: none;\n      }\n    }\n\n    /* Features Grid */\n    .features-grid {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 8px;\n    }\n\n    .feature-chip {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 8px 14px;\n      background: var(--surface-container);\n      border-radius: var(--radius-full);\n      font-size: 13px;\n      color: var(--on-surface-muted);\n      border: 1px solid var(--surface-variant);\n      \n      mat-icon {\n        font-size: 16px;\n        width: 16px;\n        height: 16px;\n      }\n      \n      &.enabled {\n        background: var(--user-bubble-bg);\n        color: var(--gemini-blue-dark);\n        border-color: transparent;\n        \n        mat-icon {\n          color: var(--gemini-blue);\n        }\n      }\n    }\n\n    /* About Section */\n    .about-content {\n      p {\n        margin: 0 0 8px;\n        color: var(--on-surface);\n      }\n      \n      .about-desc {\n        color: var(--on-surface-variant);\n        font-size: 14px;\n      }\n    }\n\n    .tech-stack {\n      display: flex;\n      gap: 16px;\n      margin-top: 16px;\n    }\n\n    .tech-link {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      color: var(--gemini-blue);\n      text-decoration: none;\n      font-size: 14px;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n      \n      mat-icon {\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  \n",
            "extends": [],
            "implements": [
                "OnInit"
            ]
        },
        {
            "name": "ThemeSelectorComponent",
            "id": "component-ThemeSelectorComponent-cf4d4f7d43f841e1e3f53c54464e69cf49a0a1dfec6677014b755195f7f2fc88177971a8bb172248a12802f9aa7627019a829553c0915fb55eba67980b35ba03",
            "file": "src/app/shared/components/theme-selector/theme-selector.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-theme-selector",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n    }\n\n    .theme-toggle-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .theme-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n\n      mat-icon:first-child {\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .theme-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    .theme-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .check-icon {\n        margin-left: auto;\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  "
            ],
            "template": "@if (mode() === 'toggle') {\n  <!-- Toggle Mode: Single button that cycles through themes -->\n  <button mat-icon-button\n          class=\"theme-toggle-btn\"\n          [matTooltip]=\"getTooltip()\"\n          (click)=\"cycleTheme()\">\n    <mat-icon>{{ getIcon() }}</mat-icon>\n  </button>\n} @else {\n  <!-- Dropdown Mode: Button with menu -->\n  <button mat-button\n          class=\"theme-select-btn\"\n          [matMenuTriggerFor]=\"themeMenu\">\n    <mat-icon>{{ getIcon() }}</mat-icon>\n    <span class=\"theme-label\">{{ getCurrentOption().labelKey | translate }}</span>\n    <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n  </button>\n\n  <mat-menu #themeMenu=\"matMenu\" xPosition=\"before\">\n    @for (option of themeOptions; track option.mode) {\n      <button mat-menu-item\n              class=\"theme-item\"\n              [class.selected]=\"theme() === option.mode\"\n              (click)=\"selectTheme(option.mode)\">\n        <mat-icon>{{ option.icon }}</mat-icon>\n        <span>{{ option.labelKey | translate }}</span>\n        @if (theme() === option.mode) {\n          <mat-icon class=\"check-icon\">check</mat-icon>\n        }\n      </button>\n    }\n  </mat-menu>\n}\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "mode",
                    "defaultValue": "'dropdown'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "\"toggle\" | \"dropdown\"",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Display mode: &#39;toggle&#39; for single button, &#39;dropdown&#39; for menu</p>\n",
                    "line": 167,
                    "rawdescription": "\nDisplay mode: 'toggle' for single button, 'dropdown' for menu",
                    "required": false
                },
                {
                    "name": "theme",
                    "defaultValue": "'system'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ThemeMode",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Current theme mode</p>\n",
                    "line": 164,
                    "rawdescription": "\nCurrent theme mode",
                    "required": false
                }
            ],
            "outputsClass": [
                {
                    "name": "themeChanged",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ThemeMode",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when theme changes</p>\n",
                    "line": 170,
                    "rawdescription": "\nEmitted when theme changes",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "themeOptions",
                    "defaultValue": "THEME_OPTIONS",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Available theme options</p>\n",
                    "line": 173,
                    "rawdescription": "\nAvailable theme options",
                    "modifierKind": [
                        148
                    ]
                }
            ],
            "methodsClass": [
                {
                    "name": "cycleTheme",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 194,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nCycle through themes (for toggle mode)",
                    "description": "<p>Cycle through themes (for toggle mode)</p>\n"
                },
                {
                    "name": "getCurrentOption",
                    "args": [],
                    "optional": false,
                    "returnType": "ThemeOption",
                    "typeParameters": [],
                    "line": 176,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet the current option based on theme",
                    "description": "<p>Get the current option based on theme</p>\n"
                },
                {
                    "name": "getIcon",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 181,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet icon for current theme",
                    "description": "<p>Get icon for current theme</p>\n"
                },
                {
                    "name": "getTooltip",
                    "args": [],
                    "optional": false,
                    "returnType": "string",
                    "typeParameters": [],
                    "line": 186,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet tooltip for toggle mode",
                    "description": "<p>Get tooltip for toggle mode</p>\n"
                },
                {
                    "name": "selectTheme",
                    "args": [
                        {
                            "name": "mode",
                            "type": "ThemeMode",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 201,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nSelect a specific theme (for dropdown mode)",
                    "description": "<p>Select a specific theme (for dropdown mode)</p>\n",
                    "jsdoctags": [
                        {
                            "name": "mode",
                            "type": "ThemeMode",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "MatMenuModule",
                    "type": "module"
                },
                {
                    "name": "MatTooltipModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, input, output, computed } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { TranslateModule } from '@ngx-translate/core';\n\nexport type ThemeMode = 'light' | 'dark' | 'system';\n\nexport interface ThemeOption {\n    mode: ThemeMode;\n    icon: string;\n    labelKey: string;\n}\n\nexport const THEME_OPTIONS: ThemeOption[] = [\n    { mode: 'system', icon: 'brightness_auto', labelKey: 'theme.system' },\n    { mode: 'light', icon: 'light_mode', labelKey: 'theme.light' },\n    { mode: 'dark', icon: 'dark_mode', labelKey: 'theme.dark' },\n];\n\n@Component({\n    selector: 'app-theme-selector',\n    standalone: true,\n    imports: [\n        CommonModule,\n        MatButtonModule,\n        MatIconModule,\n        MatMenuModule,\n        MatTooltipModule,\n        TranslateModule,\n    ],\n    template: `\n    @if (mode() === 'toggle') {\n      <!-- Toggle Mode: Single button that cycles through themes -->\n      <button mat-icon-button \n              class=\"theme-toggle-btn\"\n              [matTooltip]=\"getTooltip()\"\n              (click)=\"cycleTheme()\">\n        <mat-icon>{{ getIcon() }}</mat-icon>\n      </button>\n    } @else {\n      <!-- Dropdown Mode: Button with menu -->\n      <button mat-button \n              class=\"theme-select-btn\"\n              [matMenuTriggerFor]=\"themeMenu\">\n        <mat-icon>{{ getIcon() }}</mat-icon>\n        <span class=\"theme-label\">{{ getCurrentOption().labelKey | translate }}</span>\n        <mat-icon class=\"dropdown-icon\">arrow_drop_down</mat-icon>\n      </button>\n      \n      <mat-menu #themeMenu=\"matMenu\" xPosition=\"before\">\n        @for (option of themeOptions; track option.mode) {\n          <button mat-menu-item \n                  class=\"theme-item\"\n                  [class.selected]=\"theme() === option.mode\"\n                  (click)=\"selectTheme(option.mode)\">\n            <mat-icon>{{ option.icon }}</mat-icon>\n            <span>{{ option.labelKey | translate }}</span>\n            @if (theme() === option.mode) {\n              <mat-icon class=\"check-icon\">check</mat-icon>\n            }\n          </button>\n        }\n      </mat-menu>\n    }\n  `,\n    styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n    }\n\n    .theme-toggle-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .theme-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n\n      mat-icon:first-child {\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .theme-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    .theme-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .check-icon {\n        margin-left: auto;\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  `]\n})\nexport class ThemeSelectorComponent {\n    /** Current theme mode */\n    theme = input<ThemeMode>('system');\n\n    /** Display mode: 'toggle' for single button, 'dropdown' for menu */\n    mode = input<'toggle' | 'dropdown'>('dropdown');\n\n    /** Emitted when theme changes */\n    themeChanged = output<ThemeMode>();\n\n    /** Available theme options */\n    readonly themeOptions = THEME_OPTIONS;\n\n    /** Get the current option based on theme */\n    getCurrentOption(): ThemeOption {\n        return this.themeOptions.find(o => o.mode === this.theme()) || this.themeOptions[0];\n    }\n\n    /** Get icon for current theme */\n    getIcon(): string {\n        return this.getCurrentOption().icon;\n    }\n\n    /** Get tooltip for toggle mode */\n    getTooltip(): string {\n        const mode = this.theme();\n        if (mode === 'system') return 'System theme';\n        if (mode === 'dark') return 'Dark theme';\n        return 'Light theme';\n    }\n\n    /** Cycle through themes (for toggle mode) */\n    cycleTheme(): void {\n        const current = this.theme();\n        const next: ThemeMode = current === 'system' ? 'light' : current === 'light' ? 'dark' : 'system';\n        this.themeChanged.emit(next);\n    }\n\n    /** Select a specific theme (for dropdown mode) */\n    selectTheme(mode: ThemeMode): void {\n        this.themeChanged.emit(mode);\n    }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: inline-block;\n\n      --_primary: var(--primary, #4285f4);\n      --_primary-container: var(--primary-container, #d3e3fd);\n      --_on-primary-container: var(--on-primary-container, #041e49);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n    }\n\n    .theme-toggle-btn {\n      color: var(--_on-surface-variant);\n      \n      &:hover {\n        color: var(--_primary);\n      }\n    }\n\n    .theme-select-btn {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 4px 12px;\n      border-radius: 8px;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n      }\n\n      mat-icon:first-child {\n        color: var(--_on-surface-variant);\n      }\n    }\n\n    .theme-label {\n      font-size: 14px;\n      color: var(--_on-surface);\n    }\n\n    .dropdown-icon {\n      color: var(--_on-surface-variant);\n    }\n\n    .theme-item {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      \n      &.selected {\n        background: var(--_primary-container);\n        color: var(--_on-primary-container);\n      }\n      \n      .check-icon {\n        margin-left: auto;\n        color: var(--_primary);\n        font-size: 18px;\n        width: 18px;\n        height: 18px;\n      }\n    }\n  \n",
            "extends": []
        },
        {
            "name": "WelcomeScreenComponent",
            "id": "component-WelcomeScreenComponent-aff0eb6f8cf2486905c1702c8dcd38dac328f92231d3235cbb2cf3d9a539d4278fd45741883df014dd67c5e649f737488f5665e5ae5c7d891eca0f8b475703dd",
            "file": "src/app/features/chat/components/welcome-screen/welcome-screen.component.ts",
            "encapsulation": [],
            "entryComponents": [],
            "inputs": [],
            "outputs": [],
            "providers": [],
            "selector": "app-welcome-screen",
            "styleUrls": [],
            "styles": [
                "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      text-align: center;\n      padding: 24px 16px;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .welcome-header {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin-bottom: 32px;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n      }\n    }\n\n    .welcome-title {\n      font-size: 2.5rem;\n      font-weight: 400;\n      margin: 0 0 8px 0;\n      color: var(--_on-surface);\n      min-height: 60px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .typewriter-text {\n        display: inline;\n      }\n      \n      .cursor {\n        display: inline-block;\n        width: 2px;\n        height: 1em;\n        background: var(--_primary);\n        margin-left: 2px;\n        opacity: 0;\n        animation: blink 1s step-end infinite;\n        \n        &.visible {\n          opacity: 1;\n        }\n      }\n    }\n\n    .welcome-subtitle {\n      font-size: 1.1rem;\n      color: var(--_on-surface-variant);\n      margin: 0;\n    }\n\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 12px;\n      justify-content: center;\n      max-width: 600px;\n    }\n\n    .quick-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-radius: 24px;\n      border: 1px solid var(--_outline-variant);\n      background: transparent;\n      color: var(--_on-surface);\n      font-size: 14px;\n      transition: all 0.2s ease;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n        border-color: var(--_primary);\n      }\n      \n      .chip-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    @keyframes blink {\n      50% { opacity: 0; }\n    }\n  "
            ],
            "template": "<div class=\"welcome-header\">\n  <div class=\"welcome-logo\">\n    <img [src]=\"logoUrl()\" [alt]=\"logoAlt()\">\n  </div>\n  <h1 class=\"welcome-title\"\n      [class.rtl]=\"currentGreeting().dir === 'rtl'\"\n      [class.slide-in]=\"currentGreeting().anim === 'slide'\">\n    <span class=\"typewriter-text\">{{ typewriterText() }}</span><span class=\"cursor\" [class.visible]=\"showCursor()\">|</span>\n  </h1>\n  <p class=\"welcome-subtitle\">{{ 'chat.greetingSubtitle' | translate }}</p>\n</div>\n\n<!-- Quick Action Chips -->\n<div class=\"quick-chips\">\n  @for (action of quickActions(); track action.labelKey) {\n    <button mat-stroked-button\n            class=\"quick-chip\"\n            (click)=\"actionSelected.emit(action.prompt)\">\n      <mat-icon class=\"chip-icon\" [style.color]=\"action.color\">{{ action.icon }}</mat-icon>\n      <span>{{ action.labelKey | translate }}</span>\n    </button>\n  }\n</div>\n",
            "templateUrl": [],
            "viewProviders": [],
            "hostDirectives": [],
            "inputsClass": [
                {
                    "name": "greetings",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Greeting[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>List of greetings to cycle through</p>\n",
                    "line": 194,
                    "rawdescription": "\nList of greetings to cycle through",
                    "required": true
                },
                {
                    "name": "logoAlt",
                    "defaultValue": "'Genkit'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Logo alt text</p>\n",
                    "line": 203,
                    "rawdescription": "\nLogo alt text",
                    "required": false
                },
                {
                    "name": "logoUrl",
                    "defaultValue": "'genkit-logo.png'",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Logo URL (configurable for portability)</p>\n",
                    "line": 200,
                    "rawdescription": "\nLogo URL (configurable for portability)",
                    "required": false
                },
                {
                    "name": "quickActions",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "QuickAction[]",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Quick action buttons</p>\n",
                    "line": 197,
                    "rawdescription": "\nQuick action buttons",
                    "required": true
                }
            ],
            "outputsClass": [
                {
                    "name": "actionSelected",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Emitted when a quick action is selected</p>\n",
                    "line": 206,
                    "rawdescription": "\nEmitted when a quick action is selected",
                    "required": false
                }
            ],
            "propertiesClass": [
                {
                    "name": "currentGreetingIndex",
                    "defaultValue": "signal(0)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Current greeting index</p>\n",
                    "line": 209,
                    "rawdescription": "\nCurrent greeting index"
                },
                {
                    "name": "eraseInterval",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown>",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 219,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "greetingInterval",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown>",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 217,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "showCursor",
                    "defaultValue": "signal(true)",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Whether to show the cursor</p>\n",
                    "line": 215,
                    "rawdescription": "\nWhether to show the cursor"
                },
                {
                    "name": "typeInterval",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ReturnType<unknown>",
                    "indexKey": "",
                    "optional": true,
                    "description": "",
                    "line": 218,
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "typewriterText",
                    "defaultValue": "signal('')",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "indexKey": "",
                    "optional": false,
                    "description": "<p>Current typewriter text</p>\n",
                    "line": 212,
                    "rawdescription": "\nCurrent typewriter text"
                }
            ],
            "methodsClass": [
                {
                    "name": "currentGreeting",
                    "args": [],
                    "optional": false,
                    "returnType": "Greeting",
                    "typeParameters": [],
                    "line": 222,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "rawdescription": "\nGet the current greeting based on index",
                    "description": "<p>Get the current greeting based on index</p>\n"
                },
                {
                    "name": "eraseGreeting",
                    "args": [
                        {
                            "name": "callback",
                            "type": "function",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": []
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 275,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "callback",
                            "type": "function",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "function": [],
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "ngOnDestroy",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 230,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "ngOnInit",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 226,
                    "deprecated": false,
                    "deprecationMessage": ""
                },
                {
                    "name": "startGreetingCarousel",
                    "args": [],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 236,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ]
                },
                {
                    "name": "typeGreeting",
                    "args": [
                        {
                            "name": "greetingText",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'"
                        },
                        {
                            "name": "dir",
                            "type": "\"ltr\" | \"rtl\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'ltr'"
                        }
                    ],
                    "optional": false,
                    "returnType": "void",
                    "typeParameters": [],
                    "line": 254,
                    "deprecated": false,
                    "deprecationMessage": "",
                    "modifierKind": [
                        123
                    ],
                    "jsdoctags": [
                        {
                            "name": "greetingText",
                            "type": "string",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "anim",
                            "type": "\"type\" | \"slide\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'type'",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "dir",
                            "type": "\"ltr\" | \"rtl\"",
                            "optional": false,
                            "dotDotDotToken": false,
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'ltr'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "deprecated": false,
            "deprecationMessage": "",
            "hostBindings": [],
            "hostListeners": [],
            "standalone": true,
            "imports": [
                {
                    "name": "CommonModule",
                    "type": "module"
                },
                {
                    "name": "MatButtonModule",
                    "type": "module"
                },
                {
                    "name": "MatIconModule",
                    "type": "module"
                },
                {
                    "name": "TranslateModule",
                    "type": "module"
                }
            ],
            "description": "",
            "rawdescription": "\n",
            "type": "component",
            "sourceCode": "import { Component, input, output, signal, OnInit, OnDestroy } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { TranslateModule } from '@ngx-translate/core';\n\nexport interface Greeting {\n  text: string;\n  lang: string;\n  dir: 'ltr' | 'rtl';\n  anim: 'type' | 'slide';\n}\n\nexport interface QuickAction {\n  icon: string;\n  labelKey: string;\n  prompt: string;\n  color: string;\n}\n\n@Component({\n  selector: 'app-welcome-screen',\n  standalone: true,\n  imports: [\n    CommonModule,\n    MatButtonModule,\n    MatIconModule,\n    TranslateModule,\n  ],\n  template: `\n    <div class=\"welcome-header\">\n      <div class=\"welcome-logo\">\n        <img [src]=\"logoUrl()\" [alt]=\"logoAlt()\">\n      </div>\n      <h1 class=\"welcome-title\" \n          [class.rtl]=\"currentGreeting().dir === 'rtl'\"\n          [class.slide-in]=\"currentGreeting().anim === 'slide'\">\n        <span class=\"typewriter-text\">{{ typewriterText() }}</span><span class=\"cursor\" [class.visible]=\"showCursor()\">|</span>\n      </h1>\n      <p class=\"welcome-subtitle\">{{ 'chat.greetingSubtitle' | translate }}</p>\n    </div>\n    \n    <!-- Quick Action Chips -->\n    <div class=\"quick-chips\">\n      @for (action of quickActions(); track action.labelKey) {\n        <button mat-stroked-button \n                class=\"quick-chip\"\n                (click)=\"actionSelected.emit(action.prompt)\">\n          <mat-icon class=\"chip-icon\" [style.color]=\"action.color\">{{ action.icon }}</mat-icon>\n          <span>{{ action.labelKey | translate }}</span>\n        </button>\n      }\n    </div>\n  `,\n  styles: [`\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      text-align: center;\n      padding: 24px 16px;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .welcome-header {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin-bottom: 32px;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n      }\n    }\n\n    .welcome-title {\n      font-size: 2.5rem;\n      font-weight: 400;\n      margin: 0 0 8px 0;\n      color: var(--_on-surface);\n      min-height: 60px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .typewriter-text {\n        display: inline;\n      }\n      \n      .cursor {\n        display: inline-block;\n        width: 2px;\n        height: 1em;\n        background: var(--_primary);\n        margin-left: 2px;\n        opacity: 0;\n        animation: blink 1s step-end infinite;\n        \n        &.visible {\n          opacity: 1;\n        }\n      }\n    }\n\n    .welcome-subtitle {\n      font-size: 1.1rem;\n      color: var(--_on-surface-variant);\n      margin: 0;\n    }\n\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 12px;\n      justify-content: center;\n      max-width: 600px;\n    }\n\n    .quick-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-radius: 24px;\n      border: 1px solid var(--_outline-variant);\n      background: transparent;\n      color: var(--_on-surface);\n      font-size: 14px;\n      transition: all 0.2s ease;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n        border-color: var(--_primary);\n      }\n      \n      .chip-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    @keyframes blink {\n      50% { opacity: 0; }\n    }\n  `]\n})\nexport class WelcomeScreenComponent implements OnInit, OnDestroy {\n  /** List of greetings to cycle through */\n  greetings = input.required<Greeting[]>();\n\n  /** Quick action buttons */\n  quickActions = input.required<QuickAction[]>();\n\n  /** Logo URL (configurable for portability) */\n  logoUrl = input<string>('genkit-logo.png');\n\n  /** Logo alt text */\n  logoAlt = input<string>('Genkit');\n\n  /** Emitted when a quick action is selected */\n  actionSelected = output<string>();\n\n  /** Current greeting index */\n  currentGreetingIndex = signal(0);\n\n  /** Current typewriter text */\n  typewriterText = signal('');\n\n  /** Whether to show the cursor */\n  showCursor = signal(true);\n\n  private greetingInterval?: ReturnType<typeof setInterval>;\n  private typeInterval?: ReturnType<typeof setTimeout>;\n  private eraseInterval?: ReturnType<typeof setTimeout>;\n\n  /** Get the current greeting based on index */\n  currentGreeting(): Greeting {\n    return this.greetings()[this.currentGreetingIndex()];\n  }\n\n  ngOnInit(): void {\n    this.startGreetingCarousel();\n  }\n\n  ngOnDestroy(): void {\n    if (this.greetingInterval) clearInterval(this.greetingInterval);\n    if (this.typeInterval) clearTimeout(this.typeInterval);\n    if (this.eraseInterval) clearTimeout(this.eraseInterval);\n  }\n\n  private startGreetingCarousel(): void {\n    const greetings = this.greetings();\n    if (greetings.length === 0) return;\n\n    // Type the first greeting\n    this.typeGreeting(greetings[0].text, greetings[0].anim, greetings[0].dir);\n\n    // Set up interval to cycle through greetings\n    this.greetingInterval = setInterval(() => {\n      this.eraseGreeting(() => {\n        const nextIndex = (this.currentGreetingIndex() + 1) % greetings.length;\n        this.currentGreetingIndex.set(nextIndex);\n        const nextGreeting = greetings[nextIndex];\n        this.typeGreeting(nextGreeting.text, nextGreeting.anim, nextGreeting.dir);\n      }, this.currentGreeting().anim);\n    }, 4000);\n  }\n\n  private typeGreeting(greetingText: string, anim: 'type' | 'slide' = 'type', dir: 'ltr' | 'rtl' = 'ltr'): void {\n    this.showCursor.set(true);\n\n    if (anim === 'slide') {\n      // For slide animation, show full text immediately\n      this.typewriterText.set(greetingText);\n      return;\n    }\n\n    // Typewriter effect\n    let charIndex = 0;\n    const typeNext = () => {\n      if (charIndex <= greetingText.length) {\n        this.typewriterText.set(greetingText.substring(0, charIndex));\n        charIndex++;\n        this.typeInterval = setTimeout(typeNext, 50 + Math.random() * 30);\n      }\n    };\n    typeNext();\n  }\n\n  private eraseGreeting(callback: () => void, anim: 'type' | 'slide' = 'type'): void {\n    if (anim === 'slide') {\n      // For slide, just clear and callback\n      this.typewriterText.set('');\n      callback();\n      return;\n    }\n\n    // Erase effect\n    const currentText = this.typewriterText();\n    let charIndex = currentText.length;\n\n    const eraseNext = () => {\n      if (charIndex >= 0) {\n        this.typewriterText.set(currentText.substring(0, charIndex));\n        charIndex--;\n        this.eraseInterval = setTimeout(eraseNext, 30);\n      } else {\n        callback();\n      }\n    };\n    eraseNext();\n  }\n}\n",
            "assetsDirs": [],
            "styleUrlsData": "",
            "stylesData": "\n    /* CSS Variable Defaults - ensures component works without global theme */\n    :host {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      text-align: center;\n      padding: 24px 16px;\n\n      --_primary: var(--primary, #4285f4);\n      --_on-surface: var(--on-surface, #1a1c1e);\n      --_on-surface-variant: var(--on-surface-variant, #5f6368);\n      --_surface-container-high: var(--surface-container-high, #e5eaf0);\n      --_outline-variant: var(--outline-variant, #c4c6d0);\n    }\n\n    .welcome-header {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      margin-bottom: 32px;\n    }\n\n    .welcome-logo {\n      margin-bottom: 24px;\n      \n      img {\n        height: 56px;\n        width: auto;\n        border-radius: 12px;\n      }\n    }\n\n    .welcome-title {\n      font-size: 2.5rem;\n      font-weight: 400;\n      margin: 0 0 8px 0;\n      color: var(--_on-surface);\n      min-height: 60px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      &.rtl {\n        direction: rtl;\n      }\n      \n      .typewriter-text {\n        display: inline;\n      }\n      \n      .cursor {\n        display: inline-block;\n        width: 2px;\n        height: 1em;\n        background: var(--_primary);\n        margin-left: 2px;\n        opacity: 0;\n        animation: blink 1s step-end infinite;\n        \n        &.visible {\n          opacity: 1;\n        }\n      }\n    }\n\n    .welcome-subtitle {\n      font-size: 1.1rem;\n      color: var(--_on-surface-variant);\n      margin: 0;\n    }\n\n    .quick-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 12px;\n      justify-content: center;\n      max-width: 600px;\n    }\n\n    .quick-chip {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 16px;\n      border-radius: 24px;\n      border: 1px solid var(--_outline-variant);\n      background: transparent;\n      color: var(--_on-surface);\n      font-size: 14px;\n      transition: all 0.2s ease;\n      \n      &:hover {\n        background: var(--_surface-container-high);\n        border-color: var(--_primary);\n      }\n      \n      .chip-icon {\n        font-size: 20px;\n        width: 20px;\n        height: 20px;\n      }\n    }\n\n    @keyframes blink {\n      50% { opacity: 0; }\n    }\n  \n",
            "extends": [],
            "implements": [
                "OnInit",
                "OnDestroy"
            ]
        }
    ],
    "modules": [],
    "miscellaneous": {
        "variables": [
            {
                "name": "appConfig",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/app.config.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "ApplicationConfig",
                "defaultValue": "{\n  providers: [\n    provideBrowserGlobalErrorListeners(),\n    provideZoneChangeDetection({ eventCoalescing: true }),\n    provideRouter(routes),\n    provideHttpClient(withFetch()),\n    provideAnimations(),\n    provideTranslateService({\n      defaultLanguage: 'en',\n    }),\n    provideTranslateHttpLoader({\n      prefix: '/assets/i18n/',\n      suffix: '.json',\n    }),\n  ],\n}"
            },
            {
                "name": "CHAT_CONFIG",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/config/chat.config.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "unknown",
                "defaultValue": "{\n    /**\n     * Maximum number of file attachments allowed per message.\n     */\n    maxAttachments: 10,\n\n    /**\n     * Maximum file size in bytes (default: 1MB).\n     */\n    maxFileSizeBytes: 1 * 1024 * 1024,\n\n    /**\n     * Allowed file types (MIME type patterns).\n     */\n    allowedFileTypes: [\n        'image/*',\n        'video/*',\n        'audio/*',\n        'application/pdf',\n        'text/*',\n        'application/json',\n        'application/xml',\n    ],\n\n    /**\n     * Message queue settings.\n     */\n    queue: {\n        maxQueueSize: 50,\n        defaultDelay: 500,\n    },\n} as const",
                "rawdescription": "Chat application configuration constants.\n\nThese values can be adjusted to customize the chat experience.",
                "description": "<p>Chat application configuration constants.</p>\n<p>These values can be adjusted to customize the chat experience.</p>\n"
            },
            {
                "name": "DEFAULT_CONFIG",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "object",
                "defaultValue": "{\n  maxAttachments: 10,\n  maxFileSizeBytes: 1 * 1024 * 1024, // 1MB\n}",
                "rawdescription": "Default configuration - can be overridden via inputs",
                "description": "<p>Default configuration - can be overridden via inputs</p>\n"
            },
            {
                "name": "DEFAULT_GREETINGS",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Greeting[]",
                "defaultValue": "[\n    { text: 'Hello', lang: 'en', dir: 'ltr', anim: 'type' },\n    { text: 'Bonjour', lang: 'fr', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'es', dir: 'ltr', anim: 'type' },\n    { text: 'こんにちは', lang: 'ja', dir: 'ltr', anim: 'slide' },\n    { text: 'नमस्ते', lang: 'hi', dir: 'ltr', anim: 'slide' },\n    { text: 'مرحبا', lang: 'ar', dir: 'rtl', anim: 'slide' },\n]",
                "rawdescription": "Default greetings for the welcome screen.",
                "description": "<p>Default greetings for the welcome screen.</p>\n"
            },
            {
                "name": "DEFAULT_LANGUAGES",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/shared/components/language-selector/language-selector.component.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Language[]",
                "defaultValue": "[\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n]",
                "rawdescription": "Default supported languages.\nCan be overridden by passing custom languages via input.",
                "description": "<p>Default supported languages.\nCan be overridden by passing custom languages via input.</p>\n"
            },
            {
                "name": "DEFAULT_MODEL",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/services/models.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "string",
                "defaultValue": "'ollama/gemma3:4b'"
            },
            {
                "name": "DEFAULT_PROVIDERS",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/services/models.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "ProviderInfo[]",
                "defaultValue": "[\n    {\n        id: 'googleai',\n        name: 'Google AI',\n        available: true,\n        models: [\n            { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision'], context_window: 2097152 },\n            { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision'], context_window: 1048576 },\n        ],\n    },\n    {\n        id: 'vertexai',\n        name: 'Vertex AI',\n        available: true,\n        models: [\n            { id: 'vertexai/gemini-3-flash', name: 'Gemini 3 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'vertexai/gemini-3-pro', name: 'Gemini 3 Pro', capabilities: ['text', 'vision'], context_window: 2097152 },\n        ],\n    },\n    {\n        id: 'anthropic',\n        name: 'Anthropic',\n        available: true,\n        models: [\n            { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'openai',\n        name: 'OpenAI',\n        available: true,\n        models: [\n            { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-mini', name: 'GPT-4.1 Mini', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-nano', name: 'GPT-4.1 Nano', capabilities: ['text'], context_window: 1047576 },\n            { id: 'openai/o3', name: 'o3', capabilities: ['text', 'reasoning'], context_window: 200000 },\n            { id: 'openai/o4-mini', name: 'o4 Mini', capabilities: ['text', 'reasoning'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'mistral',\n        name: 'Mistral AI',\n        available: true,\n        models: [\n            { id: 'mistral/mistral-large-latest', name: 'Mistral Large', capabilities: ['text'], context_window: 128000 },\n            { id: 'mistral/mistral-small-latest', name: 'Mistral Small', capabilities: ['text'], context_window: 32000 },\n            { id: 'mistral/codestral-latest', name: 'Codestral', capabilities: ['text', 'code'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'cf-ai',\n        name: 'Cloudflare AI',\n        available: true,\n        models: [\n            { id: 'cf-ai/@cf/meta/llama-3.3-70b-instruct-fp8-fast', name: 'Llama 3.3 70B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/google/gemma-7b-it-lora', name: 'Gemma 7B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/deepseek-ai/deepseek-r1-distill-qwen-32b', name: 'DeepSeek R1 32B', capabilities: ['text', 'reasoning'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'ollama',\n        name: 'Ollama (Local)',\n        available: true,\n        models: [\n            { id: 'ollama/llama3.2', name: 'Llama 3.2', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/gemma3:4b', name: 'Gemma 3 4B', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/mistral', name: 'Mistral', capabilities: ['text'], context_window: 32768 },\n            { id: 'ollama/qwen2.5-coder', name: 'Qwen 2.5 Coder', capabilities: ['text', 'code'], context_window: 128000 },\n        ],\n    },\n]"
            },
            {
                "name": "DEFAULT_QUICK_ACTIONS",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "QuickAction[]",
                "defaultValue": "[\n    { icon: 'lightbulb', labelKey: 'chat.actions.explain', prompt: 'Explain the concept of ', color: '#fbbc04' },\n    { icon: 'code', labelKey: 'chat.actions.code', prompt: 'Write code that ', color: '#34a853' },\n    { icon: 'edit', labelKey: 'chat.actions.write', prompt: 'Help me write ', color: '#4285f4' },\n    { icon: 'psychology', labelKey: 'chat.actions.brainstorm', prompt: 'Brainstorm ideas for ', color: '#ea4335' },\n]",
                "rawdescription": "Default quick actions for the welcome screen.",
                "description": "<p>Default quick actions for the welcome screen.</p>\n"
            },
            {
                "name": "google",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/services/auth.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "any"
            },
            {
                "name": "localStorageMock",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/test-setup.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "object",
                "defaultValue": "{\n    getItem: vi.fn(),\n    setItem: vi.fn(),\n    removeItem: vi.fn(),\n    clear: vi.fn(),\n}"
            },
            {
                "name": "MATH_SUBSTITUTIONS",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/utils/markdown.utils.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Record<string, string>",
                "defaultValue": "{\n    '\\\\alpha': 'α',\n    '\\\\beta': 'β',\n    '\\\\gamma': 'γ',\n    '\\\\delta': 'δ',\n    '\\\\epsilon': 'ε',\n    '\\\\pi': 'π',\n    '\\\\sigma': 'σ',\n    '\\\\omega': 'ω',\n    '\\\\theta': 'θ',\n    '\\\\lambda': 'λ',\n    '\\\\mu': 'μ',\n    '\\\\phi': 'φ',\n    '\\\\infty': '∞',\n    '\\\\sum': '∑',\n    '\\\\int': '∫',\n    '\\\\partial': '∂',\n    '\\\\pm': '±',\n    '\\\\times': '×',\n    '\\\\div': '÷',\n    '\\\\cdot': '·',\n    '\\\\leq': '≤',\n    '\\\\geq': '≥',\n    '\\\\neq': '≠',\n    '\\\\approx': '≈',\n    '\\\\rightarrow': '→',\n    '\\\\leftarrow': '←',\n    '\\\\Rightarrow': '⇒',\n    '\\\\in': '∈',\n    '\\\\subset': '⊂',\n    '\\\\cup': '∪',\n    '\\\\cap': '∩',\n    '\\\\forall': '∀',\n    '\\\\exists': '∃',\n    '\\\\nabla': '∇',\n    '\\\\sqrt': '√',\n}",
                "rawdescription": "Pure utility functions for markdown processing.\nThese functions have no Angular dependencies and are easily testable.",
                "description": "<p>Pure utility functions for markdown processing.\nThese functions have no Angular dependencies and are easily testable.</p>\n"
            },
            {
                "name": "MAX_QUEUE_SIZE",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/utils/chat.utils.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "number",
                "defaultValue": "50",
                "rawdescription": "Maximum number of items allowed in the prompt queue.",
                "description": "<p>Maximum number of items allowed in the prompt queue.</p>\n"
            },
            {
                "name": "MAX_RECENT_MODELS",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/services/preferences.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "number",
                "defaultValue": "5"
            },
            {
                "name": "MAX_RECENT_MODELS",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/utils/preferences.utils.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "number",
                "defaultValue": "5",
                "rawdescription": "Maximum number of recent models to track.",
                "description": "<p>Maximum number of recent models to track.</p>\n"
            },
            {
                "name": "PREFERENCES_STORAGE_KEY",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/utils/preferences.utils.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "string",
                "defaultValue": "'genkit-chat-preferences'",
                "rawdescription": "Storage key for preferences.",
                "description": "<p>Storage key for preferences.</p>\n"
            },
            {
                "name": "routes",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/app.routes.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Routes",
                "defaultValue": "[\n    {\n        path: '',\n        loadComponent: () => \"import('./features/chat/chat.component').then(m => m.ChatComponent)\",\n    },\n    {\n        path: 'compare',\n        loadComponent: () => \"import('./features/compare/compare.component').then(m => m.CompareComponent)\",\n    },\n    {\n        path: 'settings',\n        loadComponent: () => \"import('./features/settings/settings.component').then(m => m.SettingsComponent)\",\n    },\n]"
            },
            {
                "name": "speechSynthesisMock",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/test-setup.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "object",
                "defaultValue": "{\n    cancel: vi.fn(),\n    speak: vi.fn(),\n    getVoices: vi.fn().mockReturnValue([]),\n}"
            },
            {
                "name": "STORAGE_KEY",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/services/language.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "string",
                "defaultValue": "'genkit-chat-language'"
            },
            {
                "name": "STORAGE_KEY",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/services/preferences.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "string",
                "defaultValue": "'genkit-chat-preferences'"
            },
            {
                "name": "SUPPORTED_LANGUAGES",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/services/language.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "Language[]",
                "defaultValue": "[\n    // Global Languages\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'pt', name: 'Portuguese', nativeName: 'Português', direction: 'ltr', flag: '🇧🇷' },\n    { code: 'it', name: 'Italian', nativeName: 'Italiano', direction: 'ltr', flag: '🇮🇹' },\n    { code: 'ru', name: 'Russian', nativeName: 'Русский', direction: 'ltr', flag: '🇷🇺' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n\n    // East Asian Languages\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'ko', name: 'Korean', nativeName: '한국어', direction: 'ltr', flag: '🇰🇷' },\n\n    // Indian Languages\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'bn', name: 'Bengali', nativeName: 'বাংলা', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'te', name: 'Telugu', nativeName: 'తెలుగు', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'ta', name: 'Tamil', nativeName: 'தமிழ்', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'mr', name: 'Marathi', nativeName: 'मराठी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'gu', name: 'Gujarati', nativeName: 'ગુજરાતી', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'kn', name: 'Kannada', nativeName: 'ಕನ್ನಡ', direction: 'ltr', flag: '🇮🇳' },\n]",
                "rawdescription": "Available languages for the application.\nIncludes major global languages and Indian languages.",
                "description": "<p>Available languages for the application.\nIncludes major global languages and Indian languages.</p>\n"
            },
            {
                "name": "THEME_OPTIONS",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "ThemeOption[]",
                "defaultValue": "[\n    { mode: 'system', icon: 'brightness_auto', labelKey: 'theme.system' },\n    { mode: 'light', icon: 'light_mode', labelKey: 'theme.light' },\n    { mode: 'dark', icon: 'dark_mode', labelKey: 'theme.dark' },\n]"
            },
            {
                "name": "THEME_STORAGE_KEY",
                "ctype": "miscellaneous",
                "subtype": "variable",
                "file": "src/app/core/utils/theme.utils.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "type": "string",
                "defaultValue": "'genkit-chat-theme'",
                "rawdescription": "Storage key for theme preference.",
                "description": "<p>Storage key for theme preference.</p>\n"
            }
        ],
        "functions": [
            {
                "name": "addExternalLinkAttributes",
                "file": "src/app/core/utils/markdown.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Add target=&quot;_blank&quot; to links for external navigation.</p>\n",
                "args": [
                    {
                        "name": "html",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "html",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "addRecentModel",
                "file": "src/app/core/utils/preferences.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Add a model to the recent models list.</p>\n",
                "args": [
                    {
                        "name": "current",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "modelId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string[]",
                "jsdoctags": [
                    {
                        "name": "current",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "modelId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "addToQueue",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Add a prompt to the queue.</p>\n",
                "args": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "model",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "QueuedPrompt[]",
                "jsdoctags": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "model",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "applyThemeToDocument",
                "file": "src/app/core/utils/theme.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Apply theme classes to the document body.</p>\n",
                "args": [
                    {
                        "name": "isDark",
                        "type": "boolean",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "void",
                "jsdoctags": [
                    {
                        "name": "isDark",
                        "type": "boolean",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "buildHistory",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Build chat history from messages for API requests.</p>\n",
                "args": [
                    {
                        "name": "messages",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "Array<literal type>",
                "jsdoctags": [
                    {
                        "name": "messages",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "clearPreferencesFromStorage",
                "file": "src/app/core/utils/preferences.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Clear preferences from localStorage.</p>\n",
                "args": [],
                "returnType": "void"
            },
            {
                "name": "createAssistantMessage",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Create an assistant message from a response.</p>\n",
                "args": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "model",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "isError",
                        "type": "unknown",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "defaultValue": "false"
                    },
                    {
                        "name": "errorDetails",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "optional": true
                    }
                ],
                "returnType": "Message",
                "jsdoctags": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "model",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "isError",
                        "type": "unknown",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "defaultValue": "false",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "errorDetails",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "optional": true,
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "createUserMessage",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Create a user message.</p>\n",
                "args": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "Message",
                "jsdoctags": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "escapeHtml",
                "file": "src/app/core/utils/markdown.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Escape HTML characters for safe display.</p>\n",
                "args": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "filterByCapability",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Filter models by capability.</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "capability",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "Model[]",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "capability",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "filterByProvider",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Filter models by provider.</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "providerId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "ModelWithProvider[]",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "providerId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "findModelById",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Find a model by ID from the flattened list.</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "ModelWithProvider | undefined",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "flattenModels",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Flatten providers into a list of models with provider info.</p>\n",
                "args": [
                    {
                        "name": "providers",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "ModelWithProvider[]",
                "jsdoctags": [
                    {
                        "name": "providers",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "getColorScheme",
                "file": "src/app/core/utils/theme.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get the color-scheme value for CSS.</p>\n",
                "args": [
                    {
                        "name": "isDark",
                        "type": "boolean",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "\"light\" | \"dark\"",
                "jsdoctags": [
                    {
                        "name": "isDark",
                        "type": "boolean",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "getDefaultModelId",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get the default model ID.</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "fallback",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "defaultValue": "'ollama/llama3.2'"
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "fallback",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "defaultValue": "'ollama/llama3.2'",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "getDefaultPreferences",
                "file": "src/app/core/utils/preferences.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get default preferences.</p>\n",
                "args": [],
                "returnType": "UserPreferences"
            },
            {
                "name": "getFileTypeLabel",
                "file": "src/app/core/config/chat.config.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get a human-readable file type label from a MIME type.</p>\n",
                "args": [
                    {
                        "name": "mimeType",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "mimeType",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "getMimeTypeIcon",
                "file": "src/app/core/config/chat.config.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get Material Icon name for a given MIME type.</p>\n<p>Uses a hierarchical lookup:</p>\n<ol>\n<li>Exact MIME type match</li>\n<li>MIME type category (e.g., image/<em>, video/</em>)</li>\n<li>Fallback to generic file icon</li>\n</ol>\n",
                "args": [
                    {
                        "name": "mimeType",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "mimeType",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "getMimeTypeIcon",
                "file": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get Material Icon name for a given MIME type.\nInlined for component portability.</p>\n",
                "args": [
                    {
                        "name": "mimeType",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "mimeType",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "getPreferenceWithDefault",
                "file": "src/app/core/utils/preferences.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get a preference value with a default.</p>\n",
                "args": [
                    {
                        "name": "value",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "defaultValue",
                        "type": "T",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "T",
                "jsdoctags": [
                    {
                        "name": "value",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "defaultValue",
                        "type": "T",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "getProviderName",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get the provider name for a model ID.</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "modelId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "modelId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "groupByProvider",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Group models by provider.</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "Map<string, ModelWithProvider[]>",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "hasCapability",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Check if a model has a specific capability.</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "modelId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "capability",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "boolean",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "modelId",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "capability",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "isDarkTheme",
                "file": "src/app/core/utils/theme.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Determine if dark mode should be active.</p>\n",
                "args": [
                    {
                        "name": "theme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "prefersDark",
                        "type": "boolean",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "boolean",
                "jsdoctags": [
                    {
                        "name": "theme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "prefersDark",
                        "type": "boolean",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "loadPreferencesFromStorage",
                "file": "src/app/core/utils/preferences.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Load preferences from localStorage.</p>\n",
                "args": [],
                "returnType": "UserPreferences | null"
            },
            {
                "name": "loadThemeFromStorage",
                "file": "src/app/core/utils/theme.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Load theme from localStorage.</p>\n",
                "args": [
                    {
                        "name": "defaultTheme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "defaultValue": "'system'"
                    }
                ],
                "returnType": "Theme",
                "jsdoctags": [
                    {
                        "name": "defaultTheme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "defaultValue": "'system'",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "moveQueuedPromptDown",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Move a prompt down in the queue.</p>\n",
                "args": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "QueuedPrompt[]",
                "jsdoctags": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "moveQueuedPromptUp",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Move a prompt up in the queue.</p>\n",
                "args": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "QueuedPrompt[]",
                "jsdoctags": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "popFromQueue",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Get the first prompt from the queue and return the updated queue.</p>\n",
                "args": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "literal type",
                "jsdoctags": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "processMathSync",
                "file": "src/app/core/utils/markdown.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Process math symbols synchronously with basic substitutions.</p>\n",
                "args": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "removeFromQueue",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Remove a prompt from the queue by ID.</p>\n",
                "args": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "QueuedPrompt[]",
                "jsdoctags": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "savePreferencesToStorage",
                "file": "src/app/core/utils/preferences.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Save preferences to localStorage.</p>\n",
                "args": [
                    {
                        "name": "prefs",
                        "type": "UserPreferences",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "boolean",
                "jsdoctags": [
                    {
                        "name": "prefs",
                        "type": "UserPreferences",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "saveThemeToStorage",
                "file": "src/app/core/utils/theme.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Save theme to localStorage.</p>\n",
                "args": [
                    {
                        "name": "theme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "void",
                "jsdoctags": [
                    {
                        "name": "theme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "searchModels",
                "file": "src/app/core/utils/model.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Search models by name or ID (case insensitive).</p>\n",
                "args": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "query",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "ModelWithProvider[]",
                "jsdoctags": [
                    {
                        "name": "models",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "query",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "toggleTheme",
                "file": "src/app/core/utils/theme.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Toggle between light and dark themes.</p>\n",
                "args": [
                    {
                        "name": "currentTheme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "Theme",
                "jsdoctags": [
                    {
                        "name": "currentTheme",
                        "type": "Theme",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "updatePreferences",
                "file": "src/app/core/utils/preferences.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Merge preferences with updates.</p>\n",
                "args": [
                    {
                        "name": "current",
                        "type": "UserPreferences",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "updates",
                        "type": "Partial",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "UserPreferences",
                "jsdoctags": [
                    {
                        "name": "current",
                        "type": "UserPreferences",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "updates",
                        "type": "Partial",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "updateQueuedPrompt",
                "file": "src/app/core/utils/chat.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Update a prompt&#39;s content in the queue.</p>\n",
                "args": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    },
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "QueuedPrompt[]",
                "jsdoctags": [
                    {
                        "name": "queue",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "id",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    },
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            },
            {
                "name": "wrapInPre",
                "file": "src/app/core/utils/markdown.utils.ts",
                "ctype": "miscellaneous",
                "subtype": "function",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Wrap escaped content in a pre element.</p>\n",
                "args": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": ""
                    }
                ],
                "returnType": "string",
                "jsdoctags": [
                    {
                        "name": "content",
                        "type": "string",
                        "deprecated": false,
                        "deprecationMessage": "",
                        "tagName": {
                            "text": "param"
                        }
                    }
                ]
            }
        ],
        "typealiases": [
            {
                "name": "Theme",
                "ctype": "miscellaneous",
                "subtype": "typealias",
                "rawtype": "\"light\" | \"dark\" | \"system\"",
                "file": "src/app/core/utils/theme.utils.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "<p>Pure utility functions for theme operations.\nThese functions have no Angular dependencies and are easily testable.</p>\n",
                "kind": 193
            },
            {
                "name": "ThemeMode",
                "ctype": "miscellaneous",
                "subtype": "typealias",
                "rawtype": "\"light\" | \"dark\" | \"system\"",
                "file": "src/app/core/services/theme.service.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "kind": 193
            },
            {
                "name": "ThemeMode",
                "ctype": "miscellaneous",
                "subtype": "typealias",
                "rawtype": "\"light\" | \"dark\" | \"system\"",
                "file": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                "deprecated": false,
                "deprecationMessage": "",
                "description": "",
                "kind": 193
            }
        ],
        "enumerations": [],
        "groupedVariables": {
            "src/app/app.config.ts": [
                {
                    "name": "appConfig",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/app.config.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ApplicationConfig",
                    "defaultValue": "{\n  providers: [\n    provideBrowserGlobalErrorListeners(),\n    provideZoneChangeDetection({ eventCoalescing: true }),\n    provideRouter(routes),\n    provideHttpClient(withFetch()),\n    provideAnimations(),\n    provideTranslateService({\n      defaultLanguage: 'en',\n    }),\n    provideTranslateHttpLoader({\n      prefix: '/assets/i18n/',\n      suffix: '.json',\n    }),\n  ],\n}"
                }
            ],
            "src/app/core/config/chat.config.ts": [
                {
                    "name": "CHAT_CONFIG",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/config/chat.config.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "unknown",
                    "defaultValue": "{\n    /**\n     * Maximum number of file attachments allowed per message.\n     */\n    maxAttachments: 10,\n\n    /**\n     * Maximum file size in bytes (default: 1MB).\n     */\n    maxFileSizeBytes: 1 * 1024 * 1024,\n\n    /**\n     * Allowed file types (MIME type patterns).\n     */\n    allowedFileTypes: [\n        'image/*',\n        'video/*',\n        'audio/*',\n        'application/pdf',\n        'text/*',\n        'application/json',\n        'application/xml',\n    ],\n\n    /**\n     * Message queue settings.\n     */\n    queue: {\n        maxQueueSize: 50,\n        defaultDelay: 500,\n    },\n} as const",
                    "rawdescription": "Chat application configuration constants.\n\nThese values can be adjusted to customize the chat experience.",
                    "description": "<p>Chat application configuration constants.</p>\n<p>These values can be adjusted to customize the chat experience.</p>\n"
                }
            ],
            "src/app/features/chat/components/chat-input/chat-input.component.ts": [
                {
                    "name": "DEFAULT_CONFIG",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "defaultValue": "{\n  maxAttachments: 10,\n  maxFileSizeBytes: 1 * 1024 * 1024, // 1MB\n}",
                    "rawdescription": "Default configuration - can be overridden via inputs",
                    "description": "<p>Default configuration - can be overridden via inputs</p>\n"
                }
            ],
            "src/app/features/chat/components/chat-box/chat-box.component.ts": [
                {
                    "name": "DEFAULT_GREETINGS",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Greeting[]",
                    "defaultValue": "[\n    { text: 'Hello', lang: 'en', dir: 'ltr', anim: 'type' },\n    { text: 'Bonjour', lang: 'fr', dir: 'ltr', anim: 'type' },\n    { text: 'Hola', lang: 'es', dir: 'ltr', anim: 'type' },\n    { text: 'こんにちは', lang: 'ja', dir: 'ltr', anim: 'slide' },\n    { text: 'नमस्ते', lang: 'hi', dir: 'ltr', anim: 'slide' },\n    { text: 'مرحبا', lang: 'ar', dir: 'rtl', anim: 'slide' },\n]",
                    "rawdescription": "Default greetings for the welcome screen.",
                    "description": "<p>Default greetings for the welcome screen.</p>\n"
                },
                {
                    "name": "DEFAULT_QUICK_ACTIONS",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "QuickAction[]",
                    "defaultValue": "[\n    { icon: 'lightbulb', labelKey: 'chat.actions.explain', prompt: 'Explain the concept of ', color: '#fbbc04' },\n    { icon: 'code', labelKey: 'chat.actions.code', prompt: 'Write code that ', color: '#34a853' },\n    { icon: 'edit', labelKey: 'chat.actions.write', prompt: 'Help me write ', color: '#4285f4' },\n    { icon: 'psychology', labelKey: 'chat.actions.brainstorm', prompt: 'Brainstorm ideas for ', color: '#ea4335' },\n]",
                    "rawdescription": "Default quick actions for the welcome screen.",
                    "description": "<p>Default quick actions for the welcome screen.</p>\n"
                }
            ],
            "src/app/shared/components/language-selector/language-selector.component.ts": [
                {
                    "name": "DEFAULT_LANGUAGES",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/shared/components/language-selector/language-selector.component.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Language[]",
                    "defaultValue": "[\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n]",
                    "rawdescription": "Default supported languages.\nCan be overridden by passing custom languages via input.",
                    "description": "<p>Default supported languages.\nCan be overridden by passing custom languages via input.</p>\n"
                }
            ],
            "src/app/core/services/models.service.ts": [
                {
                    "name": "DEFAULT_MODEL",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/services/models.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "defaultValue": "'ollama/gemma3:4b'"
                },
                {
                    "name": "DEFAULT_PROVIDERS",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/services/models.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ProviderInfo[]",
                    "defaultValue": "[\n    {\n        id: 'googleai',\n        name: 'Google AI',\n        available: true,\n        models: [\n            { id: 'googleai/gemini-3-flash-preview', name: 'Gemini 3 Flash Preview', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-3-pro-preview', name: 'Gemini 3 Pro Preview', capabilities: ['text', 'vision'], context_window: 2097152 },\n            { id: 'googleai/gemini-2.5-flash', name: 'Gemini 2.5 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'googleai/gemini-2.5-pro', name: 'Gemini 2.5 Pro', capabilities: ['text', 'vision'], context_window: 1048576 },\n        ],\n    },\n    {\n        id: 'vertexai',\n        name: 'Vertex AI',\n        available: true,\n        models: [\n            { id: 'vertexai/gemini-3-flash', name: 'Gemini 3 Flash', capabilities: ['text', 'vision'], context_window: 1048576 },\n            { id: 'vertexai/gemini-3-pro', name: 'Gemini 3 Pro', capabilities: ['text', 'vision'], context_window: 2097152 },\n        ],\n    },\n    {\n        id: 'anthropic',\n        name: 'Anthropic',\n        available: true,\n        models: [\n            { id: 'anthropic/claude-opus-4-5', name: 'Claude Opus 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-sonnet-4-5', name: 'Claude Sonnet 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n            { id: 'anthropic/claude-haiku-4-5', name: 'Claude Haiku 4.5', capabilities: ['text', 'vision'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'openai',\n        name: 'OpenAI',\n        available: true,\n        models: [\n            { id: 'openai/gpt-4.1', name: 'GPT-4.1', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-mini', name: 'GPT-4.1 Mini', capabilities: ['text', 'vision'], context_window: 1047576 },\n            { id: 'openai/gpt-4.1-nano', name: 'GPT-4.1 Nano', capabilities: ['text'], context_window: 1047576 },\n            { id: 'openai/o3', name: 'o3', capabilities: ['text', 'reasoning'], context_window: 200000 },\n            { id: 'openai/o4-mini', name: 'o4 Mini', capabilities: ['text', 'reasoning'], context_window: 200000 },\n        ],\n    },\n    {\n        id: 'mistral',\n        name: 'Mistral AI',\n        available: true,\n        models: [\n            { id: 'mistral/mistral-large-latest', name: 'Mistral Large', capabilities: ['text'], context_window: 128000 },\n            { id: 'mistral/mistral-small-latest', name: 'Mistral Small', capabilities: ['text'], context_window: 32000 },\n            { id: 'mistral/codestral-latest', name: 'Codestral', capabilities: ['text', 'code'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'cf-ai',\n        name: 'Cloudflare AI',\n        available: true,\n        models: [\n            { id: 'cf-ai/@cf/meta/llama-3.3-70b-instruct-fp8-fast', name: 'Llama 3.3 70B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/google/gemma-7b-it-lora', name: 'Gemma 7B', capabilities: ['text'], context_window: 8192 },\n            { id: 'cf-ai/@cf/deepseek-ai/deepseek-r1-distill-qwen-32b', name: 'DeepSeek R1 32B', capabilities: ['text', 'reasoning'], context_window: 32000 },\n        ],\n    },\n    {\n        id: 'ollama',\n        name: 'Ollama (Local)',\n        available: true,\n        models: [\n            { id: 'ollama/llama3.2', name: 'Llama 3.2', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/gemma3:4b', name: 'Gemma 3 4B', capabilities: ['text'], context_window: 128000 },\n            { id: 'ollama/mistral', name: 'Mistral', capabilities: ['text'], context_window: 32768 },\n            { id: 'ollama/qwen2.5-coder', name: 'Qwen 2.5 Coder', capabilities: ['text', 'code'], context_window: 128000 },\n        ],\n    },\n]"
                }
            ],
            "src/app/core/services/auth.service.ts": [
                {
                    "name": "google",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/services/auth.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "any"
                }
            ],
            "src/test-setup.ts": [
                {
                    "name": "localStorageMock",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/test-setup.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "defaultValue": "{\n    getItem: vi.fn(),\n    setItem: vi.fn(),\n    removeItem: vi.fn(),\n    clear: vi.fn(),\n}"
                },
                {
                    "name": "speechSynthesisMock",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/test-setup.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "object",
                    "defaultValue": "{\n    cancel: vi.fn(),\n    speak: vi.fn(),\n    getVoices: vi.fn().mockReturnValue([]),\n}"
                }
            ],
            "src/app/core/utils/markdown.utils.ts": [
                {
                    "name": "MATH_SUBSTITUTIONS",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/utils/markdown.utils.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Record<string, string>",
                    "defaultValue": "{\n    '\\\\alpha': 'α',\n    '\\\\beta': 'β',\n    '\\\\gamma': 'γ',\n    '\\\\delta': 'δ',\n    '\\\\epsilon': 'ε',\n    '\\\\pi': 'π',\n    '\\\\sigma': 'σ',\n    '\\\\omega': 'ω',\n    '\\\\theta': 'θ',\n    '\\\\lambda': 'λ',\n    '\\\\mu': 'μ',\n    '\\\\phi': 'φ',\n    '\\\\infty': '∞',\n    '\\\\sum': '∑',\n    '\\\\int': '∫',\n    '\\\\partial': '∂',\n    '\\\\pm': '±',\n    '\\\\times': '×',\n    '\\\\div': '÷',\n    '\\\\cdot': '·',\n    '\\\\leq': '≤',\n    '\\\\geq': '≥',\n    '\\\\neq': '≠',\n    '\\\\approx': '≈',\n    '\\\\rightarrow': '→',\n    '\\\\leftarrow': '←',\n    '\\\\Rightarrow': '⇒',\n    '\\\\in': '∈',\n    '\\\\subset': '⊂',\n    '\\\\cup': '∪',\n    '\\\\cap': '∩',\n    '\\\\forall': '∀',\n    '\\\\exists': '∃',\n    '\\\\nabla': '∇',\n    '\\\\sqrt': '√',\n}",
                    "rawdescription": "Pure utility functions for markdown processing.\nThese functions have no Angular dependencies and are easily testable.",
                    "description": "<p>Pure utility functions for markdown processing.\nThese functions have no Angular dependencies and are easily testable.</p>\n"
                }
            ],
            "src/app/core/utils/chat.utils.ts": [
                {
                    "name": "MAX_QUEUE_SIZE",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "defaultValue": "50",
                    "rawdescription": "Maximum number of items allowed in the prompt queue.",
                    "description": "<p>Maximum number of items allowed in the prompt queue.</p>\n"
                }
            ],
            "src/app/core/services/preferences.service.ts": [
                {
                    "name": "MAX_RECENT_MODELS",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/services/preferences.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "defaultValue": "5"
                },
                {
                    "name": "STORAGE_KEY",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/services/preferences.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "defaultValue": "'genkit-chat-preferences'"
                }
            ],
            "src/app/core/utils/preferences.utils.ts": [
                {
                    "name": "MAX_RECENT_MODELS",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "number",
                    "defaultValue": "5",
                    "rawdescription": "Maximum number of recent models to track.",
                    "description": "<p>Maximum number of recent models to track.</p>\n"
                },
                {
                    "name": "PREFERENCES_STORAGE_KEY",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "defaultValue": "'genkit-chat-preferences'",
                    "rawdescription": "Storage key for preferences.",
                    "description": "<p>Storage key for preferences.</p>\n"
                }
            ],
            "src/app/app.routes.ts": [
                {
                    "name": "routes",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/app.routes.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Routes",
                    "defaultValue": "[\n    {\n        path: '',\n        loadComponent: () => \"import('./features/chat/chat.component').then(m => m.ChatComponent)\",\n    },\n    {\n        path: 'compare',\n        loadComponent: () => \"import('./features/compare/compare.component').then(m => m.CompareComponent)\",\n    },\n    {\n        path: 'settings',\n        loadComponent: () => \"import('./features/settings/settings.component').then(m => m.SettingsComponent)\",\n    },\n]"
                }
            ],
            "src/app/core/services/language.service.ts": [
                {
                    "name": "STORAGE_KEY",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/services/language.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "defaultValue": "'genkit-chat-language'"
                },
                {
                    "name": "SUPPORTED_LANGUAGES",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/services/language.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "Language[]",
                    "defaultValue": "[\n    // Global Languages\n    { code: 'en', name: 'English', nativeName: 'English', direction: 'ltr', flag: '🇺🇸' },\n    { code: 'es', name: 'Spanish', nativeName: 'Español', direction: 'ltr', flag: '🇪🇸' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch', direction: 'ltr', flag: '🇩🇪' },\n    { code: 'fr', name: 'French', nativeName: 'Français', direction: 'ltr', flag: '🇫🇷' },\n    { code: 'pt', name: 'Portuguese', nativeName: 'Português', direction: 'ltr', flag: '🇧🇷' },\n    { code: 'it', name: 'Italian', nativeName: 'Italiano', direction: 'ltr', flag: '🇮🇹' },\n    { code: 'ru', name: 'Russian', nativeName: 'Русский', direction: 'ltr', flag: '🇷🇺' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية', direction: 'rtl', flag: '🇸🇦' },\n\n    // East Asian Languages\n    { code: 'zh', name: 'Chinese', nativeName: '中文', direction: 'ltr', flag: '🇨🇳' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語', direction: 'ltr', flag: '🇯🇵' },\n    { code: 'ko', name: 'Korean', nativeName: '한국어', direction: 'ltr', flag: '🇰🇷' },\n\n    // Indian Languages\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'bn', name: 'Bengali', nativeName: 'বাংলা', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'te', name: 'Telugu', nativeName: 'తెలుగు', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'ta', name: 'Tamil', nativeName: 'தமிழ்', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'mr', name: 'Marathi', nativeName: 'मराठी', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'gu', name: 'Gujarati', nativeName: 'ગુજરાતી', direction: 'ltr', flag: '🇮🇳' },\n    { code: 'kn', name: 'Kannada', nativeName: 'ಕನ್ನಡ', direction: 'ltr', flag: '🇮🇳' },\n]",
                    "rawdescription": "Available languages for the application.\nIncludes major global languages and Indian languages.",
                    "description": "<p>Available languages for the application.\nIncludes major global languages and Indian languages.</p>\n"
                }
            ],
            "src/app/shared/components/theme-selector/theme-selector.component.ts": [
                {
                    "name": "THEME_OPTIONS",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "ThemeOption[]",
                    "defaultValue": "[\n    { mode: 'system', icon: 'brightness_auto', labelKey: 'theme.system' },\n    { mode: 'light', icon: 'light_mode', labelKey: 'theme.light' },\n    { mode: 'dark', icon: 'dark_mode', labelKey: 'theme.dark' },\n]"
                }
            ],
            "src/app/core/utils/theme.utils.ts": [
                {
                    "name": "THEME_STORAGE_KEY",
                    "ctype": "miscellaneous",
                    "subtype": "variable",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "type": "string",
                    "defaultValue": "'genkit-chat-theme'",
                    "rawdescription": "Storage key for theme preference.",
                    "description": "<p>Storage key for theme preference.</p>\n"
                }
            ]
        },
        "groupedFunctions": {
            "src/app/core/utils/markdown.utils.ts": [
                {
                    "name": "addExternalLinkAttributes",
                    "file": "src/app/core/utils/markdown.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Add target=&quot;_blank&quot; to links for external navigation.</p>\n",
                    "args": [
                        {
                            "name": "html",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "html",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "escapeHtml",
                    "file": "src/app/core/utils/markdown.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Escape HTML characters for safe display.</p>\n",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "processMathSync",
                    "file": "src/app/core/utils/markdown.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Process math symbols synchronously with basic substitutions.</p>\n",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "wrapInPre",
                    "file": "src/app/core/utils/markdown.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Wrap escaped content in a pre element.</p>\n",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "src/app/core/utils/preferences.utils.ts": [
                {
                    "name": "addRecentModel",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Add a model to the recent models list.</p>\n",
                    "args": [
                        {
                            "name": "current",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "modelId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string[]",
                    "jsdoctags": [
                        {
                            "name": "current",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "modelId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "clearPreferencesFromStorage",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Clear preferences from localStorage.</p>\n",
                    "args": [],
                    "returnType": "void"
                },
                {
                    "name": "getDefaultPreferences",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get default preferences.</p>\n",
                    "args": [],
                    "returnType": "UserPreferences"
                },
                {
                    "name": "getPreferenceWithDefault",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get a preference value with a default.</p>\n",
                    "args": [
                        {
                            "name": "value",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "defaultValue",
                            "type": "T",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "T",
                    "jsdoctags": [
                        {
                            "name": "value",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "defaultValue",
                            "type": "T",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadPreferencesFromStorage",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Load preferences from localStorage.</p>\n",
                    "args": [],
                    "returnType": "UserPreferences | null"
                },
                {
                    "name": "savePreferencesToStorage",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Save preferences to localStorage.</p>\n",
                    "args": [
                        {
                            "name": "prefs",
                            "type": "UserPreferences",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "boolean",
                    "jsdoctags": [
                        {
                            "name": "prefs",
                            "type": "UserPreferences",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updatePreferences",
                    "file": "src/app/core/utils/preferences.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Merge preferences with updates.</p>\n",
                    "args": [
                        {
                            "name": "current",
                            "type": "UserPreferences",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "updates",
                            "type": "Partial",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "UserPreferences",
                    "jsdoctags": [
                        {
                            "name": "current",
                            "type": "UserPreferences",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "updates",
                            "type": "Partial",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "src/app/core/utils/chat.utils.ts": [
                {
                    "name": "addToQueue",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Add a prompt to the queue.</p>\n",
                    "args": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "QueuedPrompt[]",
                    "jsdoctags": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "buildHistory",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Build chat history from messages for API requests.</p>\n",
                    "args": [
                        {
                            "name": "messages",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "Array<literal type>",
                    "jsdoctags": [
                        {
                            "name": "messages",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "createAssistantMessage",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Create an assistant message from a response.</p>\n",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "isError",
                            "type": "unknown",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "false"
                        },
                        {
                            "name": "errorDetails",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true
                        }
                    ],
                    "returnType": "Message",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "model",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "isError",
                            "type": "unknown",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "false",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "errorDetails",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "optional": true,
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "createUserMessage",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Create a user message.</p>\n",
                    "args": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "Message",
                    "jsdoctags": [
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "moveQueuedPromptDown",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Move a prompt down in the queue.</p>\n",
                    "args": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "QueuedPrompt[]",
                    "jsdoctags": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "moveQueuedPromptUp",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Move a prompt up in the queue.</p>\n",
                    "args": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "QueuedPrompt[]",
                    "jsdoctags": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "popFromQueue",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get the first prompt from the queue and return the updated queue.</p>\n",
                    "args": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "literal type",
                    "jsdoctags": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "removeFromQueue",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Remove a prompt from the queue by ID.</p>\n",
                    "args": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "QueuedPrompt[]",
                    "jsdoctags": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "updateQueuedPrompt",
                    "file": "src/app/core/utils/chat.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Update a prompt&#39;s content in the queue.</p>\n",
                    "args": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "QueuedPrompt[]",
                    "jsdoctags": [
                        {
                            "name": "queue",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "content",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "src/app/core/utils/theme.utils.ts": [
                {
                    "name": "applyThemeToDocument",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Apply theme classes to the document body.</p>\n",
                    "args": [
                        {
                            "name": "isDark",
                            "type": "boolean",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "void",
                    "jsdoctags": [
                        {
                            "name": "isDark",
                            "type": "boolean",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getColorScheme",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get the color-scheme value for CSS.</p>\n",
                    "args": [
                        {
                            "name": "isDark",
                            "type": "boolean",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "\"light\" | \"dark\"",
                    "jsdoctags": [
                        {
                            "name": "isDark",
                            "type": "boolean",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "isDarkTheme",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Determine if dark mode should be active.</p>\n",
                    "args": [
                        {
                            "name": "theme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "prefersDark",
                            "type": "boolean",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "boolean",
                    "jsdoctags": [
                        {
                            "name": "theme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "prefersDark",
                            "type": "boolean",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "loadThemeFromStorage",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Load theme from localStorage.</p>\n",
                    "args": [
                        {
                            "name": "defaultTheme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'system'"
                        }
                    ],
                    "returnType": "Theme",
                    "jsdoctags": [
                        {
                            "name": "defaultTheme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'system'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "saveThemeToStorage",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Save theme to localStorage.</p>\n",
                    "args": [
                        {
                            "name": "theme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "void",
                    "jsdoctags": [
                        {
                            "name": "theme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "toggleTheme",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Toggle between light and dark themes.</p>\n",
                    "args": [
                        {
                            "name": "currentTheme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "Theme",
                    "jsdoctags": [
                        {
                            "name": "currentTheme",
                            "type": "Theme",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "src/app/core/utils/model.utils.ts": [
                {
                    "name": "filterByCapability",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Filter models by capability.</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "capability",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "Model[]",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "capability",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "filterByProvider",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Filter models by provider.</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "providerId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "ModelWithProvider[]",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "providerId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "findModelById",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Find a model by ID from the flattened list.</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "ModelWithProvider | undefined",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "id",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "flattenModels",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Flatten providers into a list of models with provider info.</p>\n",
                    "args": [
                        {
                            "name": "providers",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "ModelWithProvider[]",
                    "jsdoctags": [
                        {
                            "name": "providers",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getDefaultModelId",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get the default model ID.</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "fallback",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'ollama/llama3.2'"
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "fallback",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "defaultValue": "'ollama/llama3.2'",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getProviderName",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get the provider name for a model ID.</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "modelId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "modelId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "groupByProvider",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Group models by provider.</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "Map<string, ModelWithProvider[]>",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "hasCapability",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Check if a model has a specific capability.</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "modelId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "capability",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "boolean",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "modelId",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "capability",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "searchModels",
                    "file": "src/app/core/utils/model.utils.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Search models by name or ID (case insensitive).</p>\n",
                    "args": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": ""
                        },
                        {
                            "name": "query",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "ModelWithProvider[]",
                    "jsdoctags": [
                        {
                            "name": "models",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        },
                        {
                            "name": "query",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "src/app/core/config/chat.config.ts": [
                {
                    "name": "getFileTypeLabel",
                    "file": "src/app/core/config/chat.config.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get a human-readable file type label from a MIME type.</p>\n",
                    "args": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                },
                {
                    "name": "getMimeTypeIcon",
                    "file": "src/app/core/config/chat.config.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get Material Icon name for a given MIME type.</p>\n<p>Uses a hierarchical lookup:</p>\n<ol>\n<li>Exact MIME type match</li>\n<li>MIME type category (e.g., image/<em>, video/</em>)</li>\n<li>Fallback to generic file icon</li>\n</ol>\n",
                    "args": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ],
            "src/app/features/chat/components/chat-input/chat-input.component.ts": [
                {
                    "name": "getMimeTypeIcon",
                    "file": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                    "ctype": "miscellaneous",
                    "subtype": "function",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Get Material Icon name for a given MIME type.\nInlined for component portability.</p>\n",
                    "args": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": ""
                        }
                    ],
                    "returnType": "string",
                    "jsdoctags": [
                        {
                            "name": "mimeType",
                            "type": "string",
                            "deprecated": false,
                            "deprecationMessage": "",
                            "tagName": {
                                "text": "param"
                            }
                        }
                    ]
                }
            ]
        },
        "groupedEnumerations": {},
        "groupedTypeAliases": {
            "src/app/core/utils/theme.utils.ts": [
                {
                    "name": "Theme",
                    "ctype": "miscellaneous",
                    "subtype": "typealias",
                    "rawtype": "\"light\" | \"dark\" | \"system\"",
                    "file": "src/app/core/utils/theme.utils.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "<p>Pure utility functions for theme operations.\nThese functions have no Angular dependencies and are easily testable.</p>\n",
                    "kind": 193
                }
            ],
            "src/app/core/services/theme.service.ts": [
                {
                    "name": "ThemeMode",
                    "ctype": "miscellaneous",
                    "subtype": "typealias",
                    "rawtype": "\"light\" | \"dark\" | \"system\"",
                    "file": "src/app/core/services/theme.service.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "kind": 193
                }
            ],
            "src/app/shared/components/theme-selector/theme-selector.component.ts": [
                {
                    "name": "ThemeMode",
                    "ctype": "miscellaneous",
                    "subtype": "typealias",
                    "rawtype": "\"light\" | \"dark\" | \"system\"",
                    "file": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                    "deprecated": false,
                    "deprecationMessage": "",
                    "description": "",
                    "kind": 193
                }
            ]
        }
    },
    "routes": {
        "name": "<root>",
        "kind": "module",
        "children": [
            {
                "name": "compare",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            },
            {
                "name": "settings",
                "kind": "route-path",
                "filename": "src/app/app.routes.ts"
            }
        ]
    },
    "coverage": {
        "count": 51,
        "status": "good",
        "files": [
            {
                "filePath": "src/app/app.config.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "appConfig",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/app.routes.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "routes",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/app.ts",
                "type": "component",
                "linktype": "component",
                "name": "AppComponent",
                "coveragePercent": 0,
                "coverageCount": "0/14",
                "status": "low"
            },
            {
                "filePath": "src/app/core/config/chat.config.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getFileTypeLabel",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/config/chat.config.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getMimeTypeIcon",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/config/chat.config.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "CHAT_CONFIG",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/services/auth.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "AuthService",
                "coveragePercent": 43,
                "coverageCount": "10/23",
                "status": "medium"
            },
            {
                "filePath": "src/app/core/services/auth.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "GoogleJwtPayload",
                "coveragePercent": 100,
                "coverageCount": "7/7",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/services/auth.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "GoogleUser",
                "coveragePercent": 0,
                "coverageCount": "0/7",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/auth.service.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "google",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/chat.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "ChatService",
                "coveragePercent": 3,
                "coverageCount": "1/28",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/chat.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ChatRequest",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/chat.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ChatResponse",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/chat.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "CompareRequest",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/chat.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "CompareResponse",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/chat.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Message",
                "coveragePercent": 0,
                "coverageCount": "0/7",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/chat.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "QueuedPrompt",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/content-safety.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "ContentSafetyService",
                "coveragePercent": 72,
                "coverageCount": "8/11",
                "status": "good"
            },
            {
                "filePath": "src/app/core/services/content-safety.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ContentCheckResult",
                "coveragePercent": 25,
                "coverageCount": "1/4",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/content-safety.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ToxicityPrediction",
                "coveragePercent": 33,
                "coverageCount": "1/3",
                "status": "medium"
            },
            {
                "filePath": "src/app/core/services/language.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "LanguageService",
                "coveragePercent": 84,
                "coverageCount": "11/13",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/services/language.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Language",
                "coveragePercent": 16,
                "coverageCount": "1/6",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/language.service.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "STORAGE_KEY",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/language.service.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "SUPPORTED_LANGUAGES",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/services/model.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "ModelService",
                "coveragePercent": 35,
                "coverageCount": "5/14",
                "status": "medium"
            },
            {
                "filePath": "src/app/core/services/model.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Model",
                "coveragePercent": 20,
                "coverageCount": "1/5",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/model.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Provider",
                "coveragePercent": 20,
                "coverageCount": "1/5",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/models.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "ModelsService",
                "coveragePercent": 27,
                "coverageCount": "6/22",
                "status": "medium"
            },
            {
                "filePath": "src/app/core/services/models.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ModelInfo",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/models.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ModelsResponse",
                "coveragePercent": 0,
                "coverageCount": "0/2",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/models.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ProviderInfo",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/models.service.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "DEFAULT_MODEL",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/models.service.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "DEFAULT_PROVIDERS",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/preferences.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "PreferencesService",
                "coveragePercent": 46,
                "coverageCount": "7/15",
                "status": "medium"
            },
            {
                "filePath": "src/app/core/services/preferences.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "UserPreferences",
                "coveragePercent": 100,
                "coverageCount": "8/8",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/services/preferences.service.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "MAX_RECENT_MODELS",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/preferences.service.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "STORAGE_KEY",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/rendering.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "RenderingService",
                "coveragePercent": 83,
                "coverageCount": "10/12",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/services/speech.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "SpeechService",
                "coveragePercent": 0,
                "coverageCount": "0/15",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/speech.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "SpeechRecognitionErrorEvent",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/speech.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "SpeechRecognitionEvent",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/speech.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "SpeechRecognitionInterface",
                "coveragePercent": 0,
                "coverageCount": "0/10",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/speech.service.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Window",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/core/services/theme.service.ts",
                "type": "injectable",
                "linktype": "injectable",
                "name": "ThemeService",
                "coveragePercent": 60,
                "coverageCount": "6/10",
                "status": "good"
            },
            {
                "filePath": "src/app/core/services/theme.service.ts",
                "type": "type alias",
                "linktype": "miscellaneous",
                "linksubtype": "typealias",
                "name": "ThemeMode",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "addToQueue",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "buildHistory",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "createAssistantMessage",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "createUserMessage",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "moveQueuedPromptDown",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "moveQueuedPromptUp",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "popFromQueue",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "removeFromQueue",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "updateQueuedPrompt",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/chat.utils.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "MAX_QUEUE_SIZE",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/markdown.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "addExternalLinkAttributes",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/markdown.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "escapeHtml",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/markdown.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "processMathSync",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/markdown.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "wrapInPre",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/markdown.utils.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "MATH_SUBSTITUTIONS",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ModelWithProvider",
                "coveragePercent": 33,
                "coverageCount": "1/3",
                "status": "medium"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "filterByCapability",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "filterByProvider",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "findModelById",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "flattenModels",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getDefaultModelId",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getProviderName",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "groupByProvider",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "hasCapability",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/model.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "searchModels",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "addRecentModel",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "clearPreferencesFromStorage",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getDefaultPreferences",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getPreferenceWithDefault",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "loadPreferencesFromStorage",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "savePreferencesToStorage",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "updatePreferences",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "MAX_RECENT_MODELS",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/preferences.utils.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "PREFERENCES_STORAGE_KEY",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "applyThemeToDocument",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getColorScheme",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "isDarkTheme",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "loadThemeFromStorage",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "saveThemeToStorage",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "toggleTheme",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "THEME_STORAGE_KEY",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/core/utils/theme.utils.ts",
                "type": "type alias",
                "linktype": "miscellaneous",
                "linksubtype": "typealias",
                "name": "Theme",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/features/chat/chat.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ChatComponent",
                "coveragePercent": 7,
                "coverageCount": "6/79",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ChatBoxComponent",
                "coveragePercent": 65,
                "coverageCount": "40/61",
                "status": "good"
            },
            {
                "filePath": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ChatSettings",
                "coveragePercent": 25,
                "coverageCount": "1/4",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "DEFAULT_GREETINGS",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/features/chat/components/chat-box/chat-box.component.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "DEFAULT_QUICK_ACTIONS",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ChatInputComponent",
                "coveragePercent": 50,
                "coverageCount": "22/44",
                "status": "medium"
            },
            {
                "filePath": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "AttachedFile",
                "coveragePercent": 0,
                "coverageCount": "0/6",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "SendEvent",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                "type": "function",
                "linktype": "miscellaneous",
                "linksubtype": "function",
                "name": "getMimeTypeIcon",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/features/chat/components/chat-input/chat-input.component.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "DEFAULT_CONFIG",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/features/chat/components/message-list/message-list.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "MessageListComponent",
                "coveragePercent": 70,
                "coverageCount": "12/17",
                "status": "good"
            },
            {
                "filePath": "src/app/features/chat/components/message-list/message-list.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Message",
                "coveragePercent": 14,
                "coverageCount": "1/7",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/model-selector/model-selector.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ModelSelectorComponent",
                "coveragePercent": 50,
                "coverageCount": "6/12",
                "status": "medium"
            },
            {
                "filePath": "src/app/features/chat/components/model-selector/model-selector.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Model",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/model-selector/model-selector.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Provider",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/prompt-queue/prompt-queue.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "PromptQueueComponent",
                "coveragePercent": 66,
                "coverageCount": "10/15",
                "status": "good"
            },
            {
                "filePath": "src/app/features/chat/components/prompt-queue/prompt-queue.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "QueueItem",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/welcome-screen/welcome-screen.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "WelcomeScreenComponent",
                "coveragePercent": 50,
                "coverageCount": "9/18",
                "status": "medium"
            },
            {
                "filePath": "src/app/features/chat/components/welcome-screen/welcome-screen.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Greeting",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/features/chat/components/welcome-screen/welcome-screen.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "QuickAction",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/app/features/compare/compare.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "CompareComponent",
                "coveragePercent": 0,
                "coverageCount": "0/11",
                "status": "low"
            },
            {
                "filePath": "src/app/features/settings/settings.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "SettingsComponent",
                "coveragePercent": 0,
                "coverageCount": "0/9",
                "status": "low"
            },
            {
                "filePath": "src/app/features/settings/settings.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ApiKeyInfo",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/features/settings/settings.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ConfigResponse",
                "coveragePercent": 0,
                "coverageCount": "0/3",
                "status": "low"
            },
            {
                "filePath": "src/app/shared/components/language-selector/language-selector.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "LanguageSelectorComponent",
                "coveragePercent": 50,
                "coverageCount": "6/12",
                "status": "medium"
            },
            {
                "filePath": "src/app/shared/components/language-selector/language-selector.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "Language",
                "coveragePercent": 16,
                "coverageCount": "1/6",
                "status": "low"
            },
            {
                "filePath": "src/app/shared/components/language-selector/language-selector.component.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "DEFAULT_LANGUAGES",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ThemeSelectorComponent",
                "coveragePercent": 90,
                "coverageCount": "9/10",
                "status": "very-good"
            },
            {
                "filePath": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "ThemeOption",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "THEME_OPTIONS",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/shared/components/theme-selector/theme-selector.component.ts",
                "type": "type alias",
                "linktype": "miscellaneous",
                "linksubtype": "typealias",
                "name": "ThemeMode",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/app/shared/error-details-dialog/error-details-dialog.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ErrorDetailsDialogComponent",
                "coveragePercent": 0,
                "coverageCount": "0/8",
                "status": "low"
            },
            {
                "filePath": "src/app/shared/pipes/safe-markdown.pipe.ts",
                "type": "pipe",
                "linktype": "pipe",
                "name": "SafeMarkdownPipe",
                "coveragePercent": 100,
                "coverageCount": "1/1",
                "status": "very-good"
            },
            {
                "filePath": "src/stories/button.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "ButtonComponent",
                "coveragePercent": 83,
                "coverageCount": "5/6",
                "status": "very-good"
            },
            {
                "filePath": "src/stories/header.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "HeaderComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/page.component.ts",
                "type": "component",
                "linktype": "component",
                "name": "PageComponent",
                "coveragePercent": 0,
                "coverageCount": "0/5",
                "status": "low"
            },
            {
                "filePath": "src/stories/user.ts",
                "type": "interface",
                "linktype": "interface",
                "name": "User",
                "coveragePercent": 0,
                "coverageCount": "0/2",
                "status": "low"
            },
            {
                "filePath": "src/test-setup.ts",
                "type": "class",
                "linktype": "classe",
                "name": "ResizeObserverMock",
                "coveragePercent": 0,
                "coverageCount": "0/4",
                "status": "low"
            },
            {
                "filePath": "src/test-setup.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "localStorageMock",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            },
            {
                "filePath": "src/test-setup.ts",
                "type": "variable",
                "linktype": "miscellaneous",
                "linksubtype": "variable",
                "name": "speechSynthesisMock",
                "coveragePercent": 0,
                "coverageCount": "0/1",
                "status": "low"
            }
        ]
    }
}